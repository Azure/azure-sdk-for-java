parameters:
  - name: serviceDirectory
    type: string
    default: ''
  - name: services
    type: string
    default: ''
  - name: packageVersions
    type: string
    default: '.*'
  - name: tests
    type: string
    default: '.*'
  - name: arguments
    type: string
    default: '.*' 
  - name: iterations
    type: number
    default: '5'
  - name: additionalArguments
    type: string
    default: ''
  - name: envVars
    type: object
    default: {}

extends:
  template: /eng/common/pipelines/templates/jobs/perf.yml
  parameters:
    variables:
      - template: /eng/pipelines/templates/variables/globals.yml
    language: Java
    installLanguageSteps:
      - task: JavaToolInstaller@0
        inputs:
          versionSpec: '8'
          jdkArchitectureOption: 'x64'
          jdkSourceOption: 'PreInstalled'
        displayName: Install Java 8
      - script: |
          java -version
          mvn --version
        displayName: Print Java Versions
    serviceDirectory: ${{ parameters.serviceDirectory }}
    services: ${{ parameters.services }}
    packageVersions: ${{ parameters.packageVersions }}
    tests: ${{ parameters.tests }}
    arguments: ${{ parameters.arguments }}
    iterations: ${{ parameters.iterations }}
    additionalArguments: ${{ parameters.additionalArguments }}
    envVars: ${{ parameters.envVars}}
