${{ if contains(variables['OSVmImage'], 'ubuntu') }}:
  steps:
  - pwsh: Invoke-WebRequest -Uri https://download.java.net/java/GA/jdk17/0d483333a00540d886896bac774ff48b/35/GPL/openjdk-17_linux-x64_bin.tar.gz -OutFile $(agent.tempDirectory)/openjdk-17_linux-x64_bin.tar.gz

  - task: JavaToolInstaller@0
    inputs:
      versionSpec: "17"
      jdkArchitectureOption: x64
      jdkSourceOption: LocalDirectory
      jdkFile: "$(agent.tempDirectory)/openjdk-17_linux-x64_bin.tar.gz"
      jdkDestinationDirectory: "$(agent.toolsDirectory)/jdk17"
      cleanDestinationDirectory: false

${{ elseif contains(variables['OSVmImage'], 'macOS') }}:
  steps:
  - pwsh: Invoke-WebRequest -Uri https://download.java.net/java/GA/jdk17/0d483333a00540d886896bac774ff48b/35/GPL/openjdk-17_macos-x64_bin.tar.gz  -OutFile $(agent.tempDirectory)/openjdk-17_macos-x64_bin.tar.gz

  - task: JavaToolInstaller@0
    inputs:
      versionSpec: "17"
      jdkArchitectureOption: x64
      jdkSourceOption: LocalDirectory
      jdkFile: "$(agent.tempDirectory)/openjdk-17_macos-x64_bin.tar.gz"
      jdkDestinationDirectory: "$(agent.toolsDirectory)/jdk17"
      cleanDestinationDirectory: false

${{ else }}:
  steps:
  - pwsh: Invoke-WebRequest -Uri https://download.java.net/java/GA/jdk17/0d483333a00540d886896bac774ff48b/35/GPL/openjdk-17_windows-x64_bin.zip -OutFile openjdk-17_windows-x64_bin.zip

  - task: JavaToolInstaller@0
    inputs:
      versionSpec: "17"
      jdkArchitectureOption: x64
      jdkSourceOption: LocalDirectory
      jdkFile: "$(agent.tempDirectory)/openjdk-17_windows-x64_bin.zip"
      jdkDestinationDirectory: "$(agent.toolsDirectory)/jdk17"
      cleanDestinationDirectory: false
