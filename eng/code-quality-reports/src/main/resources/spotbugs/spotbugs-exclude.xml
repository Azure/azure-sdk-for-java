<?xml version="1.0" encoding="UTF-8"?>

<FindBugsFilter xmlns="https://github.com/spotbugs/filter/3.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="https://github.com/spotbugs/filter/3.0.0 https://raw.githubusercontent.com/spotbugs/spotbugs/3.1.0/spotbugs/etc/findbugsfilter.xsd">
  <!-- Exclude the files generated by autorest for microsoft-azure-batch and its subpackages -->
  <Match>
    <Package name="~com\.microsoft\.azure\.batch(\..+)?"/>
  </Match>

  <!-- Cases where null arrays should return null instead of empty arrays -->
  <Match>
    <Or>
      <And>
        <Class name="com.microsoft.azure.servicebus.Utils"/>
        <Method name="getDataFromMessageBody"/>
      </And>
      <And>
        <Class name="com.azure.json.gson.GsonJsonReader"/>
        <Method name="getBinary"/>
      </And>
      <And>
        <Class name="com.azure.json.reflect.GsonJsonReader"/>
        <Method name="getBinary"/>
      </And>
      <And>
        <Class name="com.azure.json.reflect.JacksonJsonReader"/>
        <Method name="getBinary"/>
      </And>
    </Or>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>

  <!-- These autorest generated APIs for existing Azure SDK components supports Java 7. Suppressing error for using
  anonymous inner classes. -->
  <Match>
    <Class name="~com\.microsoft\.azure\.(.+)Impl"/>
    <Bug pattern="SIC_INNER_SHOULD_BE_STATIC_ANON"/>
  </Match>

  <!-- Known issue in autorest where it will generate a variable with a value of null.
  https://github.com/Azure/autorest.java/issues/324 -->
  <Match>
    <Or>
      <Class name="~com\.microsoft\.azure\.(.+)Impl"/>
      <Class name="~com\.azure\.(.+)Impl"/>
    </Or>
    <Bug pattern="NP_LOAD_OF_KNOWN_NULL_VALUE"/>
  </Match>

  <!-- Public field already exists in the public API surface area even though no writes were seen to this public field.
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/BatchOptions.java#L50
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/BatchOptions.java#L57 -->
  <Match>
    <Class name="com.microsoft.azure.eventhubs.BatchOptions"/>
    <Or>
      <Field name="maxMessageSize"/>
      <Field name="partitionKey"/>
    </Or>
    <Bug pattern="UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD"/>
  </Match>

  <!-- Public method already exists in the public API surface area even though it has confusing name.
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/MessageReceiver.java#L247
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/MessageReceiver.java#L251
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/MessagingFactory.java#L146 -->
  <Match>
    <Or>
      <Class name="com.microsoft.azure.eventhubs.impl.MessageReceiver"/>
      <Class name="com.microsoft.azure.eventhubs.impl.MessagingFactory"/>
    </Or>
    <Bug pattern="NM_CONFUSING"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/EventHubRuntimeInformation.java#L62 -->
  <Match>
    <Class name="com.microsoft.azure.eventhubs.EventHubRuntimeInformation"/>
    <Or>
      <Method name="getPartitionIds"/>
      <Method name="onConnectionInit"/>
    </Or>
    <Bug pattern="EI_EXPOSE_REP,EI_EXPOSE_REP2"/>
  </Match>

  <!-- EventHubRuntimeInformation is populated by the service. There is no user input. Copying partitionId contents is
    not necessary.
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/EventHubRuntimeInformation.java#L27 -->
  <Match>
    <Class name="com.microsoft.azure.eventhubs.EventHubRuntimeInformation"/>
    <Field name="partitionIds"/>
    <Bug pattern="EI_EXPOSE_REP2"/>
  </Match>

  <!-- Public field already exists in the public API surface area even though it should be final.
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/EventHubClientImpl.java#L41 -->
  <Match>
    <Class name="com.microsoft.azure.eventhubs.impl.EventHubClientImpl"/>
    <Field name="USER_AGENT"/>
    <Bug pattern="MS_SHOULD_BE_FINAL,UWF_NULL_FIELD"/>
  </Match>

  <!-- Values are initialized at runtime
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/EventHubClientImpl.java#L47 -->
  <Match>
    <Class name="com.microsoft.azure.eventhubs.impl.EventHubClientImpl"/>
    <Or>
      <Field name="sender"/>
      <Field name="timer"/>
      <Field name="underlyingFactory"/>
    </Or>
    <Bug pattern="UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/ReplayableWorkItem.java#L35 -->
  <Match>
    <Class name="com.microsoft.azure.eventhubs.impl.ReplayableWorkItem"/>
    <Field name="amqpMessage"/>
    <Bug pattern="EI_EXPOSE_REP"/>
  </Match>

  <!-- Return value is fine to not check, if add, it will be a redundant step
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/FaultTolerantObject.java#L80
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/FaultTolerantObject.java#L123 -->
  <Match>
    <Class name="~com\.microsoft\.azure\.eventhubs\.impl\.FaultTolerantObject(\$(1|2))?"/>
    <Method name="~(onEvent|runOnOpenedObject|close)"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_BAD_PRACTICE"/>
  </Match>

  <!-- Bytes array are designed to return null if it is null
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/EventDataImpl.java#L150
    https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/PartitionReceiverImpl.java#L278 -->
  <Match>
    <Class name="~com\.microsoft\.azure\.eventhubs\.impl\.(EventDataImpl|PartitionReceiverImpl)"/>
    <Method name="~(getBytes|getDesiredCapabilities)"/>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>

  <!-- EventHubClientImpl.USER_AGENT is public and can be set by consumers of the SDK to not be null.
  https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/eventhubs/microsoft-azure-eventhubs/src/main/java/com/microsoft/azure/eventhubs/impl/ConnectionHandler.java#L88 -->
  <Match>
    <Class name="com.microsoft.azure.eventhubs.impl.ConnectionHandler"/>
    <Method name="onConnectionInit"/>
    <Bug pattern="UWF_NULL_FIELD"/>
  </Match>

  <!-- Unchecked cast already exists as inner class of a public class but they are logically correct so it can be ignored.
    https://github.com/Azure/azure-sdk-for-java/blob/master/eventhubs/data-plane/azure-eventhubs-eph/src/main/java/com/microsoft/azure/eventprocessorhost/PartitionManager.java#L323 -->
  <Match>
    <Class name="com.microsoft.azure.eventprocessorhost.PartitionManager$FinalException"/>
    <Method name="getInner"/>
    <Bug pattern="BC_UNCONFIRMED_CAST_OF_RETURN_VALUE"/>
  </Match>

  <!-- Even though volatile reference to an array exists in protected API surface area changing it will cause another public API surface to change.
    https://github.com/Azure/azure-sdk-for-java/blob/master/eventhubs/data-plane/azure-eventhubs-eph/src/main/java/com/microsoft/azure/eventprocessorhost/PartitionManager.java#L29 -->
  <Match>
    <Class name="com.microsoft.azure.eventprocessorhost.PartitionManager"/>
    <Field name="partitionIds"/>
    <Bug pattern="VO_VOLATILE_REFERENCE_TO_ARRAY"/>
  </Match>

  <!-- Unchecked cast already exists in the public API surface area, they are logically right, so it can be ignored.
    At AzureStorageCheckpointLeaseManager.java:[line 180,430,446,542,574]
      https://github.com/Azure/azure-sdk-for-java/blob/master/eventhubs/data-plane/azure-eventhubs-eph/src/main/java/com/microsoft/azure/eventprocessorhost/AzureStorageCheckpointLeaseManager.java#L180
    At InMemoryLeaseManager.java:[line 148,155,209,241,268]
      https://github.com/Azure/azure-sdk-for-java/blob/master/eventhubs/data-plane/azure-eventhubs-eph/src/main/java/com/microsoft/azure/eventprocessorhost/InMemoryLeaseManager.java#L155 -->
  <Match>
    <Or>
      <Class name="com.microsoft.azure.eventprocessorhost.AzureStorageCheckpointLeaseManager"/>
      <Class name="com.microsoft.azure.eventprocessorhost.InMemoryLeaseManager"/>
    </Or>
    <Bug pattern="BC_UNCONFIRMED_CAST"/>
  </Match>

  <!-- Public inner class already exists in the public API surface area even though it should be static.
    At EventProcessorOptions.java:[lines 234-237]
      https://github.com/Azure/azure-sdk-for-java/blob/master/eventhubs/data-plane/azure-eventhubs-eph/src/main/java/com/microsoft/azure/eventprocessorhost/EventProcessorOptions.java#L234 -->
  <Match>
    <Or>
      <Class name="com.microsoft.azure.eventprocessorhost.EventProcessorOptions$EndOfStreamInitialPositionProvider"/>
      <Class name="com.microsoft.azure.eventprocessorhost.EventProcessorOptions$StartOfStreamInitialPositionProvider"/>
    </Or>
    <Bug pattern="SIC_INNER_SHOULD_BE_STATIC"/>
  </Match>

  <!-- EventProcessorHost and ExceptionReceivedEventArgs are shipped with method in its public surface area.
    https://github.com/Azure/azure-sdk-for-java/blob/master/eventhubs/data-plane/azure-eventhubs-eph/src/main/java/com/microsoft/azure/eventprocessorhost/EventProcessorHost.java#L346 -->
  <Match>
    <Class name="com.microsoft.azure.eventprocessorhost.EventProcessorHost"/>
    <Method name="getHostName"/>
    <Bug pattern="NM_CONFUSING"/>
  </Match>

  <!-- The public field already exists in the public API surface area -->
  <Match>
    <Class name="~com\.microsoft\.azure\.servicebus\.(TransactionContext|management\.ManagementClientConstants)"/>
    <Field name="~(MAX_DURATION|NULL_TXN)"/>
    <Bug pattern="MS_SHOULD_BE_FINAL"/>
  </Match>

  <!-- The two values can still change in the future. Change it will be a breaking code change.-->
  <Match>
    <Class name="com.microsoft.azure.servicebus.MessageReceiver"/>
    <Bug pattern="DB_DUPLICATE_BRANCHES"/>
  </Match>

  <!-- The return value is ignored for purpose -->
  <Match>
    <Class name="~com\.microsoft\.azure\.servicebus\.primitives\.(AsyncUtil|RequestResponseLink\$InternalReceiver)"/>
    <Method name="~(completeFuture|completeFutureExceptionally|run|onReceiveComplete)"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_BAD_PRACTICE"/>
  </Match>

  <!-- Unreachable Path -->
  <Match>
    <Class name="com.microsoft.azure.servicebus.primitives.RequestResponseLink$InternalSender"/>
    <Local name="encodedPair"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH_EXCEPTION"/>
  </Match>

  <!-- The casting is correct, it is beyond the SpotBugs's ability to determine the correctness -->
  <Match>
    <Class name="com.microsoft.azure.servicebus.primitives.RequestResponseUtils"/>
    <Method name="encodeRuleDescriptionToMap"/>
    <Bug pattern="BC_UNCONFIRMED_CAST_OF_RETURN_VALUE"/>
  </Match>

  <!-- Unstable implementation. It is in Service team's to-do-list -->
  <Match>
    <Class name="com.microsoft.azure.servicebus.primitives.CoreMessageReceiver"/>
    <Method name="onReceiveComplete"/>
    <Bug pattern="AT_OPERATION_SEQUENCE_ON_CONCURRENT_ABSTRACTION"/>
  </Match>

  <!-- Incorrect flagging, error will be thrown if value is null -->
  <Match>
    <Class name="com.azure.endtoend.identity.WebJobsIdentityTest"/>
    <Or>
      <Method name="testMSIEndpointWithSystemAssigned"/>
      <Method name="testMSIEndpointWithUserAssigned"/>
    </Or>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- It is fine to have un-used variables, unread fields, anonymous static inner classes in javadoc code samples. -->
  <Match>
    <Or>
      <Class name="~.*JavaDoc(CodeSnippets|CodeSamples|Samples)"/>
      <Class name="~.*ReadmeSamples"/>
    </Or>
    <Bug pattern="DLS_DEAD_LOCAL_STORE,
                  URF_UNREAD_FIELD,
                  SIC_INNER_SHOULD_BE_STATIC_ANON,
                  DLS_DEAD_LOCAL_STORE_SHADOWS_FIELD,
                  NP_NULL_PARAM_DEREF_ALL_TARGETS_DANGEROUS,
                  NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- Disable some spotbugs rules on perf-tests -->
  <Match>
    <Or>
      <Package name="com.azure.storage.blob.perf"/>
      <Package name="com.azure.storage.blob.perf.core"/>
      <Package name="com.azure.storage.file.datalake.perf"/>
      <Package name="com.azure.storage.file.datalake.perf.core"/>
      <Package name="com.azure.storage.file.share.perf"/>
      <Package name="com.azure.storage.file.share.perf.core"/>
    </Or>
    <Bug pattern="BC_UNCONFIRMED_CAST, DM_EXIT, RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE"/>
  </Match>

  <Match>
    <Package name="com.azure.sdk.template.perf"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
  </Match>

  <!-- StringUtils.strip can return NULL so the NULL check is required -->
  <Match>
    <Class name="com.azure.cosmos.implementation.PathsHelper"/>
    <Method name="parsePathSegments"/>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.implementation.encryption.AeadAes256CbcHmac256Algorithm"/>
    <Or>
      <Method name="decryptData"/>
      <Method name="encryptData"/>
    </Or>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.implementation.BaseAuthorizationTokenProvider"/>
    <Method name="reInitializeIfPossible"/>
    <Bug pattern="ES_COMPARING_STRINGS_WITH_EQ"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.implementation.encryption.SecurityUtility"/>
    <Method name="getSHA256Hash"/>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"/>
  </Match>

  <!-- Suppress false positive, there is no null in the flagged code -->
  <Match>
    <Class name="com.azure.cosmos.implementation.TestConfigurations"/>
    <Method name="loadFromPathIfExists"/>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE,REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- ClassLoader::getResourceAsStream can return null, ref: https://docs.oracle.com/javase/8/docs/technotes/guides/lang/resources.html -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.RntbdTransportClient$Options$Builder"/>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"/>
  </Match>

  <!-- Tracking work-item: https://github.com/Azure/azure-sdk-for-java/issues/9037 -->
  <!-- For ProactiveOpenConnectionsProcessor, it is okay to not synchronize the sink
       when subscribing to it -->
  <Match>
    <Or>
      <Class name="com.azure.cosmos.implementation.ClientSideRequestStatistics"/>
      <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.ProactiveOpenConnectionsProcessor"/>
      <Class name="com.azure.cosmos.models.CosmosItemResponse"/>
    </Or>
    <Bug pattern="IS2_INCONSISTENT_SYNC"/>
  </Match>

  <!-- The following two suggestion for _static_ inner class is suppressed,
       first method is 1 line and second one is ~4 lines, doesn't worth a dedicated class.
    -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.LocationCache"/>
    <Method name="markEndpointUnavailable"/>
    <Bug pattern="SIC_INNER_SHOULD_BE_STATIC_ANON"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.implementation.DatabaseAccount"/>
    <Method name="getQueryEngineConfiguration"/>
    <Bug pattern="SIC_INNER_SHOULD_BE_STATIC_ANON"/>
  </Match>

  <!-- This code smells, created an issue: https://github.com/Azure/azure-sdk-for-java/issues/9039 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.GoneAndRetryWithRetryPolicy"/>
    <Method name="shouldRetry"/>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.encryption.KeyVaultAccessClient"/>
    <Or>
      <Method name="unwrapKeyAsync"/>
      <Method name="wrapKeyAsync"/>
    </Or>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.encryption.AzureKeyVaultKeyWrapProvider"/>
    <Or>
      <Method name="unwrapKey"/>
      <Method name="wrapKey"/>
    </Or>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- DB is retrieved synchronously (Flux::block()) after creating it, so no chance of null  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.DatabaseForTest"/>
    <Method name="create"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- Issue: https://github.com/Azure/azure-sdk-for-java/issues/9041 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxGatewayStoreModel"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH"/>
  </Match>

  <!-- The in-memory map is not serializable, given value is of type IServerIdentity which is not serializable -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.InMemoryCollectionRoutingMap$MinPartitionKeyPairComparator"/>
    <Bug pattern="SE_COMPARATOR_SHOULD_BE_SERIALIZABLE"/>
  </Match>

  <!-- The following 3 suppression are valid, the types uses default value if parse fails  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.Configs"/>
    <Method name="getIntValue"/>
    <Bug pattern="DM_BOXED_PRIMITIVE_FOR_PARSING"/>
  </Match>

  <Match>
    <Or>
      <Class name="com.azure.cosmos.implementation.Integers"/>
      <Class name="com.azure.cosmos.implementation.Longs"/>
    </Or>
    <Method name="tryParse"/>
    <Bug pattern="DM_BOXED_PRIMITIVE_FOR_PARSING"/>
  </Match>

  <!-- Issue: https://github.com/Azure/azure-sdk-for-java/issues/9048 -->
  <Match>
    <Class name="com.azure.cosmos.models.ModelBridgeInternal"/>
    <Method name="toDatabaseAccount"/>
    <Bug pattern="DM_BOXED_PRIMITIVE_FOR_PARSING"/>
  </Match>


  <!-- Extra null check is for assertion -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.AddressResolver"/>
    <Method name="~(.*)\$(resolveAddressesAndIdentityAsync|null)\$(.*)"/>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE"/>
  </Match>

  <!-- Issue: https://github.com/Azure/azure-sdk-for-java/issues/9050 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdClientChannelPool"/>
    <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE"/>
  </Match>

  <!-- Fallthrough is by design -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.MurmurHash3_32"/>
    <Method name="hash"/>
    <Bug pattern="SF_SWITCH_FALLTHROUGH"/>
  </Match>

  <!-- Suppress URF_UNREAD_FIELD, the fields are read but during serialization -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ClientSideRequestStatistics$AddressResolutionStatistics"/>
    <Or>
      <Field name="endTimeUTC"/>
      <Field name="startTimeUTC"/>
      <Field name="targetEndpoint"/>
      <Field name="errorMessage"/>
      <Field name="inflightRequest"/>
    </Or>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- Suppress URF_UNREAD_FIELD, the fields are read but during serialization -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ClientSideRequestStatistics$StoreResponseStatistics"/>
    <Or>
      <Field name="requestResourceType"/>
      <Field name="requestResponseTimeUTC"/>
      <Field name="storeResult"/>
      <Field name="e2ePolicyCfg"/>
      <Field name="excludedRegions"/>
    </Or>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- Suppress URF_UNREAD_FIELD, the field is read but during serialization -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RequestTimeline$Event"/>
    <Field name="durationInMilliSecs"/>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- The entire class is unused. Bug: https://github.com/Azure/azure-sdk-for-java/issues/9075 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.changefeed.implementation.RemainingWorkEstimatorImpl"/>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- serviceConfigReader, gatewayAddressCache, addressResolver types are not used, but comment seems this is being used in future updates -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.GlobalAddressResolver"/>
    <Or>
      <Field name="serviceConfigReader"/>
      <Field name="gatewayAddressCache"/>
      <Field name="addressResolver"/>
    </Or>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9076 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.StoreClientFactory"/>
    <Or>
      <Field name="maxConcurrentConnectionOpenRequests"/>
      <Field name="requestTimeout"/>
      <Field name="enableTransportClientSharing"/>
      <Field name="clientTelemetry"/>
    </Or>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- Suppress URF_UNREAD_FIELD, the field is read but during serialization -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdResponseHeaders"/>
    <Or>
      <Field name="indexTermsGenerated"/>
      <Field name="queriesPerformed"/>
      <Field name="readsPerformed"/>
      <Field name="scriptsExecuted"/>
      <Field name="writesPerformed"/>
    </Or>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- This field is set to false as of today, looks like the field it left for future enhancement -->
  <Match>
    <Class name="com.azure.cosmos.implementation.query.DefaultDocumentQueryExecutionContext"/>
    <Field name="isContinuationExpected"/>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9077 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.query.PipelinedDocumentQueryExecutionContext"/>
    <Field name="correlatedActivityId"/>
    <Bug pattern="URF_UNREAD_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9078 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.MurmurHash3_32"/>
    <Method name="hash"/>
    <Bug pattern="SF_SWITCH_NO_DEFAULT"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9082 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.changefeed.ServiceItemLease"/>
    <Or>
      <Field name="ContinuationToken"/>
      <Field name="LeaseToken"/>
      <Field name="Owner"/>
    </Or>
    <Bug pattern="NM_FIELD_NAMING_CONVENTION"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9082 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.LocationCache$LocationUnavailabilityInfo"/>
    <Or>
      <Field name="LastUnavailabilityCheckTimeStamp"/>
      <Field name="UnavailableOperations"/>
    </Or>
    <Bug pattern="NM_FIELD_NAMING_CONVENTION"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9082 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentServiceRequest"/>
    <Field name="UseGatewayMode"/>
    <Bug pattern="NM_FIELD_NAMING_CONVENTION"/>
  </Match>

  <!-- The static field sharedGatewayHttpClient is cleared using synchronized ref count mechanism -->
  <Match>
    <Class name="com.azure.cosmos.implementation.http.SharedGatewayHttpClient"/>
    <Field name="sharedGatewayHttpClient"/>
    <Bug pattern="ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9054 -->
  <Match>
    <Class name="com.azure.cosmos.models.CosmosItemResponse"/>
    <Field name="item"/>
    <Bug pattern="DC_DOUBLECHECK"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9088 -->
  <Match>
    <Class name="com.azure.cosmos.CosmosException"/>
    <Or>
      <Field name="cosmosError"/>
      <Field name="cosmosDiagnostics"/>
      <Field name="requestTimeline"/>
      <Field name="requestUri"/>
      <Field name="channelAcquisitionTimeline"/>
    </Or>
    <Bug pattern="SE_BAD_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9088 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdContextException"/>
    <Or>
      <Field name="cosmosError"/>
      <Field name="status"/>
    </Or>
    <Bug pattern="SE_BAD_FIELD"/>
  </Match>

  <!-- Exception is required to catch, ref: code comment in the OrderbyRowComparer::compare() method  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.query.orderbyquery.OrderbyRowComparer"/>
    <Method name="compare"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- Exception is required to handle null location names, malformed endpoint, ref: code comment  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.LocationCache"/>
    <Method name="getEndpointByLocation"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- Code has a TODO to handle Exception case  -->
  <Match>
    <Class name="~com\.azure\.cosmos\.implementation\.directconnectivity\.StoreReader(.*)"/>
    <Method name="~(.*)\$(readFromReplicas|null)\$(.*)"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- Exception is required to handle when parsing system information  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ClientSideRequestStatistics$ClientSideRequestStatisticsSerializer"/>
    <Method name="serialize"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- Exception is required to handle when getting java version  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.Utils"/>
    <Method name="getJavaVersion"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- Exception is required to handle and fallback to default pair  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ResourceId"/>
    <Method name="tryParse"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- This is a false positive. Exception is getting caught in init method-->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentClientImpl"/>
    <Method name="init"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.encryption.EncryptionCosmosAsyncContainer"/>
    <Method name="decryptResponseAsync"/>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9089 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.PathsHelper"/>
    <Method name="getResourcePathArray"/>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9089 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentServiceRequest"/>
    <Method name="toByteArray"/>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9089 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.Utils"/>
    <Method name="getUTF8BytesOrNull"/>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9089 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdResponse"/>
    <Method name="toByteArray"/>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9090 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.ServiceConfig"/>
    <Or>
      <Field name="systemReplicationPolicy"/>
      <Field name="userReplicationPolicy"/>
    </Or>
    <Bug pattern="URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9090 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.query.ParallelDocumentQueryExecutionContextBase"/>
    <Or>
      <Field name="pageSize"/>
      <Field name="partitionKeyRanges"/>
    </Or>
    <Bug pattern="URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9090 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.QueryMetrics"/>
    <Field name="ZERO"/>
    <Bug pattern="URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD"/>
  </Match>

  <!--  ChannelHandlerContext::fireUserEventTriggered is fluent method and return ref can be ignored -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdContextDecoder"/>
    <Method name="decode"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
  </Match>

  <!--  ChannelHandlerContext::channelRead is fluent method and return ref can be ignored -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdContextRequestDecoder"/>
    <Method name="channelRead"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
  </Match>

  <!--  ChannelHandlerContext methods are fluent method and return ref can be ignored -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdRequestManager"/>
    <Or>
      <Method name="channelActive"/>
      <Method name="channelInactive"/>
      <Method name="channelReadComplete"/>
      <Method name="channelRegistered"/>
      <Method name="channelUnregistered"/>
      <Method name="channelWritabilityChanged"/>
      <Method name="flush"/>
      <Method name="read"/>
      <Method name="removeContextNegotiatorAndFlushPendingWrites"/>
      <Method name="userEventTriggered"/>
    </Or>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
  </Match>

  <!--  ChannelHandlerContext::fireChannelRead is fluent method and return ref can be ignored -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdRequestDecoder"/>
    <Method name="channelRead"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
  </Match>

  <!--  ChannelHandlerContext::fireUserEventTriggered is fluent method and return ref can be ignored -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdClientChannelPool"/>
    <Method name="injectConnectionErrorsInternal"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
  </Match>

  <!-- CompletableFuture.getNow(null) is valid (null param), suppressing false positive
        https://github.com/spotbugs/spotbugs/issues/1001 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdRequestManager"/>
    <Or>
      <Method name="hasRequestedRntbdContext"/>
      <Method name="hasRntbdContext"/>
      <Method name="messageReceived"/>
      <Method name="rntbdContext"/>
    </Or>
    <Bug pattern="NP_NONNULL_PARAM_VIOLATION"/>
  </Match>

  <!-- Exception is needed to catch a SslException masked as a RuntimeException by Netty -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdRequestManager"/>
    <Method name="close"/>
    <Bug pattern="BC_IMPOSSIBLE_INSTANCEOF"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.PathsHelper"/>
    <Method name="tryParsePathSegments"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE_OF_NULL"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.implementation.encryption.AeadAes256CbcHmac256Algorithm"/>
    <Method name="encryptData"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.QueryMetrics"/>
    <Method name="createFromDelimitedString"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ReplicationPolicy"/>
    <Method name="setMaxReplicaSetSize"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ResourceThrottleRetryPolicy"/>
    <Method name="shouldRetry"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ResourceTokenAuthorizationHelper"/>
    <Method name="getAuthorizationTokenUsingResourceTokens"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.GoneAndRetryWithRetryPolicy"/>
    <Method name="shouldRetry"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.StoreReader"/>
    <Method name="readFromStoreAsync"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.LocationCache"/>
    <Method name="anyEndpointsAvailable"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9093 -->
  <Match>
    <Class name="com.azure.cosmos.models.JsonSerializable"/>
    <Method name="getObjectByPath"/>
    <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9094 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.caches.AsyncCache"/>
    <Method name="getAsync"/>
    <Bug pattern="NP_LOAD_OF_KNOWN_NULL_VALUE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9050 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.rntbd.RntbdClientChannelPool"/>
    <Bug pattern="NP_LOAD_OF_KNOWN_NULL_VALUE"/>
  </Match>

  <!-- The static field sharedTransportClient is cleared using synchronized ref count mechanism -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.SharedTransportClient"/>
    <Field name="sharedTransportClient"/>
    <Bug pattern="ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9095 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentServiceRequest"/>
    <Field name="resourceFullName"/>
    <Bug pattern="UUF_UNUSED_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9095 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.AddressResolver$RefreshState"/>
    <Field name="resolutionResult"/>
    <Bug pattern="UUF_UNUSED_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9095 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.GlobalAddressResolver"/>
    <Or>
      <Field name="addressResolver"/>
      <Field name="gatewayAddressCache"/>
    </Or>
    <Bug pattern="UUF_UNUSED_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9096 -->
  <Match>
    <Class name="com.azure.cosmos.models.SqlParameterList"/>
    <Method name="listIterator"/>
    <Bug pattern="IL_INFINITE_RECURSIVE_LOOP"/>
  </Match>

  <!-- False positive, IPartitionKeyComponent does not extend from Comparable -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.IPartitionKeyComponent"/>
    <Bug pattern="CO_ABSTRACT_SELF"/>
  </Match>

  <!--Bug: https://github.com/Azure/azure-sdk-for-java/issues/9097 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.ConsistencyReader"/>
    <Method name="readAsync"/>
    <Bug pattern="DB_DUPLICATE_SWITCH_CLAUSES"/>
  </Match>

  <!--Bug: https://github.com/Azure/azure-sdk-for-java/issues/9097 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.HttpTransportClient"/>
    <Method name="prepareHttpMessage"/>
    <Bug pattern="DB_DUPLICATE_SWITCH_CLAUSES"/>
  </Match>

  <!-- Field is not initialized in Ctr but is set using setters -->
  <Match>
    <Class name="com.azure.cosmos.implementation.changefeed.ProcessorSettings"/>
    <Field name="maxItemCount"/>
    <Bug pattern="UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR"/>
  </Match>


  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9098 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.AddressResolver"/>
    <Method name="~(.*)\$(resolveAddressesAndIdentityAsync|null)\$(.*)"/>
    <Bug pattern="ES_COMPARING_STRINGS_WITH_EQ"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9099 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentServiceRequest"/>
    <Field name="entityId"/>
    <Bug pattern="UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9100 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.caches.RxPartitionKeyRangeCache"/>
    <Method name="~(.*)\$(tryGetRangeByPartitionKeyRangeId|null)\$(.*)"/>
    <Bug pattern="NP_NULL_PARAM_DEREF"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9100 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.GatewayAddressCache"/>
    <Method name="getServerAddressesViaGatewayInternalAsync"/>
    <Bug pattern="NP_NULL_PARAM_DEREF"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentServiceRequest"/>
    <Method name="getContentAsByteArray"/>
    <Bug pattern="EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.StoreResponse"/>
    <Or>
      <Method name="getResponseBody"/>
      <Method name="getResponseHeaderNames"/>
      <Method name="getResponseHeaderValues"/>
    </Or>
    <Bug pattern="EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.encryption.EncryptionKeyUnwrapResult"/>
    <Or>
      <Method name="getDataEncryptionKey"/>
      <Method name="getWrappedDataEncryptionKey"/>
    </Or>
    <Method name="getDataEncryptionKey"/>
    <Bug pattern="EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.encryption.DecryptionResult"/>
    <Method name="getEncryptedContent"/>
    <Bug pattern="EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.encryption.EncryptionProperties"/>
    <Method name="getEncryptedData"/>
    <Bug pattern="EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.encryption.EncryptionProperties"/>
    <Method name="&lt;init&gt;"/>
    <Bug pattern="EI_EXPOSE_REP2"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.encryption.EncryptionKeyUnwrapResult"/>
    <Method name="&lt;init&gt;"/>
    <Bug pattern="EI_EXPOSE_REP2"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.StoreResponse"/>
    <Method name="&lt;init&gt;"/>
    <Bug pattern="EI_EXPOSE_REP2"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.encryption.EncryptionKeyWrapResult"/>
    <Method name="getWrappedDataEncryptionKey"/>
    <Bug pattern="EI_EXPOSE_REP2,EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.encryption.EncryptionKeyWrapResult"/>
    <Method name="getEncryptionKeyWrapMetadata"/>
    <Bug pattern="EI_EXPOSE_REP2,EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.encryption.EncryptionKeyWrapResult"/>
    <Method name="&lt;init&gt;"/>
    <Bug pattern="EI_EXPOSE_REP2"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentServiceRequest"/>
    <Method name="setContentBytes"/>
    <Bug pattern="EI_EXPOSE_REP2"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ClientEncryptionKey"/>
    <Method name="getWrappedDataEncryptionKey"/>
    <Bug pattern="EI_EXPOSE_REP"/>
  </Match>

  <!-- Returning a new copy of the object is not necessary -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ClientEncryptionKey"/>
    <Method name="setWrappedDataEncryptionKey"/>
    <Bug pattern="EI_EXPOSE_REP2"/>
  </Match>

  <!-- https://github.com/Azure/azure-sdk-for-java/issues/9102 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ItemOperations"/>
    <Method name="readManyAsync"/>
    <Bug pattern="UC_USELESS_OBJECT"/>
  </Match>

  <!-- https://github.com/Azure/azure-sdk-for-java/issues/9102 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentClientImpl"/>
    <Method name="~(.*)\$(readMany|null)\$(.*)"/>
    <Bug pattern="UC_USELESS_OBJECT"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9103 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.ServiceConfig"/>
    <Method name="&lt;init&gt;"/>
    <Bug pattern="ISC_INSTANTIATE_STATIC_CLASS"/>
  </Match>

  <!-- Super doesn't need to be cloned since it is Object -->
  <Match>
    <Class name="com.azure.cosmos.implementation.DocumentServiceRequestContext"/>
    <Bug pattern="CN_IDIOM_NO_SUPER_CALL"/>
  </Match>

  <!-- Super doesn't need to be cloned since it is Object -->
  <Match>
    <Class name="com.azure.cosmos.implementation.RxDocumentServiceRequest"/>
    <Bug pattern="CN_IDIOM_NO_SUPER_CALL"/>
  </Match>

  <!-- Exception is ignored by design which indicate that error while evaluating system information -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ClientSideRequestStatistics$ClientSideRequestStatisticsSerializer"/>
    <Method name="serialize"/>
    <Bug pattern="DE_MIGHT_IGNORE"/>
  </Match>

  <!-- Exception in AutoCloseable.close is ignored -->
  <Match>
    <Class name="com.azure.cosmos.implementation.TracerProvider"/>
    <Method name="subscribe"/>
    <Bug pattern="DE_MIGHT_IGNORE"/>
  </Match>

  <!-- Exception is ignored by design which indicate that non-parsable id -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ResourceId"/>
    <Method name="verify"/>
    <Bug pattern="DE_MIGHT_IGNORE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9104 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.StringPartitionKeyComponent"/>
    <Method name="writeForBinaryEncoding"/>
    <Bug pattern="INT_BAD_COMPARISON_WITH_SIGNED_BYTE"/>
  </Match>

  <!-- The Bug was reported because StringPartitionKeyComponent's hashCode() implementation is
        based only on the hashCode() method of it's member variable 'value'.
        This is valid since the StringPartitionKeyComponent has only one member variable so
        delegating to that member variable's hashCode is fine -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.StringPartitionKeyComponent"/>
    <Bug pattern="HE_HASHCODE_USE_OBJECT_EQUALS"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9046 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ResourceId"/>
    <Method name="equals"/>
    <Bug pattern="HE_EQUALS_USE_HASHCODE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9105 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.ResourceId"/>
    <Method name="tryParse"/>
    <Bug pattern="BIT_SIGNED_CHECK"/>
  </Match>


  <!-- False positive, equals method is implemented correctly by using equality of member variables  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.VectorSessionToken"/>
    <Method name="equals"/>
    <Bug pattern="EQ_UNUSUAL"/>
  </Match>

  <!-- False positive, equals method is implemented correctly by using equality of member variables  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.PartitionKeyInternal"/>
    <Method name="equals"/>
    <Bug pattern="EQ_UNUSUAL"/>
  </Match>

  <!-- False positive, equals method is implemented correctly by using equality of member variables  -->
  <Match>
    <Class name="com.azure.cosmos.implementation.clienttelemetry.ReportPayload"/>
    <Method name="equals"/>
    <Bug pattern="EQ_UNUSUAL"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9106 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.PathsHelper"/>
    <Method name="generatePathForNameBased"/>
    <Bug pattern="BC_VACUOUS_INSTANCEOF,SIO_SUPERFLUOUS_INSTANCEOF"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9107 -->
  <Match>
    <Class name="com.azure.cosmos.ConnectionPolicy"/>
    <Field name="defaultPolicy"/>
    <Bug pattern="LI_LAZY_INIT_STATIC"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9109 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.query.orderbyquery.OrderbyRowComparer"/>
    <Method name="compare"/>
    <Bug pattern="RV_NEGATING_RESULT_OF_COMPARETO"/>
  </Match>


  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9110 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.directconnectivity.Address"/>
    <Method name="isPrimary"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9110 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.query.OrderByContinuationToken"/>
    <Method name="getInclusive"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9110 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.query.QueryInfo"/>
    <Method name="hasSelectValue"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/9110 -->
  <Match>
    <Class name="com.azure.cosmos.implementation.routing.Range"/>
    <Or>
      <Method name="isMaxInclusive"/>
      <Method name="isMinInclusive"/>
    </Or>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.implementation.encryption.CosmosDataEncryptionKeyProvider"/>
    <Method name="initialize"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.implementation.routing.UInt128"/>
    <Method name="compareTo"/>
    <Bug pattern="SA_FIELD_SELF_COMPARISON"/>
  </Match>

  <Match>
    <Class name="com.azure.cosmos.encryption.implementation.EncryptionProcessor"/>
    <Or>
      <Method name="decryptAndSerializeProperty"/>
      <Method name="encryptAndSerializeProperty"/>
    </Or>
    <Bug pattern="BC_UNCONFIRMED_CAST"/>
  </Match>

  <!-- Exclude spotbug from non-shipping modules -->
  <Match>
    <Or>
      <Package name="com.azure.cosmos.benchmark"/>
      <Package name="com.azure.cosmos.examples"/>
      <Package name="com.azure.cosmos.examples.ChangeFeed"/>
      <Package name="com.azure.cosmos.rx.examples.multimaster"/>
      <Package name="com.azure.cosmos.rx.examples.multimaster.samples"/>
    </Or>
  </Match>

  <!-- Exclude vendor-ed apache-commons types from spotbug -->
  <Match>
    <Class name="~com\.azure\.cosmos\.implementation\.apachecommons(.+)"/>
  </Match>

  <!-- Exclude vendor-ed guava25 types from spotbug -->
  <Match>
    <Class name="~com\.azure\.cosmos\.implementation\.guava25(.+)"/>
  </Match>

  <!-- Exclude AAP source code types from spotbug -->
  <Match>
    <Class name="~com\.azure\.cosmos\.encryption\.implementation\.mdesrc(.+)"/>
  </Match>

  <!-- Exclude vendor-ed com.fasterxml.uuid:java-uuid-generator types from spotbug -->
  <Match>
    <Class name="~com\.azure\.cosmos\.implementation\.uuid(.+)"/>
  </Match>

  <Match>
    <Or>
      <Class name="~com.azure.cosmos.implementation.ImplementationBridgeHelpers(\$.*)?"/>
      <Class name="~com.azure.cosmos.implementation.DiagnosticsProvider(\$.*)?"/>
      <Class name="~com.azure.cosmos.test.implementation.ImplementationBridgeHelpers(\$.*)?"/>
    </Or>
    <Bug pattern="DM_EXIT"/>
  </Match>

  <!-- Exclude REC_CATCH_EXCEPTION and false positive error for management samples. All samples in management catch Exception instead of throw it. -->
  <Match>
    <Package name="~com\.azure\.resourcemanager(\.[^.]+)*\.samples(\.[^.]+)*"/>
    <Bug pattern="REC_CATCH_EXCEPTION,
                  RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE,
                  RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"/>
  </Match>

  <!-- Exclude BC_UNCONFIRMED_CAST_OF_RETURN_VALUE as false positive -->
  <Match>
    <Or>
      <Class name="com.azure.resourcemanager.resources.fluentcore.dag.TaskGroup"/>
      <Class name="com.azure.resourcemanager.resources.fluentcore.dag.TaskGroup$ProxyTaskGroupWrapper"/>
    </Or>
    <Bug pattern="BC_UNCONFIRMED_CAST_OF_RETURN_VALUE"/>
  </Match>

  <!-- Exclude NM_CLASS_NOT_EXCEPTION for all resource manager due to it is just naming -->
  <Match>
    <Class name="~com\.azure\.resourcemanager(\.[^.]+)*"/>
    <Bug pattern="NM_CLASS_NOT_EXCEPTION"/>
  </Match>

  <!-- Exclude for Resource Manager generated code -->
  <!-- NP_LOAD_OF_KNOWN_NULL_VALUE - Known issue in autorest of setting parameters when calling REST API -->
  <!-- SIC_INNER_SHOULD_BE_STATIC_ANON - Known issue in autorest of inner Enumeration for InputStream response -->
  <!-- UPM_UNCALLED_PRIVATE_METHOD - Known issue in autorest to generate method that might not be called -->
  <!-- SKIPPED_CLASS_TOO_BIG - Nothing we can do about this -->
  <!-- PZLA_PREFER_ZERO_LENGTH_ARRAYS - byte array will return null by generator -->
  <Match>
    <Or>
      <Class name="~com\.azure\.resourcemanager(\.[^.]+)*\.fluent\.([^.]+)Client"/>
      <Class name="~com\.azure\.resourcemanager(\.[^.]+)*\.implementation\.([^.]+)ClientImpl"/>
    </Or>
    <Bug pattern="NP_LOAD_OF_KNOWN_NULL_VALUE,SKIPPED_CLASS_TOO_BIG,UPM_UNCALLED_PRIVATE_METHOD"/>
  </Match>
  <Match>
    <Class name="~com\.azure\.resourcemanager(\.[^.]+)*\.fluent(\.[^.]+)*"/>
    <Bug pattern="PZLA_PREFER_ZERO_LENGTH_ARRAYS"/>
  </Match>
  <Match>
    <Class name="~com\.azure\.resourcemanager(\.[^.]+)*\.implementation\.([^.]+)ClientImpl([^.]*)"/>
    <Bug pattern="SIC_INNER_SHOULD_BE_STATIC_ANON"/>
  </Match>
  <Match>
    <And>
      <Class name="~com\.azure\.resourcemanager(\.[^.]+)*\.implementation\.([^.]+)Impl"/>
      <Or>
        <Method name="manager"/>
        <Method name="serviceClient"/>
      </Or>
    </And>
    <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
  </Match>

  <!-- Exception needs to be caught here.-->
  <Match>
    <Class name="com.azure.spring.cloud.config.AppConfigurationPropertySourceLocator"/>
    <Bug pattern="REC_CATCH_EXCEPTION"/>
  </Match>

  <!-- Exclude from spring related classes -->
  <Match>
    <And>
      <Or>
        <Class name="com.azure.spring.cloud.core.implementation.credential.resolver.AzureKeyCredentialResolver"/>
        <Class name="com.azure.spring.cloud.core.implementation.credential.resolver.AzureNamedKeyCredentialResolver"/>
        <Class name="com.azure.spring.cloud.core.implementation.credential.resolver.AzureSasCredentialResolver"/>
        <Class name="com.azure.spring.cloud.service.implementation.storage.credential.StorageSharedKeyCredentialResolver"/>
      </Or>
      <Method name="resolve"/>
    </And>
    <Bug pattern="BC_UNCONFIRMED_CAST"/>
  </Match>

  <!-- This match should be removed after fixing https://github.com/Azure/azure-sdk-for-java/issues/26356 -->
  <Match>
    <Class name="com.azure.spring.cloud.autoconfigure.implementation.keyvault.environment.KeyVaultOperation"/>
    <Field name="timer"/>
    <Bug pattern="ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD"/>
  </Match>

  <Match>
    <Class name="com.azure.spring.cloud.autoconfigure.implementation.context.AzureTokenCredentialAutoConfiguration$AzureServiceClientBuilderFactoryPostProcessor"/>
    <Field name="beanFactory"/>
    <Bug pattern="UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR"/>
  </Match>

  <Match>
    <Class name="com.azure.spring.messaging.config.AzureListenerEndpointRegistrar"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH"/>
  </Match>

  <!-- Incorrect flagging, already checked by if-else -->
  <Match>
    <Class name="com.azure.spring.cloud.autoconfigure.implementation.redis.AzureRedisAutoConfiguration"/>
    <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
  </Match>

  <!-- Incorrect flagging, already checked by if-else -->
  <Match>
    <Class name="com.azure.spring.cloud.autoconfigure.implementation.redis.AzureRedisAutoConfiguration"/>
    <Bug pattern="NP_NULL_PARAM_DEREF"/>
  </Match>

  <!--  This method is made synchronous by blocking and waiting for a result. They do not return
  anything, so it can be ignored. -->
  <Match>
    <Class name="com.microsoft.azure.eventgrid.implementation.EventGridClientImpl"/>
    <Method name="publishEvents"/>
    <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
  </Match>

  <!-- This is a false positive. The type of TOptions is known because it is set
       in the constructor of the concrete class. -->
  <Match>
    <Class name="~com\.azure\.messaging\.eventhubs\.perf\.[\w]+Test"/>
    <Bug pattern="BC_UNCONFIRMED_CAST"/>
  </Match>

  <!-- Non Shipped code -->
  <Match>
    <Package name="~com\.azure\.(jedis|lettuce|redisson).*"/>
    <Bug pattern="UL_UNRELEASED_LOCK_EXCEPTION_PATH,
                  NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE,
                  BC_UNCONFIRMED_CAST_OF_RETURN_VALUE,
                  UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR,
                  UPM_UNCALLED_PRIVATE_METHOD,
                  DLS_DEAD_LOCAL_STORE,
                  DM_STRING_TOSTRING"/>
  </Match>

  <!-- Build tool suppressions -->
  <Match>
    <Class name="com.azure.sdk.build.tool.ReportGenerator"/>
    <Bug pattern="DM_DEFAULT_ENCODING"/>
  </Match>
  <Match>
    <Class name="com.azure.sdk.build.tool.mojo.AzureSdkMojo"/>
    <Field name="mojo"/>
    <Bug pattern="ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD"/>
  </Match>

  <Match>
    <Class name="com.azure.sdk.build.tool.util.logging.ConsoleLogger"/>
    <Field name="instance"/>
    <Bug pattern="LI_LAZY_INIT_STATIC"/>
  </Match>
  <Match>
    <Class name="com.azure.sdk.build.tool.util.logging.MojoLogger"/>
    <Field name="instance"/>
    <Bug pattern="LI_LAZY_INIT_STATIC"/>
  </Match>
</FindBugsFilter>
