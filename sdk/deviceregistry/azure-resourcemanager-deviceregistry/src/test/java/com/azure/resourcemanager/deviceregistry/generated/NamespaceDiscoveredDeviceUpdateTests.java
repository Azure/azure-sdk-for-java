// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.deviceregistry.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.deviceregistry.models.AuthenticationMethod;
import com.azure.resourcemanager.deviceregistry.models.DeviceMessagingEndpoint;
import com.azure.resourcemanager.deviceregistry.models.DiscoveredInboundEndpoints;
import com.azure.resourcemanager.deviceregistry.models.DiscoveredMessagingEndpoints;
import com.azure.resourcemanager.deviceregistry.models.DiscoveredOutboundEndpoints;
import com.azure.resourcemanager.deviceregistry.models.NamespaceDiscoveredDeviceUpdate;
import com.azure.resourcemanager.deviceregistry.models.NamespaceDiscoveredDeviceUpdateProperties;
import java.time.OffsetDateTime;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class NamespaceDiscoveredDeviceUpdateTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        NamespaceDiscoveredDeviceUpdate model = BinaryData.fromString(
            "{\"tags\":{\"nhxmsi\":\"hhg\",\"ufiqndieuzaof\":\"fomiloxgg\",\"cubiipuipw\":\"chvcyyysfgdo\"},\"properties\":{\"externalDeviceId\":\"nmacj\",\"endpoints\":{\"inbound\":{\"nszqujiz\":{\"endpointType\":\"zshq\",\"address\":\"cimpevfg\",\"version\":\"lrri\",\"supportedAuthenticationMethods\":[\"UsernamePassword\",\"Certificate\"],\"additionalConfiguration\":\"smiccwrwfscj\",\"lastUpdatedOn\":\"2021-01-04T01:05:07Z\"}},\"outbound\":{\"assigned\":{\"xoi\":{\"endpointType\":\"ytibyow\",\"address\":\"blgyavutpthj\"},\"lqol\":{\"endpointType\":\"sks\",\"address\":\"pi\"},\"gfbkjubdyh\":{\"endpointType\":\"kcgxxlxsffgcvi\",\"address\":\"qzdwlvwlyoup\"},\"ctxtgzukxi\":{\"endpointType\":\"fminsgowzf\",\"address\":\"tsttktlahbq\"}}}},\"operatingSystemVersion\":\"m\",\"attributes\":{},\"discoveryId\":\"qqxhrnxrxcpj\",\"version\":250519210827189161}}")
            .toObject(NamespaceDiscoveredDeviceUpdate.class);
        Assertions.assertEquals("hhg", model.tags().get("nhxmsi"));
        Assertions.assertEquals("nmacj", model.properties().externalDeviceId());
        Assertions.assertEquals("zshq", model.properties().endpoints().inbound().get("nszqujiz").endpointType());
        Assertions.assertEquals("cimpevfg", model.properties().endpoints().inbound().get("nszqujiz").address());
        Assertions.assertEquals("lrri", model.properties().endpoints().inbound().get("nszqujiz").version());
        Assertions.assertEquals(AuthenticationMethod.USERNAME_PASSWORD,
            model.properties().endpoints().inbound().get("nszqujiz").supportedAuthenticationMethods().get(0));
        Assertions.assertEquals("smiccwrwfscj",
            model.properties().endpoints().inbound().get("nszqujiz").additionalConfiguration());
        Assertions.assertEquals(OffsetDateTime.parse("2021-01-04T01:05:07Z"),
            model.properties().endpoints().inbound().get("nszqujiz").lastUpdatedOn());
        Assertions.assertEquals("ytibyow",
            model.properties().endpoints().outbound().assigned().get("xoi").endpointType());
        Assertions.assertEquals("blgyavutpthj",
            model.properties().endpoints().outbound().assigned().get("xoi").address());
        Assertions.assertEquals("m", model.properties().operatingSystemVersion());
        Assertions.assertEquals("qqxhrnxrxcpj", model.properties().discoveryId());
        Assertions.assertEquals(250519210827189161L, model.properties().version());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        NamespaceDiscoveredDeviceUpdate model
            = new NamespaceDiscoveredDeviceUpdate()
                .withTags(mapOf("nhxmsi", "hhg", "ufiqndieuzaof", "fomiloxgg", "cubiipuipw", "chvcyyysfgdo"))
                .withProperties(
                    new NamespaceDiscoveredDeviceUpdateProperties().withExternalDeviceId("nmacj")
                        .withEndpoints(
                            new DiscoveredMessagingEndpoints()
                                .withInbound(mapOf("nszqujiz",
                                    new DiscoveredInboundEndpoints().withEndpointType("zshq")
                                        .withAddress("cimpevfg")
                                        .withVersion("lrri")
                                        .withSupportedAuthenticationMethods(Arrays.asList(
                                            AuthenticationMethod.USERNAME_PASSWORD, AuthenticationMethod.CERTIFICATE))
                                        .withAdditionalConfiguration("smiccwrwfscj")
                                        .withLastUpdatedOn(OffsetDateTime.parse("2021-01-04T01:05:07Z"))))
                                .withOutbound(new DiscoveredOutboundEndpoints().withAssigned(mapOf("xoi",
                                    new DeviceMessagingEndpoint().withEndpointType("ytibyow")
                                        .withAddress("blgyavutpthj"),
                                    "lqol", new DeviceMessagingEndpoint().withEndpointType("sks").withAddress("pi"),
                                    "gfbkjubdyh",
                                    new DeviceMessagingEndpoint().withEndpointType("kcgxxlxsffgcvi")
                                        .withAddress("qzdwlvwlyoup"),
                                    "ctxtgzukxi",
                                    new DeviceMessagingEndpoint().withEndpointType("fminsgowzf")
                                        .withAddress("tsttktlahbq")))))
                        .withOperatingSystemVersion("m")
                        .withAttributes(mapOf())
                        .withDiscoveryId("qqxhrnxrxcpj")
                        .withVersion(250519210827189161L));
        model = BinaryData.fromObject(model).toObject(NamespaceDiscoveredDeviceUpdate.class);
        Assertions.assertEquals("hhg", model.tags().get("nhxmsi"));
        Assertions.assertEquals("nmacj", model.properties().externalDeviceId());
        Assertions.assertEquals("zshq", model.properties().endpoints().inbound().get("nszqujiz").endpointType());
        Assertions.assertEquals("cimpevfg", model.properties().endpoints().inbound().get("nszqujiz").address());
        Assertions.assertEquals("lrri", model.properties().endpoints().inbound().get("nszqujiz").version());
        Assertions.assertEquals(AuthenticationMethod.USERNAME_PASSWORD,
            model.properties().endpoints().inbound().get("nszqujiz").supportedAuthenticationMethods().get(0));
        Assertions.assertEquals("smiccwrwfscj",
            model.properties().endpoints().inbound().get("nszqujiz").additionalConfiguration());
        Assertions.assertEquals(OffsetDateTime.parse("2021-01-04T01:05:07Z"),
            model.properties().endpoints().inbound().get("nszqujiz").lastUpdatedOn());
        Assertions.assertEquals("ytibyow",
            model.properties().endpoints().outbound().assigned().get("xoi").endpointType());
        Assertions.assertEquals("blgyavutpthj",
            model.properties().endpoints().outbound().assigned().get("xoi").address());
        Assertions.assertEquals("m", model.properties().operatingSystemVersion());
        Assertions.assertEquals("qqxhrnxrxcpj", model.properties().discoveryId());
        Assertions.assertEquals(250519210827189161L, model.properties().version());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
