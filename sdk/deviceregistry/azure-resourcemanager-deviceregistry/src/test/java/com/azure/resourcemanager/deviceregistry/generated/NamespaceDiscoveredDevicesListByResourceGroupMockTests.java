// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.deviceregistry.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.deviceregistry.DeviceRegistryManager;
import com.azure.resourcemanager.deviceregistry.models.AuthenticationMethod;
import com.azure.resourcemanager.deviceregistry.models.NamespaceDiscoveredDevice;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class NamespaceDiscoveredDevicesListByResourceGroupMockTests {
    @Test
    public void testListByResourceGroup() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"externalDeviceId\":\"bannovvoxczytp\",\"endpoints\":{\"inbound\":{\"bzxliohrdddtfgxq\":{\"endpointType\":\"vroevytlyo\",\"address\":\"rrrouuxvnsa\",\"version\":\"crymodizrxklobd\",\"supportedAuthenticationMethods\":[\"UsernamePassword\",\"Certificate\",\"UsernamePassword\"],\"additionalConfiguration\":\"mlmvevfxzo\",\"lastUpdatedOn\":\"2021-11-27T07:57:43Z\"},\"dmhm\":{\"endpointType\":\"awpcbbnzqcykn\",\"address\":\"p\",\"version\":\"fyuicdh\",\"supportedAuthenticationMethods\":[\"UsernamePassword\"],\"additionalConfiguration\":\"wwgbdv\",\"lastUpdatedOn\":\"2021-03-28T14:58:27Z\"},\"bragapyyrmf\":{\"endpointType\":\"ffplfmuvapckcc\",\"address\":\"rv\",\"version\":\"yoxoy\",\"supportedAuthenticationMethods\":[\"UsernamePassword\"],\"additionalConfiguration\":\"aimmoiroqb\",\"lastUpdatedOn\":\"2021-04-15T04:47:34Z\"},\"nbldxeaclgschori\":{\"endpointType\":\"vbpavbopfppdbw\",\"address\":\"upgahxkum\",\"version\":\"jcaacfdmmcpugm\",\"supportedAuthenticationMethods\":[\"UsernamePassword\",\"Anonymous\",\"Anonymous\"],\"additionalConfiguration\":\"fhbzehewhoqhn\",\"lastUpdatedOn\":\"2021-03-29T02:42:53Z\"}},\"outbound\":{\"assigned\":{\"ucsofldpuviyf\":{\"address\":\"srrm\"},\"bsxtkcudfbsfarfs\":{\"address\":\"aabeolhbhlvbmxuq\"},\"gf\":{\"address\":\"owlkjxnqpv\"},\"d\":{\"address\":\"tmhqykiz\"}}}},\"manufacturer\":\"aoaf\",\"model\":\"uqvoxmycjimryv\",\"operatingSystem\":\"cwwp\",\"operatingSystemVersion\":\"zgwe\",\"attributes\":{},\"discoveryId\":\"sxwef\",\"version\":3478912566983097711,\"provisioningState\":\"Canceled\"},\"extendedLocation\":{\"type\":\"vopwndyqleallk\",\"name\":\"mtkhlowkxxpvbr\"},\"location\":\"jmzsyzfh\",\"tags\":{\"k\":\"h\",\"nsjlpjrtws\":\"yych\",\"uic\":\"hv\",\"ubhvj\":\"hvtrrmhwrbfdpyf\"},\"id\":\"lrocuyzlwh\",\"name\":\"memhooclutnpq\",\"type\":\"emc\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        DeviceRegistryManager manager = DeviceRegistryManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<NamespaceDiscoveredDevice> response = manager.namespaceDiscoveredDevices()
            .listByResourceGroup("tddmf", "huytxzvtzn", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("jmzsyzfh", response.iterator().next().location());
        Assertions.assertEquals("h", response.iterator().next().tags().get("k"));
        Assertions.assertEquals("bannovvoxczytp", response.iterator().next().properties().externalDeviceId());
        Assertions.assertEquals("vroevytlyo",
            response.iterator().next().properties().endpoints().inbound().get("bzxliohrdddtfgxq").endpointType());
        Assertions.assertEquals("rrrouuxvnsa",
            response.iterator().next().properties().endpoints().inbound().get("bzxliohrdddtfgxq").address());
        Assertions.assertEquals("crymodizrxklobd",
            response.iterator().next().properties().endpoints().inbound().get("bzxliohrdddtfgxq").version());
        Assertions.assertEquals(AuthenticationMethod.USERNAME_PASSWORD,
            response.iterator()
                .next()
                .properties()
                .endpoints()
                .inbound()
                .get("bzxliohrdddtfgxq")
                .supportedAuthenticationMethods()
                .get(0));
        Assertions.assertEquals("mlmvevfxzo",
            response.iterator()
                .next()
                .properties()
                .endpoints()
                .inbound()
                .get("bzxliohrdddtfgxq")
                .additionalConfiguration());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-27T07:57:43Z"),
            response.iterator().next().properties().endpoints().inbound().get("bzxliohrdddtfgxq").lastUpdatedOn());
        Assertions.assertEquals("srrm",
            response.iterator().next().properties().endpoints().outbound().assigned().get("ucsofldpuviyf").address());
        Assertions.assertEquals("aoaf", response.iterator().next().properties().manufacturer());
        Assertions.assertEquals("uqvoxmycjimryv", response.iterator().next().properties().model());
        Assertions.assertEquals("cwwp", response.iterator().next().properties().operatingSystem());
        Assertions.assertEquals("zgwe", response.iterator().next().properties().operatingSystemVersion());
        Assertions.assertEquals("sxwef", response.iterator().next().properties().discoveryId());
        Assertions.assertEquals(3478912566983097711L, response.iterator().next().properties().version());
        Assertions.assertEquals("vopwndyqleallk", response.iterator().next().extendedLocation().type());
        Assertions.assertEquals("mtkhlowkxxpvbr", response.iterator().next().extendedLocation().name());
    }
}
