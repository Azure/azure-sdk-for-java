// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.deviceregistry.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.deviceregistry.DeviceRegistryManager;
import com.azure.resourcemanager.deviceregistry.models.AuthenticationMethod;
import com.azure.resourcemanager.deviceregistry.models.NamespaceDiscoveredDevice;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class NamespaceDiscoveredDevicesListByResourceGroupMockTests {
    @Test
    public void testListByResourceGroup() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"externalDeviceId\":\"ywart\",\"endpoints\":{\"inbound\":{\"totiowlxteqdptjg\":{\"endpointType\":\"kixkykxdssjpemm\",\"address\":\"cfxhikkflrmy\",\"version\":\"incqlhriswsl\",\"supportedAuthenticationMethods\":[\"Certificate\",\"Anonymous\",\"Certificate\"],\"additionalConfiguration\":\"qcgxuug\",\"lastUpdatedOn\":\"2021-03-05T05:58:38Z\"},\"d\":{\"endpointType\":\"dtguk\",\"address\":\"anblwphqlkccu\",\"version\":\"ygqwahoiu\",\"supportedAuthenticationMethods\":[\"Certificate\",\"Anonymous\",\"UsernamePassword\"],\"additionalConfiguration\":\"rglvaw\",\"lastUpdatedOn\":\"2021-07-24T11:19:34Z\"},\"tefjoknssqyzq\":{\"endpointType\":\"fypiv\",\"address\":\"sbbjpmcu\",\"version\":\"mifoxxkub\",\"supportedAuthenticationMethods\":[\"Anonymous\",\"Anonymous\",\"Certificate\",\"UsernamePassword\"],\"additionalConfiguration\":\"brbqgvgovp\",\"lastUpdatedOn\":\"2021-04-13T05:47:21Z\"}},\"outbound\":{\"assigned\":{\"lg\":{\"address\":\"kdfrdbiqmrjgeihf\"}}}},\"manufacturer\":\"fiwzcxmjpbyep\",\"model\":\"gt\",\"operatingSystem\":\"j\",\"operatingSystemVersion\":\"cmyfqipgxhnpo\",\"attributes\":{},\"discoveryId\":\"wcabvnuileeya\",\"version\":8457400905561321165,\"provisioningState\":\"Canceled\"},\"extendedLocation\":{\"type\":\"ugmrmf\",\"name\":\"lrxw\"},\"location\":\"aukhfkvcisiz\",\"tags\":{\"jwuive\":\"eds\"},\"id\":\"wcgyeewxeiqb\",\"name\":\"smgomguaml\",\"type\":\"dlrgms\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        DeviceRegistryManager manager = DeviceRegistryManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<NamespaceDiscoveredDevice> response = manager.namespaceDiscoveredDevices()
            .listByResourceGroup("utznabaobns", "ujdjltymkmvg", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("aukhfkvcisiz", response.iterator().next().location());
        Assertions.assertEquals("eds", response.iterator().next().tags().get("jwuive"));
        Assertions.assertEquals("ywart", response.iterator().next().properties().externalDeviceId());
        Assertions.assertEquals("kixkykxdssjpemm",
            response.iterator().next().properties().endpoints().inbound().get("totiowlxteqdptjg").endpointType());
        Assertions.assertEquals("cfxhikkflrmy",
            response.iterator().next().properties().endpoints().inbound().get("totiowlxteqdptjg").address());
        Assertions.assertEquals("incqlhriswsl",
            response.iterator().next().properties().endpoints().inbound().get("totiowlxteqdptjg").version());
        Assertions.assertEquals(AuthenticationMethod.CERTIFICATE,
            response.iterator()
                .next()
                .properties()
                .endpoints()
                .inbound()
                .get("totiowlxteqdptjg")
                .supportedAuthenticationMethods()
                .get(0));
        Assertions.assertEquals("qcgxuug",
            response.iterator()
                .next()
                .properties()
                .endpoints()
                .inbound()
                .get("totiowlxteqdptjg")
                .additionalConfiguration());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-05T05:58:38Z"),
            response.iterator().next().properties().endpoints().inbound().get("totiowlxteqdptjg").lastUpdatedOn());
        Assertions.assertEquals("kdfrdbiqmrjgeihf",
            response.iterator().next().properties().endpoints().outbound().assigned().get("lg").address());
        Assertions.assertEquals("fiwzcxmjpbyep", response.iterator().next().properties().manufacturer());
        Assertions.assertEquals("gt", response.iterator().next().properties().model());
        Assertions.assertEquals("j", response.iterator().next().properties().operatingSystem());
        Assertions.assertEquals("cmyfqipgxhnpo", response.iterator().next().properties().operatingSystemVersion());
        Assertions.assertEquals("wcabvnuileeya", response.iterator().next().properties().discoveryId());
        Assertions.assertEquals(8457400905561321165L, response.iterator().next().properties().version());
        Assertions.assertEquals("ugmrmf", response.iterator().next().extendedLocation().type());
        Assertions.assertEquals("lrxw", response.iterator().next().extendedLocation().name());
    }
}
