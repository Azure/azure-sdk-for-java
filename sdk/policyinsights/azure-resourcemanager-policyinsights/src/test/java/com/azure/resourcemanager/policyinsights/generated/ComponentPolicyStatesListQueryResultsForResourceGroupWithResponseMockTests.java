// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.policyinsights.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.policyinsights.PolicyInsightsManager;
import com.azure.resourcemanager.policyinsights.models.ComponentPolicyStatesQueryResults;
import com.azure.resourcemanager.policyinsights.models.ComponentPolicyStatesResource;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ComponentPolicyStatesListQueryResultsForResourceGroupWithResponseMockTests {
    @Test
    public void testListQueryResultsForResourceGroupWithResponse() throws Exception {
        String responseStr
            = "{\"@odata.context\":\"i\",\"@odata.count\":335113798,\"value\":[{\"@odata.id\":\"oa\",\"@odata.context\":\"ukuicjuftekioo\",\"timestamp\":\"2021-08-19T22:18:59Z\",\"componentId\":\"ewfhvpxjh\",\"componentType\":\"ub\",\"componentName\":\"zabbwzgv\",\"resourceId\":\"aix\",\"policyAssignmentId\":\"ckixsps\",\"policyDefinitionId\":\"gavkmv\",\"subscriptionId\":\"zerejr\",\"resourceType\":\"zjbyetjxryopta\",\"resourceLocation\":\"twhlbecgih\",\"resourceGroup\":\"pemnrrabo\",\"policyAssignmentName\":\"wwxywpjhspboxhi\",\"policyAssignmentOwner\":\"pskpeswyhhmif\",\"policyAssignmentParameters\":\"ajxwwvcmmpegl\",\"policyAssignmentScope\":\"qvcml\",\"policyDefinitionName\":\"xbzbqufpnezs\",\"policyDefinitionAction\":\"aymldrorhyogzms\",\"policyDefinitionCategory\":\"ehtcuuwdhtqq\",\"policySetDefinitionId\":\"hnimx\",\"policySetDefinitionName\":\"sugisn\",\"policySetDefinitionOwner\":\"wnwngh\",\"policySetDefinitionCategory\":\"ovke\",\"policySetDefinitionParameters\":\"micjixxfsf\",\"policyDefinitionReferenceId\":\"rtnuguefxxijteb\",\"complianceState\":\"eywetkrhlolmcn\",\"policyEvaluationDetails\":{\"evaluatedExpressions\":[{},{},{},{}],\"reason\":\"sv\"},\"policyDefinitionGroupNames\":[\"aqdl\",\"npetlrnrde\",\"aw\"],\"policyDefinitionVersion\":\"xe\",\"policySetDefinitionVersion\":\"e\",\"policyAssignmentVersion\":\"xljzvdovbrbl\",\"dcb\":\"dataprdaqcc\",\"ykdigqzlrznda\":\"dataygdjccxwbpw\",\"dmjqmvy\":\"datadn\",\"hqtwv\":\"datagkiqla\"},{\"@odata.id\":\"zekdzdzffzj\",\"@odata.context\":\"tsmpchgg\",\"timestamp\":\"2021-07-13T16:38:30Z\",\"componentId\":\"gfyatig\",\"componentType\":\"frrkdknczgorywnv\",\"componentName\":\"tv\",\"resourceId\":\"evdlh\",\"policyAssignmentId\":\"bkarbpyhssr\",\"policyDefinitionId\":\"kpkpkocmacc\",\"subscriptionId\":\"xxopyi\",\"resourceType\":\"vspeslhwyykgvr\",\"resourceLocation\":\"pumdd\",\"resourceGroup\":\"ajk\",\"policyAssignmentName\":\"yddt\",\"policyAssignmentOwner\":\"c\",\"policyAssignmentParameters\":\"vafnbfbqvenq\",\"policyAssignmentScope\":\"hgko\",\"policyDefinitionName\":\"wzejpecwzvcm\",\"policyDefinitionAction\":\"wdlu\",\"policyDefinitionCategory\":\"ypr\",\"policySetDefinitionId\":\"idwmt\",\"policySetDefinitionName\":\"bvtzldzchub\",\"policySetDefinitionOwner\":\"wnlzuvi\",\"policySetDefinitionCategory\":\"lghfrbzakpjtcqra\",\"policySetDefinitionParameters\":\"ojpsucm\",\"policyDefinitionReferenceId\":\"mcwqxynqjgs\",\"complianceState\":\"kyvscbgngcrus\",\"policyEvaluationDetails\":{\"evaluatedExpressions\":[{},{},{},{}],\"reason\":\"p\"},\"policyDefinitionGroupNames\":[\"svkkjbjolpyokl\",\"vuznadvhm\",\"ieoigowxxbh\",\"psyioqemqwtqszzg\"],\"policyDefinitionVersion\":\"sikawanvmwd\",\"policySetDefinitionVersion\":\"jqcrbk\",\"policyAssignmentVersion\":\"pnbn\",\"epgcmahiwf\":\"dataweoj\"},{\"@odata.id\":\"awk\",\"@odata.context\":\"kapitskshfyftt\",\"timestamp\":\"2021-06-05T01:56:09Z\",\"componentId\":\"pzwhjunfdgbggc\",\"componentType\":\"zhblivw\",\"componentName\":\"sudy\",\"resourceId\":\"mbhdo\",\"policyAssignmentId\":\"bng\",\"policyDefinitionId\":\"lgxz\",\"subscriptionId\":\"vxd\",\"resourceType\":\"exatmdmnrsen\",\"resourceLocation\":\"irxyddmiploisj\",\"resourceGroup\":\"so\",\"policyAssignmentName\":\"nntwg\",\"policyAssignmentOwner\":\"yohpsapzupzwwytb\",\"policyAssignmentParameters\":\"zghximkgfmx\",\"policyAssignmentScope\":\"kjnpyriwntot\",\"policyDefinitionName\":\"mmqmtsjkyj\",\"policyDefinitionAction\":\"xwdonbexftedau\",\"policyDefinitionCategory\":\"eeggzgrn\",\"policySetDefinitionId\":\"lfozuu\",\"policySetDefinitionName\":\"tgjqg\",\"policySetDefinitionOwner\":\"antns\",\"policySetDefinitionCategory\":\"z\",\"policySetDefinitionParameters\":\"mkanbc\",\"policyDefinitionReferenceId\":\"zofmexvtemaspm\",\"complianceState\":\"ydscdkxwd\",\"policyEvaluationDetails\":{\"evaluatedExpressions\":[{},{}],\"reason\":\"haahntofelfhpfi\"},\"policyDefinitionGroupNames\":[\"kkzdfivsu\",\"ybsrwzzmrgtxdh\",\"fppinmgik\",\"smkw\"],\"policyDefinitionVersion\":\"gfragjhxerxlobkd\",\"policySetDefinitionVersion\":\"qhvmmniiqy\",\"policyAssignmentVersion\":\"lhjnskbggicnqwl\",\"lxkrk\":\"datawp\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PolicyInsightsManager manager = PolicyInsightsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        ComponentPolicyStatesQueryResults response = manager.componentPolicyStates()
            .listQueryResultsForResourceGroupWithResponse("tjigpgayiawohf", "hnnzme",
                ComponentPolicyStatesResource.LATEST, 1569195155, "kmqenh", "idzr",
                OffsetDateTime.parse("2021-10-11T05:24:17Z"), OffsetDateTime.parse("2021-06-25T15:31:37Z"), "gloiovsl",
                "ivqsuvwtenb", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("sv", response.value().get(0).policyEvaluationDetails().reason());
    }
}
