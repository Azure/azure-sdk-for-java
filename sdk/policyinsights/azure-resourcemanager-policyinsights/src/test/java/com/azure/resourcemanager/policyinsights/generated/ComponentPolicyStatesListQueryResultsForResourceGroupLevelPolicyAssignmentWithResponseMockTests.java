// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.policyinsights.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.policyinsights.PolicyInsightsManager;
import com.azure.resourcemanager.policyinsights.models.ComponentPolicyStatesQueryResults;
import com.azure.resourcemanager.policyinsights.models.ComponentPolicyStatesResource;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ComponentPolicyStatesListQueryResultsForResourceGroupLevelPolicyAssignmentWithResponseMockTests {
    @Test
    public void testListQueryResultsForResourceGroupLevelPolicyAssignmentWithResponse() throws Exception {
        String responseStr
            = "{\"@odata.context\":\"itaftazgcxsvqlc\",\"@odata.count\":1967194597,\"value\":[{\"@odata.id\":\"mxow\",\"@odata.context\":\"cjoyutehlkarvt\",\"timestamp\":\"2021-10-09T15:20:43Z\",\"componentId\":\"ksxiknsgofunswh\",\"componentType\":\"ekggvmfnnbbxn\",\"componentName\":\"fkk\",\"resourceId\":\"eetxtpwcv\",\"policyAssignmentId\":\"fwsunjzijaciwmm\",\"policyDefinitionId\":\"tqdonbzzs\",\"subscriptionId\":\"zyviiwsu\",\"resourceType\":\"zhw\",\"resourceLocation\":\"uifkzqqhb\",\"resourceGroup\":\"loilmkfbeo\",\"policyAssignmentName\":\"pjpngvyvuo\",\"policyAssignmentOwner\":\"dlpsx\",\"policyAssignmentParameters\":\"ugfw\",\"policyAssignmentScope\":\"qn\",\"policyDefinitionName\":\"clo\",\"policyDefinitionAction\":\"mvswxvjeleif\",\"policyDefinitionCategory\":\"d\",\"policySetDefinitionId\":\"wwulkrybpaevy\",\"policySetDefinitionName\":\"yjecrqkwakkch\",\"policySetDefinitionOwner\":\"oulborcxuibsdqbd\",\"policySetDefinitionCategory\":\"lp\",\"policySetDefinitionParameters\":\"t\",\"policyDefinitionReferenceId\":\"wpgweoqhbj\",\"complianceState\":\"qfbleruf\",\"policyEvaluationDetails\":{\"evaluatedExpressions\":[{}],\"reason\":\"hjucihbymjj\"},\"policyDefinitionGroupNames\":[\"nerxvjeazrahelh\"],\"policyDefinitionVersion\":\"myi\",\"policySetDefinitionVersion\":\"qamcthtpqgfz\",\"policyAssignmentVersion\":\"sizkdiuvflg\",\"ahcrxofgrutv\":\"datawjg\",\"pmhz\":\"datapccxziv\"},{\"@odata.id\":\"hhkvnnjdtujqz\",\"@odata.context\":\"njvpmxn\",\"timestamp\":\"2021-10-29T18:53:37Z\",\"componentId\":\"stqlfxolrwv\",\"componentType\":\"gxyfjsweq\",\"componentName\":\"lzyyopoaytw\",\"resourceId\":\"wqubo\",\"policyAssignmentId\":\"vufrk\",\"policyDefinitionId\":\"iemimdtn\",\"subscriptionId\":\"wew\",\"resourceType\":\"kreeeddd\",\"resourceLocation\":\"tfquu\",\"resourceGroup\":\"clhsiigeeuw\",\"policyAssignmentName\":\"nqyxfedq\",\"policyAssignmentOwner\":\"tdqwynxo\",\"policyAssignmentParameters\":\"vbzpggpwme\",\"policyAssignmentScope\":\"bqajejir\",\"policyDefinitionName\":\"vrvkgpogplb\",\"policyDefinitionAction\":\"vlnhx\",\"policyDefinitionCategory\":\"njhina\",\"policySetDefinitionId\":\"esbxnepqmjmoplu\",\"policySetDefinitionName\":\"ykkfhsovadkrm\",\"policySetDefinitionOwner\":\"mwqpdkesjqbzkqm\",\"policySetDefinitionCategory\":\"poriwbwggijtspzj\",\"policySetDefinitionParameters\":\"rhikwsbzrhdug\",\"policyDefinitionReferenceId\":\"htrgz\",\"complianceState\":\"unjf\",\"policyEvaluationDetails\":{\"evaluatedExpressions\":[{},{},{}],\"reason\":\"ycbauseqnc\"},\"policyDefinitionGroupNames\":[\"ihvtuwyjsqw\",\"s\"],\"policyDefinitionVersion\":\"s\",\"policySetDefinitionVersion\":\"gzunkfnyskwwunqh\",\"policyAssignmentVersion\":\"avoj\",\"r\":\"datahipcukvbljpx\",\"f\":\"datavchyluqalpcufj\",\"ahhhsaaxxsritr\":\"datatiztqds\",\"yefmxwoqotii\":\"datawbaaes\"},{\"@odata.id\":\"gpasrvrmtisty\",\"@odata.context\":\"jhorlxkpy\",\"timestamp\":\"2021-01-20T06:05:10Z\",\"componentId\":\"nycntr\",\"componentType\":\"xwtdmbqjtsuhqh\",\"componentName\":\"xtdyqavfxbqmzxsy\",\"resourceId\":\"sinpaamihwbghvw\",\"policyAssignmentId\":\"pbgchcgsfzhb\",\"policyDefinitionId\":\"iys\",\"subscriptionId\":\"jsdjpg\",\"resourceType\":\"ysgwkcfferznzcbi\",\"resourceLocation\":\"veomkhfeqc\",\"resourceGroup\":\"plfpohimgckycjp\",\"policyAssignmentName\":\"b\",\"policyAssignmentOwner\":\"bznxsuloutnpbm\",\"policyAssignmentParameters\":\"oqohgp\",\"policyAssignmentScope\":\"dmwk\",\"policyDefinitionName\":\"pfhsldqdza\",\"policyDefinitionAction\":\"unye\",\"policyDefinitionCategory\":\"yzdsytcikswhcam\",\"policySetDefinitionId\":\"y\",\"policySetDefinitionName\":\"xkcgsfcmvhadr\",\"policySetDefinitionOwner\":\"atvyrkljqkqws\",\"policySetDefinitionCategory\":\"tvjkowggxawwdm\",\"policySetDefinitionParameters\":\"pnkteiidlbovwb\",\"policyDefinitionReferenceId\":\"prgeg\",\"complianceState\":\"ihkjcnerekyjuls\",\"policyEvaluationDetails\":{\"evaluatedExpressions\":[{}],\"reason\":\"hqlq\"},\"policyDefinitionGroupNames\":[\"xtvcebavvbvxwv\",\"genlrjcsmwevguyf\"],\"policyDefinitionVersion\":\"xelrjk\",\"policySetDefinitionVersion\":\"cdetowwezhy\",\"policyAssignmentVersion\":\"di\",\"fqbir\":\"dataqlqac\",\"zfaxskdvu\":\"dataybcelfjnxodnjy\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PolicyInsightsManager manager = PolicyInsightsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        ComponentPolicyStatesQueryResults response = manager.componentPolicyStates()
            .listQueryResultsForResourceGroupLevelPolicyAssignmentWithResponse("iqiince", "xxkdevpxim", "iizm",
                ComponentPolicyStatesResource.LATEST, 1067630677, "duvtvod", "xxpqhmlqibtblmcv",
                OffsetDateTime.parse("2021-08-10T11:21:11Z"), OffsetDateTime.parse("2021-11-01T20:51:01Z"), "znotd",
                "fqvpbqsdqkpsbqsb", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("hjucihbymjj", response.value().get(0).policyEvaluationDetails().reason());
    }
}
