// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.
package com.azure.compute.batch.models;

import com.azure.core.annotation.Fluent;
import com.azure.core.annotation.Generated;
import com.azure.json.JsonReader;
import com.azure.json.JsonSerializable;
import com.azure.json.JsonToken;
import com.azure.json.JsonWriter;
import java.io.IOException;

/**
 * Specifies characteristics for a temporary 'auto pool'. The Batch service will
 * create this auto Pool when the Job is submitted.
 */
@Fluent
public final class BatchAutoPoolSpecification implements JsonSerializable<BatchAutoPoolSpecification> {

    /*
     * A prefix to be added to the unique identifier when a Pool is automatically created. The Batch service assigns
     * each auto Pool a unique identifier on creation. To distinguish between Pools created for different purposes, you
     * can specify this element to add a prefix to the ID that is assigned. The prefix can be up to 20 characters long.
     */
    @Generated
    private String autoPoolIdPrefix;

    /*
     * The minimum lifetime of created auto Pools, and how multiple Jobs on a schedule are assigned to Pools.
     */
    @Generated
    private final BatchPoolLifetimeOption poolLifetimeOption;

    /*
     * Whether to keep an auto Pool alive after its lifetime expires. If false, the Batch service deletes the Pool once
     * its lifetime (as determined by the poolLifetimeOption setting) expires; that is, when the Job or Job Schedule
     * completes. If true, the Batch service does not delete the Pool automatically. It is up to the user to delete auto
     * Pools created with this option.
     */
    @Generated
    private Boolean keepAlive;

    /*
     * The Pool specification for the auto Pool.
     */
    @Generated
    private BatchPoolSpecification pool;

    /**
     * Creates an instance of BatchAutoPoolSpecification class.
     *
     * @param poolLifetimeOption the poolLifetimeOption value to set.
     */
    @Generated
    public BatchAutoPoolSpecification(BatchPoolLifetimeOption poolLifetimeOption) {
        this.poolLifetimeOption = poolLifetimeOption;
    }

    /**
     * Get the autoPoolIdPrefix property: A prefix to be added to the unique identifier when a Pool is automatically
     * created. The Batch service assigns each auto Pool a unique identifier on creation. To distinguish between Pools
     * created for different purposes, you can specify this element to add a prefix to the ID that is assigned. The
     * prefix can be up to 20 characters long.
     *
     * @return the autoPoolIdPrefix value.
     */
    @Generated
    public String getAutoPoolIdPrefix() {
        return this.autoPoolIdPrefix;
    }

    /**
     * Set the autoPoolIdPrefix property: A prefix to be added to the unique identifier when a Pool is automatically
     * created. The Batch service assigns each auto Pool a unique identifier on creation. To distinguish between Pools
     * created for different purposes, you can specify this element to add a prefix to the ID that is assigned. The
     * prefix can be up to 20 characters long.
     *
     * @param autoPoolIdPrefix the autoPoolIdPrefix value to set.
     * @return the BatchAutoPoolSpecification object itself.
     */
    @Generated
    public BatchAutoPoolSpecification setAutoPoolIdPrefix(String autoPoolIdPrefix) {
        this.autoPoolIdPrefix = autoPoolIdPrefix;
        return this;
    }

    /**
     * Get the poolLifetimeOption property: The minimum lifetime of created auto Pools, and how multiple Jobs on a
     * schedule are assigned to Pools.
     *
     * @return the poolLifetimeOption value.
     */
    @Generated
    public BatchPoolLifetimeOption getPoolLifetimeOption() {
        return this.poolLifetimeOption;
    }

    /**
     * Get the keepAlive property: Whether to keep an auto Pool alive after its lifetime expires. If false, the Batch
     * service deletes the Pool once its lifetime (as determined by the poolLifetimeOption setting) expires; that is,
     * when the Job or Job Schedule completes. If true, the Batch service does not delete the Pool automatically. It is
     * up to the user to delete auto Pools created with this option.
     *
     * @return the keepAlive value.
     */
    @Generated
    public Boolean isKeepAlive() {
        return this.keepAlive;
    }

    /**
     * Set the keepAlive property: Whether to keep an auto Pool alive after its lifetime expires. If false, the Batch
     * service deletes the Pool once its lifetime (as determined by the poolLifetimeOption setting) expires; that is,
     * when the Job or Job Schedule completes. If true, the Batch service does not delete the Pool automatically. It is
     * up to the user to delete auto Pools created with this option.
     *
     * @param keepAlive the keepAlive value to set.
     * @return the BatchAutoPoolSpecification object itself.
     */
    @Generated
    public BatchAutoPoolSpecification setKeepAlive(Boolean keepAlive) {
        this.keepAlive = keepAlive;
        return this;
    }

    /**
     * Get the pool property: The Pool specification for the auto Pool.
     *
     * @return the pool value.
     */
    @Generated
    public BatchPoolSpecification getPool() {
        return this.pool;
    }

    /**
     * Set the pool property: The Pool specification for the auto Pool.
     *
     * @param pool the pool value to set.
     * @return the BatchAutoPoolSpecification object itself.
     */
    @Generated
    public BatchAutoPoolSpecification setPool(BatchPoolSpecification pool) {
        this.pool = pool;
        return this;
    }

    /**
     * {@inheritDoc}
     */
    @Generated
    @Override
    public JsonWriter toJson(JsonWriter jsonWriter) throws IOException {
        jsonWriter.writeStartObject();
        jsonWriter.writeStringField("poolLifetimeOption",
            this.poolLifetimeOption == null ? null : this.poolLifetimeOption.toString());
        jsonWriter.writeStringField("autoPoolIdPrefix", this.autoPoolIdPrefix);
        jsonWriter.writeBooleanField("keepAlive", this.keepAlive);
        jsonWriter.writeJsonField("pool", this.pool);
        return jsonWriter.writeEndObject();
    }

    /**
     * Reads an instance of BatchAutoPoolSpecification from the JsonReader.
     *
     * @param jsonReader The JsonReader being read.
     * @return An instance of BatchAutoPoolSpecification if the JsonReader was pointing to an instance of it, or null if
     * it was pointing to JSON null.
     * @throws IllegalStateException If the deserialized JSON object was missing any required properties.
     * @throws IOException If an error occurs while reading the BatchAutoPoolSpecification.
     */
    @Generated
    public static BatchAutoPoolSpecification fromJson(JsonReader jsonReader) throws IOException {
        return jsonReader.readObject(reader -> {
            BatchPoolLifetimeOption poolLifetimeOption = null;
            String autoPoolIdPrefix = null;
            Boolean keepAlive = null;
            BatchPoolSpecification pool = null;
            while (reader.nextToken() != JsonToken.END_OBJECT) {
                String fieldName = reader.getFieldName();
                reader.nextToken();
                if ("poolLifetimeOption".equals(fieldName)) {
                    poolLifetimeOption = BatchPoolLifetimeOption.fromString(reader.getString());
                } else if ("autoPoolIdPrefix".equals(fieldName)) {
                    autoPoolIdPrefix = reader.getString();
                } else if ("keepAlive".equals(fieldName)) {
                    keepAlive = reader.getNullable(JsonReader::getBoolean);
                } else if ("pool".equals(fieldName)) {
                    pool = BatchPoolSpecification.fromJson(reader);
                } else {
                    reader.skipChildren();
                }
            }
            BatchAutoPoolSpecification deserializedBatchAutoPoolSpecification
                = new BatchAutoPoolSpecification(poolLifetimeOption);
            deserializedBatchAutoPoolSpecification.autoPoolIdPrefix = autoPoolIdPrefix;
            deserializedBatchAutoPoolSpecification.keepAlive = keepAlive;
            deserializedBatchAutoPoolSpecification.pool = pool;
            return deserializedBatchAutoPoolSpecification;
        });
    }
}
