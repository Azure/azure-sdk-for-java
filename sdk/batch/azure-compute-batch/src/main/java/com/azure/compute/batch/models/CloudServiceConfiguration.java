// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.
package com.azure.compute.batch.models;

import com.azure.core.annotation.Fluent;
import com.azure.core.annotation.Generated;
import com.azure.json.JsonReader;
import com.azure.json.JsonSerializable;
import com.azure.json.JsonToken;
import com.azure.json.JsonWriter;

import java.io.IOException;

/**
 * The configuration for Compute Nodes in a Pool based on the Azure Cloud Services
 * platform.
 */
@Fluent
public final class CloudServiceConfiguration implements JsonSerializable<CloudServiceConfiguration> {

    /*
     * Possible values are:
     * 2 - OS Family 2, equivalent to Windows Server 2008 R2
     * SP1.
     * 3 - OS Family 3, equivalent to Windows Server 2012.
     * 4 - OS Family 4,
     * equivalent to Windows Server 2012 R2.
     * 5 - OS Family 5, equivalent to Windows
     * Server 2016.
     * 6 - OS Family 6, equivalent to Windows Server 2019. For more
     * information, see Azure Guest OS Releases
     * (https://azure.microsoft.com/documentation/articles/cloud-services-guestos-update-matrix/#releases).
     */
    @Generated
    private String osFamily;

    /*
     * The Azure Guest OS version to be installed on the virtual machines in the Pool. The default value is * which
     * specifies the latest operating system version for the specified OS family.
     */
    @Generated
    private String osVersion;

    /**
     * Creates an instance of CloudServiceConfiguration class.
     *
     * @param osFamily the osFamily value to set.
     */
    @Generated
    public CloudServiceConfiguration(String osFamily) {
        this.osFamily = osFamily;
    }

    /**
     * Get the osFamily property: Possible values are:
     * 2 - OS Family 2, equivalent to Windows Server 2008 R2
     * SP1.
     * 3 - OS Family 3, equivalent to Windows Server 2012.
     * 4 - OS Family 4,
     * equivalent to Windows Server 2012 R2.
     * 5 - OS Family 5, equivalent to Windows
     * Server 2016.
     * 6 - OS Family 6, equivalent to Windows Server 2019. For more
     * information, see Azure Guest OS Releases
     * (https://azure.microsoft.com/documentation/articles/cloud-services-guestos-update-matrix/#releases).
     *
     * @return the osFamily value.
     */
    @Generated
    public String getOsFamily() {
        return this.osFamily;
    }

    /**
     * Get the osVersion property: The Azure Guest OS version to be installed on the virtual machines in the Pool. The
     * default value is * which specifies the latest operating system version for the specified OS family.
     *
     * @return the osVersion value.
     */
    @Generated
    public String getOsVersion() {
        return this.osVersion;
    }

    /**
     * Set the osVersion property: The Azure Guest OS version to be installed on the virtual machines in the Pool. The
     * default value is * which specifies the latest operating system version for the specified OS family.
     *
     * @param osVersion the osVersion value to set.
     * @return the CloudServiceConfiguration object itself.
     */
    @Generated
    public CloudServiceConfiguration setOsVersion(String osVersion) {
        this.osVersion = osVersion;
        return this;
    }

    /**
     * Creates a representation of this object as JSON.
     *
     * @throws IOException Error while writing to JsonWriter.
     */
    @Override
    public JsonWriter toJson(JsonWriter jsonWriter) throws IOException {
        jsonWriter.writeStartObject();
        jsonWriter.writeStringField("osFamily", osFamily);
        jsonWriter.writeStringField("osVersion", osVersion);
        jsonWriter.writeEndObject();

        return jsonWriter;
    }

    /**
     * Creates a new instance from its JSON representation.
     *
     * @throws IOException Error while reading from JsonReader.
     */
    public static CloudServiceConfiguration fromJson(JsonReader jsonReader) throws IOException {
        return jsonReader.readObject(reader -> {
            String family = null;
            String version = null;

            while (reader.nextToken() != JsonToken.END_OBJECT) {
                String fieldName = reader.getFieldName();
                reader.nextToken();

                if ("osFamily".equals(fieldName)) {
                    family = reader.getString();
                } else if ("osVersion".equals(fieldName)) {
                    version = reader.getString();
                } else {
                    reader.skipChildren();
                }
            }

            if (family != null) {
                return new CloudServiceConfiguration(family).setOsVersion(version);
            } else {
                return null;
            }
        });
    }
}
