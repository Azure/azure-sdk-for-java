// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.batch.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.batch.models.AutoScaleSettings;
import com.azure.resourcemanager.batch.models.ComputeNodeDeallocationOption;
import com.azure.resourcemanager.batch.models.FixedScaleSettings;
import com.azure.resourcemanager.batch.models.ScaleSettings;
import java.time.Duration;
import org.junit.jupiter.api.Assertions;

public final class ScaleSettingsTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        ScaleSettings model = BinaryData.fromString(
            "{\"fixedScale\":{\"resizeTimeout\":\"PT41H2M7S\",\"targetDedicatedNodes\":333571047,\"targetLowPriorityNodes\":1063361933,\"nodeDeallocationOption\":\"Terminate\"},\"autoScale\":{\"formula\":\"xdy\",\"evaluationInterval\":\"PT57H31M36S\"}}")
            .toObject(ScaleSettings.class);
        Assertions.assertEquals(Duration.parse("PT41H2M7S"), model.fixedScale().resizeTimeout());
        Assertions.assertEquals(333571047, model.fixedScale().targetDedicatedNodes());
        Assertions.assertEquals(1063361933, model.fixedScale().targetLowPriorityNodes());
        Assertions.assertEquals(ComputeNodeDeallocationOption.TERMINATE, model.fixedScale().nodeDeallocationOption());
        Assertions.assertEquals("xdy", model.autoScale().formula());
        Assertions.assertEquals(Duration.parse("PT57H31M36S"), model.autoScale().evaluationInterval());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        ScaleSettings model = new ScaleSettings()
            .withFixedScale(new FixedScaleSettings().withResizeTimeout(Duration.parse("PT41H2M7S"))
                .withTargetDedicatedNodes(333571047)
                .withTargetLowPriorityNodes(1063361933)
                .withNodeDeallocationOption(ComputeNodeDeallocationOption.TERMINATE))
            .withAutoScale(
                new AutoScaleSettings().withFormula("xdy").withEvaluationInterval(Duration.parse("PT57H31M36S")));
        model = BinaryData.fromObject(model).toObject(ScaleSettings.class);
        Assertions.assertEquals(Duration.parse("PT41H2M7S"), model.fixedScale().resizeTimeout());
        Assertions.assertEquals(333571047, model.fixedScale().targetDedicatedNodes());
        Assertions.assertEquals(1063361933, model.fixedScale().targetLowPriorityNodes());
        Assertions.assertEquals(ComputeNodeDeallocationOption.TERMINATE, model.fixedScale().nodeDeallocationOption());
        Assertions.assertEquals("xdy", model.autoScale().formula());
        Assertions.assertEquals(Duration.parse("PT57H31M36S"), model.autoScale().evaluationInterval());
    }
}
