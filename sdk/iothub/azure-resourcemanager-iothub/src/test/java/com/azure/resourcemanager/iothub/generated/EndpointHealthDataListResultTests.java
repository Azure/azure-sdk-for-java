// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.iothub.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.iothub.fluent.models.EndpointHealthDataInner;
import com.azure.resourcemanager.iothub.models.EndpointHealthDataListResult;
import com.azure.resourcemanager.iothub.models.EndpointHealthStatus;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

public final class EndpointHealthDataListResultTests {
    @Test
    public void testDeserialize() {
        EndpointHealthDataListResult model =
            BinaryData
                .fromString(
                    "{\"value\":[{\"endpointId\":\"qwhxxbuyqaxzfeqz\",\"healthStatus\":\"dead\",\"lastKnownError\":\"iolxor\",\"lastKnownErrorTime\":\"Sat,"
                        + " 02 Oct 2021 12:11:14 GMT\",\"lastSuccessfulSendAttemptTime\":\"Wed, 26 May 2021 17:00:17"
                        + " GMT\",\"lastSendAttemptTime\":\"Thu, 03 Jun 2021 02:29:09"
                        + " GMT\"}],\"nextLink\":\"cwsobqwcs\"}")
                .toObject(EndpointHealthDataListResult.class);
        Assertions.assertEquals("qwhxxbuyqaxzfeqz", model.value().get(0).endpointId());
        Assertions.assertEquals(EndpointHealthStatus.DEAD, model.value().get(0).healthStatus());
        Assertions.assertEquals("iolxor", model.value().get(0).lastKnownError());
        Assertions
            .assertEquals(OffsetDateTime.parse("2021-10-02T12:11:14Z"), model.value().get(0).lastKnownErrorTime());
        Assertions
            .assertEquals(
                OffsetDateTime.parse("2021-05-26T17:00:17Z"), model.value().get(0).lastSuccessfulSendAttemptTime());
        Assertions
            .assertEquals(OffsetDateTime.parse("2021-06-03T02:29:09Z"), model.value().get(0).lastSendAttemptTime());
    }

    @Test
    public void testSerialize() {
        EndpointHealthDataListResult model =
            new EndpointHealthDataListResult()
                .withValue(
                    Arrays
                        .asList(
                            new EndpointHealthDataInner()
                                .withEndpointId("qwhxxbuyqaxzfeqz")
                                .withHealthStatus(EndpointHealthStatus.DEAD)
                                .withLastKnownError("iolxor")
                                .withLastKnownErrorTime(OffsetDateTime.parse("2021-10-02T12:11:14Z"))
                                .withLastSuccessfulSendAttemptTime(OffsetDateTime.parse("2021-05-26T17:00:17Z"))
                                .withLastSendAttemptTime(OffsetDateTime.parse("2021-06-03T02:29:09Z"))));
        model = BinaryData.fromObject(model).toObject(EndpointHealthDataListResult.class);
        Assertions.assertEquals("qwhxxbuyqaxzfeqz", model.value().get(0).endpointId());
        Assertions.assertEquals(EndpointHealthStatus.DEAD, model.value().get(0).healthStatus());
        Assertions.assertEquals("iolxor", model.value().get(0).lastKnownError());
        Assertions
            .assertEquals(OffsetDateTime.parse("2021-10-02T12:11:14Z"), model.value().get(0).lastKnownErrorTime());
        Assertions
            .assertEquals(
                OffsetDateTime.parse("2021-05-26T17:00:17Z"), model.value().get(0).lastSuccessfulSendAttemptTime());
        Assertions
            .assertEquals(OffsetDateTime.parse("2021-06-03T02:29:09Z"), model.value().get(0).lastSendAttemptTime());
    }
}
