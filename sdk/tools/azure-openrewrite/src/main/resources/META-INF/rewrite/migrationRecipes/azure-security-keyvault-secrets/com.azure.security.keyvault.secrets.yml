# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.
type: specs.openrewrite.org/v1beta/recipe
name: com.azure.openrewrite.recipe.azure.security.keyvault.secrets
displayName: Migrate from azure.security.keyvault.secrets to next generation stack
description: This recipe migrates the azure.security.keyvault.secrets package to the next generation stack.
recipeList:

  # --------------------------------------------------------------------
  # SecretClientBuilder
  # --------------------------------------------------------------------

  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.azure.security.keyvault.secrets.SecretClientBuilder vaultUrl(..)
      newMethodName: endpoint

  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: com.azure.security.keyvault.secrets.CertificateClientBuilder
      newFullyQualifiedTypeName: com.azure.v2.security.keyvault.secrets.CertificateClientBuilder

  # --------------------------------------------------------------------
  # SecretClient
  # --------------------------------------------------------------------

  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: com.azure.security.keyvault.secrets.SecretClient
      newFullyQualifiedTypeName: com.azure.v2.security.keyvault.secrets.SecretClient
