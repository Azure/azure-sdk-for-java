trigger:
  branches:
    include:
      - main
  paths:
    include:
      - /sdk/tools/azure-openrewrite/
      - /sdk/tools/azure-openrewrite-compiler-maven-plugin/

pr:
  branches:
    include:
      - main
      - feature/*
      - hotfix/*
      - release/*
  paths:
    include:
      - /sdk/tools/azure-openrewrite/
      - /sdk/tools/azure-openrewrite-compiler-maven-plugin/

extends:
  template: /eng/pipelines/templates/stages/archetype-sdk-client.yml
  parameters:
    ServiceDirectory: tools
    Artifacts:
      - name: azure-openrewrite-compiler-maven-plugin
        groupId: com.azure
        safeName: azureopenrewritecompilermavenplugin
        releaseInBatch: ${{ parameters.release_azureopenrewritecompilermavenplugin }}
    AdditionalModules:
      - name: azure-core
        groupId: com.azure.v2
      - name: azure-core-perf
        groupId: com.azure
        # required by the above perf library
      - name: perf-test-core
        groupId: com.azure
    MatrixReplace:
      - .*TestGoals=.*/com.azure:azure-openrewrite-compiler-maven-plugin:compile-golden-image
