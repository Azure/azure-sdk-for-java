trigger: none

variables:
  DefaultOptions: '--batch-mode -Dmaven.wagon.http.pool=false'


jobs:
  - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml
    parameters:
      TestName: MultiMaster
      ServiceDirectory: cosmos
      TimeoutInMinutes: 240
      MaxParallel: 1
      Matrix:
        Single_Region_Fast:
         OSVmImage: 'macOS-10.13'
         ProfileFlag: '-Pfast'
         DisplayName: Multi Master Integration Tests (Single Region)
         ACCOUNT_HOST: $(java-cosmos-multimaster-singleregion-host)
         ACCOUNT_KEY: $(java-cosmos-multimaster-singleregion-key)
         PREFERRED_LOCATIONS: null

      PreRunSteps:
        - template: ../steps/install-reporting-tools.yml

      TestStepMavenInputs:
        goals: verify
        options: '$(ProfileFlag) -Dgpg.skip'
        testResultsFiles: '**/junitreports/TEST-*.xml' # TODO: Do we need this?


