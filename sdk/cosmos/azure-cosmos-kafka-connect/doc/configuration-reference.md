## Configuration Reference:

## Generic Configuration

| Config Property Name                                                      | Default      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|:--------------------------------------------------------------------------|:-------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| 
| `kafka.connect.cosmos.accountEndpoint`                                    | None         | Cosmos DB Account Endpoint Uri                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `kafka.connect.cosmos.account.azureEnvironment`                           | `Azure`      | The azure environment of the CosmosDB account: `Azure`, `AzureChina`, `AzureUsGovernment`, `AzureGermany`.                                                                                                                                                                                                                                                                                                                                                                                     |
| `kafka.connect.cosmos.account.tenantId`                                   | `""`         | The tenantId of the CosmosDB account. Required for `ServicePrincipal` authentication.                                                                                                                                                                                                                                                                                                                                                                                                          |
| `kafka.connect.cosmos.auth.type`                                          | `MasterKey`  | There are two auth types are supported currently: `MasterKey`(PrimaryReadWriteKeys, SecondReadWriteKeys, PrimaryReadOnlyKeys, SecondReadWriteKeys), `ServicePrincipal`                                                                                                                                                                                                                                                                                                                         |
| `kafka.connect.cosmos.accountKey`                                         | `""`         | Cosmos DB Account Key (only required in case of `auth.type` as `MasterKey`)                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `kafka.connect.cosmos.auth.aad.clientId`                                  | `""`         | The clientId/ApplicationId of the service principal. Required for `ServicePrincipal` authentication.                                                                                                                                                                                                                                                                                                                                                                                           |
| `kafka.connect.cosmos.auth.aad.clientSecret`                              | `""`         | The client secret/password of the service principal.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `kafka.connect.cosmos.useGatewayMode`                                     | `false`      | Flag to indicate whether to use gateway mode. By default it is false.                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `kafka.connect.cosmos.preferredRegionsList`                               | `[]`         | Preferred regions list to be used for a multi region Cosmos DB account. This is a comma separated value (e.g., `[East US, West US]` or `East US, West US`) provided preferred regions will be used as hint. You should use a collocated kafka cluster with your Cosmos DB account and pass the kafka cluster region as preferred region. See list of azure regions [here](https://docs.microsoft.com/dotnet/api/microsoft.azure.documents.locationnames?view=azure-dotnet&preserve-view=true). |
| `kafka.connect.cosmos.applicationName`                                    | `""`         | Application name. Will be added as the userAgent suffix.                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `kafka.connect.cosmos.throughputControl.enabled`                          | `false`      | A flag to indicate whether throughput control is enabled.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `kafka.connect.cosmos.throughputControl.accountEndpoint`                  | `""`         | Cosmos DB Throughput Control Account Endpoint Uri.                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `kafka.connect.cosmos.throughputControl.account.azureEnvironment`         | `Azure`      | The azure environment of the CosmosDB account: `Azure`, `AzureChina`, `AzureUsGovernment`, `AzureGermany`.                                                                                                                                                                                                                                                                                                                                                                                     |
| `kafka.connect.cosmos.throughputControl.account.tenantId`                 | `""`         | The tenantId of the CosmosDB account. Required for `ServicePrincipal` authentication.                                                                                                                                                                                                                                                                                                                                                                                                          |
| `kafka.connect.cosmos.throughputControl.auth.type`                        | `MasterKey`  | There are two auth types are supported currently: `MasterKey`(PrimaryReadWriteKeys, SecondReadWriteKeys, PrimaryReadOnlyKeys, SecondReadWriteKeys), `ServicePrincipal`                                                                                                                                                                                                                                                                                                                         |
| `kafka.connect.cosmos.throughputControl.accountKey`                       | `""`         | Cosmos DB Throughput Control Account Key (only required in case of `throughputControl.auth.type` as `MasterKey`).                                                                                                                                                                                                                                                                                                                                                                              |
| `kafka.connect.cosmos.throughputControl.auth.aad.clientId`                | `""`         | The clientId/ApplicationId of the service principal. Required for `ServicePrincipal` authentication.                                                                                                                                                                                                                                                                                                                                                                                           |
| `kafka.connect.cosmos.throughputControl.auth.aad.clientSecret`            | `""`         | The client secret/password of the service principal.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `kafka.connect.cosmos.throughputControl.preferredRegionsList`             | `[]`         | Preferred regions list to be used for a multi region Cosmos DB account. This is a comma separated value (e.g., `[East US, West US]` or `East US, West US`) provided preferred regions will be used as hint. You should use a collocated kafka cluster with your Cosmos DB account and pass the kafka cluster region as preferred region. See list of azure regions [here](https://docs.microsoft.com/dotnet/api/microsoft.azure.documents.locationnames?view=azure-dotnet&preserve-view=true). |
| `kafka.connect.cosmos.throughputControl.useGatewayMode`                   | `false`      | Flag to indicate whether to use gateway mode. By default it is false.                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `kafka.connect.cosmos.throughputControl.name`                             | `""`         | Throughput control group name. Since customer is allowed to create many groups for a container, the name should be unique.                                                                                                                                                                                                                                                                                                                                                                     |
| `kafka.connect.cosmos.throughputControl.targetThroughput`                 | `-1`         | Throughput control group target throughput. The value should be larger than 0.                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `kafka.connect.cosmos.throughputControl.targetThroughputThreshold`        | `-1`         | Throughput control group target throughput threshold. The value should be between (0,1].                                                                                                                                                                                                                                                                                                                                                                                                       |
| `kafka.connect.cosmos.throughputControl.priorityLevel`                    | `None`       | Throughput control group priority level. The value can be None, High or Low.                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `kafka.connect.cosmos.throughputControl.globalControl.database`           | `""`         | Database which will be used for throughput global control.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `kafka.connect.cosmos.throughputControl.globalControl.container`          | `""`         | Container which will be used for throughput global control.                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `kafka.connect.cosmos.throughputControl.globalControl.renewIntervalInMS`  | `-1`         | This controls how often the client is going to update the throughput usage of itself and adjust its own throughput share based on the throughput usage of other clients. Default is 5s, the allowed min value is 5s.                                                                                                                                                                                                                                                                           |
| `kafka.connect.cosmos.throughputControl.globalControl.expireIntervalInMS` | `-1`         | This controls how quickly we will detect the client has been offline and hence allow its throughput share to be taken by other clients. Default is 11s, the allowed min value is 2 * renewIntervalInMS + 1.                                                                                                                                                                                                                                                                                    |

## Source Connector Configuration
| Config Property Name                                      | Default                  | Description                                                                                                                                                                                                                                          |
|:----------------------------------------------------------|:-------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| 
| `kafka.connect.cosmos.source.database.name`               | None                     | Cosmos DB database name.                                                                                                                                                                                                                             |
| `kafka.connect.cosmos.source.containers.includeAll`       | `false`                  | Flag to indicate whether reading from all containers.                                                                                                                                                                                                |
| `kafka.connect.cosmos.source.containers.includedList`     | `[]`                       | Containers included. This config will be ignored if kafka.connect.cosmos.source.includeAllContainers is true.                                                                                                                                        |
| `kafka.connect.cosmos.source.containers.topicMap`         | `[]`                       | A comma delimited list of Kafka topics mapped to Cosmos containers. For example: topic1#con1,topic2#con2. By default, container name is used as the name of the kafka topic to publish data to, can use this property to override the default config |
| `kafka.connect.cosmos.source.changeFeed.startFrom`        | `Beginning`              | ChangeFeed Start from settings (Now, Beginning or a certain point in time (UTC) for example 2020-02-10T14:15:03) - the default value is 'Beginning'.                                                                                                 |
| `kafka.connect.cosmos.source.changeFeed.mode`             | `LatestVersion`          | ChangeFeed mode (LatestVersion or AllVersionsAndDeletes).                                                                                                                                                                                            |
| `kafka.connect.cosmos.source.changeFeed.maxItemCountHint` | `1000`                   | The maximum number of documents returned in a single change feed request. But the number of items received might be higher than the specified value if multiple items are changed by the same transaction.                                           |
| `kafka.connect.cosmos.source.metadata.poll.delay.ms`      | `300000`                 | Indicates how often to check the metadata changes (including container split/merge, adding/removing/recreated containers). When changes are detected, it will reconfigure the tasks. Default is 5 minutes.                                           |
| `kafka.connect.cosmos.source.metadata.storage.topic`      | `_cosmos.metadata.topic` | The name of the topic where the metadata are stored. The metadata topic will be created if it does not already exist, else it will use the pre-created topic.                                                                                        |
| `kafka.connect.cosmos.source.messageKey.enabled`          | `true`                   | Whether to set the kafka record message key.                                                                                                                                                                                                         |
| `kafka.connect.cosmos.source.messageKey.field`            | `id`                     | The field to use as the message key.                                                                                                                                                                                                                 |

## Sink Connector Configuration
| Config Property Name                                                          | Default                   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|:------------------------------------------------------------------------------|:--------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| 
| `kafka.connect.cosmos.sink.database.name`                                     | `""`                      | Cosmos DB database name.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `kafka.connect.cosmos.sink.containers.topicMap`                               | `""`                      | A comma delimited list of Kafka topics mapped to Cosmos containers. For example: topic1#con1,topic2#con2.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `kafka.connect.cosmos.sink.errors.tolerance`                                  | `None`                    | Error tolerance level after exhausting all retries. `None` for fail on error. `All` for log and continue                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `kafka.connect.cosmos.sink.bulk.enabled`                                      | `true`                    | Flag to indicate whether Cosmos DB bulk mode is enabled for Sink connector. By default it is true.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `kafka.connect.cosmos.sink.bulk.maxConcurrentCosmosPartitions`                | `-1`                      | Cosmos DB Item Write Max Concurrent Cosmos Partitions. If not specified it will be determined based on the number of the container's physical partitions which would indicate every batch is expected to have data from all Cosmos physical partitions. If specified it indicates from at most how many Cosmos Physical Partitions each batch contains data. So this config can be used to make bulk processing more efficient when input data in each batch has been repartitioned to balance to how many Cosmos partitions each batch needs to write. This is mainly useful for very large containers (with hundreds of physical partitions.                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `kafka.connect.cosmos.sink.bulk.initialBatchSize`                             | `1`                       | Cosmos DB initial bulk micro batch size - a micro batch will be flushed to the backend when the number of documents enqueued exceeds this size - or the target payload size is met. The micro batch size is getting automatically tuned based on the throttling rate. By default the initial micro batch size is 1. Reduce this when you want to avoid that the first few requests consume too many RUs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `kafka.connect.cosmos.sink.write.strategy`                                    | `ItemOverwrite`           | Cosmos DB Item write Strategy: `ItemOverwrite` (using upsert), `ItemAppend` (using create, ignore pre-existing items i.e., Conflicts), `ItemDelete` (deletes based on id/pk of data frame), `ItemDeleteIfNotModified` (deletes based on id/pk of data frame if etag hasn't changed since collecting id/pk), `ItemOverwriteIfNotModified` (using create if etag is empty, update/replace with etag pre-condition otherwise, if document was updated the pre-condition failure is ignored), `ItemPatch` (Partial update all documents based on the patch config)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `kafka.connect.cosmos.sink.maxRetryCount`                                     | `10`                      | Cosmos DB max retry attempts on write failures for Sink connector. By default, the connector will retry on transient write errors for up to 10 times.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `kafka.connect.cosmos.sink.id.strategy`                                       | `ProvidedInValueStrategy` | A strategy used to populate the document with an ``id``. Valid strategies are: ``TemplateStrategy``, ``FullKeyStrategy``, ``KafkaMetadataStrategy``, ``ProvidedInKeyStrategy``, ``ProvidedInValueStrategy``. Configuration properties prefixed with``id.strategy`` are passed through to the strategy. For example, when using ``id.strategy=TemplateStrategy`` , the property ``id.strategy.template`` is passed through to the template strategy and used to specify the template string to be used in constructing the ``id``.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `kafka.connect.cosmos.sink.write.patch.defaultOperationType`                  | `Set`                     | Default Cosmos DB patch operation type. Supported ones include none, add, set, replace, remove, increment. Choose none for no-op, for others please reference [here](https://docs.microsoft.com/azure/cosmos-db/partial-document-update#supported-operations) for full context.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `kafka.connect.cosmos.sink.write.patch.property.configs`                      | `""`                      | Cosmos DB patch json property configs. It can contain multiple definitions matching the following patterns separated by comma. property(jsonProperty).op(operationType) or property(jsonProperty).path(patchInCosmosdb).op(operationType) - The difference of the second pattern is that it also allows you to define a different cosmosdb path. Note: It does not support nested json property config.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `kafka.connect.cosmos.sink.write.patch.filter`                                | `""`                      | Used for [Conditional patch](https://docs.microsoft.com/azure/cosmos-db/partial-document-update-getting-started#java)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
