// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.qumulo.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.qumulo.models.FileSystemResourceUpdate;
import com.azure.resourcemanager.qumulo.models.FileSystemResourceUpdateProperties;
import com.azure.resourcemanager.qumulo.models.ManagedServiceIdentity;
import com.azure.resourcemanager.qumulo.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.qumulo.models.MarketplaceDetails;
import com.azure.resourcemanager.qumulo.models.UserAssignedIdentity;
import com.azure.resourcemanager.qumulo.models.UserDetails;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class FileSystemResourceUpdateTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        FileSystemResourceUpdate model =
            BinaryData
                .fromString(
                    "{\"identity\":{\"principalId\":\"6f161f24-300f-48d9-b6da-d52d88899223\",\"tenantId\":\"fc6600cc-25a1-4c9e-953f-22eef1cfa627\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"ygxgispemvtz\":{\"principalId\":\"2964e873-1a37-41fc-ad33-dd463d1964cf\",\"clientId\":\"5df22e38-1792-438d-952e-418d06b9afb0\"},\"fublj\":{\"principalId\":\"5acec335-2b28-40e7-83e2-de7acd9071de\",\"clientId\":\"624acc7d-fbf8-45b2-921e-a2d0c4d9fc88\"},\"qeof\":{\"principalId\":\"b8d2cf28-d19b-4b4f-ab6d-ab8ad376fc9e\",\"clientId\":\"ce8055e3-3f8f-46c7-a11c-5fd43ee34754\"}}},\"tags\":{\"msmjqulngsntn\":\"qjhqjbas\"},\"properties\":{\"marketplaceDetails\":{\"marketplaceSubscriptionId\":\"zgcwrw\",\"planId\":\"lxxwrljdouskc\",\"offerId\":\"vkocrcjdkwtn\",\"publisherId\":\"xbnjbiksq\",\"marketplaceSubscriptionStatus\":\"Subscribed\"},\"userDetails\":{\"email\":\"sainqpjwnzl\"},\"delegatedSubnetId\":\"fmppe\",\"clusterLoginUrl\":\"vmgxsab\",\"privateIPs\":[\"duuji\",\"c\",\"czdzev\",\"dhkrwpdappdsbdk\"]}}")
                .toObject(FileSystemResourceUpdate.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.identity().type());
        Assertions.assertEquals("qjhqjbas", model.tags().get("msmjqulngsntn"));
        Assertions.assertEquals("zgcwrw", model.properties().marketplaceDetails().marketplaceSubscriptionId());
        Assertions.assertEquals("lxxwrljdouskc", model.properties().marketplaceDetails().planId());
        Assertions.assertEquals("vkocrcjdkwtn", model.properties().marketplaceDetails().offerId());
        Assertions.assertEquals("xbnjbiksq", model.properties().marketplaceDetails().publisherId());
        Assertions.assertEquals("sainqpjwnzl", model.properties().userDetails().email());
        Assertions.assertEquals("fmppe", model.properties().delegatedSubnetId());
        Assertions.assertEquals("vmgxsab", model.properties().clusterLoginUrl());
        Assertions.assertEquals("duuji", model.properties().privateIPs().get(0));
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        FileSystemResourceUpdate model =
            new FileSystemResourceUpdate()
                .withIdentity(
                    new ManagedServiceIdentity()
                        .withType(ManagedServiceIdentityType.SYSTEM_ASSIGNED)
                        .withUserAssignedIdentities(
                            mapOf(
                                "ygxgispemvtz",
                                new UserAssignedIdentity(),
                                "fublj",
                                new UserAssignedIdentity(),
                                "qeof",
                                new UserAssignedIdentity())))
                .withTags(mapOf("msmjqulngsntn", "qjhqjbas"))
                .withProperties(
                    new FileSystemResourceUpdateProperties()
                        .withMarketplaceDetails(
                            new MarketplaceDetails()
                                .withMarketplaceSubscriptionId("zgcwrw")
                                .withPlanId("lxxwrljdouskc")
                                .withOfferId("vkocrcjdkwtn")
                                .withPublisherId("xbnjbiksq"))
                        .withUserDetails(new UserDetails().withEmail("sainqpjwnzl"))
                        .withDelegatedSubnetId("fmppe")
                        .withClusterLoginUrl("vmgxsab")
                        .withPrivateIPs(Arrays.asList("duuji", "c", "czdzev", "dhkrwpdappdsbdk")));
        model = BinaryData.fromObject(model).toObject(FileSystemResourceUpdate.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.identity().type());
        Assertions.assertEquals("qjhqjbas", model.tags().get("msmjqulngsntn"));
        Assertions.assertEquals("zgcwrw", model.properties().marketplaceDetails().marketplaceSubscriptionId());
        Assertions.assertEquals("lxxwrljdouskc", model.properties().marketplaceDetails().planId());
        Assertions.assertEquals("vkocrcjdkwtn", model.properties().marketplaceDetails().offerId());
        Assertions.assertEquals("xbnjbiksq", model.properties().marketplaceDetails().publisherId());
        Assertions.assertEquals("sainqpjwnzl", model.properties().userDetails().email());
        Assertions.assertEquals("fmppe", model.properties().delegatedSubnetId());
        Assertions.assertEquals("vmgxsab", model.properties().clusterLoginUrl());
        Assertions.assertEquals("duuji", model.properties().privateIPs().get(0));
    }

    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
