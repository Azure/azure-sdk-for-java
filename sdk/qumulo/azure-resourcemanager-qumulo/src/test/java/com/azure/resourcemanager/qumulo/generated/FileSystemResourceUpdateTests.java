// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.qumulo.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.qumulo.models.FileSystemResourceUpdate;
import com.azure.resourcemanager.qumulo.models.FileSystemResourceUpdateProperties;
import com.azure.resourcemanager.qumulo.models.ManagedServiceIdentity;
import com.azure.resourcemanager.qumulo.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.qumulo.models.MarketplaceDetails;
import com.azure.resourcemanager.qumulo.models.UserAssignedIdentity;
import com.azure.resourcemanager.qumulo.models.UserDetails;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class FileSystemResourceUpdateTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        FileSystemResourceUpdate model =
            BinaryData
                .fromString(
                    "{\"identity\":{\"principalId\":\"4b1a2538-e8a5-47e1-917e-6b9ffeb25f4e\",\"tenantId\":\"8f4af77e-d22d-4280-804e-77bd11a86a2b\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"ygxgispemvtz\":{\"principalId\":\"efed4d7a-da98-434e-a0c0-0f58a35eb9bf\",\"clientId\":\"fcab991b-a671-406f-938d-0b8d759461b6\"},\"fublj\":{\"principalId\":\"592becd0-f7fd-4722-9d21-2188cc22c328\",\"clientId\":\"a471e004-87bc-4215-b5ac-e8a0c7357e0a\"},\"qeof\":{\"principalId\":\"e1a10122-1ec8-494e-88aa-a311411ab92e\",\"clientId\":\"34f12bfc-6801-4076-b234-24905086e8e3\"}}},\"tags\":{\"msmjqulngsntn\":\"qjhqjbas\"},\"properties\":{\"marketplaceDetails\":{\"marketplaceSubscriptionId\":\"zgcwrw\",\"planId\":\"lxxwrljdouskc\",\"offerId\":\"vkocrcjdkwtn\",\"publisherId\":\"xbnjbiksq\",\"marketplaceSubscriptionStatus\":\"Subscribed\"},\"userDetails\":{\"email\":\"sainqpjwnzl\"},\"delegatedSubnetId\":\"fmppe\",\"clusterLoginUrl\":\"vmgxsab\",\"privateIPs\":[\"duuji\",\"c\",\"czdzev\",\"dhkrwpdappdsbdk\"]}}")
                .toObject(FileSystemResourceUpdate.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.identity().type());
        Assertions.assertEquals("qjhqjbas", model.tags().get("msmjqulngsntn"));
        Assertions.assertEquals("zgcwrw", model.properties().marketplaceDetails().marketplaceSubscriptionId());
        Assertions.assertEquals("lxxwrljdouskc", model.properties().marketplaceDetails().planId());
        Assertions.assertEquals("vkocrcjdkwtn", model.properties().marketplaceDetails().offerId());
        Assertions.assertEquals("xbnjbiksq", model.properties().marketplaceDetails().publisherId());
        Assertions.assertEquals("sainqpjwnzl", model.properties().userDetails().email());
        Assertions.assertEquals("fmppe", model.properties().delegatedSubnetId());
        Assertions.assertEquals("vmgxsab", model.properties().clusterLoginUrl());
        Assertions.assertEquals("duuji", model.properties().privateIPs().get(0));
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        FileSystemResourceUpdate model =
            new FileSystemResourceUpdate()
                .withIdentity(
                    new ManagedServiceIdentity()
                        .withType(ManagedServiceIdentityType.SYSTEM_ASSIGNED)
                        .withUserAssignedIdentities(
                            mapOf(
                                "ygxgispemvtz",
                                new UserAssignedIdentity(),
                                "fublj",
                                new UserAssignedIdentity(),
                                "qeof",
                                new UserAssignedIdentity())))
                .withTags(mapOf("msmjqulngsntn", "qjhqjbas"))
                .withProperties(
                    new FileSystemResourceUpdateProperties()
                        .withMarketplaceDetails(
                            new MarketplaceDetails()
                                .withMarketplaceSubscriptionId("zgcwrw")
                                .withPlanId("lxxwrljdouskc")
                                .withOfferId("vkocrcjdkwtn")
                                .withPublisherId("xbnjbiksq"))
                        .withUserDetails(new UserDetails().withEmail("sainqpjwnzl"))
                        .withDelegatedSubnetId("fmppe")
                        .withClusterLoginUrl("vmgxsab")
                        .withPrivateIPs(Arrays.asList("duuji", "c", "czdzev", "dhkrwpdappdsbdk")));
        model = BinaryData.fromObject(model).toObject(FileSystemResourceUpdate.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.identity().type());
        Assertions.assertEquals("qjhqjbas", model.tags().get("msmjqulngsntn"));
        Assertions.assertEquals("zgcwrw", model.properties().marketplaceDetails().marketplaceSubscriptionId());
        Assertions.assertEquals("lxxwrljdouskc", model.properties().marketplaceDetails().planId());
        Assertions.assertEquals("vkocrcjdkwtn", model.properties().marketplaceDetails().offerId());
        Assertions.assertEquals("xbnjbiksq", model.properties().marketplaceDetails().publisherId());
        Assertions.assertEquals("sainqpjwnzl", model.properties().userDetails().email());
        Assertions.assertEquals("fmppe", model.properties().delegatedSubnetId());
        Assertions.assertEquals("vmgxsab", model.properties().clusterLoginUrl());
        Assertions.assertEquals("duuji", model.properties().privateIPs().get(0));
    }

    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
