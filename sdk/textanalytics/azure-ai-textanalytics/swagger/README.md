# Azure Cognitive Service - Text Analytics for Java

> see https://aka.ms/autorest

### Setup
```ps
Fork and clone https://github.com/Azure/autorest.java 
Add a system envirement variable, `AUTOREST_HOME=C:\work\autorestHome`, which contains all autorest related pacakges.
such as `@autorest_core`, `@autorest_java`, `@autorest_modelerfour`. 

git checkout main
git submodule update --init --recursive
mvn package -Dlocal
npm install
npm install -g autorest
```

### Generation
```ps
cd <swagger-folder>
autorest
```

Alternately, for using the specific autorest java version, use `--use:@autorest/java@{specific-version}`. The version 
will be downloaded and compiled locally in `AUTOREST_HOME`.

```ps
cd <swagger-folder>
autorest --java --use:@autorest/java@4.1.9 README.md
```

### Code generation settings
``` yaml
use: '@autorest/java@4.1.9'
input-file: https://raw.githubusercontent.com/Azure/azure-rest-api-specs/527f6d35fb0d85c48210ca0f6f6f42814d63bd33/specification/cognitiveservices/data-plane/Language/preview/2022-10-01-preview/analyzetext.json
java: true
output-folder: ..\
generate-client-as-impl: true
namespace: com.azure.ai.textanalytics
generate-client-interfaces: false
enable-sync-stack: true
license-header: MICROSOFT_MIT_SMALL
add-context-parameter: true
models-subpackage: implementation.models
customization-class: TextAnalyticsCustomization
custom-types-subpackage: models
context-client-method-parameter: true
service-interface-as-public: true
generic-response-type: true
```

### Customization

```java
import org.slf4j.Logger;

/**
 * This class contains the customization code to customize the AutoRest generated code for TextAnalytics.
 */
public class TextAnalyticsCustomization extends Customization {
    private static final String nextLine = System.lineSeparator();
    private static final String CLASS_HEADER = 
        "// Copyright (c) Microsoft Corporation. All rights reserved." + nextLine +
        "// Licensed under the MIT License." + nextLine +
        "// Code generated by Microsoft (R) AutoRest Code Generator." + nextLine + nextLine +
        "package com.azure.ai.textanalytics.implementation.models;" + nextLine + nextLine;
    
    @Override
    public void customize(LibraryCustomization customization, Logger logger) {
        PackageCustomization implementationPackage = customization.getPackage("com.azure.ai.textanalytics.implementation");
        // Explore AnalyzeTextsImpl to public TextAnalyticsAsyncClient, they are in different package.
        int publicModifier = 1;
        changeConstructorModifier(implementationPackage.getClass("AnalyzeTextsImpl"), "AnalyzeTextsImpl(MicrosoftCognitiveLanguageServiceTextAnalysisImpl client)", publicModifier);
        // Customize HealthcareEntitiesDocumentResult
        customization.getRawEditor()
            .replaceFile(
                "src/main/java/com/azure/ai/textanalytics/implementation/models/HealthcareEntitiesDocumentResult.java",
                createHealthcareEntitiesDocumentResult());
        // Customize HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage
        customization.getRawEditor()
            .replaceFile(
                "src/main/java/com/azure/ai/textanalytics/implementation/models/HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage.java",
                createHealthcareEntitiesDocumentResultWithDocumentDetectedLanguage());

    }
    
    private String createHealthcareEntitiesDocumentResultWithDocumentDetectedLanguage() {
        StringBuilder sb = new StringBuilder();
        sb.append(CLASS_HEADER);
        sb.append("import com.azure.core.annotation.Fluent;").append(nextLine);
        sb.append("import com.azure.core.util.BinaryData;").append(nextLine);
        sb.append("import com.fasterxml.jackson.annotation.JsonProperty;").append(nextLine);
        sb.append("import java.util.List;").append(nextLine);
        sb.append("import java.util.Map;").append(nextLine);
        sb.append(nextLine);
        sb.append("/** The HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage model. */").append(nextLine);
        sb.append("@Fluent").append(nextLine);
        sb.append("public final class HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage").append(nextLine);
        sb.append("        extends HealthcareEntitiesDocumentResult {").append(nextLine);
        sb.append("    /*").append(nextLine);
        sb.append("     * If 'language' is set to 'auto' for the document in the request this field will contain a 2 letter ISO 639-1").append(nextLine);
        sb.append("     * representation of the language detected for this document.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    @JsonProperty(value = \"detectedLanguage\")").append(nextLine);
        sb.append("    private String detectedLanguage;").append(nextLine);
        sb.append(nextLine);
        sb.append("    /** Creates an instance of HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage class. */").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage() {}").append(nextLine);
        sb.append(nextLine);
        // Getters and Setters
        sb.append("    /**").append(nextLine);
        sb.append("     * Get the detectedLanguage property: If 'language' is set to 'auto' for the document in the request this field will").append(nextLine);
        sb.append("     * contain a 2 letter ISO 639-1 representation of the language detected for this document.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @return the detectedLanguage value.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public String getDetectedLanguage() {").append(nextLine);
        sb.append("        return this.detectedLanguage;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /**").append(nextLine);
        sb.append("     * Set the detectedLanguage property: If 'language' is set to 'auto' for the document in the request this field will").append(nextLine);
        sb.append("     * contain a 2 letter ISO 639-1 representation of the language detected for this document.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @param detectedLanguage the detectedLanguage value to set.").append(nextLine);
        sb.append("     * @return the HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage object itself.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage setDetectedLanguage(String detectedLanguage) {").append(nextLine);
        sb.append("        this.detectedLanguage = detectedLanguage;").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage setEntities(List<HealthcareEntity> entities) {").append(nextLine);
        sb.append("        super.setEntities(entities);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage setRelations(").append(nextLine);
        sb.append("            List<HealthcareRelation> relations) {").append(nextLine);
        sb.append("        super.setRelations(relations);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage setFhirBundle(BinaryData fhirBundle) {").append(nextLine);
        sb.append("        super.setFhirBundle(fhirBundle);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage setId(String id) {").append(nextLine);
        sb.append("        super.setId(id);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage setWarnings(List<DocumentWarning> warnings) {").append(nextLine);
        sb.append("        super.setWarnings(warnings);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResultWithDocumentDetectedLanguage setStatistics(DocumentStatistics statistics) {").append(nextLine);
        sb.append("        super.setStatistics(statistics);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append("}");
        sb.append(nextLine);
        return sb.toString();
    }
    
    private String createHealthcareEntitiesDocumentResult() {
        StringBuilder sb = new StringBuilder();
        sb.append(CLASS_HEADER);
        sb.append("import com.azure.core.annotation.Fluent;").append(nextLine);
        sb.append("import com.azure.core.util.BinaryData;").append(nextLine);
        sb.append("import com.fasterxml.jackson.annotation.JsonProperty;").append(nextLine);
        sb.append("import java.util.List;").append(nextLine);
        sb.append("import java.util.Map;").append(nextLine);
        sb.append(nextLine);
        sb.append("/** The HealthcareEntitiesDocumentResult model. */").append(nextLine);
        sb.append("@Fluent").append(nextLine);
        sb.append("public class HealthcareEntitiesDocumentResult extends DocumentResult {").append(nextLine);
        sb.append("    /*").append(nextLine);
        sb.append("     * Healthcare entities.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    @JsonProperty(value = \"entities\", required = true)").append(nextLine);
        sb.append("    private List<HealthcareEntity> entities;").append(nextLine);
        sb.append(nextLine);
        sb.append("    /*").append(nextLine);
        sb.append("     * Healthcare entity relations.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    @JsonProperty(value = \"relations\", required = true)").append(nextLine);
        sb.append("    private List<HealthcareRelation> relations;").append(nextLine);
        sb.append(nextLine);
        sb.append("    /*").append(nextLine);
        sb.append("     * JSON bundle containing a FHIR compatible object for consumption in other Healthcare tools. For additional").append(nextLine);
        sb.append("     * information see https://www.hl7.org/fhir/overview.html.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    @JsonProperty(value = \"fhirBundle\")").append(nextLine);
        sb.append("    private BinaryData fhirBundle;").append(nextLine); // Change to BinaryData from Map<String, Object>
        sb.append(nextLine);
        sb.append("    /** Creates an instance of HealthcareEntitiesDocumentResult class. */").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResult() {}").append(nextLine);
        sb.append(nextLine);
        // Getters and Setters
        sb.append("    /**").append(nextLine);
        sb.append("     * Get the entities property: Healthcare entities.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @return the entities value.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public List<HealthcareEntity> getEntities() {").append(nextLine);      
        sb.append("        return this.entities;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /**").append(nextLine);
        sb.append("     * Set the entities property: Healthcare entities.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @param entities the entities value to set.").append(nextLine);
        sb.append("     * @return the HealthcareEntitiesDocumentResult object itself.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResult setEntities(List<HealthcareEntity> entities) {").append(nextLine);
        sb.append("        this.entities = entities;").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);
        
        sb.append("    /**").append(nextLine);
        sb.append("     * Get the relations property: Healthcare entity relations.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @return the relations value.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public List<HealthcareRelation> getRelations() {").append(nextLine);
        sb.append("        return this.relations;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /**").append(nextLine);
        sb.append("     * Set the relations property: Healthcare entity relations.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @param relations the relations value to set.").append(nextLine);
        sb.append("     * @return the HealthcareEntitiesDocumentResult object itself.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResult setRelations(List<HealthcareRelation> relations) {").append(nextLine);
        sb.append("        this.relations = relations;").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /**").append(nextLine);
        sb.append("     * Get the fhirBundle property: JSON bundle containing a FHIR compatible object for consumption in other Healthcare").append(nextLine);
        sb.append("     * tools. For additional information see https://www.hl7.org/fhir/overview.html.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @return the fhirBundle value.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public BinaryData getFhirBundle() {").append(nextLine);
        sb.append("        return this.fhirBundle;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /**").append(nextLine);
        sb.append("     * Set the fhirBundle property: JSON bundle containing a FHIR compatible object for consumption in other Healthcare").append(nextLine);
        sb.append("     * tools. For additional information see https://www.hl7.org/fhir/overview.html.").append(nextLine);
        sb.append("     *").append(nextLine);
        sb.append("     * @param fhirBundle the fhirBundle value to set.").append(nextLine);
        sb.append("     * @return the HealthcareEntitiesDocumentResult object itself.").append(nextLine);
        sb.append("     */").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResult setFhirBundle(BinaryData fhirBundle) {").append(nextLine);
        sb.append("        this.fhirBundle = fhirBundle;").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);
        
        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResult setId(String id) {").append(nextLine);
        sb.append("        super.setId(id);").append(nextLine);      
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResult setWarnings(List<DocumentWarning> warnings) {").append(nextLine);
        sb.append("        super.setWarnings(warnings);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append(nextLine);

        sb.append("    /** {@inheritDoc} */").append(nextLine);
        sb.append("    @Override").append(nextLine);
        sb.append("    public HealthcareEntitiesDocumentResult setStatistics(DocumentStatistics statistics) {").append(nextLine);
        sb.append("        super.setStatistics(statistics);").append(nextLine);
        sb.append("        return this;").append(nextLine);
        sb.append("    }").append(nextLine);
        sb.append("}");
        sb.append(nextLine);
        return sb.toString();
    }
    
    private void changeConstructorModifier(ClassCustomization classCustomization, String constructorInText, int modifierLevel) {
        ConstructorCustomization constructor = classCustomization.getConstructor(constructorInText);
        constructor.setModifier(1);
    }
}

```
