// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.managednetworkfabric.generated;

import com.azure.resourcemanager.managednetworkfabric.models.BfdPatchConfiguration;
import com.azure.resourcemanager.managednetworkfabric.models.IdentitySelectorPatch;
import com.azure.resourcemanager.managednetworkfabric.models.ManagedServiceIdentityPatch;
import com.azure.resourcemanager.managednetworkfabric.models.ManagedServiceIdentitySelectorType;
import com.azure.resourcemanager.managednetworkfabric.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.managednetworkfabric.models.ManagementNetworkPatchConfiguration;
import com.azure.resourcemanager.managednetworkfabric.models.NNIDerivedUniqueRouteDistinguisherConfigurationState;
import com.azure.resourcemanager.managednetworkfabric.models.NetworkFabric;
import com.azure.resourcemanager.managednetworkfabric.models.NetworkFabricPatchProperties;
import com.azure.resourcemanager.managednetworkfabric.models.PeeringOption;
import com.azure.resourcemanager.managednetworkfabric.models.RouteTargetPatchInformation;
import com.azure.resourcemanager.managednetworkfabric.models.StorageAccountPatchConfiguration;
import com.azure.resourcemanager.managednetworkfabric.models.TerminalServerPatchConfiguration;
import com.azure.resourcemanager.managednetworkfabric.models.UniqueRouteDistinguisherConfigurationState;
import com.azure.resourcemanager.managednetworkfabric.models.UniqueRouteDistinguisherPatchProperties;
import com.azure.resourcemanager.managednetworkfabric.models.UserAssignedIdentity;
import com.azure.resourcemanager.managednetworkfabric.models.VpnConfigurationPatchableProperties;
import com.azure.resourcemanager.managednetworkfabric.models.VpnOptionAPatchProperties;
import com.azure.resourcemanager.managednetworkfabric.models.VpnOptionBPatchProperties;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

/**
 * Samples for NetworkFabrics Update.
 */
public final class NetworkFabricsUpdateSamples {
    /*
     * x-ms-original-file: 2024-06-15-preview/NetworkFabrics_Update.json
     */
    /**
     * Sample code: NetworkFabrics_Update_MaximumSet_Gen.
     * 
     * @param manager Entry point to FilesharesManager.
     */
    public static void
        networkFabricsUpdateMaximumSetGen(com.azure.resourcemanager.managednetworkfabric.FilesharesManager manager) {
        NetworkFabric resource = manager.networkFabrics()
            .getByResourceGroupWithResponse("example-rg", "example-fabric", com.azure.core.util.Context.NONE)
            .getValue();
        resource.update()
            .withTags(mapOf("keyId", "fakeTokenPlaceholder"))
            .withProperties(new NetworkFabricPatchProperties().withAnnotation("annotation1")
                .withRackCount(6)
                .withServerCountPerRack(10)
                .withIpv4Prefix("10.18.0.0/17")
                .withIpv6Prefix("3FFE:FFFF:0:CD40::/60")
                .withFabricASN(12345L)
                .withStorageAccountConfiguration(new StorageAccountPatchConfiguration().withStorageAccountId(
                    "/subscriptions/1234ABCD-0A1B-1234-5678-123456ABCDEF/resourceGroups/example-rg/providers/Microsoft.Storage/storageAccounts/nfStorage")
                    .withStorageAccountIdentity(new IdentitySelectorPatch()
                        .withIdentityType(ManagedServiceIdentitySelectorType.USER_ASSIGNED_IDENTITY)
                        .withUserAssignedIdentityResourceId(
                            "/subscriptions/12345678-1234-1234-1234-123456789abc/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/my-id")))
                .withTerminalServerConfiguration(new TerminalServerPatchConfiguration().withUsername("username1")
                    .withPassword("fakeTokenPlaceholder")
                    .withSerialNumber("1234567")
                    .withPrimaryIpv4Prefix("10.0.0.12/30")
                    .withPrimaryIpv6Prefix("4FFE:FFFF:0:CD30::a8/127")
                    .withSecondaryIpv4Prefix("40.0.0.14/30")
                    .withSecondaryIpv6Prefix("6FFE:FFFF:0:CD30::ac/127"))
                .withManagementNetworkConfiguration(new ManagementNetworkPatchConfiguration()
                    .withInfrastructureVpnConfiguration(new VpnConfigurationPatchableProperties()
                        .withNetworkToNetworkInterconnectId(
                            "/subscriptions/1234ABCD-0A1B-1234-5678-123456ABCDEF/resourceGroups/example-rg/providers/Microsoft.ManagedNetworkFabric/networkFabrics/example-fabric/networkToNetworkInterconnects/example-nni")
                        .withPeeringOption(PeeringOption.OPTIONA)
                        .withOptionBProperties(
                            new VpnOptionBPatchProperties().withImportRouteTargets(Arrays.asList("65046:10050"))
                                .withExportRouteTargets(Arrays.asList("65046:10050"))
                                .withRouteTargets(new RouteTargetPatchInformation()
                                    .withImportIpv4RouteTargets(Arrays.asList("65046:10050"))
                                    .withImportIpv6RouteTargets(Arrays.asList("65046:10050"))
                                    .withExportIpv4RouteTargets(Arrays.asList("65046:10050"))
                                    .withExportIpv6RouteTargets(Arrays.asList("65046:10050"))))
                        .withOptionAProperties(new VpnOptionAPatchProperties().withMtu(1501)
                            .withVlanId(3001)
                            .withPeerASN(1235L)
                            .withBfdConfiguration(
                                new BfdPatchConfiguration().withIntervalInMilliSeconds(300).withMultiplier(10))
                            .withPrimaryIpv4Prefix("10.0.0.12/30")
                            .withPrimaryIpv6Prefix("4FFE:FFFF:0:CD30::a8/127")
                            .withSecondaryIpv4Prefix("20.0.0.13/30")
                            .withSecondaryIpv6Prefix("6FFE:FFFF:0:CD30::ac/127")))
                    .withWorkloadVpnConfiguration(new VpnConfigurationPatchableProperties()
                        .withNetworkToNetworkInterconnectId(
                            "/subscriptions/1234ABCD-0A1B-1234-5678-123456ABCDEF/resourceGroups/example-rg/providers/Microsoft.ManagedNetworkFabric/networkFabrics/example-fabric/networkToNetworkInterconnects/example-nni")
                        .withPeeringOption(PeeringOption.OPTIONA)
                        .withOptionBProperties(
                            new VpnOptionBPatchProperties().withImportRouteTargets(Arrays.asList("65046:10050"))
                                .withExportRouteTargets(Arrays.asList("65046:10050"))
                                .withRouteTargets(new RouteTargetPatchInformation()
                                    .withImportIpv4RouteTargets(Arrays.asList("65046:10050"))
                                    .withImportIpv6RouteTargets(Arrays.asList("65046:10050"))
                                    .withExportIpv4RouteTargets(Arrays.asList("65046:10050"))
                                    .withExportIpv6RouteTargets(Arrays.asList("65046:10050"))))
                        .withOptionAProperties(new VpnOptionAPatchProperties().withMtu(1500)
                            .withVlanId(3000)
                            .withPeerASN(61234L)
                            .withBfdConfiguration(
                                new BfdPatchConfiguration().withIntervalInMilliSeconds(300).withMultiplier(10))
                            .withPrimaryIpv4Prefix("10.0.0.14/30")
                            .withPrimaryIpv6Prefix("2FFE:FFFF:0:CD30::a7/126")
                            .withSecondaryIpv4Prefix("10.0.0.15/30")
                            .withSecondaryIpv6Prefix("2FFE:FFFF:0:CD30::ac/126"))))
                .withHardwareAlertThreshold(43)
                .withControlPlaneAcls(Arrays.asList(
                    "/subscriptions/xxxxxx/resourceGroups/resourcegroupname/providers/Microsoft.ManagedNetworkFabric/accessControlLists/example-acl"))
                .withTrustedIpPrefixes(Arrays.asList(
                    "/subscriptions/xxxxxx/resourceGroups/resourcegroupname/providers/Microsoft.ManagedNetworkFabric/ipPrefixes/example-prefix"))
                .withUniqueRdConfiguration(new UniqueRouteDistinguisherPatchProperties()
                    .withUniqueRdConfigurationState(UniqueRouteDistinguisherConfigurationState.ENABLED)
                    .withNniDerivedUniqueRdConfigurationState(
                        NNIDerivedUniqueRouteDistinguisherConfigurationState.ENABLED)))
            .withIdentity(new ManagedServiceIdentityPatch().withType(ManagedServiceIdentityType.NONE)
                .withUserAssignedIdentities(mapOf("key872", new UserAssignedIdentity())))
            .apply();
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
