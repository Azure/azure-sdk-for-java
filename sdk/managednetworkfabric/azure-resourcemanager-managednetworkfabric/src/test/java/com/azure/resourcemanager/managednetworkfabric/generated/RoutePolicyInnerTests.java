// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.managednetworkfabric.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.managednetworkfabric.fluent.models.RoutePolicyInner;
import com.azure.resourcemanager.managednetworkfabric.models.ActionIpCommunityProperties;
import com.azure.resourcemanager.managednetworkfabric.models.ActionIpExtendedCommunityProperties;
import com.azure.resourcemanager.managednetworkfabric.models.AddressFamilyType;
import com.azure.resourcemanager.managednetworkfabric.models.CommunityActionTypes;
import com.azure.resourcemanager.managednetworkfabric.models.IpCommunityIdList;
import com.azure.resourcemanager.managednetworkfabric.models.IpExtendedCommunityIdList;
import com.azure.resourcemanager.managednetworkfabric.models.RoutePolicyActionType;
import com.azure.resourcemanager.managednetworkfabric.models.RoutePolicyConditionType;
import com.azure.resourcemanager.managednetworkfabric.models.RoutePolicyProperties;
import com.azure.resourcemanager.managednetworkfabric.models.RoutePolicyStatementProperties;
import com.azure.resourcemanager.managednetworkfabric.models.StatementActionProperties;
import com.azure.resourcemanager.managednetworkfabric.models.StatementConditionProperties;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class RoutePolicyInnerTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        RoutePolicyInner model = BinaryData.fromString(
            "{\"properties\":{\"annotation\":\"tvvqtmvifgcvsim\",\"defaultAction\":\"Deny\",\"statements\":[{\"annotation\":\"icxgosnx\",\"sequenceNumber\":5762882342956883834,\"condition\":{\"ipCommunityIds\":[\"dfmzxao\",\"lhm\",\"jcnn\",\"sbnuc\"],\"ipExtendedCommunityIds\":[\"paqoqbvejo\"],\"type\":\"Or\",\"ipPrefixId\":\"ovlznklel\"},\"action\":{\"localPreference\":8931367816214973160,\"actionType\":\"Continue\",\"ipCommunityProperties\":{\"add\":{},\"delete\":{},\"set\":{}},\"ipExtendedCommunityProperties\":{\"add\":{},\"delete\":{},\"set\":{}}}},{\"annotation\":\"kxakruuptiicgvp\",\"sequenceNumber\":5890618214927776636,\"condition\":{\"ipCommunityIds\":[\"cnpxiema\",\"mztjekxsnnbrysg\",\"tfmocn\",\"bblrtbofz\"],\"ipExtendedCommunityIds\":[\"uifwxudynoh\",\"cqxu\",\"jxug\",\"crrfbplvhmh\"],\"type\":\"Or\",\"ipPrefixId\":\"djlz\"},\"action\":{\"localPreference\":462446323547379284,\"actionType\":\"Permit\",\"ipCommunityProperties\":{\"add\":{},\"delete\":{},\"set\":{}},\"ipExtendedCommunityProperties\":{\"add\":{},\"delete\":{},\"set\":{}}}}],\"networkFabricId\":\"rservpvesors\",\"addressFamilyType\":\"IPv4\",\"lastOperation\":{\"details\":\"mex\"},\"configurationState\":\"Failed\",\"provisioningState\":\"Accepted\",\"administrativeState\":\"MAT\"},\"location\":\"ydyvt\",\"tags\":{\"t\":\"irlunsskydi\",\"ocsvjekejchxzj\":\"jx\",\"yfyixecmasjnfgng\":\"cwuzs\"},\"id\":\"aojeeyvfxb\",\"name\":\"ckmoaljaxvwxt\",\"type\":\"uzhvojyffwflbk\"}")
            .toObject(RoutePolicyInner.class);
        Assertions.assertEquals("ydyvt", model.location());
        Assertions.assertEquals("irlunsskydi", model.tags().get("t"));
        Assertions.assertEquals("tvvqtmvifgcvsim", model.properties().annotation());
        Assertions.assertEquals(CommunityActionTypes.DENY, model.properties().defaultAction());
        Assertions.assertEquals("icxgosnx", model.properties().statements().get(0).annotation());
        Assertions.assertEquals(5762882342956883834L, model.properties().statements().get(0).sequenceNumber());
        Assertions.assertEquals("dfmzxao", model.properties().statements().get(0).condition().ipCommunityIds().get(0));
        Assertions.assertEquals("paqoqbvejo",
            model.properties().statements().get(0).condition().ipExtendedCommunityIds().get(0));
        Assertions.assertEquals(RoutePolicyConditionType.OR, model.properties().statements().get(0).condition().type());
        Assertions.assertEquals("ovlznklel", model.properties().statements().get(0).condition().ipPrefixId());
        Assertions.assertEquals(8931367816214973160L,
            model.properties().statements().get(0).action().localPreference());
        Assertions.assertEquals(RoutePolicyActionType.CONTINUE,
            model.properties().statements().get(0).action().actionType());
        Assertions.assertEquals("rservpvesors", model.properties().networkFabricId());
        Assertions.assertEquals(AddressFamilyType.IPV4, model.properties().addressFamilyType());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        RoutePolicyInner model = new RoutePolicyInner().withLocation("ydyvt")
            .withTags(mapOf("t", "irlunsskydi", "ocsvjekejchxzj", "jx", "yfyixecmasjnfgng", "cwuzs"))
            .withProperties(new RoutePolicyProperties().withAnnotation("tvvqtmvifgcvsim")
                .withDefaultAction(CommunityActionTypes.DENY)
                .withStatements(Arrays.asList(
                    new RoutePolicyStatementProperties().withAnnotation("icxgosnx")
                        .withSequenceNumber(5762882342956883834L)
                        .withCondition(new StatementConditionProperties()
                            .withIpCommunityIds(Arrays.asList("dfmzxao", "lhm", "jcnn", "sbnuc"))
                            .withIpExtendedCommunityIds(Arrays.asList("paqoqbvejo"))
                            .withType(RoutePolicyConditionType.OR)
                            .withIpPrefixId("ovlznklel"))
                        .withAction(new StatementActionProperties().withLocalPreference(8931367816214973160L)
                            .withActionType(RoutePolicyActionType.CONTINUE)
                            .withIpCommunityProperties(
                                new ActionIpCommunityProperties().withAdd(new IpCommunityIdList())
                                    .withDelete(new IpCommunityIdList())
                                    .withSet(new IpCommunityIdList()))
                            .withIpExtendedCommunityProperties(
                                new ActionIpExtendedCommunityProperties().withAdd(new IpExtendedCommunityIdList())
                                    .withDelete(new IpExtendedCommunityIdList())
                                    .withSet(new IpExtendedCommunityIdList()))),
                    new RoutePolicyStatementProperties().withAnnotation("kxakruuptiicgvp")
                        .withSequenceNumber(5890618214927776636L)
                        .withCondition(new StatementConditionProperties()
                            .withIpCommunityIds(Arrays.asList("cnpxiema", "mztjekxsnnbrysg", "tfmocn", "bblrtbofz"))
                            .withIpExtendedCommunityIds(Arrays.asList("uifwxudynoh", "cqxu", "jxug", "crrfbplvhmh"))
                            .withType(RoutePolicyConditionType.OR)
                            .withIpPrefixId("djlz"))
                        .withAction(new StatementActionProperties().withLocalPreference(462446323547379284L)
                            .withActionType(RoutePolicyActionType.PERMIT)
                            .withIpCommunityProperties(
                                new ActionIpCommunityProperties().withAdd(new IpCommunityIdList())
                                    .withDelete(new IpCommunityIdList())
                                    .withSet(new IpCommunityIdList()))
                            .withIpExtendedCommunityProperties(
                                new ActionIpExtendedCommunityProperties().withAdd(new IpExtendedCommunityIdList())
                                    .withDelete(new IpExtendedCommunityIdList())
                                    .withSet(new IpExtendedCommunityIdList())))))
                .withNetworkFabricId("rservpvesors")
                .withAddressFamilyType(AddressFamilyType.IPV4));
        model = BinaryData.fromObject(model).toObject(RoutePolicyInner.class);
        Assertions.assertEquals("ydyvt", model.location());
        Assertions.assertEquals("irlunsskydi", model.tags().get("t"));
        Assertions.assertEquals("tvvqtmvifgcvsim", model.properties().annotation());
        Assertions.assertEquals(CommunityActionTypes.DENY, model.properties().defaultAction());
        Assertions.assertEquals("icxgosnx", model.properties().statements().get(0).annotation());
        Assertions.assertEquals(5762882342956883834L, model.properties().statements().get(0).sequenceNumber());
        Assertions.assertEquals("dfmzxao", model.properties().statements().get(0).condition().ipCommunityIds().get(0));
        Assertions.assertEquals("paqoqbvejo",
            model.properties().statements().get(0).condition().ipExtendedCommunityIds().get(0));
        Assertions.assertEquals(RoutePolicyConditionType.OR, model.properties().statements().get(0).condition().type());
        Assertions.assertEquals("ovlznklel", model.properties().statements().get(0).condition().ipPrefixId());
        Assertions.assertEquals(8931367816214973160L,
            model.properties().statements().get(0).action().localPreference());
        Assertions.assertEquals(RoutePolicyActionType.CONTINUE,
            model.properties().statements().get(0).action().actionType());
        Assertions.assertEquals("rservpvesors", model.properties().networkFabricId());
        Assertions.assertEquals(AddressFamilyType.IPV4, model.properties().addressFamilyType());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
