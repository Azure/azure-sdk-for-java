// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.managednetworkfabric.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.managednetworkfabric.fluent.models.L3IsolationDomainInner;
import com.azure.resourcemanager.managednetworkfabric.models.AggregateRoute;
import com.azure.resourcemanager.managednetworkfabric.models.AggregateRouteConfiguration;
import com.azure.resourcemanager.managednetworkfabric.models.ConnectedSubnetRoutePolicy;
import com.azure.resourcemanager.managednetworkfabric.models.L3ExportRoutePolicy;
import com.azure.resourcemanager.managednetworkfabric.models.L3IsolationDomainProperties;
import com.azure.resourcemanager.managednetworkfabric.models.L3UniqueRouteDistinguisherProperties;
import com.azure.resourcemanager.managednetworkfabric.models.RedistributeConnectedSubnets;
import com.azure.resourcemanager.managednetworkfabric.models.RedistributeStaticRoutes;
import com.azure.resourcemanager.managednetworkfabric.models.RoutePrefixLimitProperties;
import com.azure.resourcemanager.managednetworkfabric.models.StaticRouteRoutePolicy;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class L3IsolationDomainInnerTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        L3IsolationDomainInner model = BinaryData.fromString(
            "{\"properties\":{\"annotation\":\"jczjnciuiyqv\",\"redistributeConnectedSubnets\":\"True\",\"redistributeStaticRoutes\":\"True\",\"aggregateRouteConfiguration\":{\"ipv4Routes\":[{\"prefix\":\"i\"},{\"prefix\":\"qqzlgcndhz\"},{\"prefix\":\"rr\"},{\"prefix\":\"cfsrhkhgsn\"}],\"ipv6Routes\":[{\"prefix\":\"wkpphefsb\"},{\"prefix\":\"xlb\"},{\"prefix\":\"xomeikjclwzacn\"}]},\"connectedSubnetRoutePolicy\":{\"exportRoutePolicy\":{\"exportIpv4RoutePolicyId\":\"suqtaazyqbx\",\"exportIpv6RoutePolicyId\":\"oyfpuq\"}},\"networkFabricId\":\"iqezxlhdj\",\"staticRouteRoutePolicy\":{\"exportRoutePolicy\":{\"exportIpv4RoutePolicyId\":\"a\",\"exportIpv6RoutePolicyId\":\"vpsozjiihjri\"}},\"uniqueRdConfiguration\":{\"uniqueRds\":[\"zo\"]},\"routePrefixLimit\":{\"hardLimit\":1743305955,\"threshold\":1242880517},\"lastOperation\":{\"details\":\"njkgvfnmx\"},\"configurationState\":\"Rejected\",\"provisioningState\":\"Failed\",\"administrativeState\":\"Enabled\"},\"location\":\"btyi\",\"tags\":{\"fqjpnqno\":\"vpi\"},\"id\":\"w\",\"name\":\"bedenrexkx\",\"type\":\"hxvucnu\"}")
            .toObject(L3IsolationDomainInner.class);
        Assertions.assertEquals("btyi", model.location());
        Assertions.assertEquals("vpi", model.tags().get("fqjpnqno"));
        Assertions.assertEquals("jczjnciuiyqv", model.properties().annotation());
        Assertions.assertEquals(RedistributeConnectedSubnets.TRUE, model.properties().redistributeConnectedSubnets());
        Assertions.assertEquals(RedistributeStaticRoutes.TRUE, model.properties().redistributeStaticRoutes());
        Assertions.assertEquals("i", model.properties().aggregateRouteConfiguration().ipv4Routes().get(0).prefix());
        Assertions.assertEquals("wkpphefsb",
            model.properties().aggregateRouteConfiguration().ipv6Routes().get(0).prefix());
        Assertions.assertEquals("suqtaazyqbx",
            model.properties().connectedSubnetRoutePolicy().exportRoutePolicy().exportIpv4RoutePolicyId());
        Assertions.assertEquals("oyfpuq",
            model.properties().connectedSubnetRoutePolicy().exportRoutePolicy().exportIpv6RoutePolicyId());
        Assertions.assertEquals("iqezxlhdj", model.properties().networkFabricId());
        Assertions.assertEquals("a",
            model.properties().staticRouteRoutePolicy().exportRoutePolicy().exportIpv4RoutePolicyId());
        Assertions.assertEquals("vpsozjiihjri",
            model.properties().staticRouteRoutePolicy().exportRoutePolicy().exportIpv6RoutePolicyId());
        Assertions.assertEquals(1743305955, model.properties().routePrefixLimit().hardLimit());
        Assertions.assertEquals(1242880517, model.properties().routePrefixLimit().threshold());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        L3IsolationDomainInner model = new L3IsolationDomainInner().withLocation("btyi")
            .withTags(mapOf("fqjpnqno", "vpi"))
            .withProperties(new L3IsolationDomainProperties().withAnnotation("jczjnciuiyqv")
                .withRedistributeConnectedSubnets(RedistributeConnectedSubnets.TRUE)
                .withRedistributeStaticRoutes(RedistributeStaticRoutes.TRUE)
                .withAggregateRouteConfiguration(new AggregateRouteConfiguration()
                    .withIpv4Routes(Arrays.asList(new AggregateRoute().withPrefix("i"),
                        new AggregateRoute().withPrefix("qqzlgcndhz"), new AggregateRoute().withPrefix("rr"),
                        new AggregateRoute().withPrefix("cfsrhkhgsn")))
                    .withIpv6Routes(Arrays.asList(new AggregateRoute().withPrefix("wkpphefsb"),
                        new AggregateRoute().withPrefix("xlb"), new AggregateRoute().withPrefix("xomeikjclwzacn"))))
                .withConnectedSubnetRoutePolicy(new ConnectedSubnetRoutePolicy()
                    .withExportRoutePolicy(new L3ExportRoutePolicy().withExportIpv4RoutePolicyId("suqtaazyqbx")
                        .withExportIpv6RoutePolicyId("oyfpuq")))
                .withNetworkFabricId("iqezxlhdj")
                .withStaticRouteRoutePolicy(new StaticRouteRoutePolicy()
                    .withExportRoutePolicy(new L3ExportRoutePolicy().withExportIpv4RoutePolicyId("a")
                        .withExportIpv6RoutePolicyId("vpsozjiihjri")))
                .withUniqueRdConfiguration(new L3UniqueRouteDistinguisherProperties())
                .withRoutePrefixLimit(
                    new RoutePrefixLimitProperties().withHardLimit(1743305955).withThreshold(1242880517)));
        model = BinaryData.fromObject(model).toObject(L3IsolationDomainInner.class);
        Assertions.assertEquals("btyi", model.location());
        Assertions.assertEquals("vpi", model.tags().get("fqjpnqno"));
        Assertions.assertEquals("jczjnciuiyqv", model.properties().annotation());
        Assertions.assertEquals(RedistributeConnectedSubnets.TRUE, model.properties().redistributeConnectedSubnets());
        Assertions.assertEquals(RedistributeStaticRoutes.TRUE, model.properties().redistributeStaticRoutes());
        Assertions.assertEquals("i", model.properties().aggregateRouteConfiguration().ipv4Routes().get(0).prefix());
        Assertions.assertEquals("wkpphefsb",
            model.properties().aggregateRouteConfiguration().ipv6Routes().get(0).prefix());
        Assertions.assertEquals("suqtaazyqbx",
            model.properties().connectedSubnetRoutePolicy().exportRoutePolicy().exportIpv4RoutePolicyId());
        Assertions.assertEquals("oyfpuq",
            model.properties().connectedSubnetRoutePolicy().exportRoutePolicy().exportIpv6RoutePolicyId());
        Assertions.assertEquals("iqezxlhdj", model.properties().networkFabricId());
        Assertions.assertEquals("a",
            model.properties().staticRouteRoutePolicy().exportRoutePolicy().exportIpv4RoutePolicyId());
        Assertions.assertEquals("vpsozjiihjri",
            model.properties().staticRouteRoutePolicy().exportRoutePolicy().exportIpv6RoutePolicyId());
        Assertions.assertEquals(1743305955, model.properties().routePrefixLimit().hardLimit());
        Assertions.assertEquals(1242880517, model.properties().routePrefixLimit().threshold());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
