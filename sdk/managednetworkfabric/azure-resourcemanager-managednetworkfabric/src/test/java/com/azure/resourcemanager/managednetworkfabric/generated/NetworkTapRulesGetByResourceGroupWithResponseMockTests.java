// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.managednetworkfabric.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.managednetworkfabric.FilesharesManager;
import com.azure.resourcemanager.managednetworkfabric.models.BooleanEnumProperty;
import com.azure.resourcemanager.managednetworkfabric.models.ConfigurationType;
import com.azure.resourcemanager.managednetworkfabric.models.IPAddressType;
import com.azure.resourcemanager.managednetworkfabric.models.NetworkTapRule;
import com.azure.resourcemanager.managednetworkfabric.models.PollingIntervalInSeconds;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class NetworkTapRulesGetByResourceGroupWithResponseMockTests {
    @Test
    public void testGetByResourceGroupWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"annotation\":\"eajyifeiiriomjd\",\"configurationType\":\"Inline\",\"tapRulesUrl\":\"btlxrdepqtzzhkp\",\"matchConfigurations\":[{\"matchConfigurationName\":\"vfno\",\"sequenceNumber\":7940018990713131589,\"ipAddressType\":\"IPv6\",\"matchConditions\":[{}],\"actions\":[{}]},{\"matchConfigurationName\":\"x\",\"sequenceNumber\":1436570440721196794,\"ipAddressType\":\"IPv4\",\"matchConditions\":[{},{},{},{}],\"actions\":[{},{}]}],\"dynamicMatchConfigurations\":[{\"ipGroups\":[{},{},{}],\"vlanGroups\":[{},{},{},{}],\"portGroups\":[{},{},{}]}],\"networkTapId\":\"cwcp\",\"pollingIntervalInSeconds\":60,\"lastSyncedTime\":\"2021-03-26T15:48:48Z\",\"globalNetworkTapRuleActions\":{\"enableCount\":\"False\",\"truncate\":\"ljsoasxjjklmpbg\"},\"lastOperation\":{\"details\":\"xfdxrcbnmbbhluv\"},\"configurationState\":\"Provisioned\",\"provisioningState\":\"Failed\",\"administrativeState\":\"RMA\"},\"location\":\"omzlreiwdskiegta\",\"tags\":{\"qo\":\"leptaa\",\"kmihggv\":\"xaodbhgxbadbor\",\"viynlslgxif\":\"hqwyxbat\"},\"id\":\"dsclqwkddgepu\",\"name\":\"ambzfxgshaq\",\"type\":\"ueq\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        FilesharesManager manager = FilesharesManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        NetworkTapRule response = manager.networkTapRules()
            .getByResourceGroupWithResponse("efojpnixdgqjkfvm", "n", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("omzlreiwdskiegta", response.location());
        Assertions.assertEquals("leptaa", response.tags().get("qo"));
        Assertions.assertEquals("eajyifeiiriomjd", response.properties().annotation());
        Assertions.assertEquals(ConfigurationType.INLINE, response.properties().configurationType());
        Assertions.assertEquals("btlxrdepqtzzhkp", response.properties().tapRulesUrl());
        Assertions.assertEquals("vfno", response.properties().matchConfigurations().get(0).matchConfigurationName());
        Assertions.assertEquals(7940018990713131589L,
            response.properties().matchConfigurations().get(0).sequenceNumber());
        Assertions.assertEquals(IPAddressType.IPV6, response.properties().matchConfigurations().get(0).ipAddressType());
        Assertions.assertEquals(PollingIntervalInSeconds.SIXTY, response.properties().pollingIntervalInSeconds());
        Assertions.assertEquals(BooleanEnumProperty.FALSE,
            response.properties().globalNetworkTapRuleActions().enableCount());
        Assertions.assertEquals("ljsoasxjjklmpbg", response.properties().globalNetworkTapRuleActions().truncate());
    }
}
