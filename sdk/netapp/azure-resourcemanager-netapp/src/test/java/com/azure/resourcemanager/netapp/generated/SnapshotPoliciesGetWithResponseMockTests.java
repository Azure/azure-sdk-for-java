// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.netapp.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.netapp.NetAppFilesManager;
import com.azure.resourcemanager.netapp.models.SnapshotPolicy;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SnapshotPoliciesGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"etag\":\"gznmmaxrizkzob\",\"properties\":{\"hourlySchedule\":{\"snapshotsToKeep\":2061917602,\"minute\":840646010,\"usedBytes\":3557811767170936371},\"dailySchedule\":{\"snapshotsToKeep\":1024527659,\"hour\":1754965101,\"minute\":806033816,\"usedBytes\":8678909552844330526},\"weeklySchedule\":{\"snapshotsToKeep\":1926251363,\"day\":\"wcrojphslhcaw\",\"hour\":224494261,\"minute\":1033844337,\"usedBytes\":3885136250403925624},\"monthlySchedule\":{\"snapshotsToKeep\":1801427646,\"daysOfMonth\":\"orq\",\"hour\":1455188230,\"minute\":400681699,\"usedBytes\":5047045178735698874},\"enabled\":true,\"provisioningState\":\"afhonqj\"},\"location\":\"eickpz\",\"tags\":{\"lnwcltyjed\":\"opmx\"},\"id\":\"xxmlfmkqscazua\",\"name\":\"xtzx\",\"type\":\"uamwabzxrvxc\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        NetAppFilesManager manager = NetAppFilesManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        SnapshotPolicy response = manager.snapshotPolicies()
            .getWithResponse("kvntjlrigjkskyri", "ovzidsx", "aabzmif", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("eickpz", response.location());
        Assertions.assertEquals("opmx", response.tags().get("lnwcltyjed"));
        Assertions.assertEquals(2061917602, response.hourlySchedule().snapshotsToKeep());
        Assertions.assertEquals(840646010, response.hourlySchedule().minute());
        Assertions.assertEquals(3557811767170936371L, response.hourlySchedule().usedBytes());
        Assertions.assertEquals(1024527659, response.dailySchedule().snapshotsToKeep());
        Assertions.assertEquals(1754965101, response.dailySchedule().hour());
        Assertions.assertEquals(806033816, response.dailySchedule().minute());
        Assertions.assertEquals(8678909552844330526L, response.dailySchedule().usedBytes());
        Assertions.assertEquals(1926251363, response.weeklySchedule().snapshotsToKeep());
        Assertions.assertEquals("wcrojphslhcaw", response.weeklySchedule().day());
        Assertions.assertEquals(224494261, response.weeklySchedule().hour());
        Assertions.assertEquals(1033844337, response.weeklySchedule().minute());
        Assertions.assertEquals(3885136250403925624L, response.weeklySchedule().usedBytes());
        Assertions.assertEquals(1801427646, response.monthlySchedule().snapshotsToKeep());
        Assertions.assertEquals("orq", response.monthlySchedule().daysOfMonth());
        Assertions.assertEquals(1455188230, response.monthlySchedule().hour());
        Assertions.assertEquals(400681699, response.monthlySchedule().minute());
        Assertions.assertEquals(5047045178735698874L, response.monthlySchedule().usedBytes());
        Assertions.assertEquals(true, response.enabled());
    }
}
