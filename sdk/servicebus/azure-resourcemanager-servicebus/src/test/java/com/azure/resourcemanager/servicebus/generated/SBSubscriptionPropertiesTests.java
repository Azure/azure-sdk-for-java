// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.servicebus.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.servicebus.fluent.models.SBSubscriptionProperties;
import com.azure.resourcemanager.servicebus.models.EntityStatus;
import com.azure.resourcemanager.servicebus.models.SBClientAffineProperties;
import java.time.Duration;
import org.junit.jupiter.api.Assertions;

public final class SBSubscriptionPropertiesTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        SBSubscriptionProperties model = BinaryData.fromString(
            "{\"messageCount\":4080168914142667048,\"createdAt\":\"2021-01-16T05:27:28Z\",\"accessedAt\":\"2021-04-20T09:20:24Z\",\"updatedAt\":\"2021-11-21T11:52:27Z\",\"countDetails\":{\"activeMessageCount\":1220387324863982995,\"deadLetterMessageCount\":5645922877678061686,\"scheduledMessageCount\":2314195344847215175,\"transferMessageCount\":6764739063385765952,\"transferDeadLetterMessageCount\":7551905176757776284},\"lockDuration\":\"PT148H3M35S\",\"requiresSession\":true,\"defaultMessageTimeToLive\":\"PT15H38M54S\",\"deadLetteringOnFilterEvaluationExceptions\":false,\"deadLetteringOnMessageExpiration\":true,\"duplicateDetectionHistoryTimeWindow\":\"PT189H59M5S\",\"maxDeliveryCount\":1190343905,\"status\":\"Disabled\",\"enableBatchedOperations\":true,\"autoDeleteOnIdle\":\"PT8H35M26S\",\"forwardTo\":\"hwzdgirujbz\",\"forwardDeadLetteredMessagesTo\":\"mvzzbtdcqvp\",\"isClientAffine\":true,\"userMetadata\":\"jviylwdshfs\",\"clientAffineProperties\":{\"clientId\":\"bgye\",\"isDurable\":true,\"isShared\":true}}")
            .toObject(SBSubscriptionProperties.class);
        Assertions.assertEquals(Duration.parse("PT148H3M35S"), model.lockDuration());
        Assertions.assertTrue(model.requiresSession());
        Assertions.assertEquals(Duration.parse("PT15H38M54S"), model.defaultMessageTimeToLive());
        Assertions.assertFalse(model.deadLetteringOnFilterEvaluationExceptions());
        Assertions.assertTrue(model.deadLetteringOnMessageExpiration());
        Assertions.assertEquals(Duration.parse("PT189H59M5S"), model.duplicateDetectionHistoryTimeWindow());
        Assertions.assertEquals(1190343905, model.maxDeliveryCount());
        Assertions.assertEquals(EntityStatus.DISABLED, model.status());
        Assertions.assertTrue(model.enableBatchedOperations());
        Assertions.assertEquals(Duration.parse("PT8H35M26S"), model.autoDeleteOnIdle());
        Assertions.assertEquals("hwzdgirujbz", model.forwardTo());
        Assertions.assertEquals("mvzzbtdcqvp", model.forwardDeadLetteredMessagesTo());
        Assertions.assertTrue(model.isClientAffine());
        Assertions.assertEquals("jviylwdshfs", model.userMetadata());
        Assertions.assertEquals("bgye", model.clientAffineProperties().clientId());
        Assertions.assertTrue(model.clientAffineProperties().isDurable());
        Assertions.assertTrue(model.clientAffineProperties().isShared());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        SBSubscriptionProperties model = new SBSubscriptionProperties().withLockDuration(Duration.parse("PT148H3M35S"))
            .withRequiresSession(true)
            .withDefaultMessageTimeToLive(Duration.parse("PT15H38M54S"))
            .withDeadLetteringOnFilterEvaluationExceptions(false)
            .withDeadLetteringOnMessageExpiration(true)
            .withDuplicateDetectionHistoryTimeWindow(Duration.parse("PT189H59M5S"))
            .withMaxDeliveryCount(1190343905)
            .withStatus(EntityStatus.DISABLED)
            .withEnableBatchedOperations(true)
            .withAutoDeleteOnIdle(Duration.parse("PT8H35M26S"))
            .withForwardTo("hwzdgirujbz")
            .withForwardDeadLetteredMessagesTo("mvzzbtdcqvp")
            .withIsClientAffine(true)
            .withUserMetadata("jviylwdshfs")
            .withClientAffineProperties(
                new SBClientAffineProperties().withClientId("bgye").withIsDurable(true).withIsShared(true));
        model = BinaryData.fromObject(model).toObject(SBSubscriptionProperties.class);
        Assertions.assertEquals(Duration.parse("PT148H3M35S"), model.lockDuration());
        Assertions.assertTrue(model.requiresSession());
        Assertions.assertEquals(Duration.parse("PT15H38M54S"), model.defaultMessageTimeToLive());
        Assertions.assertFalse(model.deadLetteringOnFilterEvaluationExceptions());
        Assertions.assertTrue(model.deadLetteringOnMessageExpiration());
        Assertions.assertEquals(Duration.parse("PT189H59M5S"), model.duplicateDetectionHistoryTimeWindow());
        Assertions.assertEquals(1190343905, model.maxDeliveryCount());
        Assertions.assertEquals(EntityStatus.DISABLED, model.status());
        Assertions.assertTrue(model.enableBatchedOperations());
        Assertions.assertEquals(Duration.parse("PT8H35M26S"), model.autoDeleteOnIdle());
        Assertions.assertEquals("hwzdgirujbz", model.forwardTo());
        Assertions.assertEquals("mvzzbtdcqvp", model.forwardDeadLetteredMessagesTo());
        Assertions.assertTrue(model.isClientAffine());
        Assertions.assertEquals("jviylwdshfs", model.userMetadata());
        Assertions.assertEquals("bgye", model.clientAffineProperties().clientId());
        Assertions.assertTrue(model.clientAffineProperties().isDurable());
        Assertions.assertTrue(model.clientAffineProperties().isShared());
    }
}
