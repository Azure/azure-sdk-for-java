// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.
package com.azure.ai.projects.models;

import com.azure.core.annotation.Generated;
import com.azure.core.annotation.Immutable;
import com.azure.json.JsonReader;
import com.azure.json.JsonSerializable;
import com.azure.json.JsonToken;
import com.azure.json.JsonWriter;
import java.io.IOException;

/**
 * Represents a set of parameters used to control the sampling behavior of a language model during text generation.
 */
@Immutable
public final class ModelSamplingParams implements JsonSerializable<ModelSamplingParams> {

    /*
     * The temperature parameter for sampling.
     */
    @Generated
    private final double temperature;

    /*
     * The top-p parameter for nucleus sampling.
     */
    @Generated
    private final double topP;

    /*
     * The random seed for reproducibility.
     */
    @Generated
    private final int seed;

    /*
     * The maximum number of tokens allowed in the completion.
     */
    @Generated
    private final int maxCompletionTokens;

    /**
     * Creates an instance of ModelSamplingParams class.
     *
     * @param temperature the temperature value to set.
     * @param topP the topP value to set.
     * @param seed the seed value to set.
     * @param maxCompletionTokens the maxCompletionTokens value to set.
     */
    @Generated
    public ModelSamplingParams(double temperature, double topP, int seed, int maxCompletionTokens) {
        this.temperature = temperature;
        this.topP = topP;
        this.seed = seed;
        this.maxCompletionTokens = maxCompletionTokens;
    }

    /**
     * Get the temperature property: The temperature parameter for sampling.
     *
     * @return the temperature value.
     */
    @Generated
    public double getTemperature() {
        return this.temperature;
    }

    /**
     * Get the topP property: The top-p parameter for nucleus sampling.
     *
     * @return the topP value.
     */
    @Generated
    public double getTopP() {
        return this.topP;
    }

    /**
     * Get the seed property: The random seed for reproducibility.
     *
     * @return the seed value.
     */
    @Generated
    public int getSeed() {
        return this.seed;
    }

    /**
     * Get the maxCompletionTokens property: The maximum number of tokens allowed in the completion.
     *
     * @return the maxCompletionTokens value.
     */
    @Generated
    public int getMaxCompletionTokens() {
        return this.maxCompletionTokens;
    }

    /**
     * {@inheritDoc}
     */
    @Generated
    @Override
    public JsonWriter toJson(JsonWriter jsonWriter) throws IOException {
        jsonWriter.writeStartObject();
        jsonWriter.writeDoubleField("temperature", this.temperature);
        jsonWriter.writeDoubleField("top_p", this.topP);
        jsonWriter.writeIntField("seed", this.seed);
        jsonWriter.writeIntField("max_completion_tokens", this.maxCompletionTokens);
        return jsonWriter.writeEndObject();
    }

    /**
     * Reads an instance of ModelSamplingParams from the JsonReader.
     *
     * @param jsonReader The JsonReader being read.
     * @return An instance of ModelSamplingParams if the JsonReader was pointing to an instance of it, or null if it was
     * pointing to JSON null.
     * @throws IllegalStateException If the deserialized JSON object was missing any required properties.
     * @throws IOException If an error occurs while reading the ModelSamplingParams.
     */
    @Generated
    public static ModelSamplingParams fromJson(JsonReader jsonReader) throws IOException {
        return jsonReader.readObject(reader -> {
            double temperature = 0.0;
            double topP = 0.0;
            int seed = 0;
            int maxCompletionTokens = 0;
            while (reader.nextToken() != JsonToken.END_OBJECT) {
                String fieldName = reader.getFieldName();
                reader.nextToken();
                if ("temperature".equals(fieldName)) {
                    temperature = reader.getDouble();
                } else if ("top_p".equals(fieldName)) {
                    topP = reader.getDouble();
                } else if ("seed".equals(fieldName)) {
                    seed = reader.getInt();
                } else if ("max_completion_tokens".equals(fieldName)) {
                    maxCompletionTokens = reader.getInt();
                } else {
                    reader.skipChildren();
                }
            }
            return new ModelSamplingParams(temperature, topP, seed, maxCompletionTokens);
        });
    }
}
