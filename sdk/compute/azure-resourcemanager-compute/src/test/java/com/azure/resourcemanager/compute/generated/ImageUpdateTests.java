// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.compute.generated;

import com.azure.core.management.SubResource;
import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.compute.models.CachingTypes;
import com.azure.resourcemanager.compute.models.DiskEncryptionSetParameters;
import com.azure.resourcemanager.compute.models.HyperVGenerationTypes;
import com.azure.resourcemanager.compute.models.ImageDataDisk;
import com.azure.resourcemanager.compute.models.ImageOSDisk;
import com.azure.resourcemanager.compute.models.ImageStorageProfile;
import com.azure.resourcemanager.compute.models.ImageUpdate;
import com.azure.resourcemanager.compute.models.OperatingSystemStateTypes;
import com.azure.resourcemanager.compute.models.OperatingSystemTypes;
import com.azure.resourcemanager.compute.models.StorageAccountTypes;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class ImageUpdateTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        ImageUpdate model = BinaryData.fromString(
            "{\"properties\":{\"sourceVirtualMachine\":{\"id\":\"v\"},\"storageProfile\":{\"osDisk\":{\"osType\":\"Linux\",\"osState\":\"Generalized\",\"snapshot\":{\"id\":\"gvgovpbbttefjo\"},\"managedDisk\":{\"id\":\"sqyzqedikdfr\"},\"blobUri\":\"iqmrjgeihfqlggw\",\"caching\":\"ReadWrite\",\"diskSizeGB\":864537987,\"storageAccountType\":\"StandardSSD_LRS\",\"diskEncryptionSet\":{\"id\":\"byephmgt\"}},\"dataDisks\":[{\"lun\":1696997947,\"snapshot\":{\"id\":\"m\"},\"managedDisk\":{\"id\":\"i\"},\"blobUri\":\"xhnpo\",\"caching\":\"ReadWrite\",\"diskSizeGB\":2002093853,\"storageAccountType\":\"StandardSSD_LRS\",\"diskEncryptionSet\":{\"id\":\"ui\"}}],\"zoneResilient\":false},\"provisioningState\":\"aswlp\",\"hyperVGeneration\":\"V1\"},\"tags\":{\"rxwtoaukhfkvc\":\"mfj\",\"sx\":\"sizmoae\"}}")
            .toObject(ImageUpdate.class);
        Assertions.assertEquals("mfj", model.tags().get("rxwtoaukhfkvc"));
        Assertions.assertEquals("v", model.sourceVirtualMachine().id());
        Assertions.assertEquals("gvgovpbbttefjo", model.storageProfile().osDisk().snapshot().id());
        Assertions.assertEquals("sqyzqedikdfr", model.storageProfile().osDisk().managedDisk().id());
        Assertions.assertEquals("iqmrjgeihfqlggw", model.storageProfile().osDisk().blobUri());
        Assertions.assertEquals(CachingTypes.READ_WRITE, model.storageProfile().osDisk().caching());
        Assertions.assertEquals(864537987, model.storageProfile().osDisk().diskSizeGB());
        Assertions.assertEquals(StorageAccountTypes.STANDARD_SSD_LRS,
            model.storageProfile().osDisk().storageAccountType());
        Assertions.assertEquals("byephmgt", model.storageProfile().osDisk().diskEncryptionSet().id());
        Assertions.assertEquals(OperatingSystemTypes.LINUX, model.storageProfile().osDisk().osType());
        Assertions.assertEquals(OperatingSystemStateTypes.GENERALIZED, model.storageProfile().osDisk().osState());
        Assertions.assertEquals("m", model.storageProfile().dataDisks().get(0).snapshot().id());
        Assertions.assertEquals("i", model.storageProfile().dataDisks().get(0).managedDisk().id());
        Assertions.assertEquals("xhnpo", model.storageProfile().dataDisks().get(0).blobUri());
        Assertions.assertEquals(CachingTypes.READ_WRITE, model.storageProfile().dataDisks().get(0).caching());
        Assertions.assertEquals(2002093853, model.storageProfile().dataDisks().get(0).diskSizeGB());
        Assertions.assertEquals(StorageAccountTypes.STANDARD_SSD_LRS,
            model.storageProfile().dataDisks().get(0).storageAccountType());
        Assertions.assertEquals("ui", model.storageProfile().dataDisks().get(0).diskEncryptionSet().id());
        Assertions.assertEquals(1696997947, model.storageProfile().dataDisks().get(0).lun());
        Assertions.assertFalse(model.storageProfile().zoneResilient());
        Assertions.assertEquals(HyperVGenerationTypes.V1, model.hyperVGeneration());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        ImageUpdate model = new ImageUpdate().withTags(mapOf("rxwtoaukhfkvc", "mfj", "sx", "sizmoae"))
            .withSourceVirtualMachine(new SubResource().withId("v"))
            .withStorageProfile(new ImageStorageProfile()
                .withOsDisk(new ImageOSDisk().withSnapshot(new SubResource().withId("gvgovpbbttefjo"))
                    .withManagedDisk(new SubResource().withId("sqyzqedikdfr"))
                    .withBlobUri("iqmrjgeihfqlggw")
                    .withCaching(CachingTypes.READ_WRITE)
                    .withDiskSizeGB(864537987)
                    .withStorageAccountType(StorageAccountTypes.STANDARD_SSD_LRS)
                    .withDiskEncryptionSet(new DiskEncryptionSetParameters().withId("byephmgt"))
                    .withOsType(OperatingSystemTypes.LINUX)
                    .withOsState(OperatingSystemStateTypes.GENERALIZED))
                .withDataDisks(Arrays.asList(new ImageDataDisk().withSnapshot(new SubResource().withId("m"))
                    .withManagedDisk(new SubResource().withId("i"))
                    .withBlobUri("xhnpo")
                    .withCaching(CachingTypes.READ_WRITE)
                    .withDiskSizeGB(2002093853)
                    .withStorageAccountType(StorageAccountTypes.STANDARD_SSD_LRS)
                    .withDiskEncryptionSet(new DiskEncryptionSetParameters().withId("ui"))
                    .withLun(1696997947)))
                .withZoneResilient(false))
            .withHyperVGeneration(HyperVGenerationTypes.V1);
        model = BinaryData.fromObject(model).toObject(ImageUpdate.class);
        Assertions.assertEquals("mfj", model.tags().get("rxwtoaukhfkvc"));
        Assertions.assertEquals("v", model.sourceVirtualMachine().id());
        Assertions.assertEquals("gvgovpbbttefjo", model.storageProfile().osDisk().snapshot().id());
        Assertions.assertEquals("sqyzqedikdfr", model.storageProfile().osDisk().managedDisk().id());
        Assertions.assertEquals("iqmrjgeihfqlggw", model.storageProfile().osDisk().blobUri());
        Assertions.assertEquals(CachingTypes.READ_WRITE, model.storageProfile().osDisk().caching());
        Assertions.assertEquals(864537987, model.storageProfile().osDisk().diskSizeGB());
        Assertions.assertEquals(StorageAccountTypes.STANDARD_SSD_LRS,
            model.storageProfile().osDisk().storageAccountType());
        Assertions.assertEquals("byephmgt", model.storageProfile().osDisk().diskEncryptionSet().id());
        Assertions.assertEquals(OperatingSystemTypes.LINUX, model.storageProfile().osDisk().osType());
        Assertions.assertEquals(OperatingSystemStateTypes.GENERALIZED, model.storageProfile().osDisk().osState());
        Assertions.assertEquals("m", model.storageProfile().dataDisks().get(0).snapshot().id());
        Assertions.assertEquals("i", model.storageProfile().dataDisks().get(0).managedDisk().id());
        Assertions.assertEquals("xhnpo", model.storageProfile().dataDisks().get(0).blobUri());
        Assertions.assertEquals(CachingTypes.READ_WRITE, model.storageProfile().dataDisks().get(0).caching());
        Assertions.assertEquals(2002093853, model.storageProfile().dataDisks().get(0).diskSizeGB());
        Assertions.assertEquals(StorageAccountTypes.STANDARD_SSD_LRS,
            model.storageProfile().dataDisks().get(0).storageAccountType());
        Assertions.assertEquals("ui", model.storageProfile().dataDisks().get(0).diskEncryptionSet().id());
        Assertions.assertEquals(1696997947, model.storageProfile().dataDisks().get(0).lun());
        Assertions.assertFalse(model.storageProfile().zoneResilient());
        Assertions.assertEquals(HyperVGenerationTypes.V1, model.hyperVGeneration());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
