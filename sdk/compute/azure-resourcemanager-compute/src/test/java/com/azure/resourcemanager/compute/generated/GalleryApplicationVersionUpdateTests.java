// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.compute.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.compute.models.AdditionalReplicaSet;
import com.azure.resourcemanager.compute.models.DataDiskImageEncryption;
import com.azure.resourcemanager.compute.models.EdgeZoneStorageAccountType;
import com.azure.resourcemanager.compute.models.EncryptionImages;
import com.azure.resourcemanager.compute.models.GalleryApplicationCustomAction;
import com.azure.resourcemanager.compute.models.GalleryApplicationCustomActionParameter;
import com.azure.resourcemanager.compute.models.GalleryApplicationScriptRebootBehavior;
import com.azure.resourcemanager.compute.models.GalleryApplicationVersionPublishingProfile;
import com.azure.resourcemanager.compute.models.GalleryApplicationVersionSafetyProfile;
import com.azure.resourcemanager.compute.models.GalleryApplicationVersionUpdate;
import com.azure.resourcemanager.compute.models.GalleryExtendedLocation;
import com.azure.resourcemanager.compute.models.GalleryExtendedLocationType;
import com.azure.resourcemanager.compute.models.GalleryTargetExtendedLocation;
import com.azure.resourcemanager.compute.models.OSDiskImageEncryption;
import com.azure.resourcemanager.compute.models.ReplicationMode;
import com.azure.resourcemanager.compute.models.StorageAccountStrategy;
import com.azure.resourcemanager.compute.models.StorageAccountType;
import com.azure.resourcemanager.compute.models.TargetRegion;
import com.azure.resourcemanager.compute.models.UserArtifactManage;
import com.azure.resourcemanager.compute.models.UserArtifactSettings;
import com.azure.resourcemanager.compute.models.UserArtifactSource;
import java.time.OffsetDateTime;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class GalleryApplicationVersionUpdateTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        GalleryApplicationVersionUpdate model = BinaryData.fromString(
            "{\"properties\":{\"publishingProfile\":{\"source\":{\"mediaLink\":\"outxfpt\",\"defaultConfigurationLink\":\"hgnu\"},\"manageActions\":{\"install\":\"ezygvad\",\"remove\":\"aaqwvkg\",\"update\":\"yt\"},\"settings\":{\"packageFileName\":\"vdn\",\"configFileName\":\"e\",\"scriptBehaviorAfterReboot\":\"None\"},\"advancedSettings\":{\"svbxxyjisskob\":\"ortbnukkfax\"},\"enableHealthCheck\":false,\"customActions\":[{\"name\":\"l\",\"script\":\"oewyhxessmvrkd\",\"description\":\"qeq\",\"parameters\":[{\"name\":\"xm\"},{\"name\":\"ses\"}]},{\"name\":\"rujbjpppktlp\",\"script\":\"ib\",\"description\":\"th\",\"parameters\":[{\"name\":\"tnejrnminzqp\"}]},{\"name\":\"gtkihonikzsr\",\"script\":\"f\",\"description\":\"jilzfbpntogke\",\"parameters\":[{\"name\":\"khbmcarmoyfxxk\"}]}],\"targetRegions\":[{\"name\":\"uqdndxlyk\",\"regionalReplicaCount\":732326213,\"storageAccountType\":\"Standard_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":177756605}]},\"excludeFromLatest\":false,\"additionalReplicaSets\":[{},{}]},{\"name\":\"rscdxrnrnjrcuf\",\"regionalReplicaCount\":1352813571,\"storageAccountType\":\"Premium_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":2059960562},{\"lun\":1010787682},{\"lun\":278847519},{\"lun\":1973420283}]},\"excludeFromLatest\":true,\"additionalReplicaSets\":[{},{}]},{\"name\":\"anmame\",\"regionalReplicaCount\":967649491,\"storageAccountType\":\"PremiumV2_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":221970539}]},\"excludeFromLatest\":true,\"additionalReplicaSets\":[{},{}]},{\"name\":\"skkqjmxptuei\",\"regionalReplicaCount\":897152817,\"storageAccountType\":\"Standard_ZRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":342537841},{\"lun\":1368661009},{\"lun\":1028043727}]},\"excludeFromLatest\":true,\"additionalReplicaSets\":[{},{}]}],\"replicaCount\":211029161,\"excludeFromLatest\":true,\"publishedDate\":\"2021-11-20T16:19:54Z\",\"endOfLifeDate\":\"2021-03-30T04:13:54Z\",\"storageAccountType\":\"Standard_ZRS\",\"replicationMode\":\"Full\",\"targetExtendedLocations\":[{\"name\":\"xjoegcjojlleuidp\",\"extendedLocation\":{\"name\":\"nvhgnhtmeplh\",\"type\":\"EdgeZone\"},\"extendedLocationReplicaCount\":1424286294,\"storageAccountType\":\"Standard_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":1930840208},{\"lun\":1418184268},{\"lun\":46117438},{\"lun\":1610438284}]}},{\"name\":\"c\",\"extendedLocation\":{\"name\":\"ua\",\"type\":\"EdgeZone\"},\"extendedLocationReplicaCount\":63222820,\"storageAccountType\":\"Standard_ZRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":2062639649},{\"lun\":108101619},{\"lun\":1141934554}]}},{\"name\":\"uzdmhv\",\"extendedLocation\":{\"name\":\"ivjmxmlitqdsjipd\",\"type\":\"EdgeZone\"},\"extendedLocationReplicaCount\":1931905461,\"storageAccountType\":\"Standard_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":49608617},{\"lun\":1892947257}]}}],\"storageAccountStrategy\":\"PreferStandard_ZRS\"},\"safetyProfile\":{\"allowDeletionOfReplicatedLocations\":false},\"provisioningState\":\"Updating\",\"replicationStatus\":{\"aggregatedState\":\"InProgress\",\"summary\":[{\"region\":\"sieeail\",\"state\":\"Failed\",\"details\":\"qfy\",\"progress\":1344797932},{\"region\":\"mfxlkdlgwgnamkuu\",\"state\":\"Completed\",\"details\":\"uafixlxicwgp\",\"progress\":485364894},{\"region\":\"fmfzcfasfodropa\",\"state\":\"Completed\",\"details\":\"tw\",\"progress\":1533954229},{\"region\":\"wgqrntaum\",\"state\":\"Completed\",\"details\":\"lv\",\"progress\":1480169218}]}},\"id\":\"gtyczuppi\",\"name\":\"lzmiyddeeq\",\"type\":\"vab\",\"tags\":{\"xduetbapfc\":\"s\",\"bpxya\":\"ewxtrl\",\"yegbthms\":\"kjpirgzxvbczw\"}}")
            .toObject(GalleryApplicationVersionUpdate.class);
        Assertions.assertEquals("s", model.tags().get("xduetbapfc"));
        Assertions.assertEquals("uqdndxlyk", model.publishingProfile().targetRegions().get(0).name());
        Assertions.assertEquals(732326213, model.publishingProfile().targetRegions().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_LRS,
            model.publishingProfile().targetRegions().get(0).storageAccountType());
        Assertions.assertEquals(177756605,
            model.publishingProfile().targetRegions().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertFalse(model.publishingProfile().targetRegions().get(0).excludeFromLatest());
        Assertions.assertEquals(211029161, model.publishingProfile().replicaCount());
        Assertions.assertTrue(model.publishingProfile().excludeFromLatest());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-30T04:13:54Z"),
            model.publishingProfile().endOfLifeDate());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS, model.publishingProfile().storageAccountType());
        Assertions.assertEquals(ReplicationMode.FULL, model.publishingProfile().replicationMode());
        Assertions.assertEquals("xjoegcjojlleuidp", model.publishingProfile().targetExtendedLocations().get(0).name());
        Assertions.assertEquals("nvhgnhtmeplh",
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().name());
        Assertions.assertEquals(GalleryExtendedLocationType.EDGE_ZONE,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().type());
        Assertions.assertEquals(1424286294,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocationReplicaCount());
        Assertions.assertEquals(EdgeZoneStorageAccountType.STANDARD_LRS,
            model.publishingProfile().targetExtendedLocations().get(0).storageAccountType());
        Assertions.assertEquals(1930840208,
            model.publishingProfile().targetExtendedLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertEquals(StorageAccountStrategy.PREFER_STANDARD_ZRS,
            model.publishingProfile().storageAccountStrategy());
        Assertions.assertEquals("outxfpt", model.publishingProfile().source().mediaLink());
        Assertions.assertEquals("hgnu", model.publishingProfile().source().defaultConfigurationLink());
        Assertions.assertEquals("ezygvad", model.publishingProfile().manageActions().install());
        Assertions.assertEquals("aaqwvkg", model.publishingProfile().manageActions().remove());
        Assertions.assertEquals("yt", model.publishingProfile().manageActions().update());
        Assertions.assertEquals("vdn", model.publishingProfile().settings().packageFileName());
        Assertions.assertEquals("e", model.publishingProfile().settings().configFileName());
        Assertions.assertEquals(GalleryApplicationScriptRebootBehavior.NONE,
            model.publishingProfile().settings().scriptBehaviorAfterReboot());
        Assertions.assertEquals("ortbnukkfax", model.publishingProfile().advancedSettings().get("svbxxyjisskob"));
        Assertions.assertFalse(model.publishingProfile().enableHealthCheck());
        Assertions.assertEquals("l", model.publishingProfile().customActions().get(0).name());
        Assertions.assertEquals("oewyhxessmvrkd", model.publishingProfile().customActions().get(0).script());
        Assertions.assertEquals("qeq", model.publishingProfile().customActions().get(0).description());
        Assertions.assertEquals("xm", model.publishingProfile().customActions().get(0).parameters().get(0).name());
        Assertions.assertFalse(model.safetyProfile().allowDeletionOfReplicatedLocations());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        GalleryApplicationVersionUpdate model = new GalleryApplicationVersionUpdate()
            .withTags(mapOf("xduetbapfc", "s", "bpxya", "ewxtrl", "yegbthms", "kjpirgzxvbczw"))
            .withPublishingProfile(new GalleryApplicationVersionPublishingProfile()
                .withTargetRegions(Arrays.asList(
                    new TargetRegion().withName("uqdndxlyk")
                        .withRegionalReplicaCount(732326213)
                        .withStorageAccountType(StorageAccountType.STANDARD_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(177756605))))
                        .withExcludeFromLatest(false)
                        .withAdditionalReplicaSets(
                            Arrays.asList(new AdditionalReplicaSet(), new AdditionalReplicaSet())),
                    new TargetRegion().withName("rscdxrnrnjrcuf")
                        .withRegionalReplicaCount(1352813571)
                        .withStorageAccountType(StorageAccountType.PREMIUM_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(2059960562),
                                new DataDiskImageEncryption().withLun(1010787682),
                                new DataDiskImageEncryption().withLun(278847519),
                                new DataDiskImageEncryption().withLun(1973420283))))
                        .withExcludeFromLatest(true)
                        .withAdditionalReplicaSets(
                            Arrays.asList(new AdditionalReplicaSet(), new AdditionalReplicaSet())),
                    new TargetRegion().withName("anmame")
                        .withRegionalReplicaCount(967649491)
                        .withStorageAccountType(StorageAccountType.PREMIUM_V2_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(221970539))))
                        .withExcludeFromLatest(true)
                        .withAdditionalReplicaSets(
                            Arrays.asList(new AdditionalReplicaSet(), new AdditionalReplicaSet())),
                    new TargetRegion().withName("skkqjmxptuei")
                        .withRegionalReplicaCount(897152817)
                        .withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(342537841),
                                new DataDiskImageEncryption().withLun(1368661009),
                                new DataDiskImageEncryption().withLun(1028043727))))
                        .withExcludeFromLatest(true)
                        .withAdditionalReplicaSets(
                            Arrays.asList(new AdditionalReplicaSet(), new AdditionalReplicaSet()))))
                .withReplicaCount(211029161)
                .withExcludeFromLatest(true)
                .withEndOfLifeDate(OffsetDateTime.parse("2021-03-30T04:13:54Z"))
                .withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                .withReplicationMode(ReplicationMode.FULL)
                .withTargetExtendedLocations(Arrays.asList(
                    new GalleryTargetExtendedLocation().withName("xjoegcjojlleuidp")
                        .withExtendedLocation(new GalleryExtendedLocation().withName("nvhgnhtmeplh")
                            .withType(GalleryExtendedLocationType.EDGE_ZONE))
                        .withExtendedLocationReplicaCount(1424286294)
                        .withStorageAccountType(EdgeZoneStorageAccountType.STANDARD_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(1930840208),
                                new DataDiskImageEncryption().withLun(1418184268),
                                new DataDiskImageEncryption().withLun(46117438),
                                new DataDiskImageEncryption().withLun(1610438284)))),
                    new GalleryTargetExtendedLocation().withName("c")
                        .withExtendedLocation(new GalleryExtendedLocation().withName("ua")
                            .withType(GalleryExtendedLocationType.EDGE_ZONE))
                        .withExtendedLocationReplicaCount(63222820)
                        .withStorageAccountType(EdgeZoneStorageAccountType.STANDARD_ZRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(2062639649),
                                new DataDiskImageEncryption().withLun(108101619),
                                new DataDiskImageEncryption().withLun(1141934554)))),
                    new GalleryTargetExtendedLocation().withName("uzdmhv")
                        .withExtendedLocation(new GalleryExtendedLocation().withName("ivjmxmlitqdsjipd")
                            .withType(GalleryExtendedLocationType.EDGE_ZONE))
                        .withExtendedLocationReplicaCount(1931905461)
                        .withStorageAccountType(EdgeZoneStorageAccountType.STANDARD_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(49608617),
                                new DataDiskImageEncryption().withLun(1892947257))))))
                .withStorageAccountStrategy(StorageAccountStrategy.PREFER_STANDARD_ZRS)
                .withSource(new UserArtifactSource().withMediaLink("outxfpt").withDefaultConfigurationLink("hgnu"))
                .withManageActions(
                    new UserArtifactManage().withInstall("ezygvad").withRemove("aaqwvkg").withUpdate("yt"))
                .withSettings(new UserArtifactSettings().withPackageFileName("vdn")
                    .withConfigFileName("e")
                    .withScriptBehaviorAfterReboot(GalleryApplicationScriptRebootBehavior.NONE))
                .withAdvancedSettings(mapOf("svbxxyjisskob", "ortbnukkfax"))
                .withEnableHealthCheck(false)
                .withCustomActions(
                    Arrays.asList(
                        new GalleryApplicationCustomAction().withName("l")
                            .withScript("oewyhxessmvrkd")
                            .withDescription("qeq")
                            .withParameters(Arrays.asList(new GalleryApplicationCustomActionParameter().withName("xm"),
                                new GalleryApplicationCustomActionParameter().withName("ses"))),
                        new GalleryApplicationCustomAction().withName("rujbjpppktlp")
                            .withScript("ib")
                            .withDescription("th")
                            .withParameters(
                                Arrays.asList(new GalleryApplicationCustomActionParameter().withName("tnejrnminzqp"))),
                        new GalleryApplicationCustomAction().withName("gtkihonikzsr")
                            .withScript("f")
                            .withDescription("jilzfbpntogke")
                            .withParameters(Arrays
                                .asList(new GalleryApplicationCustomActionParameter().withName("khbmcarmoyfxxk"))))))
            .withSafetyProfile(
                new GalleryApplicationVersionSafetyProfile().withAllowDeletionOfReplicatedLocations(false));
        model = BinaryData.fromObject(model).toObject(GalleryApplicationVersionUpdate.class);
        Assertions.assertEquals("s", model.tags().get("xduetbapfc"));
        Assertions.assertEquals("uqdndxlyk", model.publishingProfile().targetRegions().get(0).name());
        Assertions.assertEquals(732326213, model.publishingProfile().targetRegions().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_LRS,
            model.publishingProfile().targetRegions().get(0).storageAccountType());
        Assertions.assertEquals(177756605,
            model.publishingProfile().targetRegions().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertFalse(model.publishingProfile().targetRegions().get(0).excludeFromLatest());
        Assertions.assertEquals(211029161, model.publishingProfile().replicaCount());
        Assertions.assertTrue(model.publishingProfile().excludeFromLatest());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-30T04:13:54Z"),
            model.publishingProfile().endOfLifeDate());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS, model.publishingProfile().storageAccountType());
        Assertions.assertEquals(ReplicationMode.FULL, model.publishingProfile().replicationMode());
        Assertions.assertEquals("xjoegcjojlleuidp", model.publishingProfile().targetExtendedLocations().get(0).name());
        Assertions.assertEquals("nvhgnhtmeplh",
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().name());
        Assertions.assertEquals(GalleryExtendedLocationType.EDGE_ZONE,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().type());
        Assertions.assertEquals(1424286294,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocationReplicaCount());
        Assertions.assertEquals(EdgeZoneStorageAccountType.STANDARD_LRS,
            model.publishingProfile().targetExtendedLocations().get(0).storageAccountType());
        Assertions.assertEquals(1930840208,
            model.publishingProfile().targetExtendedLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertEquals(StorageAccountStrategy.PREFER_STANDARD_ZRS,
            model.publishingProfile().storageAccountStrategy());
        Assertions.assertEquals("outxfpt", model.publishingProfile().source().mediaLink());
        Assertions.assertEquals("hgnu", model.publishingProfile().source().defaultConfigurationLink());
        Assertions.assertEquals("ezygvad", model.publishingProfile().manageActions().install());
        Assertions.assertEquals("aaqwvkg", model.publishingProfile().manageActions().remove());
        Assertions.assertEquals("yt", model.publishingProfile().manageActions().update());
        Assertions.assertEquals("vdn", model.publishingProfile().settings().packageFileName());
        Assertions.assertEquals("e", model.publishingProfile().settings().configFileName());
        Assertions.assertEquals(GalleryApplicationScriptRebootBehavior.NONE,
            model.publishingProfile().settings().scriptBehaviorAfterReboot());
        Assertions.assertEquals("ortbnukkfax", model.publishingProfile().advancedSettings().get("svbxxyjisskob"));
        Assertions.assertFalse(model.publishingProfile().enableHealthCheck());
        Assertions.assertEquals("l", model.publishingProfile().customActions().get(0).name());
        Assertions.assertEquals("oewyhxessmvrkd", model.publishingProfile().customActions().get(0).script());
        Assertions.assertEquals("qeq", model.publishingProfile().customActions().get(0).description());
        Assertions.assertEquals("xm", model.publishingProfile().customActions().get(0).parameters().get(0).name());
        Assertions.assertFalse(model.safetyProfile().allowDeletionOfReplicatedLocations());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
