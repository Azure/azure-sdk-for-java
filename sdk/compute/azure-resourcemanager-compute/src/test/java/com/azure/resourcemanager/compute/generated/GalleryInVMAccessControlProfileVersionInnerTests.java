// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.compute.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.compute.fluent.models.GalleryInVMAccessControlProfileVersionInner;
import com.azure.resourcemanager.compute.models.AccessControlRules;
import com.azure.resourcemanager.compute.models.AccessControlRulesIdentity;
import com.azure.resourcemanager.compute.models.AccessControlRulesMode;
import com.azure.resourcemanager.compute.models.AccessControlRulesPrivilege;
import com.azure.resourcemanager.compute.models.AccessControlRulesRole;
import com.azure.resourcemanager.compute.models.AccessControlRulesRoleAssignment;
import com.azure.resourcemanager.compute.models.AdditionalReplicaSet;
import com.azure.resourcemanager.compute.models.DataDiskImageEncryption;
import com.azure.resourcemanager.compute.models.EncryptionImages;
import com.azure.resourcemanager.compute.models.EndpointAccess;
import com.azure.resourcemanager.compute.models.OSDiskImageEncryption;
import com.azure.resourcemanager.compute.models.OSDiskImageSecurityProfile;
import com.azure.resourcemanager.compute.models.StorageAccountType;
import com.azure.resourcemanager.compute.models.TargetRegion;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class GalleryInVMAccessControlProfileVersionInnerTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        GalleryInVMAccessControlProfileVersionInner model = BinaryData.fromString(
            "{\"properties\":{\"mode\":\"Disabled\",\"defaultAccess\":\"Allow\",\"rules\":{\"privileges\":[{\"name\":\"kmqcww\",\"path\":\"jnk\",\"queryParameters\":{\"w\":\"epbntqq\",\"ejse\":\"fgsqxile\"}}],\"roles\":[{\"name\":\"ne\",\"privileges\":[\"qynttwknh\",\"jksb\"]},{\"name\":\"yogjmqjh\",\"privileges\":[\"yd\"]}],\"identities\":[{\"name\":\"mcvjbssfcriqxz\",\"userName\":\"tdlxwmvcdkucp\",\"groupName\":\"yafrwr\",\"exePath\":\"rogeuvmkrspnr\",\"processName\":\"semlzofrsnq\"}],\"roleAssignments\":[{\"role\":\"petexutikelpmw\",\"identities\":[\"pubwudhvosg\"]}]},\"targetLocations\":[{\"name\":\"cuezalivdfwgq\",\"regionalReplicaCount\":224802490,\"storageAccountType\":\"Standard_ZRS\",\"encryption\":{\"osDiskImage\":{\"securityProfile\":{},\"diskEncryptionSetId\":\"ggez\"},\"dataDiskImages\":[{\"lun\":570300303},{\"lun\":1221923931}]},\"excludeFromLatest\":false,\"additionalReplicaSets\":[{\"storageAccountType\":\"Standard_ZRS\",\"regionalReplicaCount\":425090799},{\"storageAccountType\":\"Standard_ZRS\",\"regionalReplicaCount\":1906202000}]},{\"name\":\"yzaivnpsjnpckpl\",\"regionalReplicaCount\":1433921158,\"storageAccountType\":\"Premium_LRS\",\"encryption\":{\"osDiskImage\":{\"securityProfile\":{},\"diskEncryptionSetId\":\"awsaoplvvmnbkx\"},\"dataDiskImages\":[{\"lun\":1194811603},{\"lun\":429735136}]},\"excludeFromLatest\":true,\"additionalReplicaSets\":[{\"storageAccountType\":\"Standard_ZRS\",\"regionalReplicaCount\":718239101},{\"storageAccountType\":\"PremiumV2_LRS\",\"regionalReplicaCount\":1057888225}]}],\"excludeFromLatest\":false,\"publishedDate\":\"2021-09-25T11:01:04Z\",\"provisioningState\":\"Deleting\",\"replicationStatus\":{\"aggregatedState\":\"Completed\",\"summary\":[{\"region\":\"rdspzesfkqqxu\",\"state\":\"Unknown\",\"details\":\"lbrouszxac\",\"progress\":388894888}]}},\"location\":\"okgoojjf\",\"tags\":{\"gbtzvxxvsbcu\":\"ubcmun\",\"kswxmfu\":\"fkrfnkcni\"},\"id\":\"qmwmwwp\",\"name\":\"t\",\"type\":\"motahbqsvnk\"}")
            .toObject(GalleryInVMAccessControlProfileVersionInner.class);
        Assertions.assertEquals("okgoojjf", model.location());
        Assertions.assertEquals("ubcmun", model.tags().get("gbtzvxxvsbcu"));
        Assertions.assertEquals(AccessControlRulesMode.DISABLED, model.mode());
        Assertions.assertEquals(EndpointAccess.ALLOW, model.defaultAccess());
        Assertions.assertEquals("kmqcww", model.rules().privileges().get(0).name());
        Assertions.assertEquals("jnk", model.rules().privileges().get(0).path());
        Assertions.assertEquals("epbntqq", model.rules().privileges().get(0).queryParameters().get("w"));
        Assertions.assertEquals("ne", model.rules().roles().get(0).name());
        Assertions.assertEquals("qynttwknh", model.rules().roles().get(0).privileges().get(0));
        Assertions.assertEquals("mcvjbssfcriqxz", model.rules().identities().get(0).name());
        Assertions.assertEquals("tdlxwmvcdkucp", model.rules().identities().get(0).userName());
        Assertions.assertEquals("yafrwr", model.rules().identities().get(0).groupName());
        Assertions.assertEquals("rogeuvmkrspnr", model.rules().identities().get(0).exePath());
        Assertions.assertEquals("semlzofrsnq", model.rules().identities().get(0).processName());
        Assertions.assertEquals("petexutikelpmw", model.rules().roleAssignments().get(0).role());
        Assertions.assertEquals("pubwudhvosg", model.rules().roleAssignments().get(0).identities().get(0));
        Assertions.assertEquals("cuezalivdfwgq", model.targetLocations().get(0).name());
        Assertions.assertEquals(224802490, model.targetLocations().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS, model.targetLocations().get(0).storageAccountType());
        Assertions.assertEquals("ggez",
            model.targetLocations().get(0).encryption().osDiskImage().diskEncryptionSetId());
        Assertions.assertEquals(570300303, model.targetLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertFalse(model.targetLocations().get(0).excludeFromLatest());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS,
            model.targetLocations().get(0).additionalReplicaSets().get(0).storageAccountType());
        Assertions.assertEquals(425090799,
            model.targetLocations().get(0).additionalReplicaSets().get(0).regionalReplicaCount());
        Assertions.assertFalse(model.excludeFromLatest());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        GalleryInVMAccessControlProfileVersionInner model
            = new GalleryInVMAccessControlProfileVersionInner().withLocation("okgoojjf")
                .withTags(mapOf("gbtzvxxvsbcu", "ubcmun", "kswxmfu", "fkrfnkcni"))
                .withMode(AccessControlRulesMode.DISABLED)
                .withDefaultAccess(EndpointAccess.ALLOW)
                .withRules(new AccessControlRules()
                    .withPrivileges(Arrays.asList(new AccessControlRulesPrivilege().withName("kmqcww")
                        .withPath("jnk")
                        .withQueryParameters(mapOf("w", "epbntqq", "ejse", "fgsqxile"))))
                    .withRoles(Arrays.asList(
                        new AccessControlRulesRole().withName("ne").withPrivileges(Arrays.asList("qynttwknh", "jksb")),
                        new AccessControlRulesRole().withName("yogjmqjh").withPrivileges(Arrays.asList("yd"))))
                    .withIdentities(Arrays.asList(new AccessControlRulesIdentity().withName("mcvjbssfcriqxz")
                        .withUserName("tdlxwmvcdkucp")
                        .withGroupName("yafrwr")
                        .withExePath("rogeuvmkrspnr")
                        .withProcessName("semlzofrsnq")))
                    .withRoleAssignments(Arrays.asList(new AccessControlRulesRoleAssignment().withRole("petexutikelpmw")
                        .withIdentities(Arrays.asList("pubwudhvosg")))))
                .withTargetLocations(Arrays.asList(
                    new TargetRegion().withName("cuezalivdfwgq")
                        .withRegionalReplicaCount(224802490)
                        .withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                        .withEncryption(new EncryptionImages()
                            .withOsDiskImage(new OSDiskImageEncryption().withDiskEncryptionSetId("ggez")
                                .withSecurityProfile(new OSDiskImageSecurityProfile()))
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(570300303),
                                new DataDiskImageEncryption().withLun(1221923931))))
                        .withExcludeFromLatest(false)
                        .withAdditionalReplicaSets(Arrays.asList(
                            new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                                .withRegionalReplicaCount(425090799),
                            new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                                .withRegionalReplicaCount(1906202000))),
                    new TargetRegion().withName("yzaivnpsjnpckpl")
                        .withRegionalReplicaCount(1433921158)
                        .withStorageAccountType(StorageAccountType.PREMIUM_LRS)
                        .withEncryption(new EncryptionImages()
                            .withOsDiskImage(new OSDiskImageEncryption().withDiskEncryptionSetId("awsaoplvvmnbkx")
                                .withSecurityProfile(new OSDiskImageSecurityProfile()))
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(1194811603),
                                new DataDiskImageEncryption().withLun(429735136))))
                        .withExcludeFromLatest(true)
                        .withAdditionalReplicaSets(Arrays.asList(
                            new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                                .withRegionalReplicaCount(718239101),
                            new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.PREMIUM_V2_LRS)
                                .withRegionalReplicaCount(1057888225)))))
                .withExcludeFromLatest(false);
        model = BinaryData.fromObject(model).toObject(GalleryInVMAccessControlProfileVersionInner.class);
        Assertions.assertEquals("okgoojjf", model.location());
        Assertions.assertEquals("ubcmun", model.tags().get("gbtzvxxvsbcu"));
        Assertions.assertEquals(AccessControlRulesMode.DISABLED, model.mode());
        Assertions.assertEquals(EndpointAccess.ALLOW, model.defaultAccess());
        Assertions.assertEquals("kmqcww", model.rules().privileges().get(0).name());
        Assertions.assertEquals("jnk", model.rules().privileges().get(0).path());
        Assertions.assertEquals("epbntqq", model.rules().privileges().get(0).queryParameters().get("w"));
        Assertions.assertEquals("ne", model.rules().roles().get(0).name());
        Assertions.assertEquals("qynttwknh", model.rules().roles().get(0).privileges().get(0));
        Assertions.assertEquals("mcvjbssfcriqxz", model.rules().identities().get(0).name());
        Assertions.assertEquals("tdlxwmvcdkucp", model.rules().identities().get(0).userName());
        Assertions.assertEquals("yafrwr", model.rules().identities().get(0).groupName());
        Assertions.assertEquals("rogeuvmkrspnr", model.rules().identities().get(0).exePath());
        Assertions.assertEquals("semlzofrsnq", model.rules().identities().get(0).processName());
        Assertions.assertEquals("petexutikelpmw", model.rules().roleAssignments().get(0).role());
        Assertions.assertEquals("pubwudhvosg", model.rules().roleAssignments().get(0).identities().get(0));
        Assertions.assertEquals("cuezalivdfwgq", model.targetLocations().get(0).name());
        Assertions.assertEquals(224802490, model.targetLocations().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS, model.targetLocations().get(0).storageAccountType());
        Assertions.assertEquals("ggez",
            model.targetLocations().get(0).encryption().osDiskImage().diskEncryptionSetId());
        Assertions.assertEquals(570300303, model.targetLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertFalse(model.targetLocations().get(0).excludeFromLatest());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS,
            model.targetLocations().get(0).additionalReplicaSets().get(0).storageAccountType());
        Assertions.assertEquals(425090799,
            model.targetLocations().get(0).additionalReplicaSets().get(0).regionalReplicaCount());
        Assertions.assertFalse(model.excludeFromLatest());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
