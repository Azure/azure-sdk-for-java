// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.compute.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.compute.models.AccessControlRules;
import com.azure.resourcemanager.compute.models.AccessControlRulesIdentity;
import com.azure.resourcemanager.compute.models.AccessControlRulesPrivilege;
import com.azure.resourcemanager.compute.models.AccessControlRulesRole;
import com.azure.resourcemanager.compute.models.AccessControlRulesRoleAssignment;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class AccessControlRulesTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        AccessControlRules model = BinaryData.fromString(
            "{\"privileges\":[{\"name\":\"lhbimyii\",\"path\":\"qamcthtpqgfz\",\"queryParameters\":{\"kdi\":\"i\",\"jg\":\"vflgzhc\",\"pccxziv\":\"ahcrxofgrutv\"}},{\"name\":\"pmhz\",\"path\":\"hh\",\"queryParameters\":{\"jd\":\"n\",\"zstqlf\":\"ujqzvhnjvpmxnht\"}},{\"name\":\"olrwvtlgxyfj\",\"path\":\"wequfl\",\"queryParameters\":{\"aytwwgwqubotb\":\"op\",\"powewjs\":\"ufrkwjiemimdt\"}}],\"roles\":[{\"name\":\"eedddrftfquu\",\"privileges\":[\"clhsiigeeuw\"]},{\"name\":\"rn\",\"privileges\":[\"xfedqnetdqw\",\"nxoqgv\",\"zp\"]},{\"name\":\"gp\",\"privileges\":[\"eyobqaj\",\"jirvavrvkgpo\",\"plbjuvlnhxnr\",\"jhinaegesbx\"]},{\"name\":\"epqmjmoplukfykk\",\"privileges\":[\"sova\",\"krmjxmwqp\",\"kes\"]}],\"identities\":[{\"name\":\"zkqmx\",\"userName\":\"o\",\"groupName\":\"wbwggijts\",\"exePath\":\"jnrrhikws\",\"processName\":\"r\"},{\"name\":\"d\",\"userName\":\"quhtr\",\"groupName\":\"frunj\",\"exePath\":\"rjhiycbauseqnczk\",\"processName\":\"hvtuwyjsqwzsz\"}],\"roleAssignments\":[{\"role\":\"jgzunkfny\",\"identities\":[\"wwunqhc\"]}]}")
            .toObject(AccessControlRules.class);
        Assertions.assertEquals("lhbimyii", model.privileges().get(0).name());
        Assertions.assertEquals("qamcthtpqgfz", model.privileges().get(0).path());
        Assertions.assertEquals("i", model.privileges().get(0).queryParameters().get("kdi"));
        Assertions.assertEquals("eedddrftfquu", model.roles().get(0).name());
        Assertions.assertEquals("clhsiigeeuw", model.roles().get(0).privileges().get(0));
        Assertions.assertEquals("zkqmx", model.identities().get(0).name());
        Assertions.assertEquals("o", model.identities().get(0).userName());
        Assertions.assertEquals("wbwggijts", model.identities().get(0).groupName());
        Assertions.assertEquals("jnrrhikws", model.identities().get(0).exePath());
        Assertions.assertEquals("r", model.identities().get(0).processName());
        Assertions.assertEquals("jgzunkfny", model.roleAssignments().get(0).role());
        Assertions.assertEquals("wwunqhc", model.roleAssignments().get(0).identities().get(0));
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        AccessControlRules model = new AccessControlRules()
            .withPrivileges(Arrays.asList(
                new AccessControlRulesPrivilege().withName("lhbimyii")
                    .withPath("qamcthtpqgfz")
                    .withQueryParameters(mapOf("kdi", "i", "jg", "vflgzhc", "pccxziv", "ahcrxofgrutv")),
                new AccessControlRulesPrivilege().withName("pmhz")
                    .withPath("hh")
                    .withQueryParameters(mapOf("jd", "n", "zstqlf", "ujqzvhnjvpmxnht")),
                new AccessControlRulesPrivilege().withName("olrwvtlgxyfj")
                    .withPath("wequfl")
                    .withQueryParameters(mapOf("aytwwgwqubotb", "op", "powewjs", "ufrkwjiemimdt"))))
            .withRoles(Arrays.asList(
                new AccessControlRulesRole().withName("eedddrftfquu").withPrivileges(Arrays.asList("clhsiigeeuw")),
                new AccessControlRulesRole().withName("rn")
                    .withPrivileges(Arrays.asList("xfedqnetdqw", "nxoqgv", "zp")),
                new AccessControlRulesRole().withName("gp")
                    .withPrivileges(Arrays.asList("eyobqaj", "jirvavrvkgpo", "plbjuvlnhxnr", "jhinaegesbx")),
                new AccessControlRulesRole().withName("epqmjmoplukfykk")
                    .withPrivileges(Arrays.asList("sova", "krmjxmwqp", "kes"))))
            .withIdentities(Arrays.asList(
                new AccessControlRulesIdentity().withName("zkqmx")
                    .withUserName("o")
                    .withGroupName("wbwggijts")
                    .withExePath("jnrrhikws")
                    .withProcessName("r"),
                new AccessControlRulesIdentity().withName("d")
                    .withUserName("quhtr")
                    .withGroupName("frunj")
                    .withExePath("rjhiycbauseqnczk")
                    .withProcessName("hvtuwyjsqwzsz")))
            .withRoleAssignments(Arrays.asList(
                new AccessControlRulesRoleAssignment().withRole("jgzunkfny").withIdentities(Arrays.asList("wwunqhc"))));
        model = BinaryData.fromObject(model).toObject(AccessControlRules.class);
        Assertions.assertEquals("lhbimyii", model.privileges().get(0).name());
        Assertions.assertEquals("qamcthtpqgfz", model.privileges().get(0).path());
        Assertions.assertEquals("i", model.privileges().get(0).queryParameters().get("kdi"));
        Assertions.assertEquals("eedddrftfquu", model.roles().get(0).name());
        Assertions.assertEquals("clhsiigeeuw", model.roles().get(0).privileges().get(0));
        Assertions.assertEquals("zkqmx", model.identities().get(0).name());
        Assertions.assertEquals("o", model.identities().get(0).userName());
        Assertions.assertEquals("wbwggijts", model.identities().get(0).groupName());
        Assertions.assertEquals("jnrrhikws", model.identities().get(0).exePath());
        Assertions.assertEquals("r", model.identities().get(0).processName());
        Assertions.assertEquals("jgzunkfny", model.roleAssignments().get(0).role());
        Assertions.assertEquals("wwunqhc", model.roleAssignments().get(0).identities().get(0));
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
