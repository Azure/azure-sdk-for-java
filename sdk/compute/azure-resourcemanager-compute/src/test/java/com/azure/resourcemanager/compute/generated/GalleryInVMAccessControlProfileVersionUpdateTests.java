// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.compute.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.compute.models.AccessControlRules;
import com.azure.resourcemanager.compute.models.AccessControlRulesIdentity;
import com.azure.resourcemanager.compute.models.AccessControlRulesMode;
import com.azure.resourcemanager.compute.models.AccessControlRulesPrivilege;
import com.azure.resourcemanager.compute.models.AccessControlRulesRole;
import com.azure.resourcemanager.compute.models.AccessControlRulesRoleAssignment;
import com.azure.resourcemanager.compute.models.AdditionalReplicaSet;
import com.azure.resourcemanager.compute.models.DataDiskImageEncryption;
import com.azure.resourcemanager.compute.models.EncryptionImages;
import com.azure.resourcemanager.compute.models.EndpointAccess;
import com.azure.resourcemanager.compute.models.GalleryInVMAccessControlProfileVersionUpdate;
import com.azure.resourcemanager.compute.models.OSDiskImageEncryption;
import com.azure.resourcemanager.compute.models.OSDiskImageSecurityProfile;
import com.azure.resourcemanager.compute.models.StorageAccountType;
import com.azure.resourcemanager.compute.models.TargetRegion;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class GalleryInVMAccessControlProfileVersionUpdateTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        GalleryInVMAccessControlProfileVersionUpdate model = BinaryData.fromString(
            "{\"properties\":{\"mode\":\"Enforce\",\"defaultAccess\":\"Deny\",\"rules\":{\"privileges\":[{\"name\":\"jkiysqbjsdj\",\"path\":\"gxe\",\"queryParameters\":{\"cbivov\":\"wkcfferzn\",\"hfeqcoop\":\"om\",\"nbz\":\"fpohimgckycjpeeb\"}}],\"roles\":[{\"name\":\"ulo\",\"privileges\":[\"npbmxoo\"]},{\"name\":\"ohgpncdmwkhupfhs\",\"privileges\":[\"qd\"]}],\"identities\":[{\"name\":\"iunyevdyzdsytc\",\"userName\":\"swhcamwuy\",\"groupName\":\"xkcgsfcmvhadr\",\"exePath\":\"atvyrkljqkqws\",\"processName\":\"tvjkowggxawwdm\"},{\"name\":\"y\",\"userName\":\"kteiidlbovwbclpr\",\"groupName\":\"gani\",\"exePath\":\"jcn\",\"processName\":\"ekyjulskwwnq\"},{\"name\":\"qlq\",\"userName\":\"wxtvce\",\"groupName\":\"vv\",\"exePath\":\"xwvegenlrj\",\"processName\":\"mwevguyflnxel\"},{\"name\":\"jkfzcdetowwezh\",\"userName\":\"kdi\",\"groupName\":\"wqlqacs\",\"exePath\":\"birtybcelfjn\",\"processName\":\"dnjyhzfax\"}],\"roleAssignments\":[{\"role\":\"vuelumodpegqxso\",\"identities\":[\"hazrqoxz\",\"hlbeqvhs\",\"b\"]},{\"role\":\"pwxslaj\",\"identities\":[\"fzga\"]},{\"role\":\"fha\",\"identities\":[\"mibuyd\",\"iurni\",\"updyttqm\"]},{\"role\":\"u\",\"identities\":[\"plosebmhhtuqm\",\"xynof\",\"qobfixngxebihe\"]}]},\"targetLocations\":[{\"name\":\"kingiqcdolrpgu\",\"regionalReplicaCount\":1683246617,\"storageAccountType\":\"Standard_ZRS\",\"encryption\":{\"osDiskImage\":{\"securityProfile\":{},\"diskEncryptionSetId\":\"a\"},\"dataDiskImages\":[{\"lun\":1943307031},{\"lun\":829409936},{\"lun\":1364418084},{\"lun\":1246052053}]},\"excludeFromLatest\":true,\"additionalReplicaSets\":[{\"storageAccountType\":\"Standard_ZRS\",\"regionalReplicaCount\":669475798},{\"storageAccountType\":\"PremiumV2_LRS\",\"regionalReplicaCount\":2133088947},{\"storageAccountType\":\"Standard_ZRS\",\"regionalReplicaCount\":1866175919},{\"storageAccountType\":\"Standard_LRS\",\"regionalReplicaCount\":1157901929}]}],\"excludeFromLatest\":true,\"publishedDate\":\"2021-06-02T04:00:21Z\",\"provisioningState\":\"Deleting\",\"replicationStatus\":{\"aggregatedState\":\"Completed\",\"summary\":[{\"region\":\"zzetlvhdy\",\"state\":\"Completed\",\"details\":\"wywjvrlgqpwwlzp\",\"progress\":1974474874}]}},\"id\":\"cbcdwhslxebaja\",\"name\":\"n\",\"type\":\"tbdoprwkampy\",\"tags\":{\"iudrcycmwhuzym\":\"bldz\",\"vkmnbzkopaiil\":\"lhihqkn\"}}")
            .toObject(GalleryInVMAccessControlProfileVersionUpdate.class);
        Assertions.assertEquals("bldz", model.tags().get("iudrcycmwhuzym"));
        Assertions.assertEquals(AccessControlRulesMode.ENFORCE, model.mode());
        Assertions.assertEquals(EndpointAccess.DENY, model.defaultAccess());
        Assertions.assertEquals("jkiysqbjsdj", model.rules().privileges().get(0).name());
        Assertions.assertEquals("gxe", model.rules().privileges().get(0).path());
        Assertions.assertEquals("wkcfferzn", model.rules().privileges().get(0).queryParameters().get("cbivov"));
        Assertions.assertEquals("ulo", model.rules().roles().get(0).name());
        Assertions.assertEquals("npbmxoo", model.rules().roles().get(0).privileges().get(0));
        Assertions.assertEquals("iunyevdyzdsytc", model.rules().identities().get(0).name());
        Assertions.assertEquals("swhcamwuy", model.rules().identities().get(0).userName());
        Assertions.assertEquals("xkcgsfcmvhadr", model.rules().identities().get(0).groupName());
        Assertions.assertEquals("atvyrkljqkqws", model.rules().identities().get(0).exePath());
        Assertions.assertEquals("tvjkowggxawwdm", model.rules().identities().get(0).processName());
        Assertions.assertEquals("vuelumodpegqxso", model.rules().roleAssignments().get(0).role());
        Assertions.assertEquals("hazrqoxz", model.rules().roleAssignments().get(0).identities().get(0));
        Assertions.assertEquals("kingiqcdolrpgu", model.targetLocations().get(0).name());
        Assertions.assertEquals(1683246617, model.targetLocations().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS, model.targetLocations().get(0).storageAccountType());
        Assertions.assertEquals("a", model.targetLocations().get(0).encryption().osDiskImage().diskEncryptionSetId());
        Assertions.assertEquals(1943307031, model.targetLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertTrue(model.targetLocations().get(0).excludeFromLatest());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS,
            model.targetLocations().get(0).additionalReplicaSets().get(0).storageAccountType());
        Assertions.assertEquals(669475798,
            model.targetLocations().get(0).additionalReplicaSets().get(0).regionalReplicaCount());
        Assertions.assertTrue(model.excludeFromLatest());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        GalleryInVMAccessControlProfileVersionUpdate model = new GalleryInVMAccessControlProfileVersionUpdate()
            .withTags(mapOf("iudrcycmwhuzym", "bldz", "vkmnbzkopaiil", "lhihqkn"))
            .withMode(AccessControlRulesMode.ENFORCE)
            .withDefaultAccess(EndpointAccess.DENY)
            .withRules(new AccessControlRules()
                .withPrivileges(Arrays.asList(new AccessControlRulesPrivilege().withName("jkiysqbjsdj")
                    .withPath("gxe")
                    .withQueryParameters(mapOf("cbivov", "wkcfferzn", "hfeqcoop", "om", "nbz", "fpohimgckycjpeeb"))))
                .withRoles(
                    Arrays.asList(new AccessControlRulesRole().withName("ulo").withPrivileges(Arrays.asList("npbmxoo")),
                        new AccessControlRulesRole().withName("ohgpncdmwkhupfhs").withPrivileges(Arrays.asList("qd"))))
                .withIdentities(Arrays.asList(
                    new AccessControlRulesIdentity().withName("iunyevdyzdsytc")
                        .withUserName("swhcamwuy")
                        .withGroupName("xkcgsfcmvhadr")
                        .withExePath("atvyrkljqkqws")
                        .withProcessName("tvjkowggxawwdm"),
                    new AccessControlRulesIdentity().withName("y")
                        .withUserName("kteiidlbovwbclpr")
                        .withGroupName("gani")
                        .withExePath("jcn")
                        .withProcessName("ekyjulskwwnq"),
                    new AccessControlRulesIdentity().withName("qlq")
                        .withUserName("wxtvce")
                        .withGroupName("vv")
                        .withExePath("xwvegenlrj")
                        .withProcessName("mwevguyflnxel"),
                    new AccessControlRulesIdentity().withName("jkfzcdetowwezh")
                        .withUserName("kdi")
                        .withGroupName("wqlqacs")
                        .withExePath("birtybcelfjn")
                        .withProcessName("dnjyhzfax")))
                .withRoleAssignments(Arrays.asList(
                    new AccessControlRulesRoleAssignment().withRole("vuelumodpegqxso")
                        .withIdentities(Arrays.asList("hazrqoxz", "hlbeqvhs", "b")),
                    new AccessControlRulesRoleAssignment().withRole("pwxslaj").withIdentities(Arrays.asList("fzga")),
                    new AccessControlRulesRoleAssignment().withRole("fha")
                        .withIdentities(Arrays.asList("mibuyd", "iurni", "updyttqm")),
                    new AccessControlRulesRoleAssignment().withRole("u")
                        .withIdentities(Arrays.asList("plosebmhhtuqm", "xynof", "qobfixngxebihe")))))
            .withTargetLocations(Arrays.asList(new TargetRegion().withName("kingiqcdolrpgu")
                .withRegionalReplicaCount(1683246617)
                .withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                .withEncryption(new EncryptionImages()
                    .withOsDiskImage(new OSDiskImageEncryption().withDiskEncryptionSetId("a")
                        .withSecurityProfile(new OSDiskImageSecurityProfile()))
                    .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(1943307031),
                        new DataDiskImageEncryption().withLun(829409936),
                        new DataDiskImageEncryption().withLun(1364418084),
                        new DataDiskImageEncryption().withLun(1246052053))))
                .withExcludeFromLatest(true)
                .withAdditionalReplicaSets(Arrays.asList(
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                        .withRegionalReplicaCount(669475798),
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.PREMIUM_V2_LRS)
                        .withRegionalReplicaCount(2133088947),
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                        .withRegionalReplicaCount(1866175919),
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.STANDARD_LRS)
                        .withRegionalReplicaCount(1157901929)))))
            .withExcludeFromLatest(true);
        model = BinaryData.fromObject(model).toObject(GalleryInVMAccessControlProfileVersionUpdate.class);
        Assertions.assertEquals("bldz", model.tags().get("iudrcycmwhuzym"));
        Assertions.assertEquals(AccessControlRulesMode.ENFORCE, model.mode());
        Assertions.assertEquals(EndpointAccess.DENY, model.defaultAccess());
        Assertions.assertEquals("jkiysqbjsdj", model.rules().privileges().get(0).name());
        Assertions.assertEquals("gxe", model.rules().privileges().get(0).path());
        Assertions.assertEquals("wkcfferzn", model.rules().privileges().get(0).queryParameters().get("cbivov"));
        Assertions.assertEquals("ulo", model.rules().roles().get(0).name());
        Assertions.assertEquals("npbmxoo", model.rules().roles().get(0).privileges().get(0));
        Assertions.assertEquals("iunyevdyzdsytc", model.rules().identities().get(0).name());
        Assertions.assertEquals("swhcamwuy", model.rules().identities().get(0).userName());
        Assertions.assertEquals("xkcgsfcmvhadr", model.rules().identities().get(0).groupName());
        Assertions.assertEquals("atvyrkljqkqws", model.rules().identities().get(0).exePath());
        Assertions.assertEquals("tvjkowggxawwdm", model.rules().identities().get(0).processName());
        Assertions.assertEquals("vuelumodpegqxso", model.rules().roleAssignments().get(0).role());
        Assertions.assertEquals("hazrqoxz", model.rules().roleAssignments().get(0).identities().get(0));
        Assertions.assertEquals("kingiqcdolrpgu", model.targetLocations().get(0).name());
        Assertions.assertEquals(1683246617, model.targetLocations().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS, model.targetLocations().get(0).storageAccountType());
        Assertions.assertEquals("a", model.targetLocations().get(0).encryption().osDiskImage().diskEncryptionSetId());
        Assertions.assertEquals(1943307031, model.targetLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertTrue(model.targetLocations().get(0).excludeFromLatest());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS,
            model.targetLocations().get(0).additionalReplicaSets().get(0).storageAccountType());
        Assertions.assertEquals(669475798,
            model.targetLocations().get(0).additionalReplicaSets().get(0).regionalReplicaCount());
        Assertions.assertTrue(model.excludeFromLatest());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
