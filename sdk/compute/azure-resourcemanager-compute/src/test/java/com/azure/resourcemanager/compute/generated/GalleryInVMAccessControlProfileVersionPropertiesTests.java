// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.compute.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.compute.fluent.models.GalleryInVMAccessControlProfileVersionProperties;
import com.azure.resourcemanager.compute.models.AccessControlRules;
import com.azure.resourcemanager.compute.models.AccessControlRulesIdentity;
import com.azure.resourcemanager.compute.models.AccessControlRulesMode;
import com.azure.resourcemanager.compute.models.AccessControlRulesPrivilege;
import com.azure.resourcemanager.compute.models.AccessControlRulesRole;
import com.azure.resourcemanager.compute.models.AccessControlRulesRoleAssignment;
import com.azure.resourcemanager.compute.models.AdditionalReplicaSet;
import com.azure.resourcemanager.compute.models.ConfidentialVMEncryptionType;
import com.azure.resourcemanager.compute.models.DataDiskImageEncryption;
import com.azure.resourcemanager.compute.models.EncryptionImages;
import com.azure.resourcemanager.compute.models.EndpointAccess;
import com.azure.resourcemanager.compute.models.OSDiskImageEncryption;
import com.azure.resourcemanager.compute.models.OSDiskImageSecurityProfile;
import com.azure.resourcemanager.compute.models.StorageAccountType;
import com.azure.resourcemanager.compute.models.TargetRegion;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class GalleryInVMAccessControlProfileVersionPropertiesTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        GalleryInVMAccessControlProfileVersionProperties model = BinaryData.fromString(
            "{\"mode\":\"Audit\",\"defaultAccess\":\"Deny\",\"rules\":{\"privileges\":[{\"name\":\"aed\",\"path\":\"lhxgcqm\",\"queryParameters\":{\"yftgpqoswgfqv\":\"kvxzzmiem\",\"sornfbmeqagkn\":\"mghpakbqyh\"}}],\"roles\":[{\"name\":\"ybn\",\"privileges\":[\"vztnjawrhulemm\",\"mbwppxirxbkitzmn\",\"itaxju\"]},{\"name\":\"l\",\"privileges\":[\"lxsgcemegdz\"]},{\"name\":\"vyljubvfjyzufldi\",\"privileges\":[\"ivl\",\"tggmaacx\",\"uhvcgzxhkls\",\"xt\"]}],\"identities\":[{\"name\":\"y\",\"userName\":\"tsrjyxxoxwfz\",\"groupName\":\"vecnxfxphs\",\"exePath\":\"bebsnbw\",\"processName\":\"lvuwmsumust\"},{\"name\":\"htg\",\"userName\":\"fjajvkyxmm\",\"groupName\":\"zvogtde\",\"exePath\":\"ennmkvaeuwqd\",\"processName\":\"hhlbm\"},{\"name\":\"phfxnrpdhewoky\",\"userName\":\"fkxfsywbihqb\",\"groupName\":\"djfyxbvkv\",\"exePath\":\"dmv\",\"processName\":\"qwcrugyo\"},{\"name\":\"zzawnjdvvl\",\"userName\":\"ocrkkvxu\",\"groupName\":\"qzbvbpsuvqhxt\",\"exePath\":\"fgdkwbk\",\"processName\":\"klpiigfuzke\"}],\"roleAssignments\":[{\"role\":\"ipjclzjwaqdz\",\"identities\":[\"dewuwxyl\",\"zzzevtzqwczoc\",\"wbekmu\"]},{\"role\":\"nfpkyvnhiys\",\"identities\":[\"orksl\",\"raqkiwlw\",\"fflaqwm\"]},{\"role\":\"qoguflteatnegef\",\"identities\":[\"xnjtqbgysib\",\"hnvxwtd\",\"tcbjdbtqy\"]}]},\"targetLocations\":[{\"name\":\"unsaujqgbbjvo\",\"regionalReplicaCount\":82954173,\"storageAccountType\":\"Premium_LRS\",\"encryption\":{\"osDiskImage\":{\"securityProfile\":{\"confidentialVMEncryptionType\":\"EncryptedVMGuestStateOnlyWithPmk\",\"secureVMDiskEncryptionSetId\":\"sloygsa\"},\"diskEncryptionSetId\":\"gdheronsd\"},\"dataDiskImages\":[{\"lun\":2001157974,\"diskEncryptionSetId\":\"vz\"},{\"lun\":1649857704,\"diskEncryptionSetId\":\"qhgzuyxtrvfdb\"}]},\"excludeFromLatest\":true,\"additionalReplicaSets\":[{\"storageAccountType\":\"Standard_LRS\",\"regionalReplicaCount\":2107826050},{\"storageAccountType\":\"PremiumV2_LRS\",\"regionalReplicaCount\":1481855766},{\"storageAccountType\":\"PremiumV2_LRS\",\"regionalReplicaCount\":404074462},{\"storageAccountType\":\"PremiumV2_LRS\",\"regionalReplicaCount\":1715023602}]}],\"excludeFromLatest\":false,\"publishedDate\":\"2021-05-25T08:32:26Z\",\"provisioningState\":\"Failed\",\"replicationStatus\":{\"aggregatedState\":\"Unknown\",\"summary\":[{\"region\":\"y\",\"state\":\"Replicating\",\"details\":\"bwxyldqtmggcpd\",\"progress\":1459756220},{\"region\":\"ajrzctwymzskwqk\",\"state\":\"Replicating\",\"details\":\"eiphgliupqs\",\"progress\":1895644820},{\"region\":\"kj\",\"state\":\"Completed\",\"details\":\"sqcomjiqiincevx\",\"progress\":1429891473}]}}")
            .toObject(GalleryInVMAccessControlProfileVersionProperties.class);
        Assertions.assertEquals("unsaujqgbbjvo", model.targetLocations().get(0).name());
        Assertions.assertEquals(82954173, model.targetLocations().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.PREMIUM_LRS, model.targetLocations().get(0).storageAccountType());
        Assertions.assertEquals("gdheronsd",
            model.targetLocations().get(0).encryption().osDiskImage().diskEncryptionSetId());
        Assertions.assertEquals(ConfidentialVMEncryptionType.ENCRYPTED_VMGUEST_STATE_ONLY_WITH_PMK,
            model.targetLocations().get(0).encryption().osDiskImage().securityProfile().confidentialVMEncryptionType());
        Assertions.assertEquals("sloygsa",
            model.targetLocations().get(0).encryption().osDiskImage().securityProfile().secureVMDiskEncryptionSetId());
        Assertions.assertEquals("vz",
            model.targetLocations().get(0).encryption().dataDiskImages().get(0).diskEncryptionSetId());
        Assertions.assertEquals(2001157974, model.targetLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertTrue(model.targetLocations().get(0).excludeFromLatest());
        Assertions.assertEquals(StorageAccountType.STANDARD_LRS,
            model.targetLocations().get(0).additionalReplicaSets().get(0).storageAccountType());
        Assertions.assertEquals(2107826050,
            model.targetLocations().get(0).additionalReplicaSets().get(0).regionalReplicaCount());
        Assertions.assertFalse(model.excludeFromLatest());
        Assertions.assertEquals(AccessControlRulesMode.AUDIT, model.mode());
        Assertions.assertEquals(EndpointAccess.DENY, model.defaultAccess());
        Assertions.assertEquals("aed", model.rules().privileges().get(0).name());
        Assertions.assertEquals("lhxgcqm", model.rules().privileges().get(0).path());
        Assertions.assertEquals("kvxzzmiem", model.rules().privileges().get(0).queryParameters().get("yftgpqoswgfqv"));
        Assertions.assertEquals("ybn", model.rules().roles().get(0).name());
        Assertions.assertEquals("vztnjawrhulemm", model.rules().roles().get(0).privileges().get(0));
        Assertions.assertEquals("y", model.rules().identities().get(0).name());
        Assertions.assertEquals("tsrjyxxoxwfz", model.rules().identities().get(0).userName());
        Assertions.assertEquals("vecnxfxphs", model.rules().identities().get(0).groupName());
        Assertions.assertEquals("bebsnbw", model.rules().identities().get(0).exePath());
        Assertions.assertEquals("lvuwmsumust", model.rules().identities().get(0).processName());
        Assertions.assertEquals("ipjclzjwaqdz", model.rules().roleAssignments().get(0).role());
        Assertions.assertEquals("dewuwxyl", model.rules().roleAssignments().get(0).identities().get(0));
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        GalleryInVMAccessControlProfileVersionProperties model = new GalleryInVMAccessControlProfileVersionProperties()
            .withTargetLocations(Arrays.asList(new TargetRegion().withName("unsaujqgbbjvo")
                .withRegionalReplicaCount(82954173)
                .withStorageAccountType(StorageAccountType.PREMIUM_LRS)
                .withEncryption(new EncryptionImages()
                    .withOsDiskImage(new OSDiskImageEncryption().withDiskEncryptionSetId("gdheronsd")
                        .withSecurityProfile(new OSDiskImageSecurityProfile()
                            .withConfidentialVMEncryptionType(
                                ConfidentialVMEncryptionType.ENCRYPTED_VMGUEST_STATE_ONLY_WITH_PMK)
                            .withSecureVMDiskEncryptionSetId("sloygsa")))
                    .withDataDiskImages(
                        Arrays.asList(new DataDiskImageEncryption().withDiskEncryptionSetId("vz").withLun(2001157974),
                            new DataDiskImageEncryption().withDiskEncryptionSetId("qhgzuyxtrvfdb")
                                .withLun(1649857704))))
                .withExcludeFromLatest(true)
                .withAdditionalReplicaSets(Arrays.asList(
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.STANDARD_LRS)
                        .withRegionalReplicaCount(2107826050),
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.PREMIUM_V2_LRS)
                        .withRegionalReplicaCount(1481855766),
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.PREMIUM_V2_LRS)
                        .withRegionalReplicaCount(404074462),
                    new AdditionalReplicaSet().withStorageAccountType(StorageAccountType.PREMIUM_V2_LRS)
                        .withRegionalReplicaCount(1715023602)))))
            .withExcludeFromLatest(false)
            .withMode(AccessControlRulesMode.AUDIT)
            .withDefaultAccess(EndpointAccess.DENY)
            .withRules(new AccessControlRules()
                .withPrivileges(Arrays.asList(new AccessControlRulesPrivilege().withName("aed")
                    .withPath("lhxgcqm")
                    .withQueryParameters(mapOf("yftgpqoswgfqv", "kvxzzmiem", "sornfbmeqagkn", "mghpakbqyh"))))
                .withRoles(Arrays.asList(
                    new AccessControlRulesRole().withName("ybn")
                        .withPrivileges(Arrays.asList("vztnjawrhulemm", "mbwppxirxbkitzmn", "itaxju")),
                    new AccessControlRulesRole().withName("l").withPrivileges(Arrays.asList("lxsgcemegdz")),
                    new AccessControlRulesRole().withName("vyljubvfjyzufldi")
                        .withPrivileges(Arrays.asList("ivl", "tggmaacx", "uhvcgzxhkls", "xt"))))
                .withIdentities(Arrays.asList(
                    new AccessControlRulesIdentity().withName("y")
                        .withUserName("tsrjyxxoxwfz")
                        .withGroupName("vecnxfxphs")
                        .withExePath("bebsnbw")
                        .withProcessName("lvuwmsumust"),
                    new AccessControlRulesIdentity().withName("htg")
                        .withUserName("fjajvkyxmm")
                        .withGroupName("zvogtde")
                        .withExePath("ennmkvaeuwqd")
                        .withProcessName("hhlbm"),
                    new AccessControlRulesIdentity().withName("phfxnrpdhewoky")
                        .withUserName("fkxfsywbihqb")
                        .withGroupName("djfyxbvkv")
                        .withExePath("dmv")
                        .withProcessName("qwcrugyo"),
                    new AccessControlRulesIdentity().withName("zzawnjdvvl")
                        .withUserName("ocrkkvxu")
                        .withGroupName("qzbvbpsuvqhxt")
                        .withExePath("fgdkwbk")
                        .withProcessName("klpiigfuzke")))
                .withRoleAssignments(Arrays.asList(
                    new AccessControlRulesRoleAssignment().withRole("ipjclzjwaqdz")
                        .withIdentities(Arrays.asList("dewuwxyl", "zzzevtzqwczoc", "wbekmu")),
                    new AccessControlRulesRoleAssignment().withRole("nfpkyvnhiys")
                        .withIdentities(Arrays.asList("orksl", "raqkiwlw", "fflaqwm")),
                    new AccessControlRulesRoleAssignment().withRole("qoguflteatnegef")
                        .withIdentities(Arrays.asList("xnjtqbgysib", "hnvxwtd", "tcbjdbtqy")))));
        model = BinaryData.fromObject(model).toObject(GalleryInVMAccessControlProfileVersionProperties.class);
        Assertions.assertEquals("unsaujqgbbjvo", model.targetLocations().get(0).name());
        Assertions.assertEquals(82954173, model.targetLocations().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.PREMIUM_LRS, model.targetLocations().get(0).storageAccountType());
        Assertions.assertEquals("gdheronsd",
            model.targetLocations().get(0).encryption().osDiskImage().diskEncryptionSetId());
        Assertions.assertEquals(ConfidentialVMEncryptionType.ENCRYPTED_VMGUEST_STATE_ONLY_WITH_PMK,
            model.targetLocations().get(0).encryption().osDiskImage().securityProfile().confidentialVMEncryptionType());
        Assertions.assertEquals("sloygsa",
            model.targetLocations().get(0).encryption().osDiskImage().securityProfile().secureVMDiskEncryptionSetId());
        Assertions.assertEquals("vz",
            model.targetLocations().get(0).encryption().dataDiskImages().get(0).diskEncryptionSetId());
        Assertions.assertEquals(2001157974, model.targetLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertTrue(model.targetLocations().get(0).excludeFromLatest());
        Assertions.assertEquals(StorageAccountType.STANDARD_LRS,
            model.targetLocations().get(0).additionalReplicaSets().get(0).storageAccountType());
        Assertions.assertEquals(2107826050,
            model.targetLocations().get(0).additionalReplicaSets().get(0).regionalReplicaCount());
        Assertions.assertFalse(model.excludeFromLatest());
        Assertions.assertEquals(AccessControlRulesMode.AUDIT, model.mode());
        Assertions.assertEquals(EndpointAccess.DENY, model.defaultAccess());
        Assertions.assertEquals("aed", model.rules().privileges().get(0).name());
        Assertions.assertEquals("lhxgcqm", model.rules().privileges().get(0).path());
        Assertions.assertEquals("kvxzzmiem", model.rules().privileges().get(0).queryParameters().get("yftgpqoswgfqv"));
        Assertions.assertEquals("ybn", model.rules().roles().get(0).name());
        Assertions.assertEquals("vztnjawrhulemm", model.rules().roles().get(0).privileges().get(0));
        Assertions.assertEquals("y", model.rules().identities().get(0).name());
        Assertions.assertEquals("tsrjyxxoxwfz", model.rules().identities().get(0).userName());
        Assertions.assertEquals("vecnxfxphs", model.rules().identities().get(0).groupName());
        Assertions.assertEquals("bebsnbw", model.rules().identities().get(0).exePath());
        Assertions.assertEquals("lvuwmsumust", model.rules().identities().get(0).processName());
        Assertions.assertEquals("ipjclzjwaqdz", model.rules().roleAssignments().get(0).role());
        Assertions.assertEquals("dewuwxyl", model.rules().roleAssignments().get(0).identities().get(0));
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
