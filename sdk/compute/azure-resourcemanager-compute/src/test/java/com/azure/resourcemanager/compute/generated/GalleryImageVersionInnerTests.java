// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.compute.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.compute.fluent.models.GalleryImageVersionInner;
import com.azure.resourcemanager.compute.models.AdditionalReplicaSet;
import com.azure.resourcemanager.compute.models.DataDiskImageEncryption;
import com.azure.resourcemanager.compute.models.EdgeZoneStorageAccountType;
import com.azure.resourcemanager.compute.models.EncryptionImages;
import com.azure.resourcemanager.compute.models.GalleryArtifactVersionFullSource;
import com.azure.resourcemanager.compute.models.GalleryDataDiskImage;
import com.azure.resourcemanager.compute.models.GalleryDiskImageSource;
import com.azure.resourcemanager.compute.models.GalleryExtendedLocation;
import com.azure.resourcemanager.compute.models.GalleryExtendedLocationType;
import com.azure.resourcemanager.compute.models.GalleryImageVersionPublishingProfile;
import com.azure.resourcemanager.compute.models.GalleryImageVersionSafetyProfile;
import com.azure.resourcemanager.compute.models.GalleryImageVersionStorageProfile;
import com.azure.resourcemanager.compute.models.GalleryImageVersionUefiSettings;
import com.azure.resourcemanager.compute.models.GalleryOSDiskImage;
import com.azure.resourcemanager.compute.models.GalleryTargetExtendedLocation;
import com.azure.resourcemanager.compute.models.HostCaching;
import com.azure.resourcemanager.compute.models.ImageVersionSecurityProfile;
import com.azure.resourcemanager.compute.models.OSDiskImageEncryption;
import com.azure.resourcemanager.compute.models.ReplicationMode;
import com.azure.resourcemanager.compute.models.StorageAccountStrategy;
import com.azure.resourcemanager.compute.models.StorageAccountType;
import com.azure.resourcemanager.compute.models.TargetRegion;
import com.azure.resourcemanager.compute.models.UefiKey;
import com.azure.resourcemanager.compute.models.UefiKeySignatures;
import com.azure.resourcemanager.compute.models.UefiKeyType;
import com.azure.resourcemanager.compute.models.UefiSignatureTemplateName;
import java.time.OffsetDateTime;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class GalleryImageVersionInnerTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        GalleryImageVersionInner model = BinaryData.fromString(
            "{\"properties\":{\"publishingProfile\":{\"targetRegions\":[{\"name\":\"ieqfky\",\"regionalReplicaCount\":1036145646,\"storageAccountType\":\"Standard_ZRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":1118775284},{\"lun\":396625610}]},\"excludeFromLatest\":true,\"additionalReplicaSets\":[{}]},{\"name\":\"skpajbmg\",\"regionalReplicaCount\":474925713,\"storageAccountType\":\"PremiumV2_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":212896551},{\"lun\":1361345524},{\"lun\":1997201235}]},\"excludeFromLatest\":false,\"additionalReplicaSets\":[{},{},{},{}]}],\"replicaCount\":1843027836,\"excludeFromLatest\":true,\"publishedDate\":\"2021-09-12T12:28:03Z\",\"endOfLifeDate\":\"2021-03-16T19:37:18Z\",\"storageAccountType\":\"Premium_LRS\",\"replicationMode\":\"Full\",\"targetExtendedLocations\":[{\"name\":\"ftr\",\"extendedLocation\":{\"name\":\"jdaahuqimldahlfx\",\"type\":\"Unknown\"},\"extendedLocationReplicaCount\":1173087516,\"storageAccountType\":\"Standard_ZRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":610488087},{\"lun\":731775574}]}},{\"name\":\"cskiioshjgc\",\"extendedLocation\":{\"name\":\"ybnxgztlcgc\",\"type\":\"Unknown\"},\"extendedLocationReplicaCount\":1274533482,\"storageAccountType\":\"Premium_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":2115200378}]}},{\"name\":\"becuvlbefvwcl\",\"extendedLocation\":{\"name\":\"pylrwoxzgwpsy\",\"type\":\"Unknown\"},\"extendedLocationReplicaCount\":1967759214,\"storageAccountType\":\"Premium_LRS\",\"encryption\":{\"osDiskImage\":{},\"dataDiskImages\":[{\"lun\":1290877670}]}}],\"storageAccountStrategy\":\"PreferStandard_ZRS\"},\"provisioningState\":\"Updating\",\"storageProfile\":{\"source\":{\"communityGalleryImageId\":\"gaw\",\"virtualMachineId\":\"jxildfkcef\",\"id\":\"gzqpjoi\"},\"osDiskImage\":{\"sizeInGB\":214582888,\"hostCaching\":\"ReadOnly\",\"source\":{\"uri\":\"jnxumentq\",\"storageAccountId\":\"tw\",\"id\":\"mxymulwivqtowlhl\"}},\"dataDiskImages\":[{\"lun\":1526566241,\"sizeInGB\":1116826696,\"hostCaching\":\"ReadWrite\",\"source\":{\"uri\":\"qubfajcyw\",\"storageAccountId\":\"qwmchqohtfxc\",\"id\":\"pukiymjzpwdlvwt\"}},{\"lun\":1758231661,\"sizeInGB\":1748187049,\"hostCaching\":\"ReadOnly\",\"source\":{\"uri\":\"nhqnampp\",\"storageAccountId\":\"tassaekewna\",\"id\":\"ajbk\"}}]},\"safetyProfile\":{\"reportedForPolicyViolation\":false,\"policyViolations\":[{\"category\":\"Other\",\"details\":\"dcvxodkrvfsxxby\"},{\"category\":\"Other\",\"details\":\"lvgecpwgoljtz\"},{\"category\":\"CopyrightValidation\",\"details\":\"sdobygoogxq\"}],\"blockDeletionBeforeEndOfLife\":false,\"allowDeletionOfReplicatedLocations\":false},\"replicationStatus\":{\"aggregatedState\":\"Completed\",\"summary\":[{\"region\":\"csa\",\"state\":\"Replicating\",\"details\":\"os\",\"progress\":1732006948},{\"region\":\"bfas\",\"state\":\"Failed\",\"details\":\"rnzpducdaak\",\"progress\":1037977477},{\"region\":\"tzboim\",\"state\":\"Completed\",\"details\":\"dowkppnwyytfv\",\"progress\":1262637149},{\"region\":\"jikffffgkuhznw\",\"state\":\"Replicating\",\"details\":\"dbkkejjkjigawgaz\",\"progress\":1272427334}]},\"securityProfile\":{\"uefiSettings\":{\"signatureTemplateNames\":[\"NoSignatureTemplate\"],\"additionalSignatures\":{\"pk\":{\"type\":\"sha256\",\"value\":[\"lzaahzbhuroolk\",\"lirh\"]},\"kek\":[{},{},{},{}],\"db\":[{},{},{},{}],\"dbx\":[{}]}}},\"restore\":true,\"validationsProfile\":{\"validationEtag\":\"zcvaaxoialahfxwc\",\"executedValidations\":[{\"type\":\"xkukm\",\"status\":\"Unknown\",\"version\":\"nuhhoqeqshav\",\"executionTime\":\"2021-01-31T18:27:25Z\"},{\"type\":\"xyrqo\",\"status\":\"Failed\",\"version\":\"bbnkgzukwdrnz\",\"executionTime\":\"2021-10-31T06:07:01Z\"}],\"platformAttributes\":[{\"name\":\"eyjncjmlfuy\",\"value\":\"bpfiddhlrufz\"},{\"name\":\"yjmqrf\",\"value\":\"ocuselqk\"}]}},\"location\":\"azrhxudd\",\"tags\":{\"khmwdmd\":\"tffisjmr\",\"okwtjawhvagnqfqq\":\"gyqi\",\"vsnvlaq\":\"lcvmyolcaymjch\",\"bczothymgobllms\":\"nzyzawatuwqko\"},\"id\":\"wgwima\",\"name\":\"neakh\",\"type\":\"mhobcyan\"}")
            .toObject(GalleryImageVersionInner.class);
        Assertions.assertEquals("azrhxudd", model.location());
        Assertions.assertEquals("tffisjmr", model.tags().get("khmwdmd"));
        Assertions.assertEquals("ieqfky", model.publishingProfile().targetRegions().get(0).name());
        Assertions.assertEquals(1036145646, model.publishingProfile().targetRegions().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS,
            model.publishingProfile().targetRegions().get(0).storageAccountType());
        Assertions.assertEquals(1118775284,
            model.publishingProfile().targetRegions().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertTrue(model.publishingProfile().targetRegions().get(0).excludeFromLatest());
        Assertions.assertEquals(1843027836, model.publishingProfile().replicaCount());
        Assertions.assertTrue(model.publishingProfile().excludeFromLatest());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-16T19:37:18Z"),
            model.publishingProfile().endOfLifeDate());
        Assertions.assertEquals(StorageAccountType.PREMIUM_LRS, model.publishingProfile().storageAccountType());
        Assertions.assertEquals(ReplicationMode.FULL, model.publishingProfile().replicationMode());
        Assertions.assertEquals("ftr", model.publishingProfile().targetExtendedLocations().get(0).name());
        Assertions.assertEquals("jdaahuqimldahlfx",
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().name());
        Assertions.assertEquals(GalleryExtendedLocationType.UNKNOWN,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().type());
        Assertions.assertEquals(1173087516,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocationReplicaCount());
        Assertions.assertEquals(EdgeZoneStorageAccountType.STANDARD_ZRS,
            model.publishingProfile().targetExtendedLocations().get(0).storageAccountType());
        Assertions.assertEquals(610488087,
            model.publishingProfile().targetExtendedLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertEquals(StorageAccountStrategy.PREFER_STANDARD_ZRS,
            model.publishingProfile().storageAccountStrategy());
        Assertions.assertEquals("gzqpjoi", model.storageProfile().source().id());
        Assertions.assertEquals("gaw", model.storageProfile().source().communityGalleryImageId());
        Assertions.assertEquals("jxildfkcef", model.storageProfile().source().virtualMachineId());
        Assertions.assertEquals(HostCaching.READ_ONLY, model.storageProfile().osDiskImage().hostCaching());
        Assertions.assertEquals("mxymulwivqtowlhl", model.storageProfile().osDiskImage().source().id());
        Assertions.assertEquals("jnxumentq", model.storageProfile().osDiskImage().source().uri());
        Assertions.assertEquals("tw", model.storageProfile().osDiskImage().source().storageAccountId());
        Assertions.assertEquals(HostCaching.READ_WRITE, model.storageProfile().dataDiskImages().get(0).hostCaching());
        Assertions.assertEquals("pukiymjzpwdlvwt", model.storageProfile().dataDiskImages().get(0).source().id());
        Assertions.assertEquals("qubfajcyw", model.storageProfile().dataDiskImages().get(0).source().uri());
        Assertions.assertEquals("qwmchqohtfxc",
            model.storageProfile().dataDiskImages().get(0).source().storageAccountId());
        Assertions.assertEquals(1526566241, model.storageProfile().dataDiskImages().get(0).lun());
        Assertions.assertFalse(model.safetyProfile().allowDeletionOfReplicatedLocations());
        Assertions.assertFalse(model.safetyProfile().blockDeletionBeforeEndOfLife());
        Assertions.assertEquals(UefiSignatureTemplateName.NO_SIGNATURE_TEMPLATE,
            model.securityProfile().uefiSettings().signatureTemplateNames().get(0));
        Assertions.assertEquals(UefiKeyType.SHA256,
            model.securityProfile().uefiSettings().additionalSignatures().pk().type());
        Assertions.assertEquals("lzaahzbhuroolk",
            model.securityProfile().uefiSettings().additionalSignatures().pk().value().get(0));
        Assertions.assertTrue(model.restore());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        GalleryImageVersionInner model = new GalleryImageVersionInner().withLocation("azrhxudd")
            .withTags(mapOf("khmwdmd", "tffisjmr", "okwtjawhvagnqfqq", "gyqi", "vsnvlaq", "lcvmyolcaymjch",
                "bczothymgobllms", "nzyzawatuwqko"))
            .withPublishingProfile(new GalleryImageVersionPublishingProfile()
                .withTargetRegions(Arrays.asList(
                    new TargetRegion().withName("ieqfky")
                        .withRegionalReplicaCount(1036145646)
                        .withStorageAccountType(StorageAccountType.STANDARD_ZRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(1118775284),
                                new DataDiskImageEncryption().withLun(396625610))))
                        .withExcludeFromLatest(true)
                        .withAdditionalReplicaSets(Arrays.asList(new AdditionalReplicaSet())),
                    new TargetRegion().withName("skpajbmg")
                        .withRegionalReplicaCount(474925713)
                        .withStorageAccountType(StorageAccountType.PREMIUM_V2_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(212896551),
                                new DataDiskImageEncryption().withLun(1361345524),
                                new DataDiskImageEncryption().withLun(1997201235))))
                        .withExcludeFromLatest(false)
                        .withAdditionalReplicaSets(Arrays.asList(new AdditionalReplicaSet(), new AdditionalReplicaSet(),
                            new AdditionalReplicaSet(), new AdditionalReplicaSet()))))
                .withReplicaCount(1843027836)
                .withExcludeFromLatest(true)
                .withEndOfLifeDate(OffsetDateTime.parse("2021-03-16T19:37:18Z"))
                .withStorageAccountType(StorageAccountType.PREMIUM_LRS)
                .withReplicationMode(ReplicationMode.FULL)
                .withTargetExtendedLocations(Arrays.asList(
                    new GalleryTargetExtendedLocation().withName("ftr")
                        .withExtendedLocation(new GalleryExtendedLocation().withName("jdaahuqimldahlfx")
                            .withType(GalleryExtendedLocationType.UNKNOWN))
                        .withExtendedLocationReplicaCount(1173087516)
                        .withStorageAccountType(EdgeZoneStorageAccountType.STANDARD_ZRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(610488087),
                                new DataDiskImageEncryption().withLun(731775574)))),
                    new GalleryTargetExtendedLocation().withName("cskiioshjgc")
                        .withExtendedLocation(new GalleryExtendedLocation().withName("ybnxgztlcgc")
                            .withType(GalleryExtendedLocationType.UNKNOWN))
                        .withExtendedLocationReplicaCount(1274533482)
                        .withStorageAccountType(EdgeZoneStorageAccountType.PREMIUM_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(2115200378)))),
                    new GalleryTargetExtendedLocation().withName("becuvlbefvwcl")
                        .withExtendedLocation(new GalleryExtendedLocation().withName("pylrwoxzgwpsy")
                            .withType(GalleryExtendedLocationType.UNKNOWN))
                        .withExtendedLocationReplicaCount(1967759214)
                        .withStorageAccountType(EdgeZoneStorageAccountType.PREMIUM_LRS)
                        .withEncryption(new EncryptionImages().withOsDiskImage(new OSDiskImageEncryption())
                            .withDataDiskImages(Arrays.asList(new DataDiskImageEncryption().withLun(1290877670))))))
                .withStorageAccountStrategy(StorageAccountStrategy.PREFER_STANDARD_ZRS))
            .withStorageProfile(new GalleryImageVersionStorageProfile()
                .withSource(new GalleryArtifactVersionFullSource().withId("gzqpjoi")
                    .withCommunityGalleryImageId("gaw")
                    .withVirtualMachineId("jxildfkcef"))
                .withOsDiskImage(new GalleryOSDiskImage().withHostCaching(HostCaching.READ_ONLY)
                    .withSource(new GalleryDiskImageSource().withId("mxymulwivqtowlhl")
                        .withUri("jnxumentq")
                        .withStorageAccountId("tw")))
                .withDataDiskImages(Arrays.asList(
                    new GalleryDataDiskImage().withHostCaching(HostCaching.READ_WRITE)
                        .withSource(new GalleryDiskImageSource().withId("pukiymjzpwdlvwt")
                            .withUri("qubfajcyw")
                            .withStorageAccountId("qwmchqohtfxc"))
                        .withLun(1526566241),
                    new GalleryDataDiskImage().withHostCaching(HostCaching.READ_ONLY)
                        .withSource(new GalleryDiskImageSource().withId("ajbk")
                            .withUri("nhqnampp")
                            .withStorageAccountId("tassaekewna"))
                        .withLun(1758231661))))
            .withSafetyProfile(new GalleryImageVersionSafetyProfile().withAllowDeletionOfReplicatedLocations(false)
                .withBlockDeletionBeforeEndOfLife(false))
            .withSecurityProfile(
                new ImageVersionSecurityProfile().withUefiSettings(new GalleryImageVersionUefiSettings()
                    .withSignatureTemplateNames(Arrays.asList(UefiSignatureTemplateName.NO_SIGNATURE_TEMPLATE))
                    .withAdditionalSignatures(new UefiKeySignatures()
                        .withPk(new UefiKey().withType(UefiKeyType.SHA256)
                            .withValue(Arrays.asList("lzaahzbhuroolk", "lirh")))
                        .withKek(Arrays.asList(new UefiKey(), new UefiKey(), new UefiKey(), new UefiKey()))
                        .withDb(Arrays.asList(new UefiKey(), new UefiKey(), new UefiKey(), new UefiKey()))
                        .withDbx(Arrays.asList(new UefiKey())))))
            .withRestore(true);
        model = BinaryData.fromObject(model).toObject(GalleryImageVersionInner.class);
        Assertions.assertEquals("azrhxudd", model.location());
        Assertions.assertEquals("tffisjmr", model.tags().get("khmwdmd"));
        Assertions.assertEquals("ieqfky", model.publishingProfile().targetRegions().get(0).name());
        Assertions.assertEquals(1036145646, model.publishingProfile().targetRegions().get(0).regionalReplicaCount());
        Assertions.assertEquals(StorageAccountType.STANDARD_ZRS,
            model.publishingProfile().targetRegions().get(0).storageAccountType());
        Assertions.assertEquals(1118775284,
            model.publishingProfile().targetRegions().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertTrue(model.publishingProfile().targetRegions().get(0).excludeFromLatest());
        Assertions.assertEquals(1843027836, model.publishingProfile().replicaCount());
        Assertions.assertTrue(model.publishingProfile().excludeFromLatest());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-16T19:37:18Z"),
            model.publishingProfile().endOfLifeDate());
        Assertions.assertEquals(StorageAccountType.PREMIUM_LRS, model.publishingProfile().storageAccountType());
        Assertions.assertEquals(ReplicationMode.FULL, model.publishingProfile().replicationMode());
        Assertions.assertEquals("ftr", model.publishingProfile().targetExtendedLocations().get(0).name());
        Assertions.assertEquals("jdaahuqimldahlfx",
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().name());
        Assertions.assertEquals(GalleryExtendedLocationType.UNKNOWN,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocation().type());
        Assertions.assertEquals(1173087516,
            model.publishingProfile().targetExtendedLocations().get(0).extendedLocationReplicaCount());
        Assertions.assertEquals(EdgeZoneStorageAccountType.STANDARD_ZRS,
            model.publishingProfile().targetExtendedLocations().get(0).storageAccountType());
        Assertions.assertEquals(610488087,
            model.publishingProfile().targetExtendedLocations().get(0).encryption().dataDiskImages().get(0).lun());
        Assertions.assertEquals(StorageAccountStrategy.PREFER_STANDARD_ZRS,
            model.publishingProfile().storageAccountStrategy());
        Assertions.assertEquals("gzqpjoi", model.storageProfile().source().id());
        Assertions.assertEquals("gaw", model.storageProfile().source().communityGalleryImageId());
        Assertions.assertEquals("jxildfkcef", model.storageProfile().source().virtualMachineId());
        Assertions.assertEquals(HostCaching.READ_ONLY, model.storageProfile().osDiskImage().hostCaching());
        Assertions.assertEquals("mxymulwivqtowlhl", model.storageProfile().osDiskImage().source().id());
        Assertions.assertEquals("jnxumentq", model.storageProfile().osDiskImage().source().uri());
        Assertions.assertEquals("tw", model.storageProfile().osDiskImage().source().storageAccountId());
        Assertions.assertEquals(HostCaching.READ_WRITE, model.storageProfile().dataDiskImages().get(0).hostCaching());
        Assertions.assertEquals("pukiymjzpwdlvwt", model.storageProfile().dataDiskImages().get(0).source().id());
        Assertions.assertEquals("qubfajcyw", model.storageProfile().dataDiskImages().get(0).source().uri());
        Assertions.assertEquals("qwmchqohtfxc",
            model.storageProfile().dataDiskImages().get(0).source().storageAccountId());
        Assertions.assertEquals(1526566241, model.storageProfile().dataDiskImages().get(0).lun());
        Assertions.assertFalse(model.safetyProfile().allowDeletionOfReplicatedLocations());
        Assertions.assertFalse(model.safetyProfile().blockDeletionBeforeEndOfLife());
        Assertions.assertEquals(UefiSignatureTemplateName.NO_SIGNATURE_TEMPLATE,
            model.securityProfile().uefiSettings().signatureTemplateNames().get(0));
        Assertions.assertEquals(UefiKeyType.SHA256,
            model.securityProfile().uefiSettings().additionalSignatures().pk().type());
        Assertions.assertEquals("lzaahzbhuroolk",
            model.securityProfile().uefiSettings().additionalSignatures().pk().value().get(0));
        Assertions.assertTrue(model.restore());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
