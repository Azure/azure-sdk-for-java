// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.search.documents.generated;

import com.azure.identity.DefaultAzureCredentialBuilder;
import com.azure.search.documents.indexes.SearchIndexClient;
import com.azure.search.documents.indexes.SearchIndexClientBuilder;
import com.azure.search.documents.indexes.models.AzureActiveDirectoryApplicationCredentials;
import com.azure.search.documents.indexes.models.AzureOpenAIModelName;
import com.azure.search.documents.indexes.models.AzureOpenAIVectorizerParameters;
import com.azure.search.documents.indexes.models.KnowledgeBase;
import com.azure.search.documents.indexes.models.KnowledgeBaseAzureOpenAIModel;
import com.azure.search.documents.indexes.models.KnowledgeSourceReference;
import com.azure.search.documents.indexes.models.SearchResourceEncryptionKey;
import com.azure.search.documents.knowledgebase.models.KnowledgeRetrievalLowReasoningEffort;
import com.azure.search.documents.knowledgebase.models.KnowledgeRetrievalOutputMode;
import java.util.Arrays;

public class SearchServiceCreateKnowledgeBase {
    public static void main(String[] args) {
        SearchIndexClient searchIndexClient
            = new SearchIndexClientBuilder().credential(new DefaultAzureCredentialBuilder().build())
                .endpoint("https://previewexampleservice.search.windows.net")
                .buildClient();
        // BEGIN:com.azure.search.documents.generated.create-knowledge-base.search-service-create-knowledge-base
        KnowledgeBase response = searchIndexClient.createKnowledgeBase(
            new KnowledgeBase("base-preview-test", Arrays.asList(new KnowledgeSourceReference("ks-preview-test")))
                .setModels(Arrays.asList(new KnowledgeBaseAzureOpenAIModel(
                    new AzureOpenAIVectorizerParameters().setResourceUrl("https://test-sample.openai.azure.com/")
                        .setDeploymentName("myDeployment")
                        .setApiKey("fakeTokenPlaceholder")
                        .setModelName(AzureOpenAIModelName.GPT41NANO))))
                .setRetrievalReasoningEffort(new KnowledgeRetrievalLowReasoningEffort())
                .setOutputMode(KnowledgeRetrievalOutputMode.EXTRACTIVE_DATA)
                .setEncryptionKey(new SearchResourceEncryptionKey("fakeTokenPlaceholder", "fakeTokenPlaceholder")
                    .setKeyVersion("fakeTokenPlaceholder")
                    .setAccessCredentials(
                        new AzureActiveDirectoryApplicationCredentials("00000000-0000-0000-0000-000000000000")
                            .setApplicationSecret("fakeTokenPlaceholder")))
                .setDescription("Description of the knowledge base.")
                .setRetrievalInstructions("Instructions for retrieval for the knowledge base.")
                .setAnswerInstructions("Instructions for answer synthesis."));
        // END:com.azure.search.documents.generated.create-knowledge-base.search-service-create-knowledge-base
    }
}
