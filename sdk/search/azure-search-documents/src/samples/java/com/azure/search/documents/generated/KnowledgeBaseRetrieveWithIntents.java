// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.search.documents.generated;

import com.azure.identity.DefaultAzureCredentialBuilder;
import com.azure.search.documents.knowledgebase.KnowledgeBaseRetrievalClient;
import com.azure.search.documents.knowledgebase.KnowledgeBaseRetrievalClientBuilder;
import com.azure.search.documents.knowledgebase.models.KnowledgeBaseRetrievalRequest;
import com.azure.search.documents.knowledgebase.models.KnowledgeBaseRetrievalResponse;
import com.azure.search.documents.knowledgebase.models.KnowledgeRetrievalMinimalReasoningEffort;
import com.azure.search.documents.knowledgebase.models.KnowledgeRetrievalOutputMode;
import com.azure.search.documents.knowledgebase.models.KnowledgeRetrievalSemanticIntent;
import com.azure.search.documents.knowledgebase.models.SearchIndexKnowledgeSourceParams;
import java.util.Arrays;

public class KnowledgeBaseRetrieveWithIntents {
    public static void main(String[] args) {
        KnowledgeBaseRetrievalClient knowledgeBaseRetrievalClient
            = new KnowledgeBaseRetrievalClientBuilder().credential(new DefaultAzureCredentialBuilder().build())
                .endpoint("https://previewexampleservice.search.windows.net")
                .buildClient();
        // BEGIN:com.azure.search.documents.generated.retrieve.knowledge-base-retrieve-with-intents
        KnowledgeBaseRetrievalResponse response = knowledgeBaseRetrievalClient.retrieve("base-preview-test",
            new KnowledgeBaseRetrievalRequest().setIntents(Arrays.asList(new KnowledgeRetrievalSemanticIntent("foo")))
                .setMaxRuntimeInSeconds(60)
                .setMaxOutputSize(100000)
                .setRetrievalReasoningEffort(new KnowledgeRetrievalMinimalReasoningEffort())
                .setIncludeActivity(true)
                .setOutputMode(KnowledgeRetrievalOutputMode.EXTRACTIVE_DATA)
                .setKnowledgeSourceParams(
                    Arrays.asList(new SearchIndexKnowledgeSourceParams("ks-preview-test").setIncludeReferences(true)
                        .setIncludeReferenceSourceData(true)
                        .setAlwaysQuerySource(true)
                        .setRerankerThreshold(2.1D)
                        .setFilterAddOn("foo eq bar"))),
            null);
        // END:com.azure.search.documents.generated.retrieve.knowledge-base-retrieve-with-intents
    }
}
