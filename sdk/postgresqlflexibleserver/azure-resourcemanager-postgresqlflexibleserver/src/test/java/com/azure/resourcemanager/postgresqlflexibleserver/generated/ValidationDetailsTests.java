// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.postgresqlflexibleserver.models.ValidationDetails;
import com.azure.resourcemanager.postgresqlflexibleserver.models.ValidationState;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;

public final class ValidationDetailsTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        ValidationDetails model = BinaryData.fromString(
            "{\"status\":\"Failed\",\"validationStartTimeInUtc\":\"2021-03-29T15:40:05Z\",\"validationEndTimeInUtc\":\"2021-06-30T12:37:43Z\",\"serverLevelValidationDetails\":[{\"type\":\"fclhaaxdbabphlwr\",\"state\":\"Failed\",\"messages\":[{\"state\":\"Succeeded\",\"message\":\"sucocmnyyazttbtw\"},{\"state\":\"Warning\",\"message\":\"uedck\"},{\"state\":\"Succeeded\",\"message\":\"iexzfeyue\"}]}],\"dbLevelValidationDetails\":[{\"databaseName\":\"xujwbhqwalmuzyo\",\"startedOn\":\"2021-07-26T23:02:26Z\",\"endedOn\":\"2021-11-26T06:24:43Z\",\"summary\":[{\"type\":\"ancuxrhd\",\"state\":\"Warning\",\"messages\":[{},{}]},{\"type\":\"niwdjsw\",\"state\":\"Failed\",\"messages\":[{}]}]}]}")
            .toObject(ValidationDetails.class);
        Assertions.assertEquals(ValidationState.FAILED, model.status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-29T15:40:05Z"), model.validationStartTimeInUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-30T12:37:43Z"), model.validationEndTimeInUtc());
        Assertions.assertEquals("fclhaaxdbabphlwr", model.serverLevelValidationDetails().get(0).type());
        Assertions.assertEquals(ValidationState.FAILED, model.serverLevelValidationDetails().get(0).state());
        Assertions.assertEquals(ValidationState.SUCCEEDED,
            model.serverLevelValidationDetails().get(0).messages().get(0).state());
        Assertions.assertEquals("sucocmnyyazttbtw",
            model.serverLevelValidationDetails().get(0).messages().get(0).message());
        Assertions.assertEquals("xujwbhqwalmuzyo", model.dbLevelValidationDetails().get(0).databaseName());
        Assertions.assertEquals(OffsetDateTime.parse("2021-07-26T23:02:26Z"),
            model.dbLevelValidationDetails().get(0).startedOn());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-26T06:24:43Z"),
            model.dbLevelValidationDetails().get(0).endedOn());
        Assertions.assertEquals("ancuxrhd", model.dbLevelValidationDetails().get(0).summary().get(0).type());
        Assertions.assertEquals(ValidationState.WARNING,
            model.dbLevelValidationDetails().get(0).summary().get(0).state());
    }
}
