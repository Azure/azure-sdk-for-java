// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.FlexibleServerCapability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ServerCapabilitiesListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"vqikfxcvhrfsphu\",\"supportedServerEditions\":[{\"name\":\"tikteusqczkvykl\",\"defaultSkuName\":\"byjaffmmf\",\"supportedStorageEditions\":[{\"name\":\"cuubgq\",\"defaultStorageSizeMb\":6925699685066088287,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Disabled\",\"reason\":\"ttwgdsl\"}],\"supportedServerSkus\":[{\"name\":\"hrmooi\",\"vCores\":1309261520,\"supportedIops\":418488184,\"supportedMemoryPerVcoreMb\":6854004636755290327,\"supportedZones\":[\"cxa\",\"zhyrpeto\",\"e\",\"joxslhvnhla\"],\"supportedHaMode\":[\"SameZone\"],\"status\":\"Default\",\"reason\":\"jcjbt\"},{\"name\":\"aehvvibrxjjstoq\",\"vCores\":449265761,\"supportedIops\":774286462,\"supportedMemoryPerVcoreMb\":4666346090573112474,\"supportedZones\":[\"oobklftidgfcwq\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"status\":\"Available\",\"reason\":\"zhe\"}],\"status\":\"Disabled\",\"reason\":\"ohu\"},{\"name\":\"wtwko\",\"defaultSkuName\":\"wculkbaw\",\"supportedStorageEditions\":[{\"name\":\"njwltlwtjjgu\",\"defaultStorageSizeMb\":8518213803289262805,\"supportedStorageMb\":[{}],\"status\":\"Available\",\"reason\":\"cdmxzrpoaiml\"},{\"name\":\"iaaomylweazul\",\"defaultStorageSizeMb\":4118122894986571340,\"supportedStorageMb\":[{},{}],\"status\":\"Disabled\",\"reason\":\"jhlfzswpchwahf\"},{\"name\":\"usnfepgfewet\",\"defaultStorageSizeMb\":7432084644277094724,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Available\",\"reason\":\"kxhdjhlimmbcx\"}],\"supportedServerSkus\":[{\"name\":\"po\",\"vCores\":2026678131,\"supportedIops\":1548715838,\"supportedMemoryPerVcoreMb\":7495334357568508911,\"supportedZones\":[\"zxfpxtgqsc\",\"avft\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\",\"ZoneRedundant\"],\"status\":\"Available\",\"reason\":\"gg\"},{\"name\":\"pijrajcivmmghf\",\"vCores\":1851539206,\"supportedIops\":1456716709,\"supportedMemoryPerVcoreMb\":3356451442054441941,\"supportedZones\":[\"uvyinzqodfvpgs\",\"oxgsgbpfgzdjtx\",\"zflbqvg\",\"qvlgafcqusrdvetn\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\"],\"status\":\"Available\",\"reason\":\"duy\"},{\"name\":\"uzhyrmewipmvekdx\",\"vCores\":1124949924,\"supportedIops\":894303936,\"supportedMemoryPerVcoreMb\":1648370479769908154,\"supportedZones\":[\"n\",\"xgketwz\",\"hzjhf\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\",\"SameZone\"],\"status\":\"Available\",\"reason\":\"pmuneqsx\"},{\"name\":\"hfbuzjyihsasbhud\",\"vCores\":1053625203,\"supportedIops\":719606175,\"supportedMemoryPerVcoreMb\":2798000155301001189,\"supportedZones\":[\"ynsqyrpfoobr\",\"ttymsjny\",\"qdnfwqzdz\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\"],\"status\":\"Disabled\",\"reason\":\"fhqlyvi\"}],\"status\":\"Available\",\"reason\":\"iv\"},{\"name\":\"oyzunbixxr\",\"defaultSkuName\":\"kvcpwpgclr\",\"supportedStorageEditions\":[{\"name\":\"soxfrken\",\"defaultStorageSizeMb\":116533809200901624,\"supportedStorageMb\":[{}],\"status\":\"Default\",\"reason\":\"mpdnqqskawa\"},{\"name\":\"vmm\",\"defaultStorageSizeMb\":118268358895074671,\"supportedStorageMb\":[{}],\"status\":\"Available\",\"reason\":\"kzmegnitgvkxlz\"}],\"supportedServerSkus\":[{\"name\":\"fegcea\",\"vCores\":608530050,\"supportedIops\":1274510165,\"supportedMemoryPerVcoreMb\":4874125909627032017,\"supportedZones\":[\"moy\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"ZoneRedundant\"],\"status\":\"Default\",\"reason\":\"bkbxgomfa\"}],\"status\":\"Default\",\"reason\":\"sqvdaeyygux\"}],\"supportedServerVersions\":[{\"name\":\"qzhzbezkgimsi\",\"supportedVersionsToUpgrade\":[\"sicddyvv\"],\"status\":\"Default\",\"reason\":\"fmocwahpq\"},{\"name\":\"tjeaahhvjhh\",\"supportedVersionsToUpgrade\":[\"zybbj\"],\"status\":\"Visible\",\"reason\":\"ksyxkyxvxevblbje\"},{\"name\":\"ljlageuaulxu\",\"supportedVersionsToUpgrade\":[\"jbnkpp\",\"ynenlsvxeizz\"],\"status\":\"Default\",\"reason\":\"nsrmffeycx\"}],\"fastProvisioningSupported\":\"Disabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"merteeammxqiek\",\"supportedSku\":\"zddrt\",\"supportedStorageGb\":550978856,\"supportedServerVersions\":\"jbmxvavre\",\"serverCount\":1844509739,\"status\":\"Default\",\"reason\":\"ecuijpxtxs\"},{\"supportedTier\":\"prtujwsawdd\",\"supportedSku\":\"babxvitit\",\"supportedStorageGb\":1297733750,\"supportedServerVersions\":\"exavoxt\",\"serverCount\":165499088,\"status\":\"Visible\",\"reason\":\"m\"},{\"supportedTier\":\"bwpypqtgsfjacb\",\"supportedSku\":\"hhxud\",\"supportedStorageGb\":1368673691,\"supportedServerVersions\":\"d\",\"serverCount\":1282129926,\"status\":\"Available\",\"reason\":\"ud\"},{\"supportedTier\":\"m\",\"supportedSku\":\"sckdlp\",\"supportedStorageGb\":2009658341,\"supportedServerVersions\":\"cxfailcfxwmdboxd\",\"serverCount\":1260487269,\"status\":\"Disabled\",\"reason\":\"fqob\"}],\"geoBackupSupported\":\"Enabled\",\"zoneRedundantHaSupported\":\"Disabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Disabled\",\"storageAutoGrowthSupported\":\"Disabled\",\"onlineResizeSupported\":\"Enabled\",\"restricted\":\"Disabled\",\"status\":\"Available\",\"reason\":\"zvytnrzvuljraaer\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<FlexibleServerCapability> response
            = manager.serverCapabilities().list("uqovekqvgqouwif", "mpjw", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("vqikfxcvhrfsphu", response.iterator().next().name());
    }
}
