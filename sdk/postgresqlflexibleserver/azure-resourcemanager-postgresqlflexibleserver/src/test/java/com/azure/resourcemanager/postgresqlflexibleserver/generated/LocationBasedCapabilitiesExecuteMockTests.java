// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.FlexibleServerCapability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class LocationBasedCapabilitiesExecuteMockTests {
    @Test
    public void testExecute() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"oldweyuqdu\",\"supportedServerEditions\":[{\"name\":\"nrwrbiork\",\"defaultSkuName\":\"lywjhh\",\"supportedStorageEditions\":[{\"name\":\"xmsivfomiloxggdu\",\"defaultStorageSizeMb\":322470867216638009,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Disabled\",\"reason\":\"ao\"},{\"name\":\"chvcyyysfgdo\",\"defaultStorageSizeMb\":7467577489537815272,\"supportedStorageMb\":[{}],\"status\":\"Disabled\",\"reason\":\"pwoqo\"}],\"supportedServerSkus\":[{\"name\":\"jeknizshq\",\"vCores\":1591499316,\"supportedIops\":932128156,\"supportedMemoryPerVcoreMb\":4510672218626509110,\"supportedZones\":[\"b\",\"rrilbywdxsmic\",\"wrwfscjfnyns\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"status\":\"Disabled\",\"reason\":\"voqyt\"},{\"name\":\"yo\",\"vCores\":853520386,\"supportedIops\":1293894339,\"supportedMemoryPerVcoreMb\":2703223552159511284,\"supportedZones\":[\"pthjoxo\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\"],\"status\":\"Disabled\",\"reason\":\"iml\"}],\"status\":\"Default\",\"reason\":\"xkcgxxlxsffgcvi\"},{\"name\":\"zdwlvwlyoupfgfb\",\"defaultSkuName\":\"ubdyhgk\",\"supportedStorageEditions\":[{\"name\":\"sgow\",\"defaultStorageSizeMb\":7972724077673531011,\"supportedStorageMb\":[{},{},{}],\"status\":\"Available\",\"reason\":\"lahb\"}],\"supportedServerSkus\":[{\"name\":\"xtgzukxitmmqtgqq\",\"vCores\":1748959674,\"supportedIops\":107951618,\"supportedMemoryPerVcoreMb\":3154721021246185511,\"supportedZones\":[\"juisavokqdzf\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"status\":\"Available\",\"reason\":\"frqttbajlkatnw\"},{\"name\":\"iopid\",\"vCores\":1150651693,\"supportedIops\":128266879,\"supportedMemoryPerVcoreMb\":3873613137312097491,\"supportedZones\":[\"kdmligovi\",\"rxkpmloazuruoc\"],\"supportedHaMode\":[\"SameZone\"],\"status\":\"Available\",\"reason\":\"eoybfhjxakvvjgs\"},{\"name\":\"r\",\"vCores\":1486233885,\"supportedIops\":482425656,\"supportedMemoryPerVcoreMb\":1679876509876130353,\"supportedZones\":[\"kxn\",\"edabgyvudtjue\",\"bcihxuuwhc\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\"],\"status\":\"Visible\",\"reason\":\"payakkud\"}],\"status\":\"Disabled\",\"reason\":\"wjplma\"}],\"supportedServerVersions\":[{\"name\":\"yohpfkyrkdbdgiog\",\"supportedVersionsToUpgrade\":[\"mnwqj\",\"obaiyhddviaceg\",\"n\",\"ntfpmvmemfnc\"],\"status\":\"Visible\",\"reason\":\"vbalxlllc\"},{\"name\":\"odbzevwrdnhf\",\"supportedVersionsToUpgrade\":[\"vsjcswsmystuluqy\"],\"status\":\"Disabled\",\"reason\":\"lerchpq\"},{\"name\":\"f\",\"supportedVersionsToUpgrade\":[\"abwidfcxsspuun\",\"oxyhkxgqddrihpf\",\"oqcaaewdaomdj\"],\"status\":\"Available\",\"reason\":\"x\"}],\"fastProvisioningSupported\":\"Enabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"sgeivsiy\",\"supportedSku\":\"kdncj\",\"supportedStorageGb\":1690186599,\"supportedServerVersions\":\"bzo\",\"serverCount\":1760548701,\"status\":\"Available\",\"reason\":\"p\"},{\"supportedTier\":\"y\",\"supportedSku\":\"gogtqxepnylbf\",\"supportedStorageGb\":347721012,\"supportedServerVersions\":\"yjt\",\"serverCount\":279762954,\"status\":\"Visible\",\"reason\":\"hvfcibyfmow\"},{\"supportedTier\":\"rkjpvdwxfzwii\",\"supportedSku\":\"zjb\",\"supportedStorageGb\":1608749608,\"supportedServerVersions\":\"xjrk\",\"serverCount\":2109306549,\"status\":\"Available\",\"reason\":\"egv\"},{\"supportedTier\":\"vuqeqvldspast\",\"supportedSku\":\"kkdmfl\",\"supportedStorageGb\":922777,\"supportedServerVersions\":\"mjlxrrilozapeewc\",\"serverCount\":159855339,\"status\":\"Default\",\"reason\":\"wk\"}],\"geoBackupSupported\":\"Disabled\",\"zoneRedundantHaSupported\":\"Disabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Disabled\",\"storageAutoGrowthSupported\":\"Enabled\",\"onlineResizeSupported\":\"Enabled\",\"restricted\":\"Enabled\",\"status\":\"Available\",\"reason\":\"tyh\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<FlexibleServerCapability> response
            = manager.locationBasedCapabilities().execute("pzlrphw", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("oldweyuqdu", response.iterator().next().name());
    }
}
