// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.FlexibleServerCapability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class LocationBasedCapabilitiesExecuteMockTests {
    @Test
    public void testExecute() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"i\",\"supportedServerEditions\":[{\"name\":\"yui\",\"defaultSkuName\":\"bsnmfpph\",\"supportedStorageEditions\":[{\"name\":\"vyhyhsgzfc\",\"defaultStorageSizeMb\":1704315015203532161,\"supportedStorageMb\":[{},{}],\"status\":\"Available\",\"reason\":\"glqgleoh\"}],\"supportedServerSkus\":[{\"name\":\"nlu\",\"vCores\":1087949642,\"supportedIops\":416708927,\"supportedMemoryPerVcoreMb\":8132506550445245383,\"supportedZones\":[\"btijvacvbm\",\"z\",\"qqxlajr\",\"wxacevehj\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"aoqltfaey\",\"status\":\"Visible\",\"reason\":\"fgvxirpghriypoqe\"},{\"name\":\"lqhykprlpyz\",\"vCores\":1860731641,\"supportedIops\":184808617,\"supportedMemoryPerVcoreMb\":987189156165861537,\"supportedZones\":[\"iitdfuxt\",\"asiibmiybnnust\",\"nlj\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"ZoneRedundant\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"vmqfoud\",\"status\":\"Default\",\"reason\":\"gyyprotwy\"},{\"name\":\"ndm\",\"vCores\":384308231,\"supportedIops\":2095603265,\"supportedMemoryPerVcoreMb\":4812116818794427948,\"supportedZones\":[\"vlgo\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"tzfjltf\",\"status\":\"Available\",\"reason\":\"yj\"}],\"status\":\"Default\",\"reason\":\"vopvp\"},{\"name\":\"bzqgqqi\",\"defaultSkuName\":\"dsvqwt\",\"supportedStorageEditions\":[{\"name\":\"ibcysihsgqc\",\"defaultStorageSizeMb\":5483811337729194379,\"supportedStorageMb\":[{},{}],\"status\":\"Default\",\"reason\":\"cdzsu\"}],\"supportedServerSkus\":[{\"name\":\"dxbzlmcmuap\",\"vCores\":1828890303,\"supportedIops\":311384823,\"supportedMemoryPerVcoreMb\":258255264781262334,\"supportedZones\":[\"xeyskonqzinkfkbg\",\"z\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"mygvkzqkj\",\"status\":\"Available\",\"reason\":\"bzefezr\"},{\"name\":\"czurtlei\",\"vCores\":1316938253,\"supportedIops\":796775151,\"supportedMemoryPerVcoreMb\":1743008436896438735,\"supportedZones\":[\"zvd\",\"bzdixzmq\",\"noda\",\"opqhewjptmc\"],\"supportedHaMode\":[\"ZoneRedundant\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"lnd\",\"status\":\"Available\",\"reason\":\"tmzlbiojlv\"},{\"name\":\"rbbpneqvcwwyy\",\"vCores\":1475443279,\"supportedIops\":996816888,\"supportedMemoryPerVcoreMb\":2957311369623929946,\"supportedZones\":[\"rsnm\",\"k\",\"yzejnhlbk\",\"bzpcpiljhahzvec\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"ehol\",\"status\":\"Disabled\",\"reason\":\"iuubwefqsf\"}],\"status\":\"Available\",\"reason\":\"tf\"}],\"supportedServerVersions\":[{\"name\":\"wexjkmfxapjwogq\",\"supportedVersionsToUpgrade\":[\"bpudcdab\"],\"supportedFeatures\":[{\"name\":\"wyawbzasqbuc\",\"status\":\"Disabled\"},{\"name\":\"yexaoguy\",\"status\":\"Enabled\"}],\"status\":\"Disabled\",\"reason\":\"daultxijjumfq\"},{\"name\":\"z\",\"supportedVersionsToUpgrade\":[\"nm\",\"jng\",\"qdqx\"],\"supportedFeatures\":[{\"name\":\"gny\",\"status\":\"Enabled\"}],\"status\":\"Disabled\",\"reason\":\"vtuikzhajq\"},{\"name\":\"cfhmlrqryxyn\",\"supportedVersionsToUpgrade\":[\"rd\",\"sovwxznptgoeiyb\",\"abpfhvfs\",\"kvntjlrigjkskyri\"],\"supportedFeatures\":[{\"name\":\"idsxwaabzmifry\",\"status\":\"Disabled\"},{\"name\":\"maxriz\",\"status\":\"Enabled\"},{\"name\":\"gopxlhslnelxie\",\"status\":\"Enabled\"}],\"status\":\"Available\",\"reason\":\"xecwcro\"},{\"name\":\"hslhca\",\"supportedVersionsToUpgrade\":[\"tifdwfmvi\"],\"supportedFeatures\":[{\"name\":\"jbt\",\"status\":\"Enabled\"}],\"status\":\"Default\",\"reason\":\"lkafhonqjuje\"}],\"supportedFeatures\":[{\"name\":\"zvcpopm\",\"status\":\"Disabled\"},{\"name\":\"wcltyjede\",\"status\":\"Enabled\"},{\"name\":\"f\",\"status\":\"Disabled\"},{\"name\":\"cazuaw\",\"status\":\"Enabled\"}],\"fastProvisioningSupported\":\"Disabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"wabzxrvxcushsp\",\"supportedSku\":\"ivmxyasfl\",\"supportedStorageGb\":1652128908,\"supportedServerVersions\":\"zwywako\",\"serverCount\":1976456758,\"status\":\"Disabled\",\"reason\":\"jblmljhlnymz\"},{\"supportedTier\":\"qyryuzcbmqqvxm\",\"supportedSku\":\"fgtayxonsup\",\"supportedStorageGb\":1744580177,\"supportedServerVersions\":\"zqn\",\"serverCount\":1503247909,\"status\":\"Visible\",\"reason\":\"tnzoibgsxgnxfy\"},{\"supportedTier\":\"nmpqoxwdofdb\",\"supportedSku\":\"qxeiiqbimhtmwwi\",\"supportedStorageGb\":708075307,\"supportedServerVersions\":\"f\",\"serverCount\":1711839978,\"status\":\"Disabled\",\"reason\":\"bcblemb\"},{\"supportedTier\":\"bwvqvxkdi\",\"supportedSku\":\"ihebwtsw\",\"supportedStorageGb\":1832502698,\"supportedServerVersions\":\"fmd\",\"serverCount\":1559781271,\"status\":\"Available\",\"reason\":\"izvcjfe\"}],\"geoBackupSupported\":\"Disabled\",\"zoneRedundantHaSupported\":\"Disabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Enabled\",\"storageAutoGrowthSupported\":\"Enabled\",\"onlineResizeSupported\":\"Enabled\",\"restricted\":\"Disabled\",\"status\":\"Default\",\"reason\":\"bsazgakg\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<FlexibleServerCapability> response
            = manager.locationBasedCapabilities().execute("xotngfdguge", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("i", response.iterator().next().name());
    }
}
