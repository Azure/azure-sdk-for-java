// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.postgresqlflexibleserver.models.MigrationDatabaseState;
import com.azure.resourcemanager.postgresqlflexibleserver.models.MigrationSubstateDetails;
import com.azure.resourcemanager.postgresqlflexibleserver.models.ValidationState;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;

public final class MigrationSubstateDetailsTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        MigrationSubstateDetails model = BinaryData.fromString(
            "{\"currentSubState\":\"WaitingForDBsToMigrateSpecification\",\"dbDetails\":{\"ocjjxhvpmouexh\":{\"databaseName\":\"djwzrlov\",\"migrationState\":\"Failed\",\"migrationOperation\":\"hijco\",\"startedOn\":\"2021-03-15T18:11:23Z\",\"endedOn\":\"2021-08-11T04:39:47Z\",\"fullLoadQueuedTables\":1069972358,\"fullLoadErroredTables\":21849341,\"fullLoadLoadingTables\":2038129581,\"fullLoadCompletedTables\":1712979680,\"cdcUpdateCounter\":1302368966,\"cdcDeleteCounter\":1508721218,\"cdcInsertCounter\":544085929,\"appliedChanges\":1619207085,\"incomingChanges\":2039357898,\"latency\":1707424741,\"message\":\"ppofmxaxcfjpgdd\"},\"jqkwpyeicx\":{\"databaseName\":\"xibqeojnx\",\"migrationState\":\"Canceling\",\"migrationOperation\":\"ddntwndei\",\"startedOn\":\"2021-07-03T11:10:37Z\",\"endedOn\":\"2021-01-19T20:45:38Z\",\"fullLoadQueuedTables\":537336258,\"fullLoadErroredTables\":1464431072,\"fullLoadLoadingTables\":1391069168,\"fullLoadCompletedTables\":2037494020,\"cdcUpdateCounter\":2040818894,\"cdcDeleteCounter\":115248697,\"cdcInsertCounter\":1119626287,\"appliedChanges\":1243018189,\"incomingChanges\":1519639894,\"latency\":76474266,\"message\":\"t\"},\"gxlefgugnxkrxd\":{\"databaseName\":\"ciwqvhk\",\"migrationState\":\"Succeeded\",\"migrationOperation\":\"igdtopbob\",\"startedOn\":\"2021-02-18T21:42:16Z\",\"endedOn\":\"2021-02-17T14:37:23Z\",\"fullLoadQueuedTables\":20476621,\"fullLoadErroredTables\":35431541,\"fullLoadLoadingTables\":248377661,\"fullLoadCompletedTables\":1242660761,\"cdcUpdateCounter\":247953507,\"cdcDeleteCounter\":999138845,\"cdcInsertCounter\":1288111051,\"appliedChanges\":1120285230,\"incomingChanges\":1906806316,\"latency\":266379679,\"message\":\"iotkftutqxl\"}},\"validationDetails\":{\"status\":\"Succeeded\",\"validationStartTimeInUtc\":\"2021-12-07T02:37:39Z\",\"validationEndTimeInUtc\":\"2021-07-18T22:53:57Z\",\"serverLevelValidationDetails\":[{\"type\":\"drabhjybige\",\"state\":\"Warning\",\"messages\":[{\"state\":\"Succeeded\",\"message\":\"kanyktzlcuiywg\"},{\"state\":\"Failed\",\"message\":\"ndrvynhzg\"}]},{\"type\":\"hrc\",\"state\":\"Succeeded\",\"messages\":[{\"state\":\"Warning\",\"message\":\"cfvmmco\"},{\"state\":\"Succeeded\",\"message\":\"lzevgbmqjqab\"},{\"state\":\"Warning\",\"message\":\"ivkwlzuvccfwnfnb\"}]}],\"dbLevelValidationDetails\":[{\"databaseName\":\"onlebxetqgtzxdpn\",\"startedOn\":\"2021-09-22T23:33:27Z\",\"endedOn\":\"2021-03-31T09:09:52Z\",\"summary\":[{\"type\":\"feallnwsu\",\"state\":\"Succeeded\",\"messages\":[{},{},{},{}]},{\"type\":\"mpmngnzscxaqwoo\",\"state\":\"Succeeded\",\"messages\":[{}]},{\"type\":\"qvpkvlrxnjeaseip\",\"state\":\"Failed\",\"messages\":[{},{}]},{\"type\":\"keyyi\",\"state\":\"Failed\",\"messages\":[{},{},{}]}]},{\"databaseName\":\"wtgrhpdjpj\",\"startedOn\":\"2021-02-17T18:41:32Z\",\"endedOn\":\"2021-05-01T06:23:28Z\",\"summary\":[{\"type\":\"pqyegualhbxxh\",\"state\":\"Failed\",\"messages\":[{},{},{},{}]}]}]}}")
            .toObject(MigrationSubstateDetails.class);
        Assertions.assertEquals("djwzrlov", model.dbDetails().get("ocjjxhvpmouexh").databaseName());
        Assertions.assertEquals(MigrationDatabaseState.FAILED,
            model.dbDetails().get("ocjjxhvpmouexh").migrationState());
        Assertions.assertEquals("hijco", model.dbDetails().get("ocjjxhvpmouexh").migrationOperation());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-15T18:11:23Z"),
            model.dbDetails().get("ocjjxhvpmouexh").startedOn());
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-11T04:39:47Z"),
            model.dbDetails().get("ocjjxhvpmouexh").endedOn());
        Assertions.assertEquals(1069972358, model.dbDetails().get("ocjjxhvpmouexh").fullLoadQueuedTables());
        Assertions.assertEquals(21849341, model.dbDetails().get("ocjjxhvpmouexh").fullLoadErroredTables());
        Assertions.assertEquals(2038129581, model.dbDetails().get("ocjjxhvpmouexh").fullLoadLoadingTables());
        Assertions.assertEquals(1712979680, model.dbDetails().get("ocjjxhvpmouexh").fullLoadCompletedTables());
        Assertions.assertEquals(1302368966, model.dbDetails().get("ocjjxhvpmouexh").cdcUpdateCounter());
        Assertions.assertEquals(1508721218, model.dbDetails().get("ocjjxhvpmouexh").cdcDeleteCounter());
        Assertions.assertEquals(544085929, model.dbDetails().get("ocjjxhvpmouexh").cdcInsertCounter());
        Assertions.assertEquals(1619207085, model.dbDetails().get("ocjjxhvpmouexh").appliedChanges());
        Assertions.assertEquals(2039357898, model.dbDetails().get("ocjjxhvpmouexh").incomingChanges());
        Assertions.assertEquals(1707424741, model.dbDetails().get("ocjjxhvpmouexh").latency());
        Assertions.assertEquals("ppofmxaxcfjpgdd", model.dbDetails().get("ocjjxhvpmouexh").message());
        Assertions.assertEquals(ValidationState.SUCCEEDED, model.validationDetails().status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-12-07T02:37:39Z"),
            model.validationDetails().validationStartTimeInUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-07-18T22:53:57Z"),
            model.validationDetails().validationEndTimeInUtc());
        Assertions.assertEquals("drabhjybige", model.validationDetails().serverLevelValidationDetails().get(0).type());
        Assertions.assertEquals(ValidationState.WARNING,
            model.validationDetails().serverLevelValidationDetails().get(0).state());
        Assertions.assertEquals(ValidationState.SUCCEEDED,
            model.validationDetails().serverLevelValidationDetails().get(0).messages().get(0).state());
        Assertions.assertEquals("kanyktzlcuiywg",
            model.validationDetails().serverLevelValidationDetails().get(0).messages().get(0).message());
        Assertions.assertEquals("onlebxetqgtzxdpn",
            model.validationDetails().dbLevelValidationDetails().get(0).databaseName());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-22T23:33:27Z"),
            model.validationDetails().dbLevelValidationDetails().get(0).startedOn());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-31T09:09:52Z"),
            model.validationDetails().dbLevelValidationDetails().get(0).endedOn());
        Assertions.assertEquals("feallnwsu",
            model.validationDetails().dbLevelValidationDetails().get(0).summary().get(0).type());
        Assertions.assertEquals(ValidationState.SUCCEEDED,
            model.validationDetails().dbLevelValidationDetails().get(0).summary().get(0).state());
    }
}
