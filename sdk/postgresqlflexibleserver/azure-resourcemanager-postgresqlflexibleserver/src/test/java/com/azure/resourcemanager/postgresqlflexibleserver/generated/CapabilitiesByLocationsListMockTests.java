// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.Capability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CapabilitiesByLocationsListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"lhhxudbxvodhtnsi\",\"supportedServerEditions\":[{\"name\":\"z\",\"defaultSkuName\":\"es\",\"supportedStorageEditions\":[{\"name\":\"pagzrcxfailcfxwm\",\"defaultStorageSizeMb\":829494875413688656,\"supportedStorageMb\":[{},{},{}],\"status\":\"Disabled\",\"reason\":\"tufqobrjlnacgc\"},{\"name\":\"knh\",\"defaultStorageSizeMb\":3643492418704055724,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Default\",\"reason\":\"zvulj\"},{\"name\":\"aeranokqgukkjqnv\",\"defaultStorageSizeMb\":8939885428846863813,\"supportedStorageMb\":[{}],\"status\":\"Default\",\"reason\":\"lcdisd\"},{\"name\":\"fj\",\"defaultStorageSizeMb\":3166275760865387668,\"supportedStorageMb\":[{},{}],\"status\":\"Default\",\"reason\":\"r\"}],\"supportedServerSkus\":[{\"name\":\"ytdc\",\"vCores\":513530726,\"supportedIops\":1078734989,\"supportedMemoryPerVcoreMb\":3532216119776852559,\"supportedZones\":[\"mbtmvpdvjdhttzae\",\"edxihchrphkmcrj\",\"qnsdfzpbgtgky\",\"kdghrjeuutlwx\"],\"supportedHaMode\":[\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"vbwnhhtq\",\"status\":\"Available\",\"reason\":\"gppipifh\"}],\"status\":\"Visible\",\"reason\":\"ajvgcxtxjcsheafi\"},{\"name\":\"tugsresmkssjh\",\"defaultSkuName\":\"ftxfkf\",\"supportedStorageEditions\":[{\"name\":\"rhptilluc\",\"defaultStorageSizeMb\":3657497619392778161,\"supportedStorageMb\":[{},{}],\"status\":\"Available\",\"reason\":\"mcwsldrizetpwb\"}],\"supportedServerSkus\":[{\"name\":\"libph\",\"vCores\":449888460,\"supportedIops\":1515253868,\"supportedMemoryPerVcoreMb\":3175873735082287577,\"supportedZones\":[\"ankjpdnjzh\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"oyxprimr\",\"status\":\"Available\",\"reason\":\"eecjmeis\"},{\"name\":\"tvasy\",\"vCores\":899027368,\"supportedIops\":936242066,\"supportedMemoryPerVcoreMb\":9189422401055080216,\"supportedZones\":[\"oohgu\",\"fuzboyjathwtzolb\",\"emwmdxmebwjs\",\"jpahlxvea\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"qtibxyijddtv\",\"status\":\"Available\",\"reason\":\"adijaeukmrsie\"}],\"status\":\"Disabled\",\"reason\":\"dzaapmudqme\"},{\"name\":\"igpibud\",\"defaultSkuName\":\"yxeb\",\"supportedStorageEditions\":[{\"name\":\"mzznrtffyaqitmhh\",\"defaultStorageSizeMb\":3933645151736778824,\"supportedStorageMb\":[{},{},{}],\"status\":\"Visible\",\"reason\":\"eufuqyrxpdlcgql\"},{\"name\":\"smjqfrddgam\",\"defaultStorageSizeMb\":2296696347291928766,\"supportedStorageMb\":[{},{},{}],\"status\":\"Disabled\",\"reason\":\"uivfcdis\"}],\"supportedServerSkus\":[{\"name\":\"xzhczexrxz\",\"vCores\":1005534572,\"supportedIops\":1549286319,\"supportedMemoryPerVcoreMb\":8450662333010351611,\"supportedZones\":[\"revkhgnlnzo\",\"zlrpiqywncvj\",\"szcofizeht\",\"hgbjkvrelje\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\",\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{}],\"securityProfile\":\"uanashcxlp\",\"status\":\"Available\",\"reason\":\"bdkelvidizo\"},{\"name\":\"db\",\"vCores\":1441551440,\"supportedIops\":1920486563,\"supportedMemoryPerVcoreMb\":5718352601704926527,\"supportedZones\":[\"nwncypuuw\",\"ltv\",\"qjctzenkeif\",\"zhmkdasvflyh\"],\"supportedHaMode\":[\"SameZone\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"xgsrboldforobw\",\"status\":\"Available\",\"reason\":\"zbfhfovvac\"}],\"status\":\"Disabled\",\"reason\":\"uodxesza\"}],\"supportedServerVersions\":[{\"name\":\"awumuaslzkwrrwo\",\"supportedVersionsToUpgrade\":[\"ucwyhahno\",\"drkywuhps\",\"fuurutlwexx\"],\"supportedFeatures\":[{\"name\":\"niexzsrzpgepq\",\"status\":\"Enabled\"},{\"name\":\"wwpgdakchzyvlixq\",\"status\":\"Enabled\"},{\"name\":\"xkjibnxmy\",\"status\":\"Enabled\"}],\"status\":\"Visible\",\"reason\":\"rntvlwijp\"},{\"name\":\"texoqqpwc\",\"supportedVersionsToUpgrade\":[\"fmhruncuwm\",\"spkcdqzh\"],\"supportedFeatures\":[{\"name\":\"dunqnd\",\"status\":\"Enabled\"},{\"name\":\"hrqbnjjrcg\",\"status\":\"Disabled\"}],\"status\":\"Visible\",\"reason\":\"boxjumvq\"}],\"supportedFeatures\":[{\"name\":\"hrraiouaubrj\",\"status\":\"Enabled\"},{\"name\":\"xfuojrn\",\"status\":\"Enabled\"},{\"name\":\"rzpasccbiuimzdly\",\"status\":\"Disabled\"},{\"name\":\"wmkyoqufdvruzsl\",\"status\":\"Enabled\"}],\"fastProvisioningSupported\":\"Enabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"nmdxotngfd\",\"supportedSku\":\"geyzihgrkyuiz\",\"supportedStorageGb\":1099098499,\"supportedServerVersions\":\"mfp\",\"serverCount\":1515954350,\"status\":\"Visible\",\"reason\":\"vyhyhsgzfc\"},{\"supportedTier\":\"gomfgbeglq\",\"supportedSku\":\"eohibet\",\"supportedStorageGb\":980216638,\"supportedServerVersions\":\"nkrrf\",\"serverCount\":653076668,\"status\":\"Default\",\"reason\":\"ij\"}],\"geoBackupSupported\":\"Enabled\",\"zoneRedundantHaSupported\":\"Disabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Disabled\",\"storageAutoGrowthSupported\":\"Enabled\",\"onlineResizeSupported\":\"Enabled\",\"restricted\":\"Disabled\",\"status\":\"Default\",\"reason\":\"nw\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<Capability> response
            = manager.capabilitiesByLocations().list("gsfjac", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("lhhxudbxvodhtnsi", response.iterator().next().name());
    }
}
