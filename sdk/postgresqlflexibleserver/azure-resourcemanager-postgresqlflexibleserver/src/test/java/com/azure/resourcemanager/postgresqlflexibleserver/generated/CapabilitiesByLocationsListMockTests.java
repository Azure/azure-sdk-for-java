// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.Capability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CapabilitiesByLocationsListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"cbiqtgdqoh\",\"supportedServerEditions\":[{\"name\":\"ldrizetpwbra\",\"defaultSkuName\":\"libph\",\"supportedStorageEditions\":[{\"name\":\"izakak\",\"defaultStorageSizeMb\":2736442030278845624,\"supportedStorageMb\":[{},{}],\"status\":\"Available\",\"reason\":\"ha\"},{\"name\":\"ylhjlm\",\"defaultStorageSizeMb\":1077522990830391189,\"supportedStorageMb\":[{},{}],\"status\":\"Available\",\"reason\":\"sopteecj\"},{\"name\":\"islstv\",\"defaultStorageSizeMb\":2601870801725359637,\"supportedStorageMb\":[{}],\"status\":\"Visible\",\"reason\":\"umweoohguufuzboy\"}],\"supportedServerSkus\":[{\"name\":\"wtzolbaemwmdxmeb\",\"vCores\":8048243,\"supportedIops\":120953176,\"supportedMemoryPerVcoreMb\":4829986004787621888,\"supportedZones\":[\"veabfqxnmwmqtib\",\"yijddtvqcttad\"],\"supportedHaMode\":[\"ZoneRedundant\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"sieekpndzaapm\",\"status\":\"Disabled\",\"reason\":\"eqw\"},{\"name\":\"pibudqwyxebeybpm\",\"vCores\":11524370,\"supportedIops\":1945693134,\"supportedMemoryPerVcoreMb\":7788648309029183931,\"supportedZones\":[\"itmhhei\",\"qaqhvseufu\",\"yrxpdlcgqls\",\"smjqfrddgam\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"uivfcdis\",\"status\":\"Available\",\"reason\":\"xzhczexrxz\"}],\"status\":\"Default\",\"reason\":\"trhqvw\"},{\"name\":\"vk\",\"defaultSkuName\":\"nlnzonzlrpi\",\"supportedStorageEditions\":[{\"name\":\"cvjtszcofiz\",\"defaultStorageSizeMb\":4146962922880294634,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Visible\",\"reason\":\"vreljea\"},{\"name\":\"rvzmlovuana\",\"defaultStorageSizeMb\":1138155605453758000,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Disabled\",\"reason\":\"rbdkelvidiz\"},{\"name\":\"sdbccxjmonfdgnwn\",\"defaultStorageSizeMb\":4527807456286813914,\"supportedStorageMb\":[{}],\"status\":\"Visible\",\"reason\":\"v\"},{\"name\":\"jctzenkei\",\"defaultStorageSizeMb\":3883485074610487115,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Visible\",\"reason\":\"vflyhbxcu\"}],\"supportedServerSkus\":[{\"name\":\"gsrboldforobw\",\"vCores\":2116230034,\"supportedIops\":447073477,\"supportedMemoryPerVcoreMb\":6875255372638477871,\"supportedZones\":[\"vvacqpb\",\"uodxesza\",\"belawumuaslzkwr\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"wyh\",\"status\":\"Disabled\",\"reason\":\"mdr\"},{\"name\":\"wuhpsvfuur\",\"vCores\":1702145471,\"supportedIops\":1783251204,\"supportedMemoryPerVcoreMb\":6951866972489132006,\"supportedZones\":[\"lniexz\",\"rzpgep\",\"tybbwwpgda\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"nrkcxkj\",\"status\":\"Visible\",\"reason\":\"mysu\"},{\"name\":\"wq\",\"vCores\":1550616862,\"supportedIops\":790882759,\"supportedMemoryPerVcoreMb\":7173540378190876196,\"supportedZones\":[\"ttexoqqpwcyyufmh\",\"uncuw\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{}],\"securityProfile\":\"zhlctddunqndyfpc\",\"status\":\"Visible\",\"reason\":\"njjrcgegydcwbox\"}],\"status\":\"Available\",\"reason\":\"qqoli\"},{\"name\":\"raiouaubrjtl\",\"defaultSkuName\":\"xfuojrn\",\"supportedStorageEditions\":[{\"name\":\"rzpasccbiuimzdly\",\"defaultStorageSizeMb\":2207814252603311282,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Default\",\"reason\":\"qufdvruzslzojh\"},{\"name\":\"tfnmdx\",\"defaultStorageSizeMb\":9149647349466202254,\"supportedStorageMb\":[{}],\"status\":\"Disabled\",\"reason\":\"eyzihgrky\"}],\"supportedServerSkus\":[{\"name\":\"bsnmfpph\",\"vCores\":917571686,\"supportedIops\":474168225,\"supportedMemoryPerVcoreMb\":3280820966134981534,\"supportedZones\":[\"gzfc\",\"bgomfgbegl\"],\"supportedHaMode\":[\"ZoneRedundant\",\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"nlu\",\"status\":\"Available\",\"reason\":\"rfxeeebtij\"}],\"status\":\"Available\",\"reason\":\"bmqzbqqxlajrnwx\"},{\"name\":\"evehjkuyxoaf\",\"defaultSkuName\":\"oqltfae\",\"supportedStorageEditions\":[{\"name\":\"mfgvxirpghriypo\",\"defaultStorageSizeMb\":7116262338386252749,\"supportedStorageMb\":[{},{},{}],\"status\":\"Default\",\"reason\":\"prlpy\"},{\"name\":\"uciqdsme\",\"defaultStorageSizeMb\":4627205265824000180,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Default\",\"reason\":\"yasiibmiy\"},{\"name\":\"nustgnljh\",\"defaultStorageSizeMb\":430611531006551205,\"supportedStorageMb\":[{},{},{}],\"status\":\"Available\",\"reason\":\"vmqfoud\"}],\"supportedServerSkus\":[{\"name\":\"gyyprotwy\",\"vCores\":677853893,\"supportedIops\":915134983,\"supportedMemoryPerVcoreMb\":6016947306008941575,\"supportedZones\":[\"cmjkavlgorbmftpm\",\"tzfjltf\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\"],\"supportedFeatures\":[{}],\"securityProfile\":\"tpvopvpbdb\",\"status\":\"Default\",\"reason\":\"q\"},{\"name\":\"edsvqwthmk\",\"vCores\":1468707412,\"supportedIops\":669264341,\"supportedMemoryPerVcoreMb\":4975334479567653005,\"supportedZones\":[\"qcwdhoh\",\"dtmcd\",\"sufco\",\"dxbzlmcmuap\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\",\"SameZone\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"xeyskonqzinkfkbg\",\"status\":\"Available\",\"reason\":\"wxeqocljmygvkzqk\"},{\"name\":\"eokbze\",\"vCores\":50022372,\"supportedIops\":2083826558,\"supportedMemoryPerVcoreMb\":8813876269554898921,\"supportedZones\":[\"tleipqxbkw\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"d\",\"status\":\"Disabled\",\"reason\":\"q\"}],\"status\":\"Disabled\",\"reason\":\"awopqh\"}],\"supportedServerVersions\":[{\"name\":\"tmcg\",\"supportedVersionsToUpgrade\":[\"stzelndlatut\",\"zlbiojlvfhrbbpn\",\"qvcww\"],\"supportedFeatures\":[{\"name\":\"mochpprprsnmok\",\"status\":\"Enabled\"},{\"name\":\"jnhlbkpbzpcpiljh\",\"status\":\"Enabled\"},{\"name\":\"echndbnwieholew\",\"status\":\"Disabled\"}],\"status\":\"Available\",\"reason\":\"wefqsfapaqtferr\"},{\"name\":\"ex\",\"supportedVersionsToUpgrade\":[\"fxapjwogqqnobpu\",\"cdabtqwpwya\",\"bzasqbucljgkyexa\",\"guyaip\"],\"supportedFeatures\":[{\"name\":\"ault\",\"status\":\"Enabled\"},{\"name\":\"um\",\"status\":\"Enabled\"},{\"name\":\"z\",\"status\":\"Disabled\"}],\"status\":\"Visible\",\"reason\":\"jng\"},{\"name\":\"dqxtbjwgnyf\",\"supportedVersionsToUpgrade\":[\"zsvtuikzhajqgl\",\"fh\",\"l\"],\"supportedFeatures\":[{\"name\":\"xynqnz\",\"status\":\"Enabled\"},{\"name\":\"ovw\",\"status\":\"Disabled\"},{\"name\":\"tgoe\",\"status\":\"Enabled\"}],\"status\":\"Available\",\"reason\":\"pfhvfslk\"}],\"supportedFeatures\":[{\"name\":\"lrigjkskyri\",\"status\":\"Disabled\"},{\"name\":\"idsxwaabzmifry\",\"status\":\"Disabled\"},{\"name\":\"maxriz\",\"status\":\"Enabled\"}],\"fastProvisioningSupported\":\"Disabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"lhslnelxieixyn\",\"supportedSku\":\"xecwcro\",\"supportedStorageGb\":1356428247,\"supportedServerVersions\":\"lhc\",\"serverCount\":1923192565,\"status\":\"Default\",\"reason\":\"fdwfmvigorqj\"}],\"geoBackupSupported\":\"Enabled\",\"zoneRedundantHaSupported\":\"Enabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Disabled\",\"storageAutoGrowthSupported\":\"Disabled\",\"onlineResizeSupported\":\"Enabled\",\"restricted\":\"Disabled\",\"status\":\"Visible\",\"reason\":\"juj\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<Capability> response
            = manager.capabilitiesByLocations().list("egprhptil", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("cbiqtgdqoh", response.iterator().next().name());
    }
}
