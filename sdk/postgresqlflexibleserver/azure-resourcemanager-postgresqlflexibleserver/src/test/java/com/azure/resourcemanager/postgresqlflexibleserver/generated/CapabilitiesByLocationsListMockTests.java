// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.Capability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CapabilitiesByLocationsListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"un\",\"supportedServerEditions\":[{\"name\":\"czvvit\",\"defaultSkuName\":\"gx\",\"supportedStorageEditions\":[{\"name\":\"serxht\",\"defaultStorageSizeMb\":5001400957863030853,\"supportedStorageMb\":[{},{},{}],\"status\":\"Visible\",\"reason\":\"sjgqrsxyp\"},{\"name\":\"uuybnchrsz\",\"defaultStorageSizeMb\":651317351695168525,\"supportedStorageMb\":[{},{},{}],\"status\":\"Available\",\"reason\":\"tn\"}],\"supportedServerSkus\":[{\"name\":\"qyggagfl\",\"vCores\":472068918,\"supportedIops\":1829348584,\"supportedMemoryPerVcoreMb\":5620660103328476240,\"supportedZones\":[\"jmucftby\",\"plrohkpigq\",\"usuckzmkwklsno\",\"axmqeqal\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"yynfsvkhgbv\",\"status\":\"Disabled\",\"reason\":\"arfdlpukhpyrnei\"}],\"status\":\"Disabled\",\"reason\":\"eogkhnmgbro\"},{\"name\":\"ddbhf\",\"defaultSkuName\":\"fpazjzoywjxhpd\",\"supportedStorageEditions\":[{\"name\":\"tacnpqwtehtuev\",\"defaultStorageSizeMb\":6535440745984953627,\"supportedStorageMb\":[{},{}],\"status\":\"Disabled\",\"reason\":\"wxhn\"},{\"name\":\"uug\",\"defaultStorageSizeMb\":5164563630289510273,\"supportedStorageMb\":[{},{},{}],\"status\":\"Default\",\"reason\":\"kfuarenlv\"}],\"supportedServerSkus\":[{\"name\":\"lnvnafvvkyfedev\",\"vCores\":972204015,\"supportedIops\":222208753,\"supportedMemoryPerVcoreMb\":4356166093987253792,\"supportedZones\":[\"okkhminq\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\"],\"supportedFeatures\":[{}],\"securityProfile\":\"bdxxe\",\"status\":\"Disabled\",\"reason\":\"nvudbchaqdtvqecr\"},{\"name\":\"tmxxdtddmflhuy\",\"vCores\":297911426,\"supportedIops\":1148214254,\"supportedMemoryPerVcoreMb\":3117767040904980283,\"supportedZones\":[\"bannovvoxczytp\",\"wnwvroevytlyokr\",\"rouuxvnsasbcry\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"klobdxnazpmk\",\"status\":\"Visible\",\"reason\":\"evfxzopjhbzxlioh\"},{\"name\":\"dd\",\"vCores\":255752990,\"supportedIops\":1848154538,\"supportedMemoryPerVcoreMb\":5352821957045618888,\"supportedZones\":[\"bbnz\"],\"supportedHaMode\":[\"ZoneRedundant\",\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"yuicdhzbdy\",\"status\":\"Disabled\",\"reason\":\"bdvibidmhmwffpl\"},{\"name\":\"u\",\"vCores\":881600617,\"supportedIops\":65481812,\"supportedMemoryPerVcoreMb\":8872639253607342449,\"supportedZones\":[\"weyoxoy\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"mmoiroqboshbra\",\"status\":\"Available\",\"reason\":\"yrmfsvbpav\"}],\"status\":\"Available\",\"reason\":\"ppdbwnupgahxkum\"},{\"name\":\"jcaacfdmmcpugm\",\"defaultSkuName\":\"qepvufhbzeh\",\"supportedStorageEditions\":[{\"name\":\"qhnlbqnbld\",\"defaultStorageSizeMb\":3824885841170020184,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Default\",\"reason\":\"orim\"},{\"name\":\"srrm\",\"defaultStorageSizeMb\":2486083532353292193,\"supportedStorageMb\":[{},{},{}],\"status\":\"Available\",\"reason\":\"uviyfcaabeo\"}],\"supportedServerSkus\":[{\"name\":\"lvbmxuqibsxtkcu\",\"vCores\":197421079,\"supportedIops\":1338254513,\"supportedMemoryPerVcoreMb\":2424147973889144435,\"supportedZones\":[\"owlkjxnqpv\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"izmdksa\",\"status\":\"Available\",\"reason\":\"luqvoxmycjimryv\"}],\"status\":\"Visible\",\"reason\":\"wpbmzgwesydsxwef\"},{\"name\":\"ecb\",\"defaultSkuName\":\"pwndyqlea\",\"supportedStorageEditions\":[{\"name\":\"mtkhlowkxxpvbr\",\"defaultStorageSizeMb\":9054823478144085075,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Available\",\"reason\":\"hotlhikcyychunsj\"},{\"name\":\"jrtwsz\",\"defaultStorageSizeMb\":5032130100101663187,\"supportedStorageMb\":[{}],\"status\":\"Disabled\",\"reason\":\"trrmhwrb\"},{\"name\":\"pyf\",\"defaultStorageSizeMb\":7015052364013684166,\"supportedStorageMb\":[{}],\"status\":\"Default\",\"reason\":\"ocu\"}],\"supportedServerSkus\":[{\"name\":\"hhmemhooclutnp\",\"vCores\":705217940,\"supportedIops\":563116604,\"supportedMemoryPerVcoreMb\":1458732087320397006,\"supportedZones\":[\"ykyujxsg\",\"hsrrryejylmbkz\",\"dnigrfihot\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"jgnrefqyhqoto\",\"status\":\"Default\",\"reason\":\"akydiwfbrkwpz\"}],\"status\":\"Available\",\"reason\":\"hcspo\"}],\"supportedServerVersions\":[{\"name\":\"xsi\",\"supportedVersionsToUpgrade\":[\"tgbebj\",\"ulbmoichdlp\",\"fpubntnbatz\"],\"supportedFeatures\":[{\"name\":\"owsaaelcattcjuh\",\"status\":\"Disabled\"}],\"status\":\"Visible\",\"reason\":\"jcwmjvlgfggcvk\"},{\"name\":\"lizrzbjpsfxsfuz\",\"supportedVersionsToUpgrade\":[\"tmvag\",\"w\"],\"supportedFeatures\":[{\"name\":\"vhuk\",\"status\":\"Enabled\"}],\"status\":\"Visible\",\"reason\":\"zrvjfnmjmvlwyzgi\"},{\"name\":\"kujrllfojui\",\"supportedVersionsToUpgrade\":[\"uuyjucejikz\",\"eovvtzej\",\"tjklntikyjuzk\"],\"supportedFeatures\":[{\"name\":\"o\",\"status\":\"Enabled\"},{\"name\":\"vhqjwtrhtgvg\",\"status\":\"Enabled\"},{\"name\":\"rkolawjm\",\"status\":\"Disabled\"}],\"status\":\"Disabled\",\"reason\":\"kcdxfzzzw\"},{\"name\":\"afitlhguynuchlg\",\"supportedVersionsToUpgrade\":[\"xd\"],\"supportedFeatures\":[{\"name\":\"zusg\",\"status\":\"Enabled\"},{\"name\":\"snnjzfpafolpym\",\"status\":\"Enabled\"},{\"name\":\"qzr\",\"status\":\"Enabled\"},{\"name\":\"dphtv\",\"status\":\"Enabled\"}],\"status\":\"Available\",\"reason\":\"lejchcsr\"}],\"supportedFeatures\":[{\"name\":\"mzlanru\",\"status\":\"Enabled\"},{\"name\":\"nphcnzqtpjhmqrh\",\"status\":\"Enabled\"},{\"name\":\"aiwdcxsmlzzhz\",\"status\":\"Disabled\"},{\"name\":\"tlgy\",\"status\":\"Disabled\"}],\"fastProvisioningSupported\":\"Enabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"pxy\",\"supportedSku\":\"fiqgeaar\",\"supportedStorageGb\":1031040752,\"supportedServerVersions\":\"kglklbyulidwcw\",\"serverCount\":1795651624,\"status\":\"Visible\",\"reason\":\"o\"}],\"geoBackupSupported\":\"Enabled\",\"zoneRedundantHaSupported\":\"Disabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Enabled\",\"storageAutoGrowthSupported\":\"Disabled\",\"onlineResizeSupported\":\"Enabled\",\"restricted\":\"Enabled\",\"status\":\"Disabled\",\"reason\":\"spzhzmtksjc\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<Capability> response
            = manager.capabilitiesByLocations().list("guaucmfdjwnla", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("un", response.iterator().next().name());
    }
}
