// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.Capability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CapabilitiesByServersListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"clt\",\"supportedServerEditions\":[{\"name\":\"ex\",\"defaultSkuName\":\"lfmk\",\"supportedStorageEditions\":[{\"name\":\"zuawxtzxpuamwa\",\"defaultStorageSizeMb\":5681353698337068642,\"supportedStorageMb\":[{},{}],\"status\":\"Available\",\"reason\":\"hsphaivmxyas\"},{\"name\":\"vgsgzwywakoihkn\",\"defaultStorageSizeMb\":3757192969147775574,\"supportedStorageMb\":[{}],\"status\":\"Disabled\",\"reason\":\"lnymzotqy\"}],\"supportedServerSkus\":[{\"name\":\"cbm\",\"vCores\":1331204401,\"supportedIops\":351004258,\"supportedMemoryPerVcoreMb\":3776684670219420412,\"supportedZones\":[\"ayxonsupeujl\"],\"supportedHaMode\":[\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"ql\",\"status\":\"Available\",\"reason\":\"ibg\"},{\"name\":\"gnxf\",\"vCores\":570995057,\"supportedIops\":1604903119,\"supportedMemoryPerVcoreMb\":4786688185160172368,\"supportedZones\":[\"dofdbxiqx\",\"iiqbi\",\"htmwwinh\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"vwbcblembnkbwv\",\"status\":\"Visible\",\"reason\":\"divqi\"}],\"status\":\"Visible\",\"reason\":\"tswbzuwfmd\"},{\"name\":\"agegiz\",\"defaultSkuName\":\"jfelisdjubggbqig\",\"supportedStorageEditions\":[{\"name\":\"sazgakgacyrcmj\",\"defaultStorageSizeMb\":3103718277552317709,\"supportedStorageMb\":[{},{},{},{}],\"status\":\"Visible\",\"reason\":\"uhrylniofr\"},{\"name\":\"bzjedmstk\",\"defaultStorageSizeMb\":110896961983578283,\"supportedStorageMb\":[{},{}],\"status\":\"Disabled\",\"reason\":\"iznk\"}],\"supportedServerSkus\":[{\"name\":\"nsnvpd\",\"vCores\":671836726,\"supportedIops\":115574776,\"supportedMemoryPerVcoreMb\":4456554415141615101,\"supportedZones\":[\"bkiw\"],\"supportedHaMode\":[\"ZoneRedundant\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"fy\",\"status\":\"Default\",\"reason\":\"rpfbcunezz\"}],\"status\":\"Default\",\"reason\":\"lfwyfwlwxjwetn\"},{\"name\":\"ihclafzv\",\"defaultSkuName\":\"lpt\",\"supportedStorageEditions\":[{\"name\":\"wztcmwqkchc\",\"defaultStorageSizeMb\":4460871614096839788,\"supportedStorageMb\":[{},{},{}],\"status\":\"Default\",\"reason\":\"kjexfdeqvhp\"},{\"name\":\"lkkshkbffmbmx\",\"defaultStorageSizeMb\":6471426075457466306,\"supportedStorageMb\":[{}],\"status\":\"Disabled\",\"reason\":\"jx\"}],\"supportedServerSkus\":[{\"name\":\"fujg\",\"vCores\":1062138693,\"supportedIops\":1279529449,\"supportedMemoryPerVcoreMb\":6918440632186080085,\"supportedZones\":[\"aqutdewemxswvruu\",\"zzjgehkfki\",\"rtixokff\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"whixmonstsh\",\"status\":\"Disabled\",\"reason\":\"velfcldu\"},{\"name\":\"birdsvuwcobiegs\",\"vCores\":1923237132,\"supportedIops\":2099523600,\"supportedMemoryPerVcoreMb\":2784649228663949858,\"supportedZones\":[\"i\",\"nghgshej\",\"tbxqmuluxlxq\",\"vnersbycucrw\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"rqbsmswziq\",\"status\":\"Visible\",\"reason\":\"okzrus\"},{\"name\":\"vhczznvfby\",\"vCores\":1906628483,\"supportedIops\":728305495,\"supportedMemoryPerVcoreMb\":2787720683354183168,\"supportedZones\":[\"vumwmxqh\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"sehaohdjhhflzok\",\"status\":\"Visible\",\"reason\":\"pelnjetag\"},{\"name\":\"sxoa\",\"vCores\":1674614666,\"supportedIops\":2037643049,\"supportedMemoryPerVcoreMb\":4444044351696890783,\"supportedZones\":[\"wvefloccsrmoz\",\"hmipgawtxxpkyjc\",\"cjxgrytf\",\"pcycilrmcaykg\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"sxwpndfcpfnznthj\",\"status\":\"Default\",\"reason\":\"aosrxuz\"}],\"status\":\"Disabled\",\"reason\":\"ktcqio\"}],\"supportedServerVersions\":[{\"name\":\"zah\",\"supportedVersionsToUpgrade\":[\"dl\",\"rtltla\"],\"supportedFeatures\":[{\"name\":\"zkatb\",\"status\":\"Disabled\"},{\"name\":\"nnbsoqeqa\",\"status\":\"Disabled\"},{\"name\":\"lagun\",\"status\":\"Enabled\"},{\"name\":\"ebwlnbmhyreeudzq\",\"status\":\"Disabled\"}],\"status\":\"Available\",\"reason\":\"mjxlyyzglgouw\"},{\"name\":\"mjjyuojq\",\"supportedVersionsToUpgrade\":[\"axkjeytunlbfjk\"],\"supportedFeatures\":[{\"name\":\"nkqbhsyrq\",\"status\":\"Enabled\"}],\"status\":\"Default\",\"reason\":\"enx\"},{\"name\":\"l\",\"supportedVersionsToUpgrade\":[\"kdk\",\"fmjnnawtqa\",\"pxuckpggq\",\"wey\"],\"supportedFeatures\":[{\"name\":\"lisn\",\"status\":\"Enabled\"},{\"name\":\"qqmpizruwnpqx\",\"status\":\"Disabled\"},{\"name\":\"fcngjsa\",\"status\":\"Enabled\"},{\"name\":\"xtmkzjvkviir\",\"status\":\"Disabled\"}],\"status\":\"Available\",\"reason\":\"sdp\"}],\"supportedFeatures\":[{\"name\":\"zvzbglbyv\",\"status\":\"Disabled\"}],\"fastProvisioningSupported\":\"Enabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"kjzwrgxf\",\"supportedSku\":\"shkwfbkgozxwopd\",\"supportedStorageGb\":1179999545,\"supportedServerVersions\":\"izqaclnapxbiyg\",\"serverCount\":966053961,\"status\":\"Disabled\",\"reason\":\"fsmfcttuxuuyi\"},{\"supportedTier\":\"lq\",\"supportedSku\":\"quvre\",\"supportedStorageGb\":2121197417,\"supportedServerVersions\":\"jhvsujztczyt\",\"serverCount\":178479099,\"status\":\"Visible\",\"reason\":\"uunfprnjletlxsm\"},{\"supportedTier\":\"ddoui\",\"supportedSku\":\"mowaziynknlqwzdv\",\"supportedStorageGb\":39952136,\"supportedServerVersions\":\"xqszdtmaajquh\",\"serverCount\":578758071,\"status\":\"Disabled\",\"reason\":\"vmtygj\"},{\"supportedTier\":\"zyos\",\"supportedSku\":\"p\",\"supportedStorageGb\":26175151,\"supportedServerVersions\":\"fkyjpmspbpssdfpp\",\"serverCount\":386298045,\"status\":\"Available\",\"reason\":\"yujtvczkcnyx\"}],\"geoBackupSupported\":\"Disabled\",\"zoneRedundantHaSupported\":\"Disabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Enabled\",\"storageAutoGrowthSupported\":\"Enabled\",\"onlineResizeSupported\":\"Enabled\",\"restricted\":\"Enabled\",\"status\":\"Visible\",\"reason\":\"xpaglqivbgkc\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<Capability> response
            = manager.capabilitiesByServers().list("ickpz", "cpopmxel", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("clt", response.iterator().next().name());
    }
}
