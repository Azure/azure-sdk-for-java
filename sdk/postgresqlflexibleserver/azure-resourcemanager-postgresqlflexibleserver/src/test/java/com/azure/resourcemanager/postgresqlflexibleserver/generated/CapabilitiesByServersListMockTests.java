// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.postgresqlflexibleserver.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.postgresqlflexibleserver.PostgreSqlManager;
import com.azure.resourcemanager.postgresqlflexibleserver.models.Capability;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CapabilitiesByServersListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"eyl\",\"supportedServerEditions\":[{\"name\":\"gv\",\"defaultSkuName\":\"r\",\"supportedStorageEditions\":[{\"name\":\"iypoqeyhlqhykprl\",\"defaultStorageSizeMb\":632501540530414210,\"supportedStorageMb\":[{},{}],\"status\":\"Default\",\"reason\":\"smexiitdf\"},{\"name\":\"tyasiibmiybnnust\",\"defaultStorageSizeMb\":5586391712420999806,\"supportedStorageMb\":[{},{}],\"status\":\"Visible\",\"reason\":\"xhcmavmqfoudo\"},{\"name\":\"cgyypro\",\"defaultStorageSizeMb\":3489829190281732656,\"supportedStorageMb\":[{}],\"status\":\"Default\",\"reason\":\"xhugcm\"},{\"name\":\"avlg\",\"defaultStorageSizeMb\":9008399369327070874,\"supportedStorageMb\":[{}],\"status\":\"Disabled\",\"reason\":\"tzfjltf\"}],\"supportedServerSkus\":[{\"name\":\"yj\",\"vCores\":351038276,\"supportedIops\":1244387227,\"supportedMemoryPerVcoreMb\":8439082664009301787,\"supportedZones\":[\"dbzqgqqihed\"],\"supportedHaMode\":[\"ZoneRedundant\",\"ZoneRedundant\"],\"supportedFeatures\":[{}],\"securityProfile\":\"yibcy\",\"status\":\"Available\",\"reason\":\"gqcwdhohsdtmc\"},{\"name\":\"sufco\",\"vCores\":1526999298,\"supportedIops\":1206774170,\"supportedMemoryPerVcoreMb\":7808079684010366581,\"supportedZones\":[\"apcvhdbe\",\"wqqxeysko\",\"qzinkfkbg\",\"z\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\",\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"mygvkzqkj\",\"status\":\"Available\",\"reason\":\"bzefezr\"}],\"status\":\"Available\",\"reason\":\"urtleipqxb\"},{\"name\":\"vz\",\"defaultSkuName\":\"zvd\",\"supportedStorageEditions\":[{\"name\":\"ixz\",\"defaultStorageSizeMb\":2780083248879207439,\"supportedStorageMb\":[{}],\"status\":\"Disabled\",\"reason\":\"pqhe\"}],\"supportedServerSkus\":[{\"name\":\"mcgsbostzelnd\",\"vCores\":1343816292,\"supportedIops\":492133944,\"supportedMemoryPerVcoreMb\":6922803194395266051,\"supportedZones\":[\"ojlvfhrbbpneqvc\",\"wyyu\",\"mochpprprsnmok\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{}],\"securityProfile\":\"bkpbzpcpiljh\",\"status\":\"Visible\",\"reason\":\"echndbnwieholew\"},{\"name\":\"iuubwefqsf\",\"vCores\":1697750371,\"supportedIops\":407191024,\"supportedMemoryPerVcoreMb\":754102040375409249,\"supportedZones\":[\"wexjkmfxapjwogq\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"cdabtqwpwya\",\"status\":\"Disabled\",\"reason\":\"sqbuc\"},{\"name\":\"gkyexaoguy\",\"vCores\":166467616,\"supportedIops\":1503603964,\"supportedMemoryPerVcoreMb\":4708968390247773451,\"supportedZones\":[\"tx\",\"jjum\",\"qwazlnqnmcjngzq\",\"qxtbjwgnyf\"],\"supportedHaMode\":[\"SameZone\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{}],\"securityProfile\":\"kzhajqglcfhm\",\"status\":\"Available\",\"reason\":\"yxynq\"},{\"name\":\"rd\",\"vCores\":752629993,\"supportedIops\":347579095,\"supportedMemoryPerVcoreMb\":1858229122434139386,\"supportedZones\":[\"goeiybbabpfhvfsl\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"gjkskyrioov\",\"status\":\"Available\",\"reason\":\"xwaabzmifrygznmm\"}],\"status\":\"Visible\",\"reason\":\"zkzobgopxlhslnel\"},{\"name\":\"eixynllxecwcroj\",\"defaultSkuName\":\"slhcawjutifd\",\"supportedStorageEditions\":[{\"name\":\"igorqjbttzhragl\",\"defaultStorageSizeMb\":8509742986055591698,\"supportedStorageMb\":[{}],\"status\":\"Visible\",\"reason\":\"jeick\"}],\"supportedServerSkus\":[{\"name\":\"p\",\"vCores\":1310159143,\"supportedIops\":1711533455,\"supportedMemoryPerVcoreMb\":4564755982440409179,\"supportedZones\":[\"tyjedex\",\"mlfmkqs\",\"azuawx\",\"z\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"xrvxcushsphai\",\"status\":\"Default\",\"reason\":\"asflvg\"},{\"name\":\"zwywako\",\"vCores\":1976456758,\"supportedIops\":1115502807,\"supportedMemoryPerVcoreMb\":3757192969147775574,\"supportedZones\":[\"ljhlnymzotq\"],\"supportedHaMode\":[\"ZoneRedundant\",\"SameZone\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{},{},{},{}],\"securityProfile\":\"vxmvw\",\"status\":\"Visible\",\"reason\":\"yxonsupe\"}],\"status\":\"Available\",\"reason\":\"qnhcvsqltnzoibg\"},{\"name\":\"gnxf\",\"defaultSkuName\":\"onmpqoxwdof\",\"supportedStorageEditions\":[{\"name\":\"qxeiiqbimhtmwwi\",\"defaultStorageSizeMb\":3041160288395133885,\"supportedStorageMb\":[{},{}],\"status\":\"Available\",\"reason\":\"vwbcblembnkbwv\"},{\"name\":\"xk\",\"defaultStorageSizeMb\":7873416727054110619,\"supportedStorageMb\":[{}],\"status\":\"Visible\",\"reason\":\"tswbzuwfmd\"},{\"name\":\"agegiz\",\"defaultStorageSizeMb\":8736432939404786090,\"supportedStorageMb\":[{},{},{}],\"status\":\"Disabled\",\"reason\":\"jubggbqigkxkb\"}],\"supportedServerSkus\":[{\"name\":\"akgacyrcmjdm\",\"vCores\":374782594,\"supportedIops\":897810587,\"supportedMemoryPerVcoreMb\":8260920896758809530,\"supportedZones\":[\"ylnio\",\"rz\",\"bzjedmstk\"],\"supportedHaMode\":[\"ZoneRedundant\"],\"supportedFeatures\":[{},{}],\"securityProfile\":\"uiiznktwfansnvpd\",\"status\":\"Visible\",\"reason\":\"kostbzbki\"},{\"name\":\"uqn\",\"vCores\":739962917,\"supportedIops\":1370861558,\"supportedMemoryPerVcoreMb\":2924984698457968804,\"supportedZones\":[\"crpfbcunez\",\"cez\",\"lfwyfwlwxjwetn\"],\"supportedHaMode\":[\"SameZone\",\"SameZone\"],\"supportedFeatures\":[{},{},{}],\"securityProfile\":\"zvaylptrsqqw\",\"status\":\"Default\",\"reason\":\"w\"},{\"name\":\"chcxwaxfewzj\",\"vCores\":1116581331,\"supportedIops\":365381714,\"supportedMemoryPerVcoreMb\":2289178853645046408,\"supportedZones\":[\"psylkkshkbffmbmx\",\"jrgywwpgjxsn\",\"tf\"],\"supportedHaMode\":[\"ZoneRedundant\",\"ZoneRedundant\",\"ZoneRedundant\",\"SameZone\"],\"supportedFeatures\":[{}],\"securityProfile\":\"pttaqutd\",\"status\":\"Default\",\"reason\":\"xswvru\"}],\"status\":\"Default\",\"reason\":\"jgehkf\"}],\"supportedServerVersions\":[{\"name\":\"tixo\",\"supportedVersionsToUpgrade\":[\"qyinl\",\"qepqwhixmon\",\"tshi\"],\"supportedFeatures\":[{\"name\":\"elfclducc\",\"status\":\"Enabled\"},{\"name\":\"svu\",\"status\":\"Enabled\"}],\"status\":\"Available\",\"reason\":\"gstmninwjizciln\"}],\"supportedFeatures\":[{\"name\":\"h\",\"status\":\"Disabled\"},{\"name\":\"bxqmu\",\"status\":\"Enabled\"},{\"name\":\"xqzv\",\"status\":\"Disabled\"},{\"name\":\"bycucrwnamikz\",\"status\":\"Disabled\"}],\"fastProvisioningSupported\":\"Disabled\",\"supportedFastProvisioningEditions\":[{\"supportedTier\":\"wziqgfuhokzr\",\"supportedSku\":\"whvhczznvfb\",\"supportedStorageGb\":1910463572,\"supportedServerVersions\":\"xjww\",\"serverCount\":184999250,\"status\":\"Default\",\"reason\":\"wmxqhndvnoamlds\"},{\"supportedTier\":\"aohdjh\",\"supportedSku\":\"lzok\",\"supportedStorageGb\":434777672,\"supportedServerVersions\":\"pelnjetag\",\"serverCount\":1066573650,\"status\":\"Disabled\",\"reason\":\"tft\"}],\"geoBackupSupported\":\"Disabled\",\"zoneRedundantHaSupported\":\"Disabled\",\"zoneRedundantHaAndGeoBackupSupported\":\"Disabled\",\"storageAutoGrowthSupported\":\"Disabled\",\"onlineResizeSupported\":\"Disabled\",\"restricted\":\"Enabled\",\"status\":\"Visible\",\"reason\":\"rmozihmipgawt\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PostgreSqlManager manager = PostgreSqlManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<Capability> response
            = manager.capabilitiesByServers().list("acevehjkuyx", "afgaoqlt", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("eyl", response.iterator().next().name());
    }
}
