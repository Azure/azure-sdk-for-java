// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.migration.assessment.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migration.assessment.MigrationAssessmentManager;
import com.azure.resourcemanager.migration.assessment.models.AssessedSqlDatabaseV2;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class AssessedSqlDatabaseV2OperationsGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"recommendedAzureSqlTargetType\":\"AzureSqlVirtualMachine\",\"recommendedSuitability\":\"ReadinessUnknown\",\"bufferCacheSizeInMB\":0.8788943,\"productSupportStatus\":{\"currentVersion\":\"iegftc\",\"servicePackStatus\":\"iiftksd\",\"esuStatus\":\"dnkefgm\",\"supportStatus\":\"hcebuvczldbglzo\",\"eta\":1037630035,\"currentEsuYear\":\"aqgzekajclyzgs\",\"mainstreamEndDate\":\"2021-04-21T17:36:16Z\",\"extendedSupportEndDate\":\"2021-04-23T22:59:57Z\",\"extendedSecurityUpdateYear1EndDate\":\"2021-11-11T22:10:46Z\",\"extendedSecurityUpdateYear2EndDate\":\"2021-04-21T21:06:45Z\",\"extendedSecurityUpdateYear3EndDate\":\"2021-05-23T21:13:43Z\"},\"azureSqlMISuitabilityDetails\":{\"azureSqlSku\":{\"azureSqlServiceTier\":\"BusinessCritical\",\"azureSqlComputeTier\":\"Serverless\",\"azureSqlHardwareGeneration\":\"Automatic\",\"storageMaxSizeInMB\":68.34222,\"predictedDataSizeInMB\":16.33374,\"predictedLogSizeInMB\":52.67709,\"cores\":903159206,\"azureSqlTargetType\":\"Recommended\"},\"replicaAzureSqlSku\":[{\"azureSqlServiceTier\":\"BusinessCritical\",\"azureSqlComputeTier\":\"Serverless\",\"azureSqlHardwareGeneration\":\"Gen5\",\"storageMaxSizeInMB\":38.71055,\"predictedDataSizeInMB\":87.59537,\"predictedLogSizeInMB\":43.163795,\"cores\":1578463604,\"azureSqlTargetType\":\"AzureVirtualMachine\"},{\"azureSqlServiceTier\":\"Unknown\",\"azureSqlComputeTier\":\"Serverless\",\"azureSqlHardwareGeneration\":\"Gen5\",\"storageMaxSizeInMB\":74.55601,\"predictedDataSizeInMB\":70.11732,\"predictedLogSizeInMB\":36.583263,\"cores\":516680467,\"azureSqlTargetType\":\"AzureSqlVirtualMachine\"}],\"sharedResources\":{\"sharedDataDisks\":[{}],\"sharedLogDisks\":[{},{}],\"sharedTempDbDisks\":[{},{}],\"numberOfMounts\":421959246,\"quorumWitness\":{\"quorumWitnessType\":\"Unknown\"}},\"monthlyComputeCost\":49.53341,\"monthlyStorageCost\":60.52063,\"costComponents\":[{\"name\":\"MonthlyAzureHybridCostSavings\",\"value\":35.289574,\"description\":\"j\"},{\"name\":\"Unknown\",\"value\":64.1754,\"description\":\"fyvrtpqpemhzcgk\"},{\"name\":\"MonthlyPremiumV2StorageCost\",\"value\":71.210846,\"description\":\"qyhwqwem\"}],\"securitySuitability\":\"ConditionallySuitable\",\"shouldProvisionReplicas\":true,\"skuReplicationMode\":\"ActiveGeoReplication\",\"migrationGuidelines\":[{\"guidelineId\":\"oxinh\",\"migrationGuidelineCategory\":\"Unknown\",\"migrationGuidelineContext\":[{}]},{\"guidelineId\":\"whlpuzjpceezn\",\"migrationGuidelineCategory\":\"Unknown\",\"migrationGuidelineContext\":[{},{},{},{}]}],\"recommendationReasonings\":[{\"reasoningId\":\"axyxzlbciphm\",\"reasoningString\":\"x\",\"reasoningCategory\":\"qrndktxfvon\",\"contextParameters\":[{}]},{\"reasoningId\":\"gpkrie\",\"reasoningString\":\"gnixxowwzkyfwnw\",\"reasoningCategory\":\"wxeiicrmpepk\",\"contextParameters\":[{},{},{},{}]},{\"reasoningId\":\"xxij\",\"reasoningString\":\"kwsdgkj\",\"reasoningCategory\":\"acwras\",\"contextParameters\":[{},{},{}]}],\"migrationTargetPlatform\":\"Unknown\",\"suitability\":\"NotSuitable\",\"migrationIssues\":[{\"issueId\":\"woqartwy\",\"issueCategory\":\"Warning\",\"impactedObjects\":[{}]},{\"issueId\":\"dvatdavuqm\",\"issueCategory\":\"Internal\",\"impactedObjects\":[{},{}]},{\"issueId\":\"ob\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{},{},{},{}]}]},\"azureSqlDBSuitabilityDetails\":{\"azureSqlSku\":{\"azureSqlServiceTier\":\"GeneralPurpose\",\"azureSqlComputeTier\":\"Serverless\",\"azureSqlHardwareGeneration\":\"Gen5\",\"storageMaxSizeInMB\":23.274738,\"predictedDataSizeInMB\":26.043839,\"predictedLogSizeInMB\":67.29231,\"cores\":1199715241,\"azureSqlTargetType\":\"AzureSqlVirtualMachine\"},\"replicaAzureSqlSku\":[{\"azureSqlServiceTier\":\"HyperScale\",\"azureSqlComputeTier\":\"Automatic\",\"azureSqlHardwareGeneration\":\"Fsv2_series\",\"storageMaxSizeInMB\":30.55802,\"predictedDataSizeInMB\":26.492733,\"predictedLogSizeInMB\":71.933975,\"cores\":589477595,\"azureSqlTargetType\":\"Unknown\"}],\"sharedResources\":{\"sharedDataDisks\":[{},{}],\"sharedLogDisks\":[{},{}],\"sharedTempDbDisks\":[{},{}],\"numberOfMounts\":1948229122,\"quorumWitness\":{\"quorumWitnessType\":\"Unknown\"}},\"monthlyComputeCost\":36.676968,\"monthlyStorageCost\":45.845135,\"costComponents\":[{\"name\":\"MonthlyAzureHybridCostSavings\",\"value\":10.844618,\"description\":\"nmabed\"},{\"name\":\"MonthlyPremiumV2StorageCost\",\"value\":10.511869,\"description\":\"d\"},{\"name\":\"Unknown\",\"value\":99.390724,\"description\":\"cvstclgqrvwerf\"},{\"name\":\"MonthlySecurityCost\",\"value\":44.495235,\"description\":\"bljjehh\"}],\"securitySuitability\":\"ReadinessUnknown\",\"shouldProvisionReplicas\":false,\"skuReplicationMode\":\"NotApplicable\",\"migrationGuidelines\":[{\"guidelineId\":\"rek\",\"migrationGuidelineCategory\":\"General\",\"migrationGuidelineContext\":[{},{}]},{\"guidelineId\":\"fpwpqbyejuwyqwd\",\"migrationGuidelineCategory\":\"AvailabilityGroupGuideline\",\"migrationGuidelineContext\":[{}]},{\"guidelineId\":\"ginz\",\"migrationGuidelineCategory\":\"General\",\"migrationGuidelineContext\":[{},{}]}],\"recommendationReasonings\":[{\"reasoningId\":\"jcmrnkfm\",\"reasoningString\":\"cqtwmlmhjnqtq\",\"reasoningCategory\":\"hj\",\"contextParameters\":[{},{},{}]},{\"reasoningId\":\"agpokddxe\",\"reasoningString\":\"h\",\"reasoningCategory\":\"guavtptb\",\"contextParameters\":[{},{}]},{\"reasoningId\":\"qynspgbvoffb\",\"reasoningString\":\"w\",\"reasoningCategory\":\"xaexqokmyrljial\",\"contextParameters\":[{},{}]}],\"migrationTargetPlatform\":\"Unknown\",\"suitability\":\"NotSuitable\",\"migrationIssues\":[{\"issueId\":\"cjtrpzu\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{},{},{},{}]},{\"issueId\":\"xnhsqeaeo\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{},{}]},{\"issueId\":\"dhuruzytzarog\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{}]},{\"issueId\":\"iywmpinmzvfkn\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{},{}]}]},\"isDatabaseHighlyAvailable\":true,\"linkedAvailabilityGroupOverview\":{\"availabilityGroupId\":\"sj\",\"availabilityGroupName\":\"ugdybnhrxlel\",\"sqlAvailabilityGroupSdsArmId\":\"hkeizcp\",\"sqlAvailabilityGroupEntityId\":\"tdmiwjekptyca\",\"sqlAvailabilityReplicaId\":\"bjzcqymlcfnzhm\"},\"machineArmId\":\"urlgwqkpmmzps\",\"assessedSqlInstanceArmId\":\"u\",\"machineName\":\"awi\",\"instanceName\":\"momsgvvj\",\"databaseName\":\"vlrlohewjjmajn\",\"databaseSizeInMB\":26.176012,\"compatibilityLevel\":\"CompatLevel100\",\"sqlDatabaseSdsArmId\":\"onswae\",\"percentageCoresUtilization\":12.957537,\"megabytesPerSecondOfRead\":45.745068,\"megabytesPerSecondOfWrite\":96.45278,\"numberOfReadOperationsPerSecond\":65.69365,\"numberOfWriteOperationsPerSecond\":9.40125,\"confidenceRatingInPercentage\":0.98002553,\"sizingCriterion\":\"PerformanceBased\",\"createdTimestamp\":\"2021-08-07T15:49:55Z\",\"updatedTimestamp\":\"2021-05-14T04:39:56Z\"},\"id\":\"pkhx\",\"name\":\"mexznlwkb\",\"type\":\"okxkhupzer\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrationAssessmentManager manager = MigrationAssessmentManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        AssessedSqlDatabaseV2 response = manager.assessedSqlDatabaseV2Operations()
            .getWithResponse("kqv", "qepdx", "ltuubw", "vpjbowcpjqduq", "ixexkydfbwljavhu",
                com.azure.core.util.Context.NONE)
            .getValue();

    }
}
