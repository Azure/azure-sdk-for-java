// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.migration.assessment.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migration.assessment.MigrationAssessmentManager;
import com.azure.resourcemanager.migration.assessment.models.AssessedSqlMachine;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class AssessedSqlMachinesOperationsGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"biosGuid\":\"impkjblorns\",\"fqdn\":\"qhudsmusuaawj\",\"sqlInstances\":[{\"instanceId\":\"jnfczmnniixy\",\"instanceName\":\"qban\",\"sqlInstanceSdsArmId\":\"jtgirnb\",\"sqlInstanceEntityId\":\"gm\",\"sqlEdition\":\"orgmynltwmpftm\",\"sqlVersion\":\"e\",\"isClustered\":false,\"isHighAvailabilityEnabled\":true,\"sqlFciState\":\"Unknown\"},{\"instanceId\":\"etamfddrvlkpzwb\",\"instanceName\":\"recchdidrmu\",\"sqlInstanceSdsArmId\":\"ahmjedbiu\",\"sqlInstanceEntityId\":\"khhwmj\",\"sqlEdition\":\"bweunxc\",\"sqlVersion\":\"rihufoihppiybxv\",\"isClustered\":true,\"isHighAvailabilityEnabled\":false,\"sqlFciState\":\"Unknown\"}],\"suitabilityDetail\":\"CannotReportBandwidthCosts\",\"suitabilityExplanation\":\"WindowsServerVersionConditionallySupported\",\"recommendedVmSize\":\"Standard_M8_4ms\",\"recommendedVmFamily\":\"Ddsv5_series\",\"productSupportStatus\":{\"currentVersion\":\"vkunhdim\",\"servicePackStatus\":\"ktirzka\",\"esuStatus\":\"pucdocf\",\"supportStatus\":\"lwgofm\",\"eta\":1996838839,\"currentEsuYear\":\"jlvzklk\",\"mainstreamEndDate\":\"2021-05-28T13:53:53Z\",\"extendedSupportEndDate\":\"2021-01-21T09:29:50Z\",\"extendedSecurityUpdateYear1EndDate\":\"2021-09-07T03:18:30Z\",\"extendedSecurityUpdateYear2EndDate\":\"2021-08-04T05:52:07Z\",\"extendedSecurityUpdateYear3EndDate\":\"2021-04-25T02:02Z\"},\"recommendedVmSizeNumberOfCores\":1054083047,\"recommendedVmSizeMegabytesOfMemory\":21.55339,\"monthlyComputeCost\":51.470005,\"disks\":{\"raxq\":{\"suitability\":\"ReadinessUnknown\",\"suitabilityExplanation\":\"DiskSizeGreaterThanSupported\",\"suitabilityDetail\":\"DiskGigabytesProvisionedMissing\",\"recommendedDiskSize\":\"Ultra\",\"recommendedDiskType\":\"Ultra\",\"recommendedDiskSizeGigabytes\":425882032,\"recommendDiskThroughputInMbps\":39.469727,\"recommendedDiskIops\":74.69294,\"monthlyStorageCost\":63.4106,\"name\":\"cdiykkc\",\"displayName\":\"nujvqynvavi\",\"gigabytesProvisioned\":44.86011,\"megabytesPerSecondOfRead\":33.159374,\"megabytesPerSecondOfWrite\":66.49689,\"numberOfReadOperationsPerSecond\":82.77711,\"numberOfWriteOperationsPerSecond\":79.22218}},\"networkAdapters\":{\"stsinvag\":{\"suitability\":\"NotSuitable\",\"suitabilityDetail\":\"None\",\"suitabilityExplanation\":\"NotApplicable\",\"monthlyBandwidthCosts\":87.74508,\"netGigabytesTransmittedPerMonth\":22.928202,\"name\":\"pv\",\"displayName\":\"dbwen\",\"macAddress\":\"nafhxrzfr\",\"ipAddresses\":[\"tiucwv\",\"qllukhkrcqxg\",\"bvzarmq\"],\"megabytesPerSecondReceived\":11.978602,\"megabytesPerSecondTransmitted\":17.930443},\"kheubanlx\":{\"suitability\":\"ConditionallySuitable\",\"suitabilityDetail\":\"MegabytesOfDataRecievedOutOfRange\",\"suitabilityExplanation\":\"Unknown\",\"monthlyBandwidthCosts\":35.926144,\"netGigabytesTransmittedPerMonth\":37.834274,\"name\":\"cehqw\",\"displayName\":\"txnmxgnmguz\",\"macAddress\":\"wvor\",\"ipAddresses\":[\"kjnbkbdhlltqstq\",\"qsygxiynec\"],\"megabytesPerSecondReceived\":12.935913,\"megabytesPerSecondTransmitted\":99.16029},\"e\":{\"suitability\":\"ReadinessUnknown\",\"suitabilityDetail\":\"MegabytesOfDataTransmittedMissing\",\"suitabilityExplanation\":\"NotApplicable\",\"monthlyBandwidthCosts\":86.49183,\"netGigabytesTransmittedPerMonth\":50.56507,\"name\":\"lzklaslgacizux\",\"displayName\":\"arwp\",\"macAddress\":\"saudoejtighsx\",\"ipAddresses\":[\"tnkqbala\",\"ovu\"],\"megabytesPerSecondReceived\":85.89372,\"megabytesPerSecondTransmitted\":68.44179}},\"monthlyBandwidthCost\":58.254917,\"monthlyStorageCost\":35.27037,\"costComponents\":[{\"name\":\"MonthlyAzureHybridCostSavings\",\"value\":99.090454,\"description\":\"bcngkegxc\"}],\"securitySuitability\":\"NotSuitable\",\"migrationGuidelines\":[{\"guidelineId\":\"etwilyrzoxpd\",\"migrationGuidelineCategory\":\"Unknown\",\"migrationGuidelineContext\":[{}]},{\"guidelineId\":\"lqownkiua\",\"migrationGuidelineCategory\":\"Unknown\",\"migrationGuidelineContext\":[{},{}]}],\"bootType\":\"Unknown\",\"operatingSystemType\":\"xjjmztnlmsoodtm\",\"operatingSystemName\":\"cdhdyswcrpt\",\"operatingSystemVersion\":\"ajczxvl\",\"operatingSystemArchitecture\":\"Unknown\",\"createdTimestamp\":\"2021-02-10T22:21:42Z\",\"updatedTimestamp\":\"2021-05-07T20:09:53Z\",\"displayName\":\"zrpywlptyuqh\",\"type\":\"Unknown\",\"description\":\"skykpfuofix\",\"datacenterMachineArmId\":\"pcfykkpy\",\"datacenterManagementServerArmId\":\"pawmpjprdp\",\"datacenterManagementServerName\":\"pcfpcfj\",\"megabytesOfMemory\":75.83426,\"numberOfCores\":1335357423,\"confidenceRatingInPercentage\":28.798502,\"percentageCoresUtilization\":32.203842,\"percentageMemoryUtilization\":15.144819,\"suitability\":\"ReadinessUnknown\",\"sizingCriterion\":\"AsOnPremises\"},\"id\":\"mnnidmdia\",\"name\":\"pzxkzrntmkct\",\"type\":\"huosgwqpsqaz\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrationAssessmentManager manager = MigrationAssessmentManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        AssessedSqlMachine response = manager.assessedSqlMachinesOperations()
            .getWithResponse("njhx", "h", "hmgpczqulpt", "bvcpxtzhi", "q", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals(99.090454F, response.properties().costComponents().get(0).value());
        Assertions.assertEquals("bcngkegxc", response.properties().costComponents().get(0).description());
    }
}
