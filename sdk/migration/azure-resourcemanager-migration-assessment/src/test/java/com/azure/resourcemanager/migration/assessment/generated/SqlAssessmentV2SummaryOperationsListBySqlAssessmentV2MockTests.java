// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.migration.assessment.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migration.assessment.MigrationAssessmentManager;
import com.azure.resourcemanager.migration.assessment.models.SqlAssessmentV2Summary;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SqlAssessmentV2SummaryOperationsListBySqlAssessmentV2MockTests {
    @Test
    public void testListBySqlAssessmentV2() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"assessmentSummary\":{\"ghnysvlpyeuu\":{\"suitabilitySummary\":{\"fk\":375029538,\"utibhlen\":1683631682,\"rvrk\":41830882},\"monthlyComputeCost\":21.447247,\"monthlyStorageCost\":1.8556774,\"monthlyLicenseCost\":51.31923,\"confidenceScore\":38.36888,\"monthlySecurityCost\":54.251736}},\"distributionBySupportStatus\":{\"ixqbolxvhhyqqeg\":1357963026,\"xgrzn\":1380260544,\"inmtsdixchwkibm\":540272069},\"distributionByServicePackInsight\":{\"ncjcag\":844595957,\"rwcqzo\":1766031205},\"distributionBySqlVersion\":{\"qjsvep\":1973070159,\"htleberpyljek\":303598295},\"distributionBySqlEdition\":{\"wjjqxowkdnjrx\":84522132,\"rhw\":1710147308},\"instanceDistributionBySizingCriterion\":{\"cpnowaw\":1916974086,\"oehrguqlhfwafbj\":1220851428,\"pyrgu\":377008762,\"azbkocbygvthrmxk\":1867492168},\"databaseDistributionBySizingCriterion\":{\"wdxomrawp\":349878823},\"numberOfMachines\":1860244201,\"numberOfSqlInstances\":691230543,\"numberOfSuccessfullyDiscoveredSqlInstances\":371950285,\"numberOfSqlDatabases\":53530423,\"numberOfFciInstances\":1435608560,\"numberOfSqlAvailabilityGroups\":1885342737},\"id\":\"aeda\",\"name\":\"i\",\"type\":\"clmgdtw\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrationAssessmentManager manager = MigrationAssessmentManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<SqlAssessmentV2Summary> response = manager.sqlAssessmentV2SummaryOperations()
            .listBySqlAssessmentV2("jeuxsphlo", "fpmijpdvzvfbhwbd", "ufvcgnrgl", "qrwyambh",
                com.azure.core.util.Context.NONE);

    }
}
