// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.migration.assessment.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migration.assessment.MigrationAssessmentManager;
import com.azure.resourcemanager.migration.assessment.models.AssessedSqlRecommendedEntity;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class AssessedSqlRecommendedEntityOperationsGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"machineName\":\"d\",\"instanceName\":\"fhtwmmkfqb\",\"productSupportStatus\":{\"currentVersion\":\"ulwwtrjmeqkvyhz\",\"servicePackStatus\":\"poyu\",\"esuStatus\":\"uensn\",\"supportStatus\":\"jphmpoejnglpws\",\"eta\":709381303,\"currentEsuYear\":\"jsumxpezcoio\",\"mainstreamEndDate\":\"2021-02-11T21:12:39Z\",\"extendedSupportEndDate\":\"2021-04-29T14:56:08Z\",\"extendedSecurityUpdateYear1EndDate\":\"2021-09-14T09:51:16Z\",\"extendedSecurityUpdateYear2EndDate\":\"2021-09-05T21:06:38Z\",\"extendedSecurityUpdateYear3EndDate\":\"2021-11-22T22:48:31Z\"},\"dbCount\":1676856163,\"discoveredDBCount\":222653921,\"hasScanOccurred\":false,\"recommendedAzureSqlTargetType\":\"AzureSqlManagedInstance\",\"recommendedSuitability\":\"Unknown\",\"azureSqlMISuitabilityDetails\":{\"azureSqlSku\":{\"azureSqlServiceTier\":\"BusinessCritical\",\"azureSqlComputeTier\":\"Serverless\",\"azureSqlHardwareGeneration\":\"Fsv2_series\",\"storageMaxSizeInMB\":9.771246,\"predictedDataSizeInMB\":62.806965,\"predictedLogSizeInMB\":76.82925,\"cores\":266458582,\"azureSqlTargetType\":\"AzureSqlVirtualMachine\"},\"replicaAzureSqlSku\":[{\"azureSqlServiceTier\":\"Unknown\",\"azureSqlComputeTier\":\"Unknown\",\"azureSqlHardwareGeneration\":\"DC_series\",\"storageMaxSizeInMB\":50.425297,\"predictedDataSizeInMB\":56.37652,\"predictedLogSizeInMB\":48.299534,\"cores\":1638013744,\"azureSqlTargetType\":\"AzureSqlVirtualMachine\"},{\"azureSqlServiceTier\":\"Unknown\",\"azureSqlComputeTier\":\"Unknown\",\"azureSqlHardwareGeneration\":\"Automatic\",\"storageMaxSizeInMB\":82.06618,\"predictedDataSizeInMB\":0.20298958,\"predictedLogSizeInMB\":99.19687,\"cores\":1518729432,\"azureSqlTargetType\":\"AzureVirtualMachine\"},{\"azureSqlServiceTier\":\"Unknown\",\"azureSqlComputeTier\":\"Provisioned\",\"azureSqlHardwareGeneration\":\"DC_series\",\"storageMaxSizeInMB\":89.95035,\"predictedDataSizeInMB\":27.503252,\"predictedLogSizeInMB\":84.888824,\"cores\":1476415299,\"azureSqlTargetType\":\"AzureVirtualMachine\"}],\"sharedResources\":{\"sharedDataDisks\":[{},{},{},{}],\"sharedLogDisks\":[{},{},{}],\"sharedTempDbDisks\":[{},{},{}],\"numberOfMounts\":1276332701,\"quorumWitness\":{\"quorumWitnessType\":\"Cloud\"}},\"monthlyComputeCost\":67.98498,\"monthlyStorageCost\":89.08338,\"costComponents\":[{\"name\":\"MonthlyAzureHybridCostSavings\",\"value\":43.12796,\"description\":\"tikesl\"},{\"name\":\"MonthlyAzureHybridCostSavings\",\"value\":71.988,\"description\":\"ixyqhfnkvy\"}],\"securitySuitability\":\"Suitable\",\"shouldProvisionReplicas\":true,\"skuReplicationMode\":\"FailoverGroupInstance\",\"migrationGuidelines\":[{\"guidelineId\":\"quwzxhrptyodl\",\"migrationGuidelineCategory\":\"General\",\"migrationGuidelineContext\":[{},{}]}],\"recommendationReasonings\":[{\"reasoningId\":\"dsobjopnouhbq\",\"reasoningString\":\"kqxs\",\"reasoningCategory\":\"uzyigfcvcewbwqhd\",\"contextParameters\":[{},{}]}],\"migrationTargetPlatform\":\"Unknown\",\"suitability\":\"Unknown\",\"migrationIssues\":[{\"issueId\":\"mazdfsqxh\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{},{}]},{\"issueId\":\"parn\",\"issueCategory\":\"Internal\",\"impactedObjects\":[{},{},{}]}]},\"azureSqlDBSuitabilityDetails\":{\"azureSqlSku\":{\"azureSqlServiceTier\":\"Automatic\",\"azureSqlComputeTier\":\"Provisioned\",\"azureSqlHardwareGeneration\":\"Automatic\",\"storageMaxSizeInMB\":7.691741,\"predictedDataSizeInMB\":3.1134665,\"predictedLogSizeInMB\":0.019079447,\"cores\":1650141631,\"azureSqlTargetType\":\"AzureSqlManagedInstance\"},\"replicaAzureSqlSku\":[{\"azureSqlServiceTier\":\"HyperScale\",\"azureSqlComputeTier\":\"Automatic\",\"azureSqlHardwareGeneration\":\"DC_series\",\"storageMaxSizeInMB\":52.820633,\"predictedDataSizeInMB\":95.00618,\"predictedLogSizeInMB\":49.1711,\"cores\":1244357050,\"azureSqlTargetType\":\"Recommended\"}],\"sharedResources\":{\"sharedDataDisks\":[{},{},{}],\"sharedLogDisks\":[{}],\"sharedTempDbDisks\":[{},{},{},{}],\"numberOfMounts\":1707361059,\"quorumWitness\":{\"quorumWitnessType\":\"Disk\"}},\"monthlyComputeCost\":8.474427,\"monthlyStorageCost\":51.78052,\"costComponents\":[{\"name\":\"MonthlySecurityCost\",\"value\":2.1707296,\"description\":\"rocqsxy\"}],\"securitySuitability\":\"NotSuitable\",\"shouldProvisionReplicas\":false,\"skuReplicationMode\":\"NotApplicable\",\"migrationGuidelines\":[{\"guidelineId\":\"is\",\"migrationGuidelineCategory\":\"Unknown\",\"migrationGuidelineContext\":[{},{}]},{\"guidelineId\":\"ajamc\",\"migrationGuidelineCategory\":\"Unknown\",\"migrationGuidelineContext\":[{},{},{},{}]},{\"guidelineId\":\"p\",\"migrationGuidelineCategory\":\"FailoverCluterInstanceGuideLine\",\"migrationGuidelineContext\":[{},{},{},{}]}],\"recommendationReasonings\":[{\"reasoningId\":\"eynq\",\"reasoningString\":\"hkigglclwalhvub\",\"reasoningCategory\":\"zphetxdqcm\",\"contextParameters\":[{},{}]},{\"reasoningId\":\"jq\",\"reasoningString\":\"vale\",\"reasoningCategory\":\"bibiwks\",\"contextParameters\":[{}]},{\"reasoningId\":\"x\",\"reasoningString\":\"fpzvoikvntwczf\",\"reasoningCategory\":\"ushlcxpblalh\",\"contextParameters\":[{},{}]}],\"migrationTargetPlatform\":\"Recommended\",\"suitability\":\"ConditionallySuitable\",\"migrationIssues\":[{\"issueId\":\"idqzsaaoqdsgpto\",\"issueCategory\":\"Warning\",\"impactedObjects\":[{},{}]}]},\"azureSqlVMSuitabilityDetails\":{\"azureSqlSku\":{\"virtualMachineSize\":{\"azureVmFamily\":\"Standard_A0_A7\",\"cores\":43506706,\"azureSkuName\":\"Basic_A2\",\"availableCores\":2052552411,\"maxNetworkInterfaces\":1525228635},\"dataDiskSizes\":[{}],\"logDiskSizes\":[{}],\"azureSqlTargetType\":\"Unknown\"},\"replicaAzureSqlSku\":[{\"virtualMachineSize\":{},\"dataDiskSizes\":[{}],\"logDiskSizes\":[{},{}],\"azureSqlTargetType\":\"AzureSqlManagedInstance\"},{\"virtualMachineSize\":{},\"dataDiskSizes\":[{},{},{}],\"logDiskSizes\":[{},{},{}],\"azureSqlTargetType\":\"Recommended\"}],\"sharedResources\":{\"sharedDataDisks\":[{}],\"sharedLogDisks\":[{},{},{}],\"sharedTempDbDisks\":[{},{},{},{}],\"numberOfMounts\":707800072,\"quorumWitness\":{\"quorumWitnessType\":\"Disk\"}},\"monthlyComputeCost\":59.643085,\"monthlyStorageCost\":67.26635,\"costComponents\":[{\"name\":\"MonthlyAzureHybridCostSavings\",\"value\":69.455376,\"description\":\"xre\"},{\"name\":\"Unknown\",\"value\":99.84853,\"description\":\"n\"}],\"securitySuitability\":\"ConditionallySuitable\",\"shouldProvisionReplicas\":false,\"skuReplicationMode\":\"ActiveGeoReplication\",\"migrationGuidelines\":[{\"guidelineId\":\"qycmmoxf\",\"migrationGuidelineCategory\":\"AvailabilityGroupGuideline\",\"migrationGuidelineContext\":[{}]}],\"recommendationReasonings\":[{\"reasoningId\":\"mwh\",\"reasoningString\":\"ali\",\"reasoningCategory\":\"ycgnwplrrbphc\",\"contextParameters\":[{}]},{\"reasoningId\":\"ibticuhqv\",\"reasoningString\":\"spbfsfeqbbewfc\",\"reasoningCategory\":\"fpyyxmzrmtm\",\"contextParameters\":[{},{}]},{\"reasoningId\":\"uweyyjshcyb\",\"reasoningString\":\"upp\",\"reasoningCategory\":\"prcmvouujxdiik\",\"contextParameters\":[{},{},{}]}],\"migrationTargetPlatform\":\"Recommended\",\"suitability\":\"ReadinessUnknown\",\"migrationIssues\":[{\"issueId\":\"lrxikj\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{}]}]},\"assessedSqlEntityArmId\":\"npipcwybszfncn\",\"isClustered\":false,\"isHighAvailabilityEnabled\":true,\"sqlEdition\":\"saebwfwhxorpwal\",\"sqlVersion\":\"wugexojfccyl\",\"sizingCriterion\":\"PerformanceBased\"},\"id\":\"thvazjpw\",\"name\":\"xcdrzprobzzxezm\",\"type\":\"rkjg\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrationAssessmentManager manager = MigrationAssessmentManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        AssessedSqlRecommendedEntity response = manager.assessedSqlRecommendedEntityOperations()
            .getWithResponse("wz", "drpizfulgyctsdb", "qgkujds", "oxrqw", "eurbtigapdyarik",
                com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("npipcwybszfncn", response.properties().assessedSqlEntityArmId());
    }
}
