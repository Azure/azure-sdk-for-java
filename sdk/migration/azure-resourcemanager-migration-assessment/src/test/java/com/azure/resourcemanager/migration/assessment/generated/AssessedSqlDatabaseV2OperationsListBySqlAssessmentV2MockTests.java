// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.migration.assessment.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migration.assessment.MigrationAssessmentManager;
import com.azure.resourcemanager.migration.assessment.models.AssessedSqlDatabaseV2;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class AssessedSqlDatabaseV2OperationsListBySqlAssessmentV2MockTests {
    @Test
    public void testListBySqlAssessmentV2() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"recommendedAzureSqlTargetType\":\"Recommended\",\"recommendedSuitability\":\"SuitableForSqlDB\",\"bufferCacheSizeInMB\":6.9218874,\"productSupportStatus\":{\"currentVersion\":\"lr\",\"servicePackStatus\":\"gtzjcv\",\"esuStatus\":\"qlapsnsso\",\"supportStatus\":\"xpavid\",\"eta\":435647020,\"currentEsuYear\":\"wffcvvye\",\"mainstreamEndDate\":\"2021-06-23T09:55:10Z\",\"extendedSupportEndDate\":\"2021-09-10T04:22:49Z\",\"extendedSecurityUpdateYear1EndDate\":\"2021-09-04T00:09:45Z\",\"extendedSecurityUpdateYear2EndDate\":\"2021-08-25T16:18:38Z\",\"extendedSecurityUpdateYear3EndDate\":\"2021-03-26T15:54:37Z\"},\"azureSqlMISuitabilityDetails\":{\"azureSqlSku\":{\"azureSqlServiceTier\":\"Unknown\",\"azureSqlComputeTier\":\"Serverless\",\"azureSqlHardwareGeneration\":\"DC_series\",\"storageMaxSizeInMB\":95.14251,\"predictedDataSizeInMB\":74.27462,\"predictedLogSizeInMB\":34.092625,\"cores\":1838467829,\"azureSqlTargetType\":\"Unknown\"},\"replicaAzureSqlSku\":[{\"azureSqlServiceTier\":\"HyperScale\",\"azureSqlComputeTier\":\"Provisioned\",\"azureSqlHardwareGeneration\":\"Automatic\",\"storageMaxSizeInMB\":87.86046,\"predictedDataSizeInMB\":22.210157,\"predictedLogSizeInMB\":67.66576,\"cores\":782520891,\"azureSqlTargetType\":\"AzureSqlVirtualMachine\"}],\"sharedResources\":{\"sharedDataDisks\":[{},{},{}],\"sharedLogDisks\":[{},{},{},{}],\"sharedTempDbDisks\":[{},{},{},{}],\"numberOfMounts\":1625697424,\"quorumWitness\":{\"quorumWitnessType\":\"Cloud\"}},\"monthlyComputeCost\":51.853474,\"monthlyStorageCost\":94.16587,\"costComponents\":[{\"name\":\"MonthlySecurityCost\",\"value\":83.56569,\"description\":\"qhnmhk\"}],\"securitySuitability\":\"ReadinessUnknown\",\"shouldProvisionReplicas\":true,\"skuReplicationMode\":\"NotApplicable\",\"migrationGuidelines\":[{\"guidelineId\":\"qdgcrux\",\"migrationGuidelineCategory\":\"AvailabilityGroupGuideline\",\"migrationGuidelineContext\":[{},{},{}]},{\"guidelineId\":\"m\",\"migrationGuidelineCategory\":\"General\",\"migrationGuidelineContext\":[{},{}]}],\"recommendationReasonings\":[{\"reasoningId\":\"pazf\",\"reasoningString\":\"jxuvj\",\"reasoningCategory\":\"fdvhaxdvwzae\",\"contextParameters\":[{}]},{\"reasoningId\":\"thd\",\"reasoningString\":\"mvetatlakfq\",\"reasoningCategory\":\"xwgiks\",\"contextParameters\":[{},{}]}],\"migrationTargetPlatform\":\"AzureSqlManagedInstance\",\"suitability\":\"NotSuitable\",\"migrationIssues\":[{\"issueId\":\"gwphchgjtnht\",\"issueCategory\":\"Internal\",\"impactedObjects\":[{},{},{},{}]}]},\"azureSqlDBSuitabilityDetails\":{\"azureSqlSku\":{\"azureSqlServiceTier\":\"BusinessCritical\",\"azureSqlComputeTier\":\"Provisioned\",\"azureSqlHardwareGeneration\":\"Automatic\",\"storageMaxSizeInMB\":28.095364,\"predictedDataSizeInMB\":67.82644,\"predictedLogSizeInMB\":87.82683,\"cores\":353154350,\"azureSqlTargetType\":\"Recommended\"},\"replicaAzureSqlSku\":[{\"azureSqlServiceTier\":\"Unknown\",\"azureSqlComputeTier\":\"Provisioned\",\"azureSqlHardwareGeneration\":\"M_series\",\"storageMaxSizeInMB\":79.7553,\"predictedDataSizeInMB\":2.1850169,\"predictedLogSizeInMB\":92.61337,\"cores\":968770502,\"azureSqlTargetType\":\"AzureSqlManagedInstance\"}],\"sharedResources\":{\"sharedDataDisks\":[{},{}],\"sharedLogDisks\":[{},{},{},{}],\"sharedTempDbDisks\":[{},{},{},{}],\"numberOfMounts\":1876924185,\"quorumWitness\":{\"quorumWitnessType\":\"Unknown\"}},\"monthlyComputeCost\":71.73476,\"monthlyStorageCost\":94.903854,\"costComponents\":[{\"name\":\"Unknown\",\"value\":26.463287,\"description\":\"mlscgrllccn\"},{\"name\":\"MonthlySecurityCost\",\"value\":74.24044,\"description\":\"azhpabacoml\"},{\"name\":\"Unknown\",\"value\":21.50871,\"description\":\"sxnsrqorcge\"},{\"name\":\"MonthlyPremiumV2StorageCost\",\"value\":17.64496,\"description\":\"xeetq\"}],\"securitySuitability\":\"ReadinessUnknown\",\"shouldProvisionReplicas\":false,\"skuReplicationMode\":\"ActiveGeoReplication\",\"migrationGuidelines\":[{\"guidelineId\":\"qjkedwqurc\",\"migrationGuidelineCategory\":\"FailoverCluterInstanceGuideLine\",\"migrationGuidelineContext\":[{},{},{},{}]},{\"guidelineId\":\"v\",\"migrationGuidelineCategory\":\"FailoverCluterInstanceGuideLine\",\"migrationGuidelineContext\":[{}]},{\"guidelineId\":\"zsehqqrsilcchskx\",\"migrationGuidelineCategory\":\"FailoverCluterInstanceGuideLine\",\"migrationGuidelineContext\":[{}]}],\"recommendationReasonings\":[{\"reasoningId\":\"ia\",\"reasoningString\":\"vtojrulfuctejr\",\"reasoningCategory\":\"cfjzhxl\",\"contextParameters\":[{}]}],\"migrationTargetPlatform\":\"AzureSqlDatabase\",\"suitability\":\"Unknown\",\"migrationIssues\":[{\"issueId\":\"rjeqmtzzbeqrztr\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{},{}]},{\"issueId\":\"habsrwrsnrh\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{},{}]},{\"issueId\":\"kkvyanxk\",\"issueCategory\":\"Issue\",\"impactedObjects\":[{}]}]},\"isDatabaseHighlyAvailable\":false,\"linkedAvailabilityGroupOverview\":{\"availabilityGroupId\":\"v\",\"availabilityGroupName\":\"kqxetqmmliv\",\"sqlAvailabilityGroupSdsArmId\":\"jxnw\",\"sqlAvailabilityGroupEntityId\":\"chp\",\"sqlAvailabilityReplicaId\":\"xlehzlxpgfquwzp\"},\"machineArmId\":\"ibelwcerwkw\",\"assessedSqlInstanceArmId\":\"jxljtxbusq\",\"machineName\":\"xxniuisdzhgbd\",\"instanceName\":\"pagsecnad\",\"databaseName\":\"wqrgxfllmqi\",\"databaseSizeInMB\":31.991226,\"compatibilityLevel\":\"Unknown\",\"sqlDatabaseSdsArmId\":\"lln\",\"percentageCoresUtilization\":20.776356,\"megabytesPerSecondOfRead\":4.9613,\"megabytesPerSecondOfWrite\":24.190844,\"numberOfReadOperationsPerSecond\":48.35083,\"numberOfWriteOperationsPerSecond\":74.788025,\"confidenceRatingInPercentage\":38.305767,\"sizingCriterion\":\"PerformanceBased\",\"createdTimestamp\":\"2021-02-13T02:19:45Z\",\"updatedTimestamp\":\"2021-02-26T07:03:36Z\"},\"id\":\"roqvqpilrgu\",\"name\":\"canlduwzorxs\",\"type\":\"mxaqklxym\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrationAssessmentManager manager = MigrationAssessmentManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<AssessedSqlDatabaseV2> response = manager.assessedSqlDatabaseV2Operations()
            .listBySqlAssessmentV2("ghsrleinkfscjfn", "jwvuag", "qwtltngvmreupt", "klzmijajw", "l", 1419456371, "s",
                922297419, com.azure.core.util.Context.NONE);

    }
}
