// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.attestation.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.attestation.AttestationManager;
import com.azure.resourcemanager.attestation.models.AttestationProviderListResult;
import com.azure.resourcemanager.attestation.models.AttestationServiceStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class AttestationProvidersListWithResponseMockTests {
    @Test
    public void testListWithResponse() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"trustModel\":\"lixhnrztfol\",\"status\":\"NotReady\",\"attestUri\":\"knalaulppg\",\"privateEndpointConnections\":[{\"id\":\"pnapnyiropuh\",\"name\":\"igvpgylg\",\"type\":\"git\"},{\"id\":\"medjvcslynqwwncw\",\"name\":\"zhxgktrmgucn\",\"type\":\"pkteo\"},{\"id\":\"llwptfdy\",\"name\":\"pfqbuaceopzf\",\"type\":\"rhhuaopppcqeqx\"},{\"id\":\"lzdahzxctobgbkdm\",\"name\":\"izpost\",\"type\":\"grcfb\"}]},\"location\":\"nrmfqjhhk\",\"tags\":{\"vkr\":\"vjymjhxxjyngud\",\"szjfauvjfdxxivet\":\"swbxqz\",\"qaqtdoqmcbxvwvxy\":\"t\",\"obl\":\"lqbhsf\"},\"id\":\"tkblmpewww\",\"name\":\"bkrvrnsvshqj\",\"type\":\"hxcr\"},{\"properties\":{\"trustModel\":\"vasrruvwb\",\"status\":\"NotReady\",\"attestUri\":\"sub\",\"privateEndpointConnections\":[{\"id\":\"birx\",\"name\":\"pybsrfbjfdtw\",\"type\":\"sotftpvj\"}]},\"location\":\"bexilzznfqqnv\",\"tags\":{\"tjrybnwjewgdr\":\"qtaruoujmkcjhwq\",\"doy\":\"ervnaenqpehi\",\"l\":\"mifthnzdnd\",\"ynduha\":\"nayqi\"},\"id\":\"hqlkthumaqo\",\"name\":\"bgycduiertgccym\",\"type\":\"aolps\"},{\"properties\":{\"trustModel\":\"fmmdnbbg\",\"status\":\"NotReady\",\"attestUri\":\"wiydmcwyhzdxssad\",\"privateEndpointConnections\":[{\"id\":\"nvdfznuda\",\"name\":\"dvxzbncblylpst\",\"type\":\"bhhxsrzdzuc\"},{\"id\":\"rsc\",\"name\":\"ntnev\",\"type\":\"iwjmygtdssls\"}]},\"location\":\"tmweriofzpyq\",\"tags\":{\"ets\":\"wab\",\"mwmbes\":\"hszhedplvwiwu\",\"okonzmnsikvmkqz\":\"dnkwwtppjflcxog\",\"eodkwobda\":\"qqkdltfzxmhhvhgu\"},\"id\":\"xtibqdxbxwakbog\",\"name\":\"xndlkzgxhu\",\"type\":\"iplbpodxunkbebxm\"},{\"properties\":{\"trustModel\":\"ntwlrbqtkoie\",\"status\":\"NotReady\",\"attestUri\":\"tgqr\",\"privateEndpointConnections\":[{\"id\":\"muwlauwzizxbm\",\"name\":\"gcj\",\"type\":\"fuzmuvpbtt\"},{\"id\":\"um\",\"name\":\"rp\",\"type\":\"xe\"},{\"id\":\"mnzb\",\"name\":\"bhjpglkfgohdne\",\"type\":\"el\"}]},\"location\":\"phsdyhto\",\"tags\":{\"wwquuvxzxclvithh\":\"kd\",\"hcohfwdsjnk\":\"zonosgg\",\"swacffgdkzz\":\"ljuti\"},\"id\":\"wkfvhqcrailvp\",\"name\":\"ppfufl\",\"type\":\"wdmhdlxyjrxs\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AttestationManager manager = AttestationManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        AttestationProviderListResult response
            = manager.attestationProviders().listWithResponse(com.azure.core.util.Context.NONE).getValue();

        Assertions.assertEquals("nrmfqjhhk", response.value().get(0).location());
        Assertions.assertEquals("vjymjhxxjyngud", response.value().get(0).tags().get("vkr"));
        Assertions.assertEquals("lixhnrztfol", response.value().get(0).trustModel());
        Assertions.assertEquals(AttestationServiceStatus.NOT_READY, response.value().get(0).status());
        Assertions.assertEquals("knalaulppg", response.value().get(0).attestUri());
    }
}
