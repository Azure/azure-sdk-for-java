// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.security.confidentialledger.certificate.generated;

import com.azure.core.http.rest.RequestOptions;
import com.azure.core.http.rest.Response;
import com.azure.core.util.BinaryData;
import com.azure.json.models.JsonElement;
import com.azure.json.models.JsonObject;
import com.azure.json.models.JsonString;
import com.azure.security.confidentialledger.ConfidentialLedgerEnvironment;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import java.io.IOException;

public final class GetLedgerIdentityTests extends ConfidentialLedgerCertificateClientTestBase {
    @Test
    public void testGetLedgerIdentityTests() throws IOException {
        // Arrange
        final String ledgerName = ConfidentialLedgerEnvironment.getConfidentialLedgerName();
        final RequestOptions requestOptions = new RequestOptions();

        // Act
        final Response<BinaryData> response
            = confidentialLedgerCertificateClient.getLedgerIdentityWithResponse(ledgerName, requestOptions);

        // Assert
        Assertions.assertEquals(200, response.getStatusCode());

        final JsonObject jsonObject = response.getValue().toObject(JsonObject.class);
        final JsonElement ledgerTlsCertificate = jsonObject.getProperty("ledgerTlsCertificate");

        Assertions.assertNotNull(ledgerTlsCertificate);
        Assertions.assertTrue(ledgerTlsCertificate.isString());
        final String certificate = ((JsonString) ledgerTlsCertificate).getValue();
        Assertions.assertNotNull(certificate);
    }
}
