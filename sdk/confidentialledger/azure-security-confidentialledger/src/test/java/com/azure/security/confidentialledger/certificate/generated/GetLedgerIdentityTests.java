// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.security.confidentialledger.certificate.generated;

import com.azure.core.http.rest.RequestOptions;
import com.azure.core.http.rest.Response;
import com.azure.core.util.BinaryData;
import com.azure.security.confidentialledger.ConfidentialLedgerEnvironment;
import com.fasterxml.jackson.databind.JsonNode;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import java.io.IOException;

public final class GetLedgerIdentityTests extends ConfidentialLedgerCertificateClientTestBase {
    @Test
    public void testGetLedgerIdentityTests() throws IOException {
        // Arrange
        final String ledgerName = ConfidentialLedgerEnvironment.getConfidentialLedgerName();
        final RequestOptions requestOptions = new RequestOptions();

        // Act
        final Response<BinaryData> response =
                confidentialLedgerCertificateClient.getLedgerIdentityWithResponse(ledgerName, requestOptions);

        // Assert
        Assertions.assertEquals(200, response.getStatusCode());

        final JsonNode jsonNode = OBJECT_MAPPER.readTree(response.getValue().toBytes());
        final JsonNode ledgerTlsCertificate = jsonNode.get("ledgerTlsCertificate");

        Assertions.assertNotNull(ledgerTlsCertificate);

        final String certificate = ledgerTlsCertificate.asText();
        Assertions.assertNotNull(certificate);
    }
}
