// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.appservice.generated.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.appservice.generated.models.AppServicePlanPatchResource;
import com.azure.resourcemanager.appservice.generated.models.HostingEnvironmentProfile;
import com.azure.resourcemanager.appservice.generated.models.KubeEnvironmentProfile;
import com.azure.resourcemanager.appservice.generated.models.ManagedServiceIdentity;
import com.azure.resourcemanager.appservice.generated.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.appservice.generated.models.UserAssignedIdentity;
import java.time.OffsetDateTime;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class AppServicePlanPatchResourceTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        AppServicePlanPatchResource model = BinaryData.fromString(
            "{\"properties\":{\"workerTierName\":\"dfwgqjhewcffrx\",\"status\":\"Creating\",\"subscription\":\"khzpr\",\"hostingEnvironmentProfile\":{\"id\":\"ssenerr\",\"name\":\"yzaivnpsjnpckpl\",\"type\":\"yduonbdawsaopl\"},\"maximumNumberOfWorkers\":2043505898,\"numberOfWorkers\":1514162495,\"geoRegion\":\"xjarsbb\",\"perSiteScaling\":false,\"elasticScaleEnabled\":false,\"maximumElasticWorkerCount\":718239101,\"numberOfSites\":1793076971,\"isSpot\":false,\"spotExpirationTime\":\"2021-03-07T02:57:21Z\",\"freeOfferExpirationTime\":\"2021-09-25T11:01:04Z\",\"resourceGroup\":\"qjvzvc\",\"reserved\":true,\"isXenon\":true,\"hyperV\":true,\"targetWorkerCount\":750633037,\"targetWorkerSizeId\":1787583168,\"provisioningState\":\"Succeeded\",\"kubeEnvironmentProfile\":{\"id\":\"vzflbrous\",\"name\":\"acd\",\"type\":\"kokgo\"},\"zoneRedundant\":false},\"identity\":{\"type\":\"SystemAssigned, UserAssigned\",\"tenantId\":\"ubcmun\",\"principalId\":\"btzvxxv\",\"userAssignedIdentities\":{\"qmwmwwp\":{\"principalId\":\"ufkr\",\"clientId\":\"kcnihkswxmfu\"},\"tzuaedrlhxgcq\":{\"principalId\":\"um\",\"clientId\":\"ahbqsvnkxm\"}}},\"id\":\"rhkv\",\"name\":\"zmiemqyftgp\",\"kind\":\"sw\",\"type\":\"qv\"}")
            .toObject(AppServicePlanPatchResource.class);
        Assertions.assertEquals("sw", model.kind());
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED_USER_ASSIGNED, model.identity().type());
        Assertions.assertEquals("dfwgqjhewcffrx", model.workerTierName());
        Assertions.assertEquals("ssenerr", model.hostingEnvironmentProfile().id());
        Assertions.assertFalse(model.perSiteScaling());
        Assertions.assertFalse(model.elasticScaleEnabled());
        Assertions.assertEquals(718239101, model.maximumElasticWorkerCount());
        Assertions.assertFalse(model.isSpot());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-07T02:57:21Z"), model.spotExpirationTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-25T11:01:04Z"), model.freeOfferExpirationTime());
        Assertions.assertTrue(model.reserved());
        Assertions.assertTrue(model.isXenon());
        Assertions.assertTrue(model.hyperV());
        Assertions.assertEquals(750633037, model.targetWorkerCount());
        Assertions.assertEquals(1787583168, model.targetWorkerSizeId());
        Assertions.assertEquals("vzflbrous", model.kubeEnvironmentProfile().id());
        Assertions.assertFalse(model.zoneRedundant());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        AppServicePlanPatchResource model = new AppServicePlanPatchResource().withKind("sw")
            .withIdentity(
                new ManagedServiceIdentity().withType(ManagedServiceIdentityType.SYSTEM_ASSIGNED_USER_ASSIGNED)
                    .withUserAssignedIdentities(
                        mapOf("qmwmwwp", new UserAssignedIdentity(), "tzuaedrlhxgcq", new UserAssignedIdentity())))
            .withWorkerTierName("dfwgqjhewcffrx")
            .withHostingEnvironmentProfile(new HostingEnvironmentProfile().withId("ssenerr"))
            .withPerSiteScaling(false)
            .withElasticScaleEnabled(false)
            .withMaximumElasticWorkerCount(718239101)
            .withIsSpot(false)
            .withSpotExpirationTime(OffsetDateTime.parse("2021-03-07T02:57:21Z"))
            .withFreeOfferExpirationTime(OffsetDateTime.parse("2021-09-25T11:01:04Z"))
            .withReserved(true)
            .withIsXenon(true)
            .withHyperV(true)
            .withTargetWorkerCount(750633037)
            .withTargetWorkerSizeId(1787583168)
            .withKubeEnvironmentProfile(new KubeEnvironmentProfile().withId("vzflbrous"))
            .withZoneRedundant(false);
        model = BinaryData.fromObject(model).toObject(AppServicePlanPatchResource.class);
        Assertions.assertEquals("sw", model.kind());
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED_USER_ASSIGNED, model.identity().type());
        Assertions.assertEquals("dfwgqjhewcffrx", model.workerTierName());
        Assertions.assertEquals("ssenerr", model.hostingEnvironmentProfile().id());
        Assertions.assertFalse(model.perSiteScaling());
        Assertions.assertFalse(model.elasticScaleEnabled());
        Assertions.assertEquals(718239101, model.maximumElasticWorkerCount());
        Assertions.assertFalse(model.isSpot());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-07T02:57:21Z"), model.spotExpirationTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-25T11:01:04Z"), model.freeOfferExpirationTime());
        Assertions.assertTrue(model.reserved());
        Assertions.assertTrue(model.isXenon());
        Assertions.assertTrue(model.hyperV());
        Assertions.assertEquals(750633037, model.targetWorkerCount());
        Assertions.assertEquals(1787583168, model.targetWorkerSizeId());
        Assertions.assertEquals("vzflbrous", model.kubeEnvironmentProfile().id());
        Assertions.assertFalse(model.zoneRedundant());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
