// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.appservice.generated.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.appservice.generated.models.AuthenticationType;
import com.azure.resourcemanager.appservice.generated.models.FunctionAppConfig;
import com.azure.resourcemanager.appservice.generated.models.FunctionsAlwaysReadyConfig;
import com.azure.resourcemanager.appservice.generated.models.FunctionsDeployment;
import com.azure.resourcemanager.appservice.generated.models.FunctionsDeploymentStorage;
import com.azure.resourcemanager.appservice.generated.models.FunctionsDeploymentStorageAuthentication;
import com.azure.resourcemanager.appservice.generated.models.FunctionsDeploymentStorageType;
import com.azure.resourcemanager.appservice.generated.models.FunctionsRuntime;
import com.azure.resourcemanager.appservice.generated.models.FunctionsScaleAndConcurrency;
import com.azure.resourcemanager.appservice.generated.models.FunctionsScaleAndConcurrencyTriggers;
import com.azure.resourcemanager.appservice.generated.models.FunctionsScaleAndConcurrencyTriggersHttp;
import com.azure.resourcemanager.appservice.generated.models.FunctionsSiteUpdateStrategy;
import com.azure.resourcemanager.appservice.generated.models.RuntimeName;
import com.azure.resourcemanager.appservice.generated.models.SiteUpdateStrategyType;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class FunctionAppConfigTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        FunctionAppConfig model = BinaryData.fromString(
            "{\"deployment\":{\"storage\":{\"type\":\"blobContainer\",\"value\":\"z\",\"authentication\":{\"type\":\"SystemAssignedIdentity\",\"userAssignedIdentityResourceId\":\"aj\",\"storageAccountConnectionStringName\":\"wxacevehj\"}}},\"runtime\":{\"name\":\"python\",\"version\":\"afgaoqlt\"},\"scaleAndConcurrency\":{\"alwaysReady\":[{\"name\":\"inmfgvxirp\",\"instanceCount\":1536245403}],\"maximumInstanceCount\":814102500,\"instanceMemoryMB\":1251385570,\"triggers\":{\"http\":{\"perInstanceConcurrency\":671142861}}},\"siteUpdateStrategy\":{\"type\":\"Recreate\"}}")
            .toObject(FunctionAppConfig.class);
        Assertions.assertEquals(FunctionsDeploymentStorageType.BLOB_CONTAINER, model.deployment().storage().type());
        Assertions.assertEquals("z", model.deployment().storage().value());
        Assertions.assertEquals(AuthenticationType.SYSTEM_ASSIGNED_IDENTITY,
            model.deployment().storage().authentication().type());
        Assertions.assertEquals("aj", model.deployment().storage().authentication().userAssignedIdentityResourceId());
        Assertions.assertEquals("wxacevehj",
            model.deployment().storage().authentication().storageAccountConnectionStringName());
        Assertions.assertEquals(RuntimeName.PYTHON, model.runtime().name());
        Assertions.assertEquals("afgaoqlt", model.runtime().version());
        Assertions.assertEquals("inmfgvxirp", model.scaleAndConcurrency().alwaysReady().get(0).name());
        Assertions.assertEquals(1536245403, model.scaleAndConcurrency().alwaysReady().get(0).instanceCount());
        Assertions.assertEquals(814102500, model.scaleAndConcurrency().maximumInstanceCount());
        Assertions.assertEquals(1251385570, model.scaleAndConcurrency().instanceMemoryMB());
        Assertions.assertEquals(671142861, model.scaleAndConcurrency().triggers().http().perInstanceConcurrency());
        Assertions.assertEquals(SiteUpdateStrategyType.RECREATE, model.siteUpdateStrategy().type());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        FunctionAppConfig model = new FunctionAppConfig()
            .withDeployment(new FunctionsDeployment()
                .withStorage(new FunctionsDeploymentStorage().withType(FunctionsDeploymentStorageType.BLOB_CONTAINER)
                    .withValue("z")
                    .withAuthentication(new FunctionsDeploymentStorageAuthentication()
                        .withType(AuthenticationType.SYSTEM_ASSIGNED_IDENTITY)
                        .withUserAssignedIdentityResourceId("aj")
                        .withStorageAccountConnectionStringName("wxacevehj"))))
            .withRuntime(new FunctionsRuntime().withName(RuntimeName.PYTHON).withVersion("afgaoqlt"))
            .withScaleAndConcurrency(new FunctionsScaleAndConcurrency()
                .withAlwaysReady(Arrays
                    .asList(new FunctionsAlwaysReadyConfig().withName("inmfgvxirp").withInstanceCount(1536245403)))
                .withMaximumInstanceCount(814102500)
                .withInstanceMemoryMB(1251385570)
                .withTriggers(new FunctionsScaleAndConcurrencyTriggers()
                    .withHttp(new FunctionsScaleAndConcurrencyTriggersHttp().withPerInstanceConcurrency(671142861))))
            .withSiteUpdateStrategy(new FunctionsSiteUpdateStrategy().withType(SiteUpdateStrategyType.RECREATE));
        model = BinaryData.fromObject(model).toObject(FunctionAppConfig.class);
        Assertions.assertEquals(FunctionsDeploymentStorageType.BLOB_CONTAINER, model.deployment().storage().type());
        Assertions.assertEquals("z", model.deployment().storage().value());
        Assertions.assertEquals(AuthenticationType.SYSTEM_ASSIGNED_IDENTITY,
            model.deployment().storage().authentication().type());
        Assertions.assertEquals("aj", model.deployment().storage().authentication().userAssignedIdentityResourceId());
        Assertions.assertEquals("wxacevehj",
            model.deployment().storage().authentication().storageAccountConnectionStringName());
        Assertions.assertEquals(RuntimeName.PYTHON, model.runtime().name());
        Assertions.assertEquals("afgaoqlt", model.runtime().version());
        Assertions.assertEquals("inmfgvxirp", model.scaleAndConcurrency().alwaysReady().get(0).name());
        Assertions.assertEquals(1536245403, model.scaleAndConcurrency().alwaysReady().get(0).instanceCount());
        Assertions.assertEquals(814102500, model.scaleAndConcurrency().maximumInstanceCount());
        Assertions.assertEquals(1251385570, model.scaleAndConcurrency().instanceMemoryMB());
        Assertions.assertEquals(671142861, model.scaleAndConcurrency().triggers().http().perInstanceConcurrency());
        Assertions.assertEquals(SiteUpdateStrategyType.RECREATE, model.siteUpdateStrategy().type());
    }
}
