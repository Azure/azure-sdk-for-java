// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.appservice.generated.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.appservice.generated.AppServiceManager;
import com.azure.resourcemanager.appservice.generated.models.StaticSiteBuildARMResource;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class StaticSitesGetStaticSiteBuildWithResponseMockTests {
    @Test
    public void testGetStaticSiteBuildWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"buildId\":\"viaaep\",\"sourceBranch\":\"xbofdc\",\"pullRequestTitle\":\"oacfskzw\",\"hostname\":\"etutqjsojw\",\"createdTimeUtc\":\"2021-08-21T14:35:32Z\",\"lastUpdatedOn\":\"2021-09-29T00:00:11Z\",\"status\":\"WaitingForDeployment\",\"userProvidedFunctionApps\":[{\"properties\":{\"functionAppResourceId\":\"cmagvsljkaar\",\"functionAppRegion\":\"pxwqhzsxgmg\",\"createdOn\":\"2021-05-03T21:31:50Z\"},\"id\":\"tywivbuite\",\"name\":\"jnklvbrs\",\"kind\":\"kwbhzsdudjitlq\",\"type\":\"sn\"},{\"properties\":{\"functionAppResourceId\":\"hgd\",\"functionAppRegion\":\"dxylndbgaicj\",\"createdOn\":\"2021-04-17T18:37:10Z\"},\"id\":\"fzkhdnp\",\"name\":\"rxjdfkqlkaipfyvq\",\"kind\":\"svywkbiekyvak\",\"type\":\"hopgnapkpaiedox\"},{\"properties\":{\"functionAppResourceId\":\"o\",\"functionAppRegion\":\"e\",\"createdOn\":\"2021-01-06T12:29:04Z\"},\"id\":\"mzm\",\"name\":\"vlghlrcdiq\",\"kind\":\"hcb\",\"type\":\"awifz\"},{\"properties\":{\"functionAppResourceId\":\"ockg\",\"functionAppRegion\":\"awyyszwoe\",\"createdOn\":\"2021-05-08T05:10:35Z\"},\"id\":\"w\",\"name\":\"rfyww\",\"kind\":\"ipkhqhvktcztm\",\"type\":\"k\"}],\"linkedBackends\":[{\"backendResourceId\":\"pkgxemvlyaprjz\",\"region\":\"xxq\",\"createdOn\":\"2021-01-10T14:37:11Z\",\"provisioningState\":\"zbhmxlp\"}],\"databaseConnections\":[{\"resourceId\":\"vgtoinozsmyv\",\"connectionIdentity\":\"ap\",\"region\":\"mrwhknef\",\"configurationFiles\":[{},{},{}],\"name\":\"tmd\"}]},\"kind\":\"ddx\",\"id\":\"pi\",\"name\":\"sibg\",\"type\":\"laxuybxjwny\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AppServiceManager manager = AppServiceManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        StaticSiteBuildARMResource response = manager.staticSites()
            .getStaticSiteBuildWithResponse("cemgsncbbdok", "haedbsl", "nunpxswmcc", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("ddx", response.kind());
    }
}
