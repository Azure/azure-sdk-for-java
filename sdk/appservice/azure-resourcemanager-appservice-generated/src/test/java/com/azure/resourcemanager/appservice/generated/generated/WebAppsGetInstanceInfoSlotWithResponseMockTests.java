// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.appservice.generated.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.appservice.generated.AppServiceManager;
import com.azure.resourcemanager.appservice.generated.models.SiteRuntimeState;
import com.azure.resourcemanager.appservice.generated.models.WebSiteInstanceStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class WebAppsGetInstanceInfoSlotWithResponseMockTests {
    @Test
    public void testGetInstanceInfoSlotWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"state\":\"STOPPED\",\"statusUrl\":\"txbrdbwwqtxpfo\",\"detectorUrl\":\"fvhbbnoevkkrlkdo\",\"consoleUrl\":\"qscmdsjgo\",\"healthCheckUrl\":\"hlg\",\"containers\":{\"ayngmow\":{\"currentTimeStamp\":\"2021-07-28T10:51:08Z\",\"previousTimeStamp\":\"2021-05-16T00:10:35Z\",\"currentCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":7492609782977712889,\"onlineCpuCount\":1888245736,\"throttlingData\":{}},\"previousCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":8271713837384576763,\"onlineCpuCount\":238027448,\"throttlingData\":{}},\"memoryStats\":{\"usage\":3710654781941149008,\"maxUsage\":7259825512987626095,\"limit\":3776267517511094099},\"name\":\"hpkqiqs\",\"id\":\"ubem\",\"eth0\":{\"rxBytes\":7008174105435773440,\"rxPackets\":413283730474341618,\"rxErrors\":248089998321541510,\"rxDropped\":5238220583288536024,\"txBytes\":5991914324273740307,\"txPackets\":1915693440887309994,\"txErrors\":1623059564503788852,\"txDropped\":4098079234821525136}},\"lefiott\":{\"currentTimeStamp\":\"2021-07-14T13:04:36Z\",\"previousTimeStamp\":\"2021-02-12T18:58:25Z\",\"currentCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":5454657370776344801,\"onlineCpuCount\":1086484201,\"throttlingData\":{}},\"previousCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":2352121275990071978,\"onlineCpuCount\":810919250,\"throttlingData\":{}},\"memoryStats\":{\"usage\":3186406129877740750,\"maxUsage\":2733000361336683065,\"limit\":2031039411909942831},\"name\":\"mggy\",\"id\":\"pmsacbamtoqse\",\"eth0\":{\"rxBytes\":1979201695606798241,\"rxPackets\":3892757553409990348,\"rxErrors\":8106615432829372029,\"rxDropped\":7809684937852277409,\"txBytes\":2439647293109491132,\"txPackets\":445611985869133277,\"txErrors\":8580776435137313738,\"txDropped\":7323197673144534587}},\"oqbzrclar\":{\"currentTimeStamp\":\"2021-03-17T12:32:48Z\",\"previousTimeStamp\":\"2021-07-13T22:48:16Z\",\"currentCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":352888870551646322,\"onlineCpuCount\":1510387046,\"throttlingData\":{}},\"previousCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":9112948371839388276,\"onlineCpuCount\":2049947170,\"throttlingData\":{}},\"memoryStats\":{\"usage\":9003115198633645656,\"maxUsage\":7622721015864023920,\"limit\":2792343708390165457},\"name\":\"oicbx\",\"id\":\"fv\",\"eth0\":{\"rxBytes\":5479202504961945992,\"rxPackets\":7613753639925036847,\"rxErrors\":8029874906825298926,\"rxDropped\":4106858286666171471,\"txBytes\":1260135841160964352,\"txPackets\":269220097111687644,\"txErrors\":7123776555935112188,\"txDropped\":5495551179719587457}},\"opzgjleecffbh\":{\"currentTimeStamp\":\"2021-05-04T07:16:27Z\",\"previousTimeStamp\":\"2021-02-14T13:47:30Z\",\"currentCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":7183995403002782501,\"onlineCpuCount\":1625966533,\"throttlingData\":{}},\"previousCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":4818344250534268616,\"onlineCpuCount\":1021030069,\"throttlingData\":{}},\"memoryStats\":{\"usage\":4669581647901817032,\"maxUsage\":3821344514548053562,\"limit\":8685180864937487066},\"name\":\"dsnvtdbeanigozjr\",\"id\":\"aq\",\"eth0\":{\"rxBytes\":7524980180501969977,\"rxPackets\":2981439099594154738,\"rxErrors\":787546620655531101,\"rxDropped\":8191696434283586144,\"txBytes\":6004805819329737545,\"txPackets\":4741650876489790931,\"txErrors\":1465326181302145266,\"txDropped\":3940306092120198415}}},\"physicalZone\":\"vb\"},\"kind\":\"stqwnpegoupdq\",\"id\":\"lvd\",\"name\":\"aqcqlexobeekzyeb\",\"type\":\"atwbbfjd\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AppServiceManager manager = AppServiceManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        WebSiteInstanceStatus response = manager.webApps()
            .getInstanceInfoSlotWithResponse("xgelnjgftqkgavgo", "llxpaylkrast", "kskkziebm", "yodfmp",
                com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("stqwnpegoupdq", response.kind());
        Assertions.assertEquals(SiteRuntimeState.STOPPED, response.state());
        Assertions.assertEquals("txbrdbwwqtxpfo", response.statusUrl());
        Assertions.assertEquals("fvhbbnoevkkrlkdo", response.detectorUrl());
        Assertions.assertEquals("qscmdsjgo", response.consoleUrl());
        Assertions.assertEquals("hlg", response.healthCheckUrl());
        Assertions.assertEquals(OffsetDateTime.parse("2021-07-28T10:51:08Z"),
            response.containers().get("ayngmow").currentTimeStamp());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-16T00:10:35Z"),
            response.containers().get("ayngmow").previousTimeStamp());
        Assertions.assertEquals(7492609782977712889L,
            response.containers().get("ayngmow").currentCpuStats().systemCpuUsage());
        Assertions.assertEquals(1888245736, response.containers().get("ayngmow").currentCpuStats().onlineCpuCount());
        Assertions.assertEquals(8271713837384576763L,
            response.containers().get("ayngmow").previousCpuStats().systemCpuUsage());
        Assertions.assertEquals(238027448, response.containers().get("ayngmow").previousCpuStats().onlineCpuCount());
        Assertions.assertEquals(3710654781941149008L, response.containers().get("ayngmow").memoryStats().usage());
        Assertions.assertEquals(7259825512987626095L, response.containers().get("ayngmow").memoryStats().maxUsage());
        Assertions.assertEquals(3776267517511094099L, response.containers().get("ayngmow").memoryStats().limit());
        Assertions.assertEquals("hpkqiqs", response.containers().get("ayngmow").name());
        Assertions.assertEquals("ubem", response.containers().get("ayngmow").id());
        Assertions.assertEquals(7008174105435773440L, response.containers().get("ayngmow").eth0().rxBytes());
        Assertions.assertEquals(413283730474341618L, response.containers().get("ayngmow").eth0().rxPackets());
        Assertions.assertEquals(248089998321541510L, response.containers().get("ayngmow").eth0().rxErrors());
        Assertions.assertEquals(5238220583288536024L, response.containers().get("ayngmow").eth0().rxDropped());
        Assertions.assertEquals(5991914324273740307L, response.containers().get("ayngmow").eth0().txBytes());
        Assertions.assertEquals(1915693440887309994L, response.containers().get("ayngmow").eth0().txPackets());
        Assertions.assertEquals(1623059564503788852L, response.containers().get("ayngmow").eth0().txErrors());
        Assertions.assertEquals(4098079234821525136L, response.containers().get("ayngmow").eth0().txDropped());
        Assertions.assertEquals("vb", response.physicalZone());
    }
}
