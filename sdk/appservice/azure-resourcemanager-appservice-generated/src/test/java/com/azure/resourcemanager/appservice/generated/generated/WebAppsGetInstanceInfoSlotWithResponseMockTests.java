// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.appservice.generated.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.appservice.generated.AppServiceManager;
import com.azure.resourcemanager.appservice.generated.models.SiteRuntimeState;
import com.azure.resourcemanager.appservice.generated.models.WebSiteInstanceStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class WebAppsGetInstanceInfoSlotWithResponseMockTests {
    @Test
    public void testGetInstanceInfoSlotWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"state\":\"STOPPED\",\"statusUrl\":\"hrlb\",\"detectorUrl\":\"dxlndlvcb\",\"consoleUrl\":\"biisnh\",\"healthCheckUrl\":\"qaedgwghqqiuuetm\",\"containers\":{\"hedmf\":{\"currentTimeStamp\":\"2021-09-15T20:05Z\",\"previousTimeStamp\":\"2021-02-24T08:11:11Z\",\"currentCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":8662014873734528614,\"onlineCpuCount\":355393121,\"throttlingData\":{}},\"previousCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":7951495239669066394,\"onlineCpuCount\":1348533347,\"throttlingData\":{}},\"memoryStats\":{\"usage\":5327290111610112245,\"maxUsage\":9219295651878835957,\"limit\":804327229835179390},\"name\":\"uvlfzdkp\",\"id\":\"upacahlsavin\",\"eth0\":{\"rxBytes\":4905098590008536373,\"rxPackets\":7374839970623997851,\"rxErrors\":2114959273538582550,\"rxDropped\":3624591276242842319,\"txBytes\":263396124607661605,\"txPackets\":2101194298249251786,\"txErrors\":2323501746923896766,\"txDropped\":5629802782804472450}}}},\"kind\":\"ropfpu\",\"id\":\"wmdmbysvq\",\"name\":\"gndfzh\",\"type\":\"yxccxeu\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AppServiceManager manager = AppServiceManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        WebSiteInstanceStatus response = manager.webApps()
            .getInstanceInfoSlotWithResponse("mqhzys", "chbvejgfx", "jqevmzhk", "cyngdgka",
                com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("ropfpu", response.kind());
        Assertions.assertEquals(SiteRuntimeState.STOPPED, response.state());
        Assertions.assertEquals("hrlb", response.statusUrl());
        Assertions.assertEquals("dxlndlvcb", response.detectorUrl());
        Assertions.assertEquals("biisnh", response.consoleUrl());
        Assertions.assertEquals("qaedgwghqqiuuetm", response.healthCheckUrl());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-15T20:05Z"),
            response.containers().get("hedmf").currentTimestamp());
        Assertions.assertEquals(OffsetDateTime.parse("2021-02-24T08:11:11Z"),
            response.containers().get("hedmf").previousTimestamp());
        Assertions.assertEquals(8662014873734528614L,
            response.containers().get("hedmf").currentCpuStats().systemCpuUsage());
        Assertions.assertEquals(355393121, response.containers().get("hedmf").currentCpuStats().onlineCpuCount());
        Assertions.assertEquals(7951495239669066394L,
            response.containers().get("hedmf").previousCpuStats().systemCpuUsage());
        Assertions.assertEquals(1348533347, response.containers().get("hedmf").previousCpuStats().onlineCpuCount());
        Assertions.assertEquals(5327290111610112245L, response.containers().get("hedmf").memoryStats().usage());
        Assertions.assertEquals(9219295651878835957L, response.containers().get("hedmf").memoryStats().maxUsage());
        Assertions.assertEquals(804327229835179390L, response.containers().get("hedmf").memoryStats().limit());
        Assertions.assertEquals("uvlfzdkp", response.containers().get("hedmf").name());
        Assertions.assertEquals("upacahlsavin", response.containers().get("hedmf").id());
        Assertions.assertEquals(4905098590008536373L, response.containers().get("hedmf").eth0().rxBytes());
        Assertions.assertEquals(7374839970623997851L, response.containers().get("hedmf").eth0().rxPackets());
        Assertions.assertEquals(2114959273538582550L, response.containers().get("hedmf").eth0().rxErrors());
        Assertions.assertEquals(3624591276242842319L, response.containers().get("hedmf").eth0().rxDropped());
        Assertions.assertEquals(263396124607661605L, response.containers().get("hedmf").eth0().txBytes());
        Assertions.assertEquals(2101194298249251786L, response.containers().get("hedmf").eth0().txPackets());
        Assertions.assertEquals(2323501746923896766L, response.containers().get("hedmf").eth0().txErrors());
        Assertions.assertEquals(5629802782804472450L, response.containers().get("hedmf").eth0().txDropped());
    }
}
