// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.appservice.generated.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.appservice.generated.fluent.models.BackupRequestProperties;
import com.azure.resourcemanager.appservice.generated.models.BackupSchedule;
import com.azure.resourcemanager.appservice.generated.models.DatabaseBackupSetting;
import com.azure.resourcemanager.appservice.generated.models.DatabaseType;
import com.azure.resourcemanager.appservice.generated.models.FrequencyUnit;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class BackupRequestPropertiesTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        BackupRequestProperties model = BinaryData.fromString(
            "{\"backupName\":\"mpypefcpczshnuq\",\"enabled\":false,\"storageAccountUrl\":\"izupfkhu\",\"backupSchedule\":{\"frequencyInterval\":1288045967,\"frequencyUnit\":\"Hour\",\"keepAtLeastOneBackup\":false,\"retentionPeriodInDays\":1048467054,\"startTime\":\"2021-11-22T12:40:39Z\",\"lastExecutionTime\":\"2021-04-05T09:57:19Z\"},\"databases\":[{\"databaseType\":\"SqlAzure\",\"name\":\"w\",\"connectionStringName\":\"ukvzwydwttha\",\"connectionString\":\"gkskjivbss\"},{\"databaseType\":\"SqlAzure\",\"name\":\"qfukpeexpgeumi\",\"connectionStringName\":\"wuit\",\"connectionString\":\"exyionofninbd\"},{\"databaseType\":\"MySql\",\"name\":\"xcwqqrsmpc\",\"connectionStringName\":\"prtug\",\"connectionString\":\"bzbcyksiv\"}]}")
            .toObject(BackupRequestProperties.class);
        Assertions.assertEquals("mpypefcpczshnuq", model.backupName());
        Assertions.assertFalse(model.enabled());
        Assertions.assertEquals("izupfkhu", model.storageAccountUrl());
        Assertions.assertEquals(1288045967, model.backupSchedule().frequencyInterval());
        Assertions.assertEquals(FrequencyUnit.HOUR, model.backupSchedule().frequencyUnit());
        Assertions.assertFalse(model.backupSchedule().keepAtLeastOneBackup());
        Assertions.assertEquals(1048467054, model.backupSchedule().retentionPeriodInDays());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-22T12:40:39Z"), model.backupSchedule().startTime());
        Assertions.assertEquals(DatabaseType.SQL_AZURE, model.databases().get(0).databaseType());
        Assertions.assertEquals("w", model.databases().get(0).name());
        Assertions.assertEquals("ukvzwydwttha", model.databases().get(0).connectionStringName());
        Assertions.assertEquals("gkskjivbss", model.databases().get(0).connectionString());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        BackupRequestProperties model = new BackupRequestProperties().withBackupName("mpypefcpczshnuq")
            .withEnabled(false)
            .withStorageAccountUrl("izupfkhu")
            .withBackupSchedule(new BackupSchedule().withFrequencyInterval(1288045967)
                .withFrequencyUnit(FrequencyUnit.HOUR)
                .withKeepAtLeastOneBackup(false)
                .withRetentionPeriodInDays(1048467054)
                .withStartTime(OffsetDateTime.parse("2021-11-22T12:40:39Z")))
            .withDatabases(Arrays.asList(
                new DatabaseBackupSetting().withDatabaseType(DatabaseType.SQL_AZURE)
                    .withName("w")
                    .withConnectionStringName("ukvzwydwttha")
                    .withConnectionString("gkskjivbss"),
                new DatabaseBackupSetting().withDatabaseType(DatabaseType.SQL_AZURE)
                    .withName("qfukpeexpgeumi")
                    .withConnectionStringName("wuit")
                    .withConnectionString("exyionofninbd"),
                new DatabaseBackupSetting().withDatabaseType(DatabaseType.MY_SQL)
                    .withName("xcwqqrsmpc")
                    .withConnectionStringName("prtug")
                    .withConnectionString("bzbcyksiv")));
        model = BinaryData.fromObject(model).toObject(BackupRequestProperties.class);
        Assertions.assertEquals("mpypefcpczshnuq", model.backupName());
        Assertions.assertFalse(model.enabled());
        Assertions.assertEquals("izupfkhu", model.storageAccountUrl());
        Assertions.assertEquals(1288045967, model.backupSchedule().frequencyInterval());
        Assertions.assertEquals(FrequencyUnit.HOUR, model.backupSchedule().frequencyUnit());
        Assertions.assertFalse(model.backupSchedule().keepAtLeastOneBackup());
        Assertions.assertEquals(1048467054, model.backupSchedule().retentionPeriodInDays());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-22T12:40:39Z"), model.backupSchedule().startTime());
        Assertions.assertEquals(DatabaseType.SQL_AZURE, model.databases().get(0).databaseType());
        Assertions.assertEquals("w", model.databases().get(0).name());
        Assertions.assertEquals("ukvzwydwttha", model.databases().get(0).connectionStringName());
        Assertions.assertEquals("gkskjivbss", model.databases().get(0).connectionString());
    }
}
