// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.appservice.generated.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.appservice.generated.AppServiceManager;
import com.azure.resourcemanager.appservice.generated.models.SiteRuntimeState;
import com.azure.resourcemanager.appservice.generated.models.WebSiteInstanceStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class WebAppsGetInstanceInfoWithResponseMockTests {
    @Test
    public void testGetInstanceInfoWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"state\":\"UNKNOWN\",\"statusUrl\":\"we\",\"detectorUrl\":\"qpwyrioqwmhcpu\",\"consoleUrl\":\"gntxregbs\",\"healthCheckUrl\":\"th\",\"containers\":{\"vyhsorcavkfhyoi\":{\"currentTimeStamp\":\"2021-05-08T14:14:54Z\",\"previousTimeStamp\":\"2020-12-26T09:30:36Z\",\"currentCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":3086257519290259893,\"onlineCpuCount\":1632836618,\"throttlingData\":{}},\"previousCpuStats\":{\"cpuUsage\":{},\"systemCpuUsage\":392627691738371282,\"onlineCpuCount\":1450409622,\"throttlingData\":{}},\"memoryStats\":{\"usage\":667830976757963353,\"maxUsage\":3047707568458773470,\"limit\":2316157824290798339},\"name\":\"zekygnepjyuxqd\",\"id\":\"hiyxjqr\",\"eth0\":{\"rxBytes\":1441844497952281627,\"rxPackets\":8758304533070937688,\"rxErrors\":5534084375782787835,\"rxDropped\":2319801956232051037,\"txBytes\":3339063762618648399,\"txPackets\":4748462586342798471,\"txErrors\":3544048414974095201,\"txDropped\":6912975383159553977}}},\"physicalZone\":\"wedfteratvpkg\"},\"kind\":\"rmujizd\",\"id\":\"epfjdiwz\",\"name\":\"wmumuc\",\"type\":\"vqwhscvaq\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AppServiceManager manager = AppServiceManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        WebSiteInstanceStatus response = manager.webApps()
            .getInstanceInfoWithResponse("aveg", "sq", "mlbzixpdat", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("rmujizd", response.kind());
        Assertions.assertEquals(SiteRuntimeState.UNKNOWN, response.state());
        Assertions.assertEquals("we", response.statusUrl());
        Assertions.assertEquals("qpwyrioqwmhcpu", response.detectorUrl());
        Assertions.assertEquals("gntxregbs", response.consoleUrl());
        Assertions.assertEquals("th", response.healthCheckUrl());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-08T14:14:54Z"),
            response.containers().get("vyhsorcavkfhyoi").currentTimeStamp());
        Assertions.assertEquals(OffsetDateTime.parse("2020-12-26T09:30:36Z"),
            response.containers().get("vyhsorcavkfhyoi").previousTimeStamp());
        Assertions.assertEquals(3086257519290259893L,
            response.containers().get("vyhsorcavkfhyoi").currentCpuStats().systemCpuUsage());
        Assertions.assertEquals(1632836618,
            response.containers().get("vyhsorcavkfhyoi").currentCpuStats().onlineCpuCount());
        Assertions.assertEquals(392627691738371282L,
            response.containers().get("vyhsorcavkfhyoi").previousCpuStats().systemCpuUsage());
        Assertions.assertEquals(1450409622,
            response.containers().get("vyhsorcavkfhyoi").previousCpuStats().onlineCpuCount());
        Assertions.assertEquals(667830976757963353L,
            response.containers().get("vyhsorcavkfhyoi").memoryStats().usage());
        Assertions.assertEquals(3047707568458773470L,
            response.containers().get("vyhsorcavkfhyoi").memoryStats().maxUsage());
        Assertions.assertEquals(2316157824290798339L,
            response.containers().get("vyhsorcavkfhyoi").memoryStats().limit());
        Assertions.assertEquals("zekygnepjyuxqd", response.containers().get("vyhsorcavkfhyoi").name());
        Assertions.assertEquals("hiyxjqr", response.containers().get("vyhsorcavkfhyoi").id());
        Assertions.assertEquals(1441844497952281627L, response.containers().get("vyhsorcavkfhyoi").eth0().rxBytes());
        Assertions.assertEquals(8758304533070937688L, response.containers().get("vyhsorcavkfhyoi").eth0().rxPackets());
        Assertions.assertEquals(5534084375782787835L, response.containers().get("vyhsorcavkfhyoi").eth0().rxErrors());
        Assertions.assertEquals(2319801956232051037L, response.containers().get("vyhsorcavkfhyoi").eth0().rxDropped());
        Assertions.assertEquals(3339063762618648399L, response.containers().get("vyhsorcavkfhyoi").eth0().txBytes());
        Assertions.assertEquals(4748462586342798471L, response.containers().get("vyhsorcavkfhyoi").eth0().txPackets());
        Assertions.assertEquals(3544048414974095201L, response.containers().get("vyhsorcavkfhyoi").eth0().txErrors());
        Assertions.assertEquals(6912975383159553977L, response.containers().get("vyhsorcavkfhyoi").eth0().txDropped());
        Assertions.assertEquals("wedfteratvpkg", response.physicalZone());
    }
}
