// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.
package com.azure.analytics.onlineexperimentation;

import com.azure.analytics.onlineexperimentation.implementation.JsonMergePatchHelper;
import com.azure.analytics.onlineexperimentation.implementation.OnlineExperimentationClientImpl;
import com.azure.analytics.onlineexperimentation.models.ExperimentMetric;
import com.azure.analytics.onlineexperimentation.models.ExperimentMetricValidationResult;
import com.azure.analytics.onlineexperimentation.models.LifecycleStage;
import com.azure.core.annotation.Generated;
import com.azure.core.annotation.ReturnType;
import com.azure.core.annotation.ServiceClient;
import com.azure.core.annotation.ServiceMethod;
import com.azure.core.exception.ClientAuthenticationException;
import com.azure.core.exception.HttpResponseException;
import com.azure.core.exception.ResourceModifiedException;
import com.azure.core.exception.ResourceNotFoundException;
import com.azure.core.http.HttpHeaderName;
import com.azure.core.http.RequestConditions;
import com.azure.core.http.rest.PagedFlux;
import com.azure.core.http.rest.PagedResponse;
import com.azure.core.http.rest.PagedResponseBase;
import com.azure.core.http.rest.RequestOptions;
import com.azure.core.http.rest.Response;
import com.azure.core.http.rest.SimpleResponse;
import com.azure.core.util.BinaryData;
import com.azure.core.util.DateTimeRfc1123;
import com.azure.core.util.ETag;
import com.azure.core.util.FluxUtil;
import java.time.OffsetDateTime;
import java.util.stream.Collectors;
import reactor.core.publisher.Flux;
import reactor.core.publisher.Mono;

/**
 * Initializes a new instance of the asynchronous OnlineExperimentationClient type.
 */
@ServiceClient(builder = OnlineExperimentationClientBuilder.class, isAsync = true)
public final class OnlineExperimentationAsyncClient {

    @Generated
    private final OnlineExperimentationClientImpl serviceClient;

    /**
     * Initializes an instance of OnlineExperimentationAsyncClient class.
     *
     * @param serviceClient the service client implementation.
     */
    @Generated
    OnlineExperimentationAsyncClient(OnlineExperimentationClientImpl serviceClient) {
        this.serviceClient = serviceClient;
    }

    /**
     * Fetches an experiment metric by ID.
     * <p><strong>Header Parameters</strong></p>
     * <table border="1">
     * <caption>Header Parameters</caption>
     * <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
     * <tr><td>If-Match</td><td>String</td><td>No</td><td>The request should only proceed if an entity matches this
     * string.</td></tr>
     * <tr><td>If-None-Match</td><td>String</td><td>No</td><td>The request should only proceed if no entity matches this
     * string.</td></tr>
     * <tr><td>If-Unmodified-Since</td><td>OffsetDateTime</td><td>No</td><td>The request should only proceed if the
     * entity was not modified after this time.</td></tr>
     * <tr><td>If-Modified-Since</td><td>OffsetDateTime</td><td>No</td><td>The request should only proceed if the entity
     * was modified after this time.</td></tr>
     * </table>
     * You can add these to a request with {@link RequestOptions#addHeader}
     * <p><strong>Response Body Schema</strong></p>
     *
     * <pre>
     * {@code
     * {
     *     id: String (Required)
     *     lifecycle: String(Active/Inactive) (Optional, Required on create)
     *     displayName: String (Optional, Required on create)
     *     description: String (Optional, Required on create)
     *     categories (Optional, Required on create): [
     *         String (Optional, Required on create)
     *     ]
     *     desiredDirection: String(Increase/Decrease/Neutral) (Optional, Required on create)
     *     definition (Optional, Required on create): {
     *         type: String(EventCount/UserCount/EventRate/UserRate/Sum/Average/Percentile) (Required)
     *     }
     *     eTag: String (Required)
     *     lastModifiedAt: OffsetDateTime (Required)
     * }
     * }
     * </pre>
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param requestOptions The options to configure the HTTP request before HTTP client sends it.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<BinaryData>> getMetricWithResponse(String experimentMetricId, RequestOptions requestOptions) {
        return this.serviceClient.getMetricWithResponseAsync(experimentMetricId, requestOptions);
    }

    /**
     * Creates or updates an experiment metric.
     * <p><strong>Header Parameters</strong></p>
     * <table border="1">
     * <caption>Header Parameters</caption>
     * <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
     * <tr><td>If-Match</td><td>String</td><td>No</td><td>The request should only proceed if an entity matches this
     * string.</td></tr>
     * <tr><td>If-None-Match</td><td>String</td><td>No</td><td>The request should only proceed if no entity matches this
     * string.</td></tr>
     * <tr><td>If-Unmodified-Since</td><td>OffsetDateTime</td><td>No</td><td>The request should only proceed if the
     * entity was not modified after this time.</td></tr>
     * <tr><td>If-Modified-Since</td><td>OffsetDateTime</td><td>No</td><td>The request should only proceed if the entity
     * was modified after this time.</td></tr>
     * </table>
     * You can add these to a request with {@link RequestOptions#addHeader}
     * <p><strong>Request Body Schema</strong></p>
     *
     * <pre>
     * {@code
     * {
     *     id: String (Required)
     *     lifecycle: String(Active/Inactive) (Optional, Required on create)
     *     displayName: String (Optional, Required on create)
     *     description: String (Optional, Required on create)
     *     categories (Optional, Required on create): [
     *         String (Optional, Required on create)
     *     ]
     *     desiredDirection: String(Increase/Decrease/Neutral) (Optional, Required on create)
     *     definition (Optional, Required on create): {
     *         type: String(EventCount/UserCount/EventRate/UserRate/Sum/Average/Percentile) (Required)
     *     }
     *     eTag: String (Required)
     *     lastModifiedAt: OffsetDateTime (Required)
     * }
     * }
     * </pre>
     *
     * <p><strong>Response Body Schema</strong></p>
     *
     * <pre>
     * {@code
     * {
     *     id: String (Required)
     *     lifecycle: String(Active/Inactive) (Optional, Required on create)
     *     displayName: String (Optional, Required on create)
     *     description: String (Optional, Required on create)
     *     categories (Optional, Required on create): [
     *         String (Optional, Required on create)
     *     ]
     *     desiredDirection: String(Increase/Decrease/Neutral) (Optional, Required on create)
     *     definition (Optional, Required on create): {
     *         type: String(EventCount/UserCount/EventRate/UserRate/Sum/Average/Percentile) (Required)
     *     }
     *     eTag: String (Required)
     *     lastModifiedAt: OffsetDateTime (Required)
     * }
     * }
     * </pre>
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @param requestOptions The options to configure the HTTP request before HTTP client sends it.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<BinaryData>> createOrUpdateMetricWithResponse(String experimentMetricId, BinaryData resource,
        RequestOptions requestOptions) {
        return this.serviceClient.createOrUpdateMetricWithResponseAsync(experimentMetricId, resource, requestOptions);
    }

    /**
     * Validates an experiment metric definition.
     * <p><strong>Request Body Schema</strong></p>
     *
     * <pre>
     * {@code
     * {
     *     id: String (Required)
     *     lifecycle: String(Active/Inactive) (Optional, Required on create)
     *     displayName: String (Optional, Required on create)
     *     description: String (Optional, Required on create)
     *     categories (Optional, Required on create): [
     *         String (Optional, Required on create)
     *     ]
     *     desiredDirection: String(Increase/Decrease/Neutral) (Optional, Required on create)
     *     definition (Optional, Required on create): {
     *         type: String(EventCount/UserCount/EventRate/UserRate/Sum/Average/Percentile) (Required)
     *     }
     *     eTag: String (Required)
     *     lastModifiedAt: OffsetDateTime (Required)
     * }
     * }
     * </pre>
     *
     * <p><strong>Response Body Schema</strong></p>
     *
     * <pre>
     * {@code
     * {
     *     isValid: boolean (Required)
     *     diagnostics (Required): [
     *          (Required){
     *             message: String (Required)
     *             code: String(FailedSchemaValidation/InvalidEventCondition/UnsupportedEventCondition/InvalidExperimentMetricDefinition) (Required)
     *         }
     *     ]
     * }
     * }
     * </pre>
     *
     * @param body Experiment metric input to validate.
     * @param requestOptions The options to configure the HTTP request before HTTP client sends it.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @return the result of validating an experiment metric along with {@link Response} on successful completion of
     * {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<BinaryData>> validateMetricWithResponse(BinaryData body, RequestOptions requestOptions) {
        return this.serviceClient.validateMetricWithResponseAsync(body, requestOptions);
    }

    /**
     * Deletes an experiment metric.
     * <p><strong>Header Parameters</strong></p>
     * <table border="1">
     * <caption>Header Parameters</caption>
     * <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
     * <tr><td>If-Match</td><td>String</td><td>No</td><td>The request should only proceed if an entity matches this
     * string.</td></tr>
     * <tr><td>If-None-Match</td><td>String</td><td>No</td><td>The request should only proceed if no entity matches this
     * string.</td></tr>
     * <tr><td>If-Unmodified-Since</td><td>OffsetDateTime</td><td>No</td><td>The request should only proceed if the
     * entity was not modified after this time.</td></tr>
     * <tr><td>If-Modified-Since</td><td>OffsetDateTime</td><td>No</td><td>The request should only proceed if the entity
     * was modified after this time.</td></tr>
     * </table>
     * You can add these to a request with {@link RequestOptions#addHeader}
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param requestOptions The options to configure the HTTP request before HTTP client sends it.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @return the {@link Response} on successful completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<Void>> deleteMetricWithResponse(String experimentMetricId, RequestOptions requestOptions) {
        return this.serviceClient.deleteMetricWithResponseAsync(experimentMetricId, requestOptions);
    }

    /**
     * Lists experiment metrics.
     * <p><strong>Query Parameters</strong></p>
     * <table border="1">
     * <caption>Query Parameters</caption>
     * <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
     * <tr><td>top</td><td>Integer</td><td>No</td><td>The number of result items to return.</td></tr>
     * <tr><td>skip</td><td>Integer</td><td>No</td><td>The number of result items to skip.</td></tr>
     * <tr><td>maxpagesize</td><td>Integer</td><td>No</td><td>The maximum number of result items per page.</td></tr>
     * </table>
     * You can add these to a request with {@link RequestOptions#addQueryParam}
     * <p><strong>Response Body Schema</strong></p>
     *
     * <pre>
     * {@code
     * {
     *     id: String (Required)
     *     lifecycle: String(Active/Inactive) (Optional, Required on create)
     *     displayName: String (Optional, Required on create)
     *     description: String (Optional, Required on create)
     *     categories (Optional, Required on create): [
     *         String (Optional, Required on create)
     *     ]
     *     desiredDirection: String(Increase/Decrease/Neutral) (Optional, Required on create)
     *     definition (Optional, Required on create): {
     *         type: String(EventCount/UserCount/EventRate/UserRate/Sum/Average/Percentile) (Required)
     *     }
     *     eTag: String (Required)
     *     lastModifiedAt: OffsetDateTime (Required)
     * }
     * }
     * </pre>
     *
     * @param requestOptions The options to configure the HTTP request before HTTP client sends it.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @return paged collection of ExperimentMetric items as paginated response with {@link PagedFlux}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.COLLECTION)
    public PagedFlux<BinaryData> listMetrics(RequestOptions requestOptions) {
        return this.serviceClient.listMetricsAsync(requestOptions);
    }

    /**
     * Fetches an experiment metric by ID.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param requestConditions Specifies HTTP options for conditional requests based on modification time.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details on successful completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> getMetric(String experimentMetricId, RequestConditions requestConditions) {
        // Generated convenience method for getMetricWithResponse
        RequestOptions requestOptions = new RequestOptions();
        String ifMatch = requestConditions == null ? null : requestConditions.getIfMatch();
        String ifNoneMatch = requestConditions == null ? null : requestConditions.getIfNoneMatch();
        OffsetDateTime ifUnmodifiedSince = requestConditions == null ? null : requestConditions.getIfUnmodifiedSince();
        OffsetDateTime ifModifiedSince = requestConditions == null ? null : requestConditions.getIfModifiedSince();
        if (ifMatch != null) {
            requestOptions.setHeader(HttpHeaderName.IF_MATCH, ifMatch);
        }
        if (ifNoneMatch != null) {
            requestOptions.setHeader(HttpHeaderName.IF_NONE_MATCH, ifNoneMatch);
        }
        if (ifUnmodifiedSince != null) {
            requestOptions.setHeader(HttpHeaderName.IF_UNMODIFIED_SINCE,
                String.valueOf(new DateTimeRfc1123(ifUnmodifiedSince)));
        }
        if (ifModifiedSince != null) {
            requestOptions.setHeader(HttpHeaderName.IF_MODIFIED_SINCE,
                String.valueOf(new DateTimeRfc1123(ifModifiedSince)));
        }
        return getMetricWithResponse(experimentMetricId, requestOptions).flatMap(FluxUtil::toMono)
            .map(protocolMethodData -> protocolMethodData.toObject(ExperimentMetric.class));
    }

    /**
     * Fetches an experiment metric by ID.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details on successful completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> getMetric(String experimentMetricId) {
        // Generated convenience method for getMetricWithResponse
        RequestOptions requestOptions = new RequestOptions();
        return getMetricWithResponse(experimentMetricId, requestOptions).flatMap(FluxUtil::toMono)
            .map(protocolMethodData -> protocolMethodData.toObject(ExperimentMetric.class));
    }

    /**
     * Creates or updates an experiment metric.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @param requestConditions Specifies HTTP options for conditional requests based on modification time.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details on successful completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> createOrUpdateMetric(String experimentMetricId, ExperimentMetric resource,
        RequestConditions requestConditions) {
        // Generated convenience method for createOrUpdateMetricWithResponse
        RequestOptions requestOptions = new RequestOptions();
        String ifMatch = requestConditions == null ? null : requestConditions.getIfMatch();
        String ifNoneMatch = requestConditions == null ? null : requestConditions.getIfNoneMatch();
        OffsetDateTime ifUnmodifiedSince = requestConditions == null ? null : requestConditions.getIfUnmodifiedSince();
        OffsetDateTime ifModifiedSince = requestConditions == null ? null : requestConditions.getIfModifiedSince();
        if (ifMatch != null) {
            requestOptions.setHeader(HttpHeaderName.IF_MATCH, ifMatch);
        }
        if (ifNoneMatch != null) {
            requestOptions.setHeader(HttpHeaderName.IF_NONE_MATCH, ifNoneMatch);
        }
        if (ifUnmodifiedSince != null) {
            requestOptions.setHeader(HttpHeaderName.IF_UNMODIFIED_SINCE,
                String.valueOf(new DateTimeRfc1123(ifUnmodifiedSince)));
        }
        if (ifModifiedSince != null) {
            requestOptions.setHeader(HttpHeaderName.IF_MODIFIED_SINCE,
                String.valueOf(new DateTimeRfc1123(ifModifiedSince)));
        }
        JsonMergePatchHelper.getExperimentMetricAccessor().prepareModelForJsonMergePatch(resource, true);
        BinaryData resourceInBinaryData = BinaryData.fromObject(resource);
        // BinaryData.fromObject() will not fire serialization, use getLength() to fire serialization.
        resourceInBinaryData.getLength();
        JsonMergePatchHelper.getExperimentMetricAccessor().prepareModelForJsonMergePatch(resource, false);
        return createOrUpdateMetricWithResponse(experimentMetricId, resourceInBinaryData, requestOptions)
            .flatMap(FluxUtil::toMono)
            .map(protocolMethodData -> protocolMethodData.toObject(ExperimentMetric.class));
    }

    /**
     * Creates or updates an experiment metric.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details on successful completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> createOrUpdateMetric(String experimentMetricId, ExperimentMetric resource) {
        // Generated convenience method for createOrUpdateMetricWithResponse
        RequestOptions requestOptions = new RequestOptions();
        JsonMergePatchHelper.getExperimentMetricAccessor().prepareModelForJsonMergePatch(resource, true);
        BinaryData resourceInBinaryData = BinaryData.fromObject(resource);
        // BinaryData.fromObject() will not fire serialization, use getLength() to fire serialization.
        resourceInBinaryData.getLength();
        JsonMergePatchHelper.getExperimentMetricAccessor().prepareModelForJsonMergePatch(resource, false);
        return createOrUpdateMetricWithResponse(experimentMetricId, resourceInBinaryData, requestOptions)
            .flatMap(FluxUtil::toMono)
            .map(protocolMethodData -> protocolMethodData.toObject(ExperimentMetric.class));
    }

    /**
     * Validates an experiment metric definition.
     *
     * @param body Experiment metric input to validate.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return the result of validating an experiment metric on successful completion of {@link Mono}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetricValidationResult> validateMetric(ExperimentMetric body) {
        // Generated convenience method for validateMetricWithResponse
        RequestOptions requestOptions = new RequestOptions();
        return validateMetricWithResponse(BinaryData.fromObject(body), requestOptions).flatMap(FluxUtil::toMono)
            .map(protocolMethodData -> protocolMethodData.toObject(ExperimentMetricValidationResult.class));
    }

    /**
     * Deletes an experiment metric.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param requestConditions Specifies HTTP options for conditional requests based on modification time.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return A {@link Mono} that completes when a successful response is received.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Void> deleteMetric(String experimentMetricId, RequestConditions requestConditions) {
        // Generated convenience method for deleteMetricWithResponse
        RequestOptions requestOptions = new RequestOptions();
        String ifMatch = requestConditions == null ? null : requestConditions.getIfMatch();
        String ifNoneMatch = requestConditions == null ? null : requestConditions.getIfNoneMatch();
        OffsetDateTime ifUnmodifiedSince = requestConditions == null ? null : requestConditions.getIfUnmodifiedSince();
        OffsetDateTime ifModifiedSince = requestConditions == null ? null : requestConditions.getIfModifiedSince();
        if (ifMatch != null) {
            requestOptions.setHeader(HttpHeaderName.IF_MATCH, ifMatch);
        }
        if (ifNoneMatch != null) {
            requestOptions.setHeader(HttpHeaderName.IF_NONE_MATCH, ifNoneMatch);
        }
        if (ifUnmodifiedSince != null) {
            requestOptions.setHeader(HttpHeaderName.IF_UNMODIFIED_SINCE,
                String.valueOf(new DateTimeRfc1123(ifUnmodifiedSince)));
        }
        if (ifModifiedSince != null) {
            requestOptions.setHeader(HttpHeaderName.IF_MODIFIED_SINCE,
                String.valueOf(new DateTimeRfc1123(ifModifiedSince)));
        }
        return deleteMetricWithResponse(experimentMetricId, requestOptions).flatMap(FluxUtil::toMono);
    }

    /**
     * Deletes an experiment metric.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return A {@link Mono} that completes when a successful response is received.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Void> deleteMetric(String experimentMetricId) {
        // Generated convenience method for deleteMetricWithResponse
        RequestOptions requestOptions = new RequestOptions();
        return deleteMetricWithResponse(experimentMetricId, requestOptions).flatMap(FluxUtil::toMono);
    }

    /**
     * Lists experiment metrics.
     *
     * @param top The number of result items to return.
     * @param skip The number of result items to skip.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return paged collection of ExperimentMetric items as paginated response with {@link PagedFlux}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.COLLECTION)
    public PagedFlux<ExperimentMetric> listMetrics(Integer top, Integer skip) {
        // Generated convenience method for listMetrics
        RequestOptions requestOptions = new RequestOptions();
        if (top != null) {
            requestOptions.addQueryParam("top", String.valueOf(top), false);
        }
        if (skip != null) {
            requestOptions.addQueryParam("skip", String.valueOf(skip), false);
        }
        PagedFlux<BinaryData> pagedFluxResponse = listMetrics(requestOptions);
        return PagedFlux.create(() -> (continuationTokenParam, pageSizeParam) -> {
            Flux<PagedResponse<BinaryData>> flux = (continuationTokenParam == null)
                ? pagedFluxResponse.byPage().take(1)
                : pagedFluxResponse.byPage(continuationTokenParam).take(1);
            return flux.map(pagedResponse -> new PagedResponseBase<Void, ExperimentMetric>(pagedResponse.getRequest(),
                pagedResponse.getStatusCode(), pagedResponse.getHeaders(),
                pagedResponse.getValue()
                    .stream()
                    .map(protocolMethodData -> protocolMethodData.toObject(ExperimentMetric.class))
                    .collect(Collectors.toList()),
                pagedResponse.getContinuationToken(), null));
        });
    }

    /**
     * Lists experiment metrics.
     *
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return paged collection of ExperimentMetric items as paginated response with {@link PagedFlux}.
     */
    @Generated
    @ServiceMethod(returns = ReturnType.COLLECTION)
    public PagedFlux<ExperimentMetric> listMetrics() {
        // Generated convenience method for listMetrics
        RequestOptions requestOptions = new RequestOptions();
        PagedFlux<BinaryData> pagedFluxResponse = listMetrics(requestOptions);
        return PagedFlux.create(() -> (continuationTokenParam, pageSizeParam) -> {
            Flux<PagedResponse<BinaryData>> flux = (continuationTokenParam == null)
                ? pagedFluxResponse.byPage().take(1)
                : pagedFluxResponse.byPage(continuationTokenParam).take(1);
            return flux.map(pagedResponse -> new PagedResponseBase<Void, ExperimentMetric>(pagedResponse.getRequest(),
                pagedResponse.getStatusCode(), pagedResponse.getHeaders(),
                pagedResponse.getValue()
                    .stream()
                    .map(protocolMethodData -> protocolMethodData.toObject(ExperimentMetric.class))
                    .collect(Collectors.toList()),
                pagedResponse.getContinuationToken(), null));
        });
    }

    /**
     * Creates or updates an experiment metric with response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @param requestOptions The options to configure the HTTP request.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws ResourceModifiedException thrown if the request is rejected by server on status code 409.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> createOrUpdateMetricWithResponse(String experimentMetricId,
        ExperimentMetric resource, RequestOptions requestOptions) {

        JsonMergePatchHelper.getExperimentMetricAccessor().prepareModelForJsonMergePatch(resource, true);
        BinaryData resourceInBinaryData = BinaryData.fromObject(resource);
        resourceInBinaryData.getLength(); // Force serialization
        JsonMergePatchHelper.getExperimentMetricAccessor().prepareModelForJsonMergePatch(resource, false);

        return createOrUpdateMetricWithResponse(experimentMetricId, resourceInBinaryData, requestOptions)
            .map(response -> new SimpleResponse<>(response.getRequest(), response.getStatusCode(),
                response.getHeaders(), response.getValue().toObject(ExperimentMetric.class)));
    }

    /**
     * Creates or updates an experiment metric.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> createMetric(String experimentMetricId, ExperimentMetric resource) {
        return createOrUpdateMetric(experimentMetricId, resource,
            new RequestConditions().setIfNoneMatch(ETag.ALL.toString()));
    }

    /**
     * Creates an experiment metric with a response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> createMetricWithResponse(String experimentMetricId,
        ExperimentMetric resource) {
        RequestOptions requestOptions = new RequestOptions();
        requestOptions.setHeader(HttpHeaderName.IF_NONE_MATCH, ETag.ALL.toString());

        return createOrUpdateMetricWithResponse(experimentMetricId, resource, requestOptions);
    }

    /**
     * Creates or updates an experiment metric.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @param ifMatch The ETag value to match for the request.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> updateMetric(String experimentMetricId, ExperimentMetric resource, String ifMatch) {
        return createOrUpdateMetric(experimentMetricId, resource, new RequestConditions().setIfMatch(ifMatch));
    }

    /**
     * Updates an experiment metric with a response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @param ifMatch The ETag value to match for the request.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> updateMetricWithResponse(String experimentMetricId,
        ExperimentMetric resource, String ifMatch) {
        RequestOptions requestOptions = new RequestOptions();
        requestOptions.setHeader(HttpHeaderName.IF_MATCH, ifMatch);

        return createOrUpdateMetricWithResponse(experimentMetricId, resource, requestOptions);
    }

    /**
     * Creates or updates an experiment metric.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> updateMetric(String experimentMetricId, ExperimentMetric resource) {
        return updateMetric(experimentMetricId, resource, ETag.ALL.toString());
    }

    /**
     * Updates an experiment metric with a response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param resource The resource instance.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> updateMetricWithResponse(String experimentMetricId,
        ExperimentMetric resource) {
        return updateMetricWithResponse(experimentMetricId, resource, ETag.ALL.toString());
    }

    /**
     * Updates the experiment metric lifecycle to {@link LifecycleStage#ACTIVE}.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param ifMatch The ETag value to match for the request.
     *
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> activateMetric(String experimentMetricId, String ifMatch) {
        return updateMetric(experimentMetricId, new ExperimentMetric().setLifecycle(LifecycleStage.ACTIVE), ifMatch);
    }

    /**
     * Activates an experiment metric with a response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param ifMatch The ETag value to match for the request.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> activateMetricWithResponse(String experimentMetricId, String ifMatch) {
        ExperimentMetric resource = new ExperimentMetric().setLifecycle(LifecycleStage.ACTIVE);
        return updateMetricWithResponse(experimentMetricId, resource, ifMatch);
    }

    /**
     * Updates the experiment metric lifecycle to {@link LifecycleStage#ACTIVE}.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     *
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> activateMetric(String experimentMetricId) {
        return activateMetric(experimentMetricId, ETag.ALL.toString());
    }

    /**
     * Activates an experiment metric with a response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> activateMetricWithResponse(String experimentMetricId) {
        return activateMetricWithResponse(experimentMetricId, ETag.ALL.toString());
    }

    /**
     * Updates the experiment metric lifecycle to {@link LifecycleStage#INACTIVE}.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param ifMatch The ETag value to match for the request.
     *
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> deactivateMetric(String experimentMetricId, String ifMatch) {
        return updateMetric(experimentMetricId, new ExperimentMetric().setLifecycle(LifecycleStage.INACTIVE), ifMatch);
    }

    /**
     * Deactivates an experiment metric with a response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @param ifMatch The ETag value to match for the request.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> deactivateMetricWithResponse(String experimentMetricId, String ifMatch) {
        ExperimentMetric resource = new ExperimentMetric().setLifecycle(LifecycleStage.INACTIVE);
        return updateMetricWithResponse(experimentMetricId, resource, ifMatch);
    }

    /**
     * Updates the experiment metric lifecycle to {@link LifecycleStage#INACTIVE}.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     *
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<ExperimentMetric> deactivateMetric(String experimentMetricId) {
        return deactivateMetric(experimentMetricId, ETag.ALL.toString());
    }

    /**
     * Deactivates an experiment metric with a response.
     *
     * @param experimentMetricId Identifier for this experiment metric. Must start with a lowercase letter and contain
     * only lowercase letters, numbers, and underscores.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws HttpResponseException thrown if the request is rejected by server.
     * @throws ClientAuthenticationException thrown if the request is rejected by server on status code 401.
     * @throws ResourceNotFoundException thrown if the request is rejected by server on status code 404.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return defines experiment metric metadata and computation details along with {@link Response} on successful
     * completion of {@link Mono}.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Mono<Response<ExperimentMetric>> deactivateMetricWithResponse(String experimentMetricId) {
        return deactivateMetricWithResponse(experimentMetricId, ETag.ALL.toString());
    }
}
