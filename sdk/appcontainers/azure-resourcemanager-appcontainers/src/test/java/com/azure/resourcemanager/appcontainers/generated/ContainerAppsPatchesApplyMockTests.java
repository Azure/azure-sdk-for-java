// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.appcontainers.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.appcontainers.ContainerAppsApiManager;
import com.azure.resourcemanager.appcontainers.models.ContainerAppsPatchResource;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ContainerAppsPatchesApplyMockTests {
    @Test
    public void testApply() throws Exception {
        String responseStr
            = "{\"properties\":{\"targetEnvironmentId\":\"tfjikffffgkuh\",\"targetContainerAppId\":\"whvuldbkk\",\"targetRevisionId\":\"jkjigawgaz\",\"patchApplyStatus\":\"RebaseFailed\",\"createdAt\":\"2021-07-17T19:23:56Z\",\"lastModifiedAt\":\"2021-03-12T04:48:13Z\",\"patchDetails\":[{\"targetContainerName\":\"jsbcml\",\"targetImage\":\"aahzbhuroolkol\",\"lastDetectionTime\":\"2021-03-29T10:52:42Z\",\"detectionStatus\":\"RegistryLoginFailed\",\"newImageName\":\"mojusuz\",\"newLayer\":{\"name\":\"zcvaaxoialahfxwc\",\"frameworkAndVersion\":\"kdxkuk\",\"osAndVersion\":\"c\"},\"oldLayer\":{\"name\":\"uhhoqeqshavlj\",\"frameworkAndVersion\":\"xyrqo\",\"osAndVersion\":\"thbb\"},\"patchType\":\"OSSecurity\"},{\"targetContainerName\":\"zukwdrnzkj\",\"targetImage\":\"hfceyjncjm\",\"lastDetectionTime\":\"2021-12-08T19:24:03Z\",\"detectionStatus\":\"Succeeded\",\"newImageName\":\"fjbpfiddhlrufzcq\",\"newLayer\":{\"name\":\"qrfuiocusel\",\"frameworkAndVersion\":\"rsazrhxud\",\"osAndVersion\":\"mdtff\"},\"oldLayer\":{\"name\":\"mrkkhmwd\",\"frameworkAndVersion\":\"lgyqixokw\",\"osAndVersion\":\"awhva\"},\"patchType\":\"Other\"},{\"targetContainerName\":\"fqqdl\",\"targetImage\":\"vmyolcaym\",\"lastDetectionTime\":\"2021-04-25T03:05:01Z\",\"detectionStatus\":\"Failed\",\"newImageName\":\"vsnvlaq\",\"newLayer\":{\"name\":\"yzawatu\",\"frameworkAndVersion\":\"kokb\",\"osAndVersion\":\"othymgobl\"},\"oldLayer\":{\"name\":\"nwgwimaanea\",\"frameworkAndVersion\":\"t\",\"osAndVersion\":\"obcyanrfvqtvk\"},\"patchType\":\"FrameworkAndOSSecurity\"},{\"targetContainerName\":\"oog\",\"targetImage\":\"kfnaoaqymhc\",\"lastDetectionTime\":\"2021-08-22T04:15:50Z\",\"detectionStatus\":\"Failed\",\"newImageName\":\"uowyrnskbyhqu\",\"newLayer\":{\"name\":\"ygxvha\",\"frameworkAndVersion\":\"xecxqnwh\",\"osAndVersion\":\"ozawmvgxsmpk\"},\"oldLayer\":{\"name\":\"irfljf\",\"frameworkAndVersion\":\"xqou\",\"osAndVersion\":\"ud\"},\"patchType\":\"Other\"}]},\"id\":\"aprhknqiijgencdg\",\"name\":\"oqueqihkkyowltj\",\"type\":\"uwhldxwhieproqks\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        ContainerAppsApiManager manager = ContainerAppsApiManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        ContainerAppsPatchResource response = manager.containerAppsPatches()
            .apply("akt", "jktzboimyfpq", "owkppnwyytf", com.azure.core.util.Context.NONE);

    }
}
