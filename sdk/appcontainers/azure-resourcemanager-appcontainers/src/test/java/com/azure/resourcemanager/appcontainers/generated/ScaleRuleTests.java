// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.appcontainers.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.appcontainers.models.CustomScaleRule;
import com.azure.resourcemanager.appcontainers.models.HttpScaleRule;
import com.azure.resourcemanager.appcontainers.models.QueueScaleRule;
import com.azure.resourcemanager.appcontainers.models.ScaleRule;
import com.azure.resourcemanager.appcontainers.models.ScaleRuleAuth;
import com.azure.resourcemanager.appcontainers.models.TcpScaleRule;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

public final class ScaleRuleTests {
    @Test
    public void testDeserialize() {
        ScaleRule model =
            BinaryData
                .fromString(
                    "{\"name\":\"ubeddg\",\"azureQueue\":{\"queueName\":\"fwqmzqalkrmn\",\"queueLength\":1174672424,\"auth\":[{\"secretRef\":\"cqqudf\",\"triggerParameter\":\"yxbaaabjyvayf\"},{\"secretRef\":\"m\",\"triggerParameter\":\"rtuzqogs\"},{\"secretRef\":\"nevfdnw\",\"triggerParameter\":\"mewzsyyc\"}]},\"custom\":{\"type\":\"soibjudpfrx\",\"metadata\":{\"ytdw\":\"hzv\",\"pdtii\":\"qbrqubpaxhexiili\",\"d\":\"q\",\"fxrxxle\":\"oaxoruzfgsqu\"},\"auth\":[{\"secretRef\":\"mxjezwlw\",\"triggerParameter\":\"xuqlcvydypat\"},{\"secretRef\":\"oa\",\"triggerParameter\":\"kniod\"},{\"secretRef\":\"oebwnujhemms\",\"triggerParameter\":\"dkcrodt\"}]},\"http\":{\"metadata\":{\"fltkacjv\":\"wj\"},\"auth\":[{\"secretRef\":\"lfoakg\",\"triggerParameter\":\"fpagaowpulp\"},{\"secretRef\":\"lyls\",\"triggerParameter\":\"k\"}]},\"tcp\":{\"metadata\":{\"xsdszuempsb\":\"jervtia\",\"v\":\"kfzbeyvpnqicvi\"},\"auth\":[{\"secretRef\":\"dxrbuukzcle\",\"triggerParameter\":\"hmlwpaztzpo\"},{\"secretRef\":\"cckwyfzqwhxxbu\",\"triggerParameter\":\"a\"},{\"secretRef\":\"feqztppriol\",\"triggerParameter\":\"rjaltolmncw\"}]}}")
                .toObject(ScaleRule.class);
        Assertions.assertEquals("ubeddg", model.name());
        Assertions.assertEquals("fwqmzqalkrmn", model.azureQueue().queueName());
        Assertions.assertEquals(1174672424, model.azureQueue().queueLength());
        Assertions.assertEquals("cqqudf", model.azureQueue().auth().get(0).secretRef());
        Assertions.assertEquals("yxbaaabjyvayf", model.azureQueue().auth().get(0).triggerParameter());
        Assertions.assertEquals("soibjudpfrx", model.custom().type());
        Assertions.assertEquals("hzv", model.custom().metadata().get("ytdw"));
        Assertions.assertEquals("mxjezwlw", model.custom().auth().get(0).secretRef());
        Assertions.assertEquals("xuqlcvydypat", model.custom().auth().get(0).triggerParameter());
        Assertions.assertEquals("wj", model.http().metadata().get("fltkacjv"));
        Assertions.assertEquals("lfoakg", model.http().auth().get(0).secretRef());
        Assertions.assertEquals("fpagaowpulp", model.http().auth().get(0).triggerParameter());
        Assertions.assertEquals("jervtia", model.tcp().metadata().get("xsdszuempsb"));
        Assertions.assertEquals("dxrbuukzcle", model.tcp().auth().get(0).secretRef());
        Assertions.assertEquals("hmlwpaztzpo", model.tcp().auth().get(0).triggerParameter());
    }

    @Test
    public void testSerialize() {
        ScaleRule model =
            new ScaleRule()
                .withName("ubeddg")
                .withAzureQueue(
                    new QueueScaleRule()
                        .withQueueName("fwqmzqalkrmn")
                        .withQueueLength(1174672424)
                        .withAuth(
                            Arrays
                                .asList(
                                    new ScaleRuleAuth().withSecretRef("cqqudf").withTriggerParameter("yxbaaabjyvayf"),
                                    new ScaleRuleAuth().withSecretRef("m").withTriggerParameter("rtuzqogs"),
                                    new ScaleRuleAuth().withSecretRef("nevfdnw").withTriggerParameter("mewzsyyc"))))
                .withCustom(
                    new CustomScaleRule()
                        .withType("soibjudpfrx")
                        .withMetadata(
                            mapOf("ytdw", "hzv", "pdtii", "qbrqubpaxhexiili", "d", "q", "fxrxxle", "oaxoruzfgsqu"))
                        .withAuth(
                            Arrays
                                .asList(
                                    new ScaleRuleAuth().withSecretRef("mxjezwlw").withTriggerParameter("xuqlcvydypat"),
                                    new ScaleRuleAuth().withSecretRef("oa").withTriggerParameter("kniod"),
                                    new ScaleRuleAuth().withSecretRef("oebwnujhemms").withTriggerParameter("dkcrodt"))))
                .withHttp(
                    new HttpScaleRule()
                        .withMetadata(mapOf("fltkacjv", "wj"))
                        .withAuth(
                            Arrays
                                .asList(
                                    new ScaleRuleAuth().withSecretRef("lfoakg").withTriggerParameter("fpagaowpulp"),
                                    new ScaleRuleAuth().withSecretRef("lyls").withTriggerParameter("k"))))
                .withTcp(
                    new TcpScaleRule()
                        .withMetadata(mapOf("xsdszuempsb", "jervtia", "v", "kfzbeyvpnqicvi"))
                        .withAuth(
                            Arrays
                                .asList(
                                    new ScaleRuleAuth()
                                        .withSecretRef("dxrbuukzcle")
                                        .withTriggerParameter("hmlwpaztzpo"),
                                    new ScaleRuleAuth().withSecretRef("cckwyfzqwhxxbu").withTriggerParameter("a"),
                                    new ScaleRuleAuth()
                                        .withSecretRef("feqztppriol")
                                        .withTriggerParameter("rjaltolmncw"))));
        model = BinaryData.fromObject(model).toObject(ScaleRule.class);
        Assertions.assertEquals("ubeddg", model.name());
        Assertions.assertEquals("fwqmzqalkrmn", model.azureQueue().queueName());
        Assertions.assertEquals(1174672424, model.azureQueue().queueLength());
        Assertions.assertEquals("cqqudf", model.azureQueue().auth().get(0).secretRef());
        Assertions.assertEquals("yxbaaabjyvayf", model.azureQueue().auth().get(0).triggerParameter());
        Assertions.assertEquals("soibjudpfrx", model.custom().type());
        Assertions.assertEquals("hzv", model.custom().metadata().get("ytdw"));
        Assertions.assertEquals("mxjezwlw", model.custom().auth().get(0).secretRef());
        Assertions.assertEquals("xuqlcvydypat", model.custom().auth().get(0).triggerParameter());
        Assertions.assertEquals("wj", model.http().metadata().get("fltkacjv"));
        Assertions.assertEquals("lfoakg", model.http().auth().get(0).secretRef());
        Assertions.assertEquals("fpagaowpulp", model.http().auth().get(0).triggerParameter());
        Assertions.assertEquals("jervtia", model.tcp().metadata().get("xsdszuempsb"));
        Assertions.assertEquals("dxrbuukzcle", model.tcp().auth().get(0).secretRef());
        Assertions.assertEquals("hmlwpaztzpo", model.tcp().auth().get(0).triggerParameter());
    }

    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
