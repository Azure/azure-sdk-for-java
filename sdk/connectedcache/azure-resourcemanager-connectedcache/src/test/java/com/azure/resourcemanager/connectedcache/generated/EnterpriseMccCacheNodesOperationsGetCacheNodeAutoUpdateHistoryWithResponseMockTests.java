// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.connectedcache.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.connectedcache.ConnectedCacheManager;
import com.azure.resourcemanager.connectedcache.models.MccCacheNodeAutoUpdateHistory;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class EnterpriseMccCacheNodesOperationsGetCacheNodeAutoUpdateHistoryWithResponseMockTests {
    @Test
    public void testGetCacheNodeAutoUpdateHistoryWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"customerId\":\"uycvuzhyrmewip\",\"cacheNodeId\":\"ekdxuku\",\"autoUpdateHistory\":[{\"imageUriBeforeUpdate\":\"jxundxgketwzh\",\"imageUriTargeted\":\"jhfjmhvvmuvgpm\",\"imageUriTerminal\":\"eqsx\",\"autoUpdateRingType\":2036869225,\"movedToTerminalStateDateTime\":\"2021-05-19T22:03:11Z\",\"ruleRequestedWeek\":837522232,\"ruleRequestedDay\":1911590455,\"createdDateTimeUtc\":\"2021-03-10T08:15:44Z\",\"updatedRegistryDateTimeUtc\":\"2021-12-07T19:13:24Z\",\"planChangeLogText\":\"bhu\",\"autoUpdateLastAppliedStatus\":1639205644,\"autoUpdateLastAppliedStatusText\":\"hyuemslyn\",\"autoUpdateLastAppliedStatusDetailedText\":\"yrpfoobrlttymsj\",\"planId\":949909037057787789,\"timeToGoLiveDateTime\":\"nfwqzdzgtilaxhn\",\"ruleRequestedMinute\":\"qlyvijo\",\"ruleRequestedHour\":\"iv\"},{\"imageUriBeforeUpdate\":\"oyzunbixxr\",\"imageUriTargeted\":\"kvcpwpgclr\",\"imageUriTerminal\":\"vtsoxf\",\"autoUpdateRingType\":452552513,\"movedToTerminalStateDateTime\":\"2021-06-22T22:32:01Z\",\"ruleRequestedWeek\":27132642,\"ruleRequestedDay\":1600333305,\"createdDateTimeUtc\":\"2021-09-18T14:40:44Z\",\"updatedRegistryDateTimeUtc\":\"2021-03-30T12:42:21Z\",\"planChangeLogText\":\"pdnqqskawaoqvmmb\",\"autoUpdateLastAppliedStatus\":538705263,\"autoUpdateLastAppliedStatusText\":\"rtql\",\"autoUpdateLastAppliedStatusDetailedText\":\"megni\",\"planId\":5642937888477682307,\"timeToGoLiveDateTime\":\"lzyqd\",\"ruleRequestedMinute\":\"eg\",\"ruleRequestedHour\":\"alzxwhcan\"},{\"imageUriBeforeUpdate\":\"moy\",\"imageUriTargeted\":\"lwigdivbkbx\",\"imageUriTerminal\":\"mf\",\"autoUpdateRingType\":1845604298,\"movedToTerminalStateDateTime\":\"2021-03-28T18:59:20Z\",\"ruleRequestedWeek\":1690246024,\"ruleRequestedDay\":1901948402,\"createdDateTimeUtc\":\"2021-07-24T05:02:38Z\",\"updatedRegistryDateTimeUtc\":\"2021-03-07T00:19:30Z\",\"planChangeLogText\":\"uxakjsqzhzbezk\",\"autoUpdateLastAppliedStatus\":1554739985,\"autoUpdateLastAppliedStatusText\":\"idxas\",\"autoUpdateLastAppliedStatusDetailedText\":\"ddyvvjskgfmo\",\"planId\":1998990753742020932,\"timeToGoLiveDateTime\":\"qgatjeaahhvjhhn\",\"ruleRequestedMinute\":\"zybbj\",\"ruleRequestedHour\":\"dj\"},{\"imageUriBeforeUpdate\":\"yxkyxvx\",\"imageUriTargeted\":\"blbjedn\",\"imageUriTerminal\":\"lageuaulxun\",\"autoUpdateRingType\":1584096460,\"movedToTerminalStateDateTime\":\"2021-09-27T06:19:05Z\",\"ruleRequestedWeek\":36826137,\"ruleRequestedDay\":1476296254,\"createdDateTimeUtc\":\"2021-09-29T01:40:14Z\",\"updatedRegistryDateTimeUtc\":\"2021-04-02T07:56:28Z\",\"planChangeLogText\":\"svxeizzgwklnsr\",\"autoUpdateLastAppliedStatus\":106461667,\"autoUpdateLastAppliedStatusText\":\"ycxcktpiym\",\"autoUpdateLastAppliedStatusDetailedText\":\"teeammxqiekkkzd\",\"planId\":2620355279236222215,\"timeToGoLiveDateTime\":\"doj\",\"ruleRequestedMinute\":\"xv\",\"ruleRequestedHour\":\"refdee\"}]},\"location\":\"ecuijpxtxs\",\"tags\":{\"vit\":\"rtujwsawddjibab\",\"ecdmdqbwpy\":\"tvtzeexavoxtfg\",\"gsfjac\":\"q\"},\"id\":\"slhhxudbxv\",\"name\":\"d\",\"type\":\"tnsi\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        ConnectedCacheManager manager = ConnectedCacheManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        MccCacheNodeAutoUpdateHistory response = manager.enterpriseMccCacheNodesOperations()
            .getCacheNodeAutoUpdateHistoryWithResponse("a", "cqusr", "vetnwsdtutn", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("ecuijpxtxs", response.location());
        Assertions.assertEquals("rtujwsawddjibab", response.tags().get("vit"));
    }
}
