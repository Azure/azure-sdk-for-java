// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.machinelearning.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.machinelearning.MachineLearningManager;
import com.azure.resourcemanager.machinelearning.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.machinelearning.models.PrivateLinkResourceListResult;
import com.azure.resourcemanager.machinelearning.models.SkuTier;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class PrivateLinkResourcesListWithResponseMockTests {
    @Test
    public void testListWithResponse() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"groupId\":\"r\",\"requiredMembers\":[\"tuwcimtcaumv\",\"udzpsjqrmlujmt\"],\"requiredZoneNames\":[\"ofwuzeb\",\"qvmpjb\",\"zyenfspet\",\"eudwkhdlckdoxocj\"]},\"identity\":{\"principalId\":\"cfc5fe64-4f13-4399-a909-ca9142c1c69c\",\"tenantId\":\"2ac47b65-f44b-46be-aedd-7c09d33f5380\",\"type\":\"None\",\"userAssignedIdentities\":{\"reortwwyj\":{}}},\"location\":\"vrlhfxmrhjn\",\"tags\":{\"ksz\":\"cjywkdy\",\"l\":\"vuafanefictpt\",\"z\":\"ossj\",\"aczhfjdccjn\":\"xpzwdqzuhfgt\"},\"sku\":{\"name\":\"vbtcuhjcgjtjknt\",\"tier\":\"Free\",\"size\":\"zthcdbszsbz\",\"family\":\"xeyvidcowlrm\",\"capacity\":1231342742},\"id\":\"qxave\",\"name\":\"oezvwk\",\"type\":\"yzgavplnd\"},{\"properties\":{\"groupId\":\"iekkiskyyyaekn\",\"requiredMembers\":[\"yshdawjlmlcufb\"],\"requiredZoneNames\":[\"utfofhoajjyl\",\"yqyjnufzvl\",\"quyhbceev\",\"girrpwnqtvuxeuj\"]},\"identity\":{\"principalId\":\"384bb037-9f3d-4b94-9ded-1db9bef3d722\",\"tenantId\":\"c9d70e47-a2f0-407b-ba2e-81efc93f4052\",\"type\":\"None\",\"userAssignedIdentities\":{\"axxfdlypkcpw\":{}}},\"location\":\"qnnmjundt\",\"tags\":{\"ycgqakcsihxvt\":\"ltjhb\",\"yxnsbubwh\":\"cwwfopxp\",\"mkdhwqcqweba\":\"qqgugwluxahtq\"},\"sku\":{\"name\":\"fpkeph\",\"tier\":\"Basic\",\"size\":\"c\",\"family\":\"vkke\",\"capacity\":2073355838},\"id\":\"ypaxpjp\",\"name\":\"illgnu\",\"type\":\"ezfpffbuqxkn\"},{\"properties\":{\"groupId\":\"g\",\"requiredMembers\":[\"zyojfch\",\"cp\",\"rexzoksgq\",\"boojuxi\"],\"requiredZoneNames\":[\"blkcrfldfljw\",\"kbptsfl\"]},\"identity\":{\"principalId\":\"fd660b78-b472-459d-ad94-bb8564cb5666\",\"tenantId\":\"39d09bff-e5ec-47ee-a173-fac78417085f\",\"type\":\"SystemAssigned,UserAssigned\",\"userAssignedIdentities\":{\"gftshfgmuxuqiags\":{},\"oikuqirhsk\":{},\"paowkgvnlfueyxfz\":{},\"brlrjugcfebpi\":{}}},\"location\":\"enbvrllldfknb\",\"tags\":{\"i\":\"ilsxr\"},\"sku\":{\"name\":\"zlwrduxntpfxxgj\",\"tier\":\"Basic\",\"size\":\"fwfctqvey\",\"family\":\"kqynlzxeme\",\"capacity\":1938054109},\"id\":\"ckiehdmvfoyr\",\"name\":\"xxffgmcuanszeerv\",\"type\":\"cgcsapvbcqpf\"},{\"properties\":{\"groupId\":\"kijhmine\",\"requiredMembers\":[\"ivp\",\"rkvorlfqmljewyn\",\"fvvcwvurkmjufa\"],\"requiredZoneNames\":[\"npbsotmynklnm\",\"znmtvrk\",\"fcwxizk\",\"txneykeip\"]},\"identity\":{\"principalId\":\"9c86cb8e-0701-4ea6-8848-987cc24497a5\",\"tenantId\":\"40f0b603-93c3-4b18-a36d-264fe2d6ffd2\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"iuvnfaz\":{},\"tvsayyaeiiv\":{},\"qk\":{}}},\"location\":\"jwrvewojoqfxqetx\",\"tags\":{\"uzljvgjijzqj\":\"iusp\",\"hcmecags\":\"ljsazmjsisfq\"},\"sku\":{\"name\":\"eiirpnjygllfkchh\",\"tier\":\"Free\",\"size\":\"zzcajl\",\"family\":\"qcycabaa\",\"capacity\":1883254200},\"id\":\"dhpmkxdujkxpuqzd\",\"name\":\"oqywsuarpzhryh\",\"type\":\"zx\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MachineLearningManager manager = MachineLearningManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PrivateLinkResourceListResult response = manager.privateLinkResources()
            .listWithResponse("lqcw", "zhndqkzstzpzec", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals(ManagedServiceIdentityType.NONE, response.value().get(0).identity().type());
        Assertions.assertEquals("vrlhfxmrhjn", response.value().get(0).location());
        Assertions.assertEquals("cjywkdy", response.value().get(0).tags().get("ksz"));
        Assertions.assertEquals("vbtcuhjcgjtjknt", response.value().get(0).sku().name());
        Assertions.assertEquals(SkuTier.FREE, response.value().get(0).sku().tier());
        Assertions.assertEquals("zthcdbszsbz", response.value().get(0).sku().size());
        Assertions.assertEquals("xeyvidcowlrm", response.value().get(0).sku().family());
        Assertions.assertEquals(1231342742, response.value().get(0).sku().capacity());
        Assertions.assertEquals("ofwuzeb", response.value().get(0).requiredZoneNames().get(0));
    }
}
