// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.machinelearning.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.machinelearning.MachineLearningManager;
import com.azure.resourcemanager.machinelearning.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.machinelearning.models.Registry;
import com.azure.resourcemanager.machinelearning.models.SkuTier;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class RegistriesGetByResourceGroupWithResponseMockTests {
    @Test
    public void testGetByResourceGroupWithResponse() throws Exception {
        String responseStr
            = "{\"identity\":{\"principalId\":\"d0913e1c-9ec3-4048-9aa2-71411c2bcc9b\",\"tenantId\":\"0afc8a53-c2bd-4e2f-9e85-3cb7dfa5c6c2\",\"type\":\"None\",\"userAssignedIdentities\":{\"zdtjbesfum\":{\"principalId\":\"689f3c0c-21d0-4cc3-a701-5df7f45375c9\",\"clientId\":\"1ec9531e-46ea-451a-85de-5443048ee98f\"},\"aafkvqhbw\":{\"principalId\":\"0a8631d4-80cf-462d-a610-6e2e6ab0c2aa\",\"clientId\":\"75acc8b9-ea3c-4c23-b63f-fb690e47bf22\"}}},\"kind\":\"ivqkyaghf\",\"properties\":{\"discoveryUrl\":\"blszsvegu\",\"intellectualPropertyPublisher\":\"xijp\",\"managedResourceGroup\":{\"resourceId\":\"bjrsdiufqxrl\"},\"mlFlowRegistryUri\":\"josuzeg\",\"registryPrivateEndpointConnections\":[{\"id\":\"zmfe\",\"location\":\"dnewrvjgwnmx\",\"properties\":{\"groupIds\":[\"wdavpqyh\",\"xhorzozfrgkwp\"],\"privateEndpoint\":{},\"registryPrivateLinkServiceConnectionState\":{},\"provisioningState\":\"a\"}},{\"id\":\"tcggoppmxcmougd\",\"location\":\"c\",\"properties\":{\"groupIds\":[\"unamzqvawk\"],\"privateEndpoint\":{},\"registryPrivateLinkServiceConnectionState\":{},\"provisioningState\":\"zcxxfwpjpgq\"}},{\"id\":\"rz\",\"location\":\"gylmycxmho\",\"properties\":{\"groupIds\":[\"oiqwnql\",\"zlcyhjh\",\"kfp\",\"iiommisbf\"],\"privateEndpoint\":{},\"registryPrivateLinkServiceConnectionState\":{},\"provisioningState\":\"ajcmpohjdvfjv\"}}],\"publicNetworkAccess\":\"a\",\"regionDetails\":[{\"acrDetails\":[{},{},{}],\"location\":\"oindiuyqdjkugc\",\"storageAccountDetails\":[{},{},{}]},{\"acrDetails\":[{},{}],\"location\":\"mbryhvshkvupb\",\"storageAccountDetails\":[{},{}]},{\"acrDetails\":[{},{}],\"location\":\"qjyiwuveryavb\",\"storageAccountDetails\":[{},{},{},{}]}]},\"sku\":{\"name\":\"ogupshoofaskyyvd\",\"tier\":\"Free\",\"size\":\"buuhbcck\",\"family\":\"vtelmd\",\"capacity\":315348020},\"location\":\"vghphlbkquhmbln\",\"tags\":{\"yvkkpovz\":\"viaasdexsrglxlj\",\"pdjomddadwosjxy\":\"spdipdxq\",\"tnriyhdbbj\":\"wvilky\",\"brpwj\":\"sjmc\"},\"id\":\"n\",\"name\":\"xtkghrrxau\",\"type\":\"hdkhkizyxoyxnhu\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MachineLearningManager manager = MachineLearningManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        Registry response = manager.registries()
            .getByResourceGroupWithResponse("hqzvwznwcqoapdtj", "l", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("vghphlbkquhmbln", response.location());
        Assertions.assertEquals("viaasdexsrglxlj", response.tags().get("yvkkpovz"));
        Assertions.assertEquals(ManagedServiceIdentityType.NONE, response.identity().type());
        Assertions.assertEquals("ivqkyaghf", response.kind());
        Assertions.assertEquals("ogupshoofaskyyvd", response.sku().name());
        Assertions.assertEquals(SkuTier.FREE, response.sku().tier());
        Assertions.assertEquals("buuhbcck", response.sku().size());
        Assertions.assertEquals("vtelmd", response.sku().family());
        Assertions.assertEquals(315348020, response.sku().capacity());
        Assertions.assertEquals("blszsvegu", response.discoveryUrl());
        Assertions.assertEquals("xijp", response.intellectualPropertyPublisher());
        Assertions.assertEquals("bjrsdiufqxrl", response.managedResourceGroup().resourceId());
        Assertions.assertEquals("josuzeg", response.mlFlowRegistryUri());
        Assertions.assertEquals("zmfe", response.registryPrivateEndpointConnections().get(0).id());
        Assertions.assertEquals("dnewrvjgwnmx", response.registryPrivateEndpointConnections().get(0).location());
        Assertions.assertEquals("wdavpqyh", response.registryPrivateEndpointConnections().get(0).groupIds().get(0));
        Assertions.assertEquals("a", response.registryPrivateEndpointConnections().get(0).provisioningState());
        Assertions.assertEquals("a", response.publicNetworkAccess());
        Assertions.assertEquals("oindiuyqdjkugc", response.regionDetails().get(0).location());
    }
}
