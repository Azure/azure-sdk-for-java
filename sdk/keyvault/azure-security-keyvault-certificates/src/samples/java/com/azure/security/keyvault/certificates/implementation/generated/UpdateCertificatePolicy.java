// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.security.keyvault.certificates.implementation.generated;

import com.azure.identity.DefaultAzureCredentialBuilder;
import com.azure.security.keyvault.certificates.implementation.CertificateClient;
import com.azure.security.keyvault.certificates.implementation.CertificateClientBuilder;
import com.azure.security.keyvault.certificates.implementation.models.Action;
import com.azure.security.keyvault.certificates.implementation.models.CertificateAttributes;
import com.azure.security.keyvault.certificates.implementation.models.CertificatePolicy;
import com.azure.security.keyvault.certificates.implementation.models.CertificatePolicyAction;
import com.azure.security.keyvault.certificates.implementation.models.IssuerParameters;
import com.azure.security.keyvault.certificates.implementation.models.JsonWebKeyType;
import com.azure.security.keyvault.certificates.implementation.models.KeyProperties;
import com.azure.security.keyvault.certificates.implementation.models.LifetimeAction;
import com.azure.security.keyvault.certificates.implementation.models.SecretProperties;
import com.azure.security.keyvault.certificates.implementation.models.Trigger;
import com.azure.security.keyvault.certificates.implementation.models.X509CertificateProperties;
import java.util.Arrays;

public class UpdateCertificatePolicy {
    public static void main(String[] args) {
        CertificateClient certificateClient
            = new CertificateClientBuilder().credential(new DefaultAzureCredentialBuilder().build())
                .vaultBaseUrl("https://myvault.vault.azure.net/")
                .buildClient();
        // BEGIN:com.azure.security.keyvault.certificates.implementation.generated.updatecertificatepolicy.updatecertificatepolicy
        CertificatePolicy response = certificateClient.updateCertificatePolicy("updateCert01", new CertificatePolicy()
            .setKeyProperties(new KeyProperties().setExportable(true)
                .setKeyType(JsonWebKeyType.RSA)
                .setKeySize(2048)
                .setReuseKey(false))
            .setSecretProperties(new SecretProperties().setContentType("application/x-pkcs12"))
            .setX509CertificateProperties(new X509CertificateProperties().setSubject("CN=KeyVaultTest")
                .setEkus(Arrays.asList())
                .setKeyUsage(Arrays.asList())
                .setValidityInMonths(297))
            .setLifetimeActions(Arrays.asList(new LifetimeAction().setTrigger(new Trigger().setLifetimePercentage(80))
                .setAction(new Action().setActionType(CertificatePolicyAction.EMAIL_CONTACTS))))
            .setIssuerParameters(new IssuerParameters().setName("Self"))
            .setAttributes(new CertificateAttributes().setEnabled(true)));
        // END:com.azure.security.keyvault.certificates.implementation.generated.updatecertificatepolicy.updatecertificatepolicy
    }
}
