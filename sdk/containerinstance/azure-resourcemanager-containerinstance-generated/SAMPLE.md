# Code snippets and samples


## ContainerGroups

- [CreateOrUpdate](#containergroups_createorupdate)
- [Delete](#containergroups_delete)
- [GetByResourceGroup](#containergroups_getbyresourcegroup)
- [List](#containergroups_list)
- [ListByResourceGroup](#containergroups_listbyresourcegroup)
- [Restart](#containergroups_restart)
- [Start](#containergroups_start)
- [Stop](#containergroups_stop)
- [Update](#containergroups_update)

## Containers

- [Attach](#containers_attach)
- [ExecuteCommand](#containers_executecommand)
- [ListLogs](#containers_listlogs)

## Location

- [ListCachedImages](#location_listcachedimages)
- [ListCapabilities](#location_listcapabilities)
- [ListUsage](#location_listusage)

## Operations

- [List](#operations_list)
### ContainerGroups_CreateOrUpdate

```java
import com.azure.core.management.serializer.SerializerFactory;
import com.azure.core.util.serializer.SerializerEncoding;
import com.azure.resourcemanager.containerinstance.generated.models.AutoGeneratedDomainNameLabelScope;
import com.azure.resourcemanager.containerinstance.generated.models.AzureFileVolume;
import com.azure.resourcemanager.containerinstance.generated.models.Container;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerGroupDiagnostics;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerGroupIdentity;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerGroupIdentityUserAssignedIdentities;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerGroupIpAddressType;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerGroupNetworkProtocol;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerGroupSubnetId;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerPort;
import com.azure.resourcemanager.containerinstance.generated.models.DnsConfiguration;
import com.azure.resourcemanager.containerinstance.generated.models.GpuResource;
import com.azure.resourcemanager.containerinstance.generated.models.GpuSku;
import com.azure.resourcemanager.containerinstance.generated.models.IpAddress;
import com.azure.resourcemanager.containerinstance.generated.models.LogAnalytics;
import com.azure.resourcemanager.containerinstance.generated.models.LogAnalyticsLogType;
import com.azure.resourcemanager.containerinstance.generated.models.OperatingSystemTypes;
import com.azure.resourcemanager.containerinstance.generated.models.Port;
import com.azure.resourcemanager.containerinstance.generated.models.ResourceIdentityType;
import com.azure.resourcemanager.containerinstance.generated.models.ResourceRequests;
import com.azure.resourcemanager.containerinstance.generated.models.ResourceRequirements;
import com.azure.resourcemanager.containerinstance.generated.models.Volume;
import com.azure.resourcemanager.containerinstance.generated.models.VolumeMount;
import java.io.IOException;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

/** Samples for ContainerGroups CreateOrUpdate. */
public final class ContainerGroupsCreateOrUpdateSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsCreateOrUpdate.json
     */
    /**
     * Sample code: ContainerGroupsCreateOrUpdate.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerGroupsCreateOrUpdate(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) throws IOException {
        manager
            .containerGroups()
            .define("demo1")
            .withRegion("west us")
            .withExistingResourceGroup("demo")
            .withContainers(
                Arrays
                    .asList(
                        new Container()
                            .withName("demo1")
                            .withImage("nginx")
                            .withCommand(Arrays.asList())
                            .withPorts(Arrays.asList(new ContainerPort().withPort(80)))
                            .withEnvironmentVariables(Arrays.asList())
                            .withResources(
                                new ResourceRequirements()
                                    .withRequests(
                                        new ResourceRequests()
                                            .withMemoryInGB(1.5)
                                            .withCpu(1.0)
                                            .withGpu(new GpuResource().withCount(1).withSku(GpuSku.K80))))
                            .withVolumeMounts(
                                Arrays
                                    .asList(
                                        new VolumeMount()
                                            .withName("volume1")
                                            .withMountPath("/mnt/volume1")
                                            .withReadOnly(false),
                                        new VolumeMount()
                                            .withName("volume2")
                                            .withMountPath("/mnt/volume2")
                                            .withReadOnly(false),
                                        new VolumeMount()
                                            .withName("volume3")
                                            .withMountPath("/mnt/volume3")
                                            .withReadOnly(true)))))
            .withOsType(OperatingSystemTypes.LINUX)
            .withIdentity(
                new ContainerGroupIdentity()
                    .withType(ResourceIdentityType.SYSTEM_ASSIGNED_USER_ASSIGNED)
                    .withUserAssignedIdentities(
                        mapOf(
                            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity-name",
                            new ContainerGroupIdentityUserAssignedIdentities())))
            .withImageRegistryCredentials(Arrays.asList())
            .withIpAddress(
                new IpAddress()
                    .withPorts(Arrays.asList(new Port().withProtocol(ContainerGroupNetworkProtocol.TCP).withPort(80)))
                    .withType(ContainerGroupIpAddressType.PUBLIC)
                    .withDnsNameLabel("dnsnamelabel1")
                    .withDnsNameLabelReusePolicy(AutoGeneratedDomainNameLabelScope.UNSECURE))
            .withVolumes(
                Arrays
                    .asList(
                        new Volume()
                            .withName("volume1")
                            .withAzureFile(
                                new AzureFileVolume()
                                    .withShareName("shareName")
                                    .withStorageAccountName("accountName")
                                    .withStorageAccountKey("accountKey")),
                        new Volume()
                            .withName("volume2")
                            .withEmptyDir(
                                SerializerFactory
                                    .createDefaultManagementSerializerAdapter()
                                    .deserialize("{}", Object.class, SerializerEncoding.JSON)),
                        new Volume()
                            .withName("volume3")
                            .withSecret(
                                mapOf("secretKey1", "SecretValue1InBase64", "secretKey2", "SecretValue2InBase64"))))
            .withDiagnostics(
                new ContainerGroupDiagnostics()
                    .withLogAnalytics(
                        new LogAnalytics()
                            .withWorkspaceId("workspaceid")
                            .withWorkspaceKey("workspaceKey")
                            .withLogType(LogAnalyticsLogType.CONTAINER_INSIGHTS)
                            .withMetadata(mapOf("test-key", "test-metadata-value"))
                            .withWorkspaceResourceId(
                                "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rg/providers/microsoft.operationalinsights/workspaces/workspace")))
            .withSubnetIds(
                Arrays
                    .asList(
                        new ContainerGroupSubnetId()
                            .withId(
                                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('vnetName'),"
                                    + " parameters('subnetName'))]")))
            .withDnsConfig(
                new DnsConfiguration()
                    .withNameServers(Arrays.asList("1.1.1.1"))
                    .withSearchDomains("cluster.local svc.cluster.local")
                    .withOptions("ndots:2"))
            .create();
    }

    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
```

### ContainerGroups_Delete

```java
import com.azure.core.util.Context;

/** Samples for ContainerGroups Delete. */
public final class ContainerGroupsDeleteSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsDelete.json
     */
    /**
     * Sample code: ContainerGroupsDelete.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerGroupsDelete(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().delete("demo", "demo1", Context.NONE);
    }
}
```

### ContainerGroups_GetByResourceGroup

```java
import com.azure.core.util.Context;

/** Samples for ContainerGroups GetByResourceGroup. */
public final class ContainerGroupsGetByResourceGroupSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsGet_Succeeded.json
     */
    /**
     * Sample code: ContainerGroupsGet_Succeeded.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerGroupsGetSucceeded(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().getByResourceGroupWithResponse("demo", "demo1", Context.NONE);
    }

    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsGet_Failed.json
     */
    /**
     * Sample code: ContainerGroupsGet_Failed.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerGroupsGetFailed(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().getByResourceGroupWithResponse("demo", "demo1", Context.NONE);
    }
}
```

### ContainerGroups_List

```java
import com.azure.core.util.Context;

/** Samples for ContainerGroups List. */
public final class ContainerGroupsListSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsList.json
     */
    /**
     * Sample code: ContainerGroupsList.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerGroupsList(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().list(Context.NONE);
    }
}
```

### ContainerGroups_ListByResourceGroup

```java
import com.azure.core.util.Context;

/** Samples for ContainerGroups ListByResourceGroup. */
public final class ContainerGroupsListByResourceGroupSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsListByResourceGroup.json
     */
    /**
     * Sample code: ContainerGroupsListByResourceGroup.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerGroupsListByResourceGroup(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().listByResourceGroup("demo", Context.NONE);
    }
}
```

### ContainerGroups_Restart

```java
import com.azure.core.util.Context;

/** Samples for ContainerGroups Restart. */
public final class ContainerGroupsRestartSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsRestart.json
     */
    /**
     * Sample code: ContainerRestart.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerRestart(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().restart("demo", "demo1", Context.NONE);
    }
}
```

### ContainerGroups_Start

```java
import com.azure.core.util.Context;

/** Samples for ContainerGroups Start. */
public final class ContainerGroupsStartSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsStart.json
     */
    /**
     * Sample code: ContainerStart.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerStart(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().start("demo", "demo1", Context.NONE);
    }
}
```

### ContainerGroups_Stop

```java
import com.azure.core.util.Context;

/** Samples for ContainerGroups Stop. */
public final class ContainerGroupsStopSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsStop.json
     */
    /**
     * Sample code: ContainerStop.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerStop(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containerGroups().stopWithResponse("demo", "demo1", Context.NONE);
    }
}
```

### ContainerGroups_Update

```java
import com.azure.core.management.Resource;
import com.azure.core.util.Context;
import java.util.HashMap;
import java.util.Map;

/** Samples for ContainerGroups Update. */
public final class ContainerGroupsUpdateSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupsUpdate.json
     */
    /**
     * Sample code: ContainerGroupsUpdate.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerGroupsUpdate(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager
            .containerGroups()
            .updateWithResponse(
                "demoResource",
                "demo1",
                new Resource().withTags(mapOf("tag1key", "tag1Value", "tag2key", "tag2Value")),
                Context.NONE);
    }

    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
```

### Containers_Attach

```java
import com.azure.core.util.Context;

/** Samples for Containers Attach. */
public final class ContainersAttachSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerAttach.json
     */
    /**
     * Sample code: ContainerAttach.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerAttach(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containers().attachWithResponse("demo", "demo1", "container1", Context.NONE);
    }
}
```

### Containers_ExecuteCommand

```java
import com.azure.core.util.Context;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerExecRequest;
import com.azure.resourcemanager.containerinstance.generated.models.ContainerExecRequestTerminalSize;

/** Samples for Containers ExecuteCommand. */
public final class ContainersExecuteCommandSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerExec.json
     */
    /**
     * Sample code: ContainerExec.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerExec(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager
            .containers()
            .executeCommandWithResponse(
                "demo",
                "demo1",
                "container1",
                new ContainerExecRequest()
                    .withCommand("/bin/bash")
                    .withTerminalSize(new ContainerExecRequestTerminalSize().withRows(12).withCols(12)),
                Context.NONE);
    }
}
```

### Containers_ListLogs

```java
import com.azure.core.util.Context;

/** Samples for Containers ListLogs. */
public final class ContainersListLogsSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerListLogs.json
     */
    /**
     * Sample code: ContainerListLogs.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerListLogs(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.containers().listLogsWithResponse("demo", "demo1", "container1", 10, null, Context.NONE);
    }
}
```

### Location_ListCachedImages

```java
import com.azure.core.util.Context;

/** Samples for Location ListCachedImages. */
public final class LocationListCachedImagesSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/CachedImagesList.json
     */
    /**
     * Sample code: CachedImages.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void cachedImages(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.locations().listCachedImages("westcentralus", Context.NONE);
    }
}
```

### Location_ListCapabilities

```java
import com.azure.core.util.Context;

/** Samples for Location ListCapabilities. */
public final class LocationListCapabilitiesSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/CapabilitiesList.json
     */
    /**
     * Sample code: GetCapabilities.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void getCapabilities(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.locations().listCapabilities("westus", Context.NONE);
    }
}
```

### Location_ListUsage

```java
import com.azure.core.util.Context;

/** Samples for Location ListUsage. */
public final class LocationListUsageSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/ContainerGroupUsage.json
     */
    /**
     * Sample code: ContainerUsage.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void containerUsage(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.locations().listUsage("westcentralus", Context.NONE);
    }
}
```

### Operations_List

```java
import com.azure.core.util.Context;

/** Samples for Operations List. */
public final class OperationsListSamples {
    /*
     * x-ms-original-file: specification/containerinstance/resource-manager/Microsoft.ContainerInstance/stable/2021-10-01/examples/OperationsList.json
     */
    /**
     * Sample code: OperationsList.
     *
     * @param manager Entry point to ContainerInstanceManager.
     */
    public static void operationsList(
        com.azure.resourcemanager.containerinstance.generated.ContainerInstanceManager manager) {
        manager.operations().list(Context.NONE);
    }
}
```

