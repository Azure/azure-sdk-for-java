// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.securityinsights.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.securityinsights.SecurityInsightsManager;
import com.azure.resourcemanager.securityinsights.models.IncidentBookmarkList;
import com.azure.resourcemanager.securityinsights.models.IncidentSeverity;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class IncidentsListBookmarksWithResponseMockTests {
    @Test
    public void testListBookmarksWithResponse() throws Exception {
        String responseStr
            = "{\"value\":[{\"kind\":\"Bookmark\",\"properties\":{\"created\":\"2021-05-27T12:54:19Z\",\"createdBy\":{\"email\":\"fhgannvwxqhpjhub\",\"name\":\"xvzg\",\"objectId\":\"e07c9525-a4b9-4b9d-9c3d-a8a13ae63927\"},\"displayName\":\"bvrhh\",\"eventTime\":\"2021-05-04T13:59:06Z\",\"labels\":[\"xnwfmzvzt\",\"uebpamq\",\"fcssanybzzghvd\"],\"notes\":\"umyjsvcd\",\"query\":\"lywkhookj\",\"queryResult\":\"zxezriwgo\",\"updated\":\"2021-06-22T15:37:52Z\",\"updatedBy\":{\"email\":\"qksa\",\"name\":\"pxjhcitibe\",\"objectId\":\"e2f75d47-133c-4489-ade8-6c17c589d96c\"},\"incidentInfo\":{\"incidentId\":\"fp\",\"severity\":\"Medium\",\"title\":\"hl\",\"relationName\":\"cqklpmvzpire\"},\"additionalData\":{\"e\":\"dataaqgomlbmfggeok\"},\"friendlyName\":\"jjl\"},\"id\":\"yeahhhutpulnrfcq\",\"name\":\"fmcihpinowr\",\"type\":\"rjpxptch\"},{\"kind\":\"Bookmark\",\"properties\":{\"created\":\"2021-04-02T00:19:04Z\",\"createdBy\":{\"email\":\"dqimlgbbfjm\",\"name\":\"jvxlhmpmh\",\"objectId\":\"590a857f-2610-4ba0-a9d7-cb3fd1225177\"},\"displayName\":\"t\",\"eventTime\":\"2021-10-24T20:38:42Z\",\"labels\":[\"e\",\"fytlsnl\",\"wmcm\"],\"notes\":\"ixuanccqvjfdgfq\",\"query\":\"mquxpjhcfaaradci\",\"queryResult\":\"mufzgugrbl\",\"updated\":\"2021-11-25T11:50:52Z\",\"updatedBy\":{\"email\":\"ssnqe\",\"name\":\"otbptg\",\"objectId\":\"429f4ec9-b1de-431a-98d1-d74cef1d86a3\"},\"incidentInfo\":{\"incidentId\":\"nxxrwqfmd\",\"severity\":\"Informational\",\"title\":\"tamqwzmnobf\",\"relationName\":\"wpsibxovuqoq\"},\"additionalData\":{\"gy\":\"datablndycl\",\"wnalbadpis\":\"datavtqnzjcyqqzhembt\"},\"friendlyName\":\"leajvmvvlooub\"},\"id\":\"xipjeopskgocjom\",\"name\":\"upfazusj\",\"type\":\"dhuslgdwz\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityInsightsManager manager = SecurityInsightsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        IncidentBookmarkList response = manager.incidents()
            .listBookmarksWithResponse("w", "lscgsmepnq", "xgvohdbthhxmoe", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals(OffsetDateTime.parse("2021-05-27T12:54:19Z"), response.value().get(0).created());
        Assertions.assertEquals(UUID.fromString("e07c9525-a4b9-4b9d-9c3d-a8a13ae63927"),
            response.value().get(0).createdBy().objectId());
        Assertions.assertEquals("bvrhh", response.value().get(0).displayName());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-04T13:59:06Z"), response.value().get(0).eventTime());
        Assertions.assertEquals("xnwfmzvzt", response.value().get(0).labels().get(0));
        Assertions.assertEquals("umyjsvcd", response.value().get(0).notes());
        Assertions.assertEquals("lywkhookj", response.value().get(0).query());
        Assertions.assertEquals("zxezriwgo", response.value().get(0).queryResult());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-22T15:37:52Z"), response.value().get(0).updated());
        Assertions.assertEquals(UUID.fromString("e2f75d47-133c-4489-ade8-6c17c589d96c"),
            response.value().get(0).updatedBy().objectId());
        Assertions.assertEquals("fp", response.value().get(0).incidentInfo().incidentId());
        Assertions.assertEquals(IncidentSeverity.MEDIUM, response.value().get(0).incidentInfo().severity());
        Assertions.assertEquals("hl", response.value().get(0).incidentInfo().title());
        Assertions.assertEquals("cqklpmvzpire", response.value().get(0).incidentInfo().relationName());
    }
}
