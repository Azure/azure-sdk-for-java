// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.securityinsights.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.securityinsights.models.AlertDetail;
import com.azure.resourcemanager.securityinsights.models.EntityMappingType;
import com.azure.resourcemanager.securityinsights.models.GroupingConfiguration;
import com.azure.resourcemanager.securityinsights.models.MatchingMethod;
import java.time.Duration;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class GroupingConfigurationTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        GroupingConfiguration model = BinaryData.fromString(
            "{\"enabled\":false,\"reopenClosedIncident\":false,\"lookbackDuration\":\"PT87H26M18S\",\"matchingMethod\":\"AnyAlert\",\"groupByEntities\":[\"SubmissionMail\"],\"groupByAlertDetails\":[\"DisplayName\",\"Severity\",\"DisplayName\",\"Severity\"],\"groupByCustomDetails\":[\"kbudbtwaokb\",\"vlyttaaknwfrke\"]}")
            .toObject(GroupingConfiguration.class);
        Assertions.assertEquals(false, model.enabled());
        Assertions.assertEquals(false, model.reopenClosedIncident());
        Assertions.assertEquals(Duration.parse("PT87H26M18S"), model.lookbackDuration());
        Assertions.assertEquals(MatchingMethod.ANY_ALERT, model.matchingMethod());
        Assertions.assertEquals(EntityMappingType.SUBMISSION_MAIL, model.groupByEntities().get(0));
        Assertions.assertEquals(AlertDetail.DISPLAY_NAME, model.groupByAlertDetails().get(0));
        Assertions.assertEquals("kbudbtwaokb", model.groupByCustomDetails().get(0));
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        GroupingConfiguration model = new GroupingConfiguration().withEnabled(false)
            .withReopenClosedIncident(false)
            .withLookbackDuration(Duration.parse("PT87H26M18S"))
            .withMatchingMethod(MatchingMethod.ANY_ALERT)
            .withGroupByEntities(Arrays.asList(EntityMappingType.SUBMISSION_MAIL))
            .withGroupByAlertDetails(Arrays.asList(AlertDetail.DISPLAY_NAME, AlertDetail.SEVERITY,
                AlertDetail.DISPLAY_NAME, AlertDetail.SEVERITY))
            .withGroupByCustomDetails(Arrays.asList("kbudbtwaokb", "vlyttaaknwfrke"));
        model = BinaryData.fromObject(model).toObject(GroupingConfiguration.class);
        Assertions.assertEquals(false, model.enabled());
        Assertions.assertEquals(false, model.reopenClosedIncident());
        Assertions.assertEquals(Duration.parse("PT87H26M18S"), model.lookbackDuration());
        Assertions.assertEquals(MatchingMethod.ANY_ALERT, model.matchingMethod());
        Assertions.assertEquals(EntityMappingType.SUBMISSION_MAIL, model.groupByEntities().get(0));
        Assertions.assertEquals(AlertDetail.DISPLAY_NAME, model.groupByAlertDetails().get(0));
        Assertions.assertEquals("kbudbtwaokb", model.groupByCustomDetails().get(0));
    }
}
