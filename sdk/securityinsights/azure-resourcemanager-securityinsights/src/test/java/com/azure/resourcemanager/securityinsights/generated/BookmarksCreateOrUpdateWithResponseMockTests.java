// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.securityinsights.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.securityinsights.SecurityInsightsManager;
import com.azure.resourcemanager.securityinsights.models.Bookmark;
import com.azure.resourcemanager.securityinsights.models.IncidentInfo;
import com.azure.resourcemanager.securityinsights.models.IncidentSeverity;
import com.azure.resourcemanager.securityinsights.models.UserInfo;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class BookmarksCreateOrUpdateWithResponseMockTests {
    @Test
    public void testCreateOrUpdateWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"created\":\"2021-06-02T10:49:39Z\",\"createdBy\":{\"email\":\"jj\",\"name\":\"ybwfdbkjb\",\"objectId\":\"7c87954f-318a-4af8-a0a9-ee6bfdd4d195\"},\"displayName\":\"ensvkzykjtj\",\"labels\":[\"xfwush\",\"dpkupnqrmgjf\",\"pkuwxeoioj\"],\"notes\":\"zfav\",\"query\":\"jzwfb\",\"queryResult\":\"aykmmf\",\"updated\":\"2021-10-29T00:02:40Z\",\"updatedBy\":{\"email\":\"xrzxmdewsrsxkrp\",\"name\":\"jazejwwviyoyp\",\"objectId\":\"aa116b26-98f9-41fc-8b37-b5ba791f653a\"},\"eventTime\":\"2021-03-21T06:31:37Z\",\"queryStartTime\":\"2021-02-25T20:04:53Z\",\"queryEndTime\":\"2021-09-20T22:56:33Z\",\"incidentInfo\":{\"incidentId\":\"sqwjhqkbiwetpozy\",\"severity\":\"Informational\",\"title\":\"qyhgf\",\"relationName\":\"tzlexbs\"}},\"etag\":\"e\",\"id\":\"no\",\"name\":\"pziuwfbzkkdtnh\",\"type\":\"sycljsel\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityInsightsManager manager = SecurityInsightsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        Bookmark response = manager.bookmarks()
            .define("a")
            .withExistingWorkspace("qyv", "eh")
            .withEtag("eslk")
            .withCreated(OffsetDateTime.parse("2021-11-16T18:17:43Z"))
            .withCreatedBy(new UserInfo().withObjectId(UUID.fromString("622c50a3-4b55-4566-a757-18bded4e2909")))
            .withDisplayName("imipskdyzatvfuz")
            .withLabels(Arrays.asList("tjvv", "uxwigsyeipqdsm", "tgrqgdgkkile", "lkcsmknhwtbbae"))
            .withNotes("rvvmqfloygb")
            .withQuery("gwumgxdgdhpa")
            .withQueryResult("dexjddvjs")
            .withUpdated(OffsetDateTime.parse("2021-10-15T10:21:04Z"))
            .withUpdatedBy(new UserInfo().withObjectId(UUID.fromString("2c0be9fc-ea00-4fe5-9b7f-028f20d18d5c")))
            .withEventTime(OffsetDateTime.parse("2021-10-07T17:44:14Z"))
            .withQueryStartTime(OffsetDateTime.parse("2021-05-27T02:17:12Z"))
            .withQueryEndTime(OffsetDateTime.parse("2021-06-27T11:48:43Z"))
            .withIncidentInfo(new IncidentInfo().withIncidentId("hv")
                .withSeverity(IncidentSeverity.INFORMATIONAL)
                .withTitle("ek")
                .withRelationName("eksnbksdqhjvyk"))
            .create();

        Assertions.assertEquals("e", response.etag());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-02T10:49:39Z"), response.created());
        Assertions.assertEquals(UUID.fromString("7c87954f-318a-4af8-a0a9-ee6bfdd4d195"),
            response.createdBy().objectId());
        Assertions.assertEquals("ensvkzykjtj", response.displayName());
        Assertions.assertEquals("xfwush", response.labels().get(0));
        Assertions.assertEquals("zfav", response.notes());
        Assertions.assertEquals("jzwfb", response.query());
        Assertions.assertEquals("aykmmf", response.queryResult());
        Assertions.assertEquals(OffsetDateTime.parse("2021-10-29T00:02:40Z"), response.updated());
        Assertions.assertEquals(UUID.fromString("aa116b26-98f9-41fc-8b37-b5ba791f653a"),
            response.updatedBy().objectId());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-21T06:31:37Z"), response.eventTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-02-25T20:04:53Z"), response.queryStartTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-20T22:56:33Z"), response.queryEndTime());
        Assertions.assertEquals("sqwjhqkbiwetpozy", response.incidentInfo().incidentId());
        Assertions.assertEquals(IncidentSeverity.INFORMATIONAL, response.incidentInfo().severity());
        Assertions.assertEquals("qyhgf", response.incidentInfo().title());
        Assertions.assertEquals("tzlexbs", response.incidentInfo().relationName());
    }
}
