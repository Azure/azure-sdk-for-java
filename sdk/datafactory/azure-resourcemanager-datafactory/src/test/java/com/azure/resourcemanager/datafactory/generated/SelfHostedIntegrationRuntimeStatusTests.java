// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.datafactory.generated;

import com.azure.core.util.BinaryData;
import com.azure.core.util.serializer.JacksonAdapter;
import com.azure.core.util.serializer.SerializerEncoding;
import com.azure.resourcemanager.datafactory.fluent.models.SelfHostedIntegrationRuntimeNodeInner;
import com.azure.resourcemanager.datafactory.models.LinkedIntegrationRuntime;
import com.azure.resourcemanager.datafactory.models.SelfHostedIntegrationRuntimeStatus;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

public final class SelfHostedIntegrationRuntimeStatusTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        SelfHostedIntegrationRuntimeStatus model = BinaryData.fromString(
            "{\"type\":\"SelfHosted\",\"typeProperties\":{\"createTime\":\"2021-10-19T21:10:31Z\",\"taskQueueId\":\"fsssmy\",\"internalChannelEncryption\":\"NotEncrypted\",\"version\":\"rhbsdgktlu\",\"nodes\":[{\"nodeName\":\"gpqc\",\"machineName\":\"nobqysbeespq\",\"hostServiceUri\":\"vae\",\"status\":\"InitializeFailed\",\"capabilities\":{\"ricv\":\"fzsaut\",\"zunhyyqxckdl\":\"ofenin\",\"ncbesfvijnu\":\"jpisrdnow\"},\"versionStatus\":\"fiiytqxewjsyu\",\"version\":\"zlghkvoxdp\",\"registerTime\":\"2021-05-27T22:13:23Z\",\"lastConnectTime\":\"2021-12-03T10:30:18Z\",\"expiryTime\":\"2021-08-14T12:28:51Z\",\"lastStartTime\":\"2021-09-05T12:26:50Z\",\"lastStopTime\":\"2021-10-25T10:44:43Z\",\"lastUpdateResult\":\"Succeed\",\"lastStartUpdateTime\":\"2021-10-18T15:20:22Z\",\"lastEndUpdateTime\":\"2021-02-18T11:20:26Z\",\"isActiveDispatcher\":true,\"concurrentJobsLimit\":1098696529,\"maxConcurrentJobs\":1386786245,\"\":{\"pwxnblzrmi\":\"datanpwdwdmuvyakrb\"}},{\"nodeName\":\"othyfjbp\",\"machineName\":\"dhfrvsi\",\"hostServiceUri\":\"wgnpcjnia\",\"status\":\"NeedRegistration\",\"capabilities\":{\"uuogdkpnm\":\"jjioq\",\"xqucnbgibkls\":\"rfuqjdeb\",\"evbfvxmtsmgkret\":\"wdkouzyvi\",\"ceulbyz\":\"ny\"},\"versionStatus\":\"xsygaoymyckd\",\"version\":\"brxbmljrjyfjl\",\"registerTime\":\"2021-08-29T14:58:42Z\",\"lastConnectTime\":\"2021-10-18T07:17:24Z\",\"expiryTime\":\"2021-03-14T00:44:48Z\",\"lastStartTime\":\"2021-04-09T05:29:06Z\",\"lastStopTime\":\"2021-08-10T05:40:55Z\",\"lastUpdateResult\":\"Succeed\",\"lastStartUpdateTime\":\"2021-08-17T06:45Z\",\"lastEndUpdateTime\":\"2021-02-26T23:11:52Z\",\"isActiveDispatcher\":true,\"concurrentJobsLimit\":1855197747,\"maxConcurrentJobs\":582722035,\"\":{\"csotwqtkpdcdefqo\":\"datai\",\"nddaxaogsk\":\"datarmgm\",\"fjcvmkkbpgdiwd\":\"datacmmmbipysehyybo\",\"cehzrtrgpd\":\"datayhdtiembrwqwvc\"}},{\"nodeName\":\"t\",\"machineName\":\"hyfwjfqktuzr\",\"hostServiceUri\":\"pecsdk\",\"status\":\"Online\",\"capabilities\":{\"hjlugcupcyfrhoo\":\"vttqjntvhnjp\",\"vuxyeeafdxsuwly\":\"v\",\"hj\":\"xzhgbspdx\"},\"versionStatus\":\"xkzxqomzdfa\",\"version\":\"qve\",\"registerTime\":\"2021-04-19T01:11:47Z\",\"lastConnectTime\":\"2021-01-05T03:49:30Z\",\"expiryTime\":\"2021-12-04T14:35:50Z\",\"lastStartTime\":\"2021-09-24T04:45:33Z\",\"lastStopTime\":\"2021-08-21T16:12:51Z\",\"lastUpdateResult\":\"Succeed\",\"lastStartUpdateTime\":\"2021-01-08T15:40:51Z\",\"lastEndUpdateTime\":\"2021-07-23T22:08:33Z\",\"isActiveDispatcher\":true,\"concurrentJobsLimit\":1876720469,\"maxConcurrentJobs\":988799296,\"\":{\"wqlbxmynslcvyn\":\"dataxapew\",\"czroddc\":\"datavwttts\",\"k\":\"dataqimodnbjmj\",\"fja\":\"databucmzkqt\"}}],\"scheduledUpdateDate\":\"2021-05-09T21:24:46Z\",\"updateDelayOffset\":\"vcebgo\",\"localTimeZoneOffset\":\"fyplavbvs\",\"capabilities\":{\"teikf\":\"dsoqwexiebnz\",\"etqj\":\"jqdfadgywyla\"},\"serviceUrls\":[\"ys\"],\"autoUpdate\":\"Off\",\"versionStatus\":\"tpbtkogfggylyzol\",\"links\":[{\"name\":\"gseqjte\",\"subscriptionId\":\"xirmgiswr\",\"dataFactoryName\":\"bpvsobamtarir\",\"dataFactoryLocation\":\"dgvqoflzukegougx\",\"createTime\":\"2021-07-17T07:20:10Z\"},{\"name\":\"mzqsx\",\"subscriptionId\":\"mnxrxkulytivviyq\",\"dataFactoryName\":\"bxxyfozbgodywxj\",\"dataFactoryLocation\":\"frxvlusedpnkz\",\"createTime\":\"2021-10-16T13:48:56Z\"},{\"name\":\"xtm\",\"subscriptionId\":\"ycv\",\"dataFactoryName\":\"axjdqvvyje\",\"dataFactoryLocation\":\"vnfjng\",\"createTime\":\"2021-11-29T07:11:20Z\"}],\"pushedVersion\":\"dvhbgtuhwhxunwe\",\"latestVersion\":\"p\",\"autoUpdateETA\":\"2021-02-07T17:03:10Z\",\"selfContainedInteractiveAuthoringEnabled\":false},\"dataFactoryName\":\"gzrxxdusebkcfet\",\"state\":\"Limited\",\"\":{\"uiqr\":\"dataerma\",\"ftubqwxvs\":\"datan\"}}")
            .toObject(SelfHostedIntegrationRuntimeStatus.class);
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        SelfHostedIntegrationRuntimeStatus model = new SelfHostedIntegrationRuntimeStatus()
            .withNodes(Arrays.asList(
                new SelfHostedIntegrationRuntimeNodeInner().withAdditionalProperties(mapOf("nodeName", "gpqc",
                    "lastStartUpdateTime", "2021-10-18T15:20:22Z", "lastConnectTime", "2021-12-03T10:30:18Z",
                    "capabilities",
                    JacksonAdapter.createDefaultSerializerAdapter()
                        .deserialize(
                            "{\"ricv\":\"fzsaut\",\"zunhyyqxckdl\":\"ofenin\",\"ncbesfvijnu\":\"jpisrdnow\"}",
                            Object.class, SerializerEncoding.JSON),
                    "hostServiceUri", "vae", "registerTime", "2021-05-27T22:13:23Z", "maxConcurrentJobs", 1386786245,
                    "lastStopTime", "2021-10-25T10:44:43Z", "version", "zlghkvoxdp", "machineName", "nobqysbeespq",
                    "versionStatus", "fiiytqxewjsyu", "concurrentJobsLimit", 1098696529, "lastEndUpdateTime",
                    "2021-02-18T11:20:26Z", "expiryTime", "2021-08-14T12:28:51Z", "lastStartTime",
                    "2021-09-05T12:26:50Z", "lastUpdateResult", "Succeed", "isActiveDispatcher", true, "status",
                    "InitializeFailed")),
                new SelfHostedIntegrationRuntimeNodeInner().withAdditionalProperties(mapOf("nodeName", "othyfjbp",
                    "lastStartUpdateTime", "2021-08-17T06:45Z", "lastConnectTime", "2021-10-18T07:17:24Z",
                    "capabilities",
                    JacksonAdapter.createDefaultSerializerAdapter()
                        .deserialize(
                            "{\"uuogdkpnm\":\"jjioq\",\"xqucnbgibkls\":\"rfuqjdeb\",\"evbfvxmtsmgkret\":\"wdkouzyvi\",\"ceulbyz\":\"ny\"}",
                            Object.class, SerializerEncoding.JSON),
                    "hostServiceUri", "wgnpcjnia", "registerTime", "2021-08-29T14:58:42Z", "maxConcurrentJobs",
                    582722035, "lastStopTime", "2021-08-10T05:40:55Z", "version", "brxbmljrjyfjl", "machineName",
                    "dhfrvsi", "versionStatus", "xsygaoymyckd", "concurrentJobsLimit", 1855197747, "lastEndUpdateTime",
                    "2021-02-26T23:11:52Z", "expiryTime", "2021-03-14T00:44:48Z", "lastStartTime",
                    "2021-04-09T05:29:06Z", "lastUpdateResult", "Succeed", "isActiveDispatcher", true, "status",
                    "NeedRegistration")),
                new SelfHostedIntegrationRuntimeNodeInner()
                    .withAdditionalProperties(mapOf("nodeName", "t", "lastStartUpdateTime", "2021-01-08T15:40:51Z",
                        "lastConnectTime", "2021-01-05T03:49:30Z", "capabilities",
                        JacksonAdapter.createDefaultSerializerAdapter()
                            .deserialize(
                                "{\"hjlugcupcyfrhoo\":\"vttqjntvhnjp\",\"vuxyeeafdxsuwly\":\"v\",\"hj\":\"xzhgbspdx\"}",
                                Object.class, SerializerEncoding.JSON),
                        "hostServiceUri", "pecsdk", "registerTime", "2021-04-19T01:11:47Z", "maxConcurrentJobs",
                        988799296, "lastStopTime", "2021-08-21T16:12:51Z", "version", "qve", "machineName",
                        "hyfwjfqktuzr", "versionStatus", "xkzxqomzdfa", "concurrentJobsLimit", 1876720469,
                        "lastEndUpdateTime", "2021-07-23T22:08:33Z", "expiryTime", "2021-12-04T14:35:50Z",
                        "lastStartTime", "2021-09-24T04:45:33Z", "lastUpdateResult", "Succeed", "isActiveDispatcher",
                        true, "status", "Online"))))
            .withLinks(Arrays.asList(new LinkedIntegrationRuntime(), new LinkedIntegrationRuntime(),
                new LinkedIntegrationRuntime()));
        model = BinaryData.fromObject(model).toObject(SelfHostedIntegrationRuntimeStatus.class);
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
