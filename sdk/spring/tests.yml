trigger: none

extends:
  template: /eng/pipelines/templates/stages/1es-redirect.yml
  parameters:
    stages:
      - template: /sdk/spring/pipeline/tests-single-azure-service-integration-template.yml
        parameters:
          TestName: IT_AppConfig
          TestClassPackages: com.azure.spring.cloud.integration.tests.appconfiguration.*
          TestResourceDirectories:
            - spring/spring-cloud-azure-integration-tests/test-resources/appconfiguration
      - template: /sdk/spring/pipeline/tests-single-azure-service-integration-template.yml
        parameters:
          TestName: IT_Cosmos
          TestClassPackages: com.azure.spring.cloud.integration.tests.cosmos.*
          TestResourceDirectories:
            - spring/spring-cloud-azure-integration-tests/test-resources/cosmos
      - template: /sdk/spring/pipeline/tests-supported-spring-versions-template.yml
        parameters:
          TestName: AppConfig_IT
          TestResourceDirectories:
            - spring/spring-cloud-azure-integration-test-appconfiguration-config
          Artifacts:
            - name: spring-cloud-azure-integration-test-appconfiguration-config
              groupId: com.azure.spring
              safeName: springcloudazureintegrationtestappconfigurationconfig
      - template: /sdk/spring/pipeline/tests-supported-spring-versions-template.yml
        parameters:
          MatrixConfigs:
            - Name: Cosmos_IT
              Path: sdk/spring/pipeline/cosmos-integration-matrix-compatible.json
              Selection: all
              GenerateVMJobs: true
              NonSparseParameters:
                - SPRING_CLOUD_AZURE_TEST_SUPPORTED_SPRING_BOOT_VERSION
          TestResourceDirectories:
            - spring/spring-cloud-azure-integration-tests/test-resources/cosmos-spring
          Artifacts:
            - name: azure-spring-data-cosmos
              groupId: com.azure
              safeName: azurespringdatacosmos
          TimeoutInMinutes: 90
          TestName: Spring_Data_Cosmos_Integration
          TestOptions: '$(ProfileFlag)'
