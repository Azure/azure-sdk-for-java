trigger: none
pr: none

variables:
  - template: ../../eng/pipelines/templates/variables/globals.yml

stages:
  - stage: "spring boot compatibility tests"
    - template: ../../eng/common/pipelines/templates/jobs/archetype-sdk-tests-generate.yml
      parameters:
        AdditionalParameters:
            ServiceDirectory: spring
        MatrixConfigs:
          - Name: spring_boot_supported_version_tests
              Path: sdk/spring/supported-version-matrix.json
              Selection: sparse
              NonSparseParameters:
                - SPRING_CLOUD_AZURE_TEST_SUPPORTED_SPRING_BOOT_VERSION
              GenerateVMJobs: true
#  - stage:
#    jobs:
#      - job:
#        pool:
#          vmImage: "ubuntu-latest"
#        steps:
#          - script: |
#              pip install termcolor
#            displayName: 'python module install'
#          - script: |
#              python ./sdk/spring/scripts/compatibility_add_dependencymanagement.py -b 2.6.6 -c 2021.0.1
#            displayName: 'add dependency management'
#          - script: |
#              python ./sdk/spring/scripts/compatibility_deleted_version.py
#            displayName: 'remove version'
#          - task: Maven@3
#            displayName: 'Run tests'
#            inputs:
#              mavenPomFile: sdk/spring/pom.xml
#              mavenOptions: '$(MemoryOptions)'
#              javaHomeOption: 'JDKVersion'
#              jdkVersionOption: $(JavaTestVersion)
#              jdkArchitectureOption: 'x64'
#              goals: 'clean test -Pdev'
#  - template: /eng/pipelines/templates/stages/archetype-sdk-tests.yml
#    parameters:
#      ServiceDirectory: spring
#      TestName: 'spring_boot_supported_versions'
#      MatrixConfigs:
#        - Name: spring_boot_supported_version_tests
#          Path: sdk/spring/supported-version-matrix.json
#          Selection: sparse
#          NonSparseParameters:
#            - SPRING_CLOUD_AZURE_TEST_SUPPORTED_SPRING_BOOT_VERSION
#          GenerateVMJobs: true
#      Artifacts:
#        - name: spring-cloud-azure-autoconfigure
#          groupId: com.azure.spring
#          safeName: springcloudazureautoconfigure
