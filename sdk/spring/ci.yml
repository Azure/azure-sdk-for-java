# NOTE: Please refer to https://aka.ms/azsdk/engsys/ci-yaml before editing this file.

trigger:
  branches:
    include:
      - main
      - feature/*
      - hotfix/*
      - release/*
  paths:
    include:
      - sdk/spring/
    exclude:
      - sdk/spring/pom.xml
      - sdk/spring/azure-spring-boot-test-application/pom.xml
      - sdk/spring/azure-spring-boot-test-core/pom.xml
      - sdk/spring/azure-spring-boot-test-cosmos/pom.xml
      - sdk/spring/azure-spring-boot-test-keyvault-certificate/pom.xml
      - sdk/spring/azure-spring-boot-test-keyvault/pom.xml
      - sdk/spring/azure-spring-boot-test-parent/pom.xml
      - sdk/spring/azure-spring-boot-test-servicebus-jms/pom.xml
      - sdk/spring/azure-spring-boot-test-storage/pom.xml
      - sdk/spring/spring-messaging-azure/pom.xml
      - sdk/spring/spring-messaging-azure-eventhubs/pom.xml
      - sdk/spring/spring-messaging-azure-servicebus/pom.xml
      - sdk/spring/spring-messaging-azure-storage-queue/pom.xml
      - sdk/spring/spring-integration-azure-core/pom.xml
      - sdk/spring/spring-integration-azure-eventhubs/pom.xml
      - sdk/spring/spring-integration-azure-servicebus/pom.xml
      - sdk/spring/spring-integration-azure-storage-queue/pom.xml
      - sdk/spring/spring-cloud-azure-core/pom.xml
      - sdk/spring/spring-cloud-azure-resourcemanager/pom.xml
      - sdk/spring/spring-cloud-azure-actuator/pom.xml
      - sdk/spring/spring-cloud-azure-actuator-autoconfigure/pom.xml
      - sdk/spring/spring-cloud-azure-autoconfigure/pom.xml
      - sdk/spring/spring-cloud-azure-starter-actuator/pom.xml
      - sdk/spring/spring-cloud-azure-starter-appconfiguration/pom.xml
      - sdk/spring/spring-cloud-azure-starter-cosmos/pom.xml
      - sdk/spring/spring-cloud-azure-starter-data-cosmos/pom.xml
      - sdk/spring/spring-cloud-azure-starter-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-starter-keyvault-certificates/pom.xml
      - sdk/spring/spring-cloud-azure-starter-keyvault-secrets/pom.xml
      - sdk/spring/spring-cloud-azure-starter-servicebus-jms/pom.xml
      - sdk/spring/spring-cloud-azure-starter-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-starter-storage-blob/pom.xml
      - sdk/spring/spring-cloud-azure-starter-storage-file-share/pom.xml
      - sdk/spring/spring-cloud-azure-starter-storage-queue/pom.xml
      - sdk/spring/spring-cloud-azure-starter-integration-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-starter-integration-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-starter-integration-storage-queue/pom.xml
      - sdk/spring/spring-cloud-azure-starter-stream-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-starter-stream-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-starter/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-eventhubs-core/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-servicebus-core/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-test/pom.xml
      - sdk/spring/spring-cloud-azure-test-servicebus-binder/pom.xml

pr:
  branches:
    include:
      - main
      - feature/*
      - hotfix/*
      - release/*
  paths:
    include:
      - sdk/spring/
    exclude:
      - sdk/spring/pom.xml
      - sdk/spring/azure-spring-boot-test-application/pom.xml
      - sdk/spring/azure-spring-boot-test-core/pom.xml
      - sdk/spring/azure-spring-boot-test-cosmos/pom.xml
      - sdk/spring/azure-spring-boot-test-keyvault-certificate/pom.xml
      - sdk/spring/azure-spring-boot-test-keyvault/pom.xml
      - sdk/spring/azure-spring-boot-test-parent/pom.xml
      - sdk/spring/azure-spring-boot-test-servicebus-jms/pom.xml
      - sdk/spring/azure-spring-boot-test-storage/pom.xml
      - sdk/spring/spring-messaging-azure/pom.xml
      - sdk/spring/spring-messaging-azure-eventhubs/pom.xml
      - sdk/spring/spring-messaging-azure-servicebus/pom.xml
      - sdk/spring/spring-messaging-azure-storage-queue/pom.xml
      - sdk/spring/spring-integration-azure-core/pom.xml
      - sdk/spring/spring-integration-azure-eventhubs/pom.xml
      - sdk/spring/spring-integration-azure-servicebus/pom.xml
      - sdk/spring/spring-integration-azure-storage-queue/pom.xml
      - sdk/spring/spring-cloud-azure-core/pom.xml
      - sdk/spring/spring-cloud-azure-resourcemanager/pom.xml
      - sdk/spring/spring-cloud-azure-actuator/pom.xml
      - sdk/spring/spring-cloud-azure-actuator-autoconfigure/pom.xml
      - sdk/spring/spring-cloud-azure-autoconfigure/pom.xml
      - sdk/spring/spring-cloud-azure-starter-actuator/pom.xml
      - sdk/spring/spring-cloud-azure-starter-appconfiguration/pom.xml
      - sdk/spring/spring-cloud-azure-starter-cosmos/pom.xml
      - sdk/spring/spring-cloud-azure-starter-data-cosmos/pom.xml
      - sdk/spring/spring-cloud-azure-starter-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-starter-keyvault-certificates/pom.xml
      - sdk/spring/spring-cloud-azure-starter-keyvault-secrets/pom.xml
      - sdk/spring/spring-cloud-azure-starter-servicebus-jms/pom.xml
      - sdk/spring/spring-cloud-azure-starter-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-starter-storage-blob/pom.xml
      - sdk/spring/spring-cloud-azure-starter-storage-file-share/pom.xml
      - sdk/spring/spring-cloud-azure-starter-storage-queue/pom.xml
      - sdk/spring/spring-cloud-azure-starter-integration-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-starter-integration-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-starter-integration-storage-queue/pom.xml
      - sdk/spring/spring-cloud-azure-starter-stream-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-starter-stream-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-starter/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-eventhubs-core/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-eventhubs/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-servicebus-core/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-servicebus/pom.xml
      - sdk/spring/spring-cloud-azure-stream-binder-test/pom.xml
      - sdk/spring/spring-cloud-azure-test-servicebus-binder/pom.xml


stages:
    - template: spring-ci-template.yml
    - script: |
          python .\sdk\spring\scripts\update_versions.py --ut external_dependency
    - template: spring-ci-template.yml


