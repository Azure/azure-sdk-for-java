// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.billing.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.billing.BillingManager;
import com.azure.resourcemanager.billing.models.AutoRenew;
import com.azure.resourcemanager.billing.models.BillingSubscription;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class BillingSubscriptionsGetByBillingProfileWithResponseMockTests {
    @Test
    public void testGetByBillingProfileWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"autoRenew\":\"On\",\"beneficiaryTenantId\":\"owgvm\",\"beneficiary\":{\"tenantId\":\"o\",\"objectId\":\"dhkoexbrhgn\"},\"billingFrequency\":\"ajwscmneev\",\"billingProfileId\":\"mqeumzyyhmgqa\",\"billingPolicies\":{\"bgbzgfhzdzahk\":\"jqutx\",\"whz\":\"xvcbicfecthotbk\",\"jdpayx\":\"pxjvtwk\",\"qztjfkgb\":\"pqiwuzr\"},\"billingProfileDisplayName\":\"qjobsynnen\",\"billingProfileName\":\"njqhdheosx\",\"consumptionCostCenter\":\"fudmpfhwyp\",\"customerId\":\"tjtntc\",\"customerDisplayName\":\"pdbbgl\",\"customerName\":\"cctokfspvj\",\"displayName\":\"spkvrmp\",\"enrollmentAccountId\":\"typtwjw\",\"enrollmentAccountDisplayName\":\"yeohgmcmdjmv\",\"enrollmentAccountSubscriptionDetails\":{\"enrollmentAccountStartDate\":\"2021-10-21T15:19:38Z\",\"subscriptionEnrollmentAccountStatus\":\"Inactive\"},\"invoiceSectionId\":\"slvfzzioxbgomv\",\"invoiceSectionDisplayName\":\"prpmo\",\"invoiceSectionName\":\"nw\",\"lastMonthCharges\":{\"currency\":\"uoxixtxxxajseh\",\"value\":40.404976},\"monthToDateCharges\":{\"currency\":\"nkyjfa\",\"value\":91.48125},\"nextBillingCycleDetails\":{\"billingFrequency\":\"ogzehczbniv\"},\"offerId\":\"hsxvppkjeal\",\"productCategory\":\"bewhotvbmyzuqf\",\"productType\":\"dktrjtoqszh\",\"productTypeId\":\"ngjn\",\"purchaseDate\":\"2021-09-06T15:53:10Z\",\"quantity\":5250248694607436441,\"reseller\":{\"resellerId\":\"f\",\"description\":\"dod\"},\"renewalTermDetails\":{\"billingFrequency\":\"yipgkmjt\",\"productId\":\"zmdzesimeft\",\"productTypeId\":\"rfzjlflzagvdavab\",\"skuId\":\"efcor\",\"termDuration\":\"idaebezn\",\"quantity\":465371594112802933,\"termEndDate\":\"2021-11-07T05:52:59Z\"},\"skuId\":\"jwiylciobb\",\"skuDescription\":\"ws\",\"systemOverrides\":{\"cancellation\":\"NotAllowed\",\"cancellationAllowedEndDate\":\"2021-01-12T21:30:41Z\"},\"resourceUri\":\"cuuuexsmnteevfg\",\"termDuration\":\"fezraqs\",\"termStartDate\":\"2021-11-12T15:34:05Z\",\"termEndDate\":\"2021-01-01T05:53:38Z\",\"provisioningTenantId\":\"gxqfkyr\",\"status\":\"Expiring\",\"operationStatus\":\"None\",\"provisioningState\":\"Failed\",\"subscriptionId\":\"w\",\"suspensionReasons\":[\"sspfegaoksd\",\"kkraj\",\"yuklxkel\"],\"suspensionReasonDetails\":[{\"effectiveDate\":\"2021-11-04T00:05:12Z\",\"reason\":\"SpendingLimitReached\"},{\"effectiveDate\":\"2021-07-05T17:12:33Z\",\"reason\":\"Other\"}]},\"tags\":{\"rvqrwwbdrwroqk\":\"gsingmhpavsfg\",\"kyu\":\"jnzpqhqqsa\"},\"id\":\"ameaasjqen\",\"name\":\"ekzazvgeytlplsl\",\"type\":\"cv\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        BillingManager manager = BillingManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        BillingSubscription response = manager.billingSubscriptions()
            .getByBillingProfileWithResponse("ksr", "mspppoeszthjt", "yjskdiylg", "zuqix",
                com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("gsingmhpavsfg", response.tags().get("rvqrwwbdrwroqk"));
        Assertions.assertEquals(AutoRenew.ON, response.autoRenew());
        Assertions.assertEquals("owgvm", response.beneficiaryTenantId());
        Assertions.assertEquals("o", response.beneficiary().tenantId());
        Assertions.assertEquals("dhkoexbrhgn", response.beneficiary().objectId());
        Assertions.assertEquals("ajwscmneev", response.billingFrequency());
        Assertions.assertEquals("mqeumzyyhmgqa", response.billingProfileId());
        Assertions.assertEquals("fudmpfhwyp", response.consumptionCostCenter());
        Assertions.assertEquals("tjtntc", response.customerId());
        Assertions.assertEquals("spkvrmp", response.displayName());
        Assertions.assertEquals("slvfzzioxbgomv", response.invoiceSectionId());
        Assertions.assertEquals("ngjn", response.productTypeId());
        Assertions.assertEquals(5250248694607436441L, response.quantity());
        Assertions.assertEquals("jwiylciobb", response.skuId());
        Assertions.assertEquals("fezraqs", response.termDuration());
        Assertions.assertEquals("gxqfkyr", response.provisioningTenantId());
    }
}
