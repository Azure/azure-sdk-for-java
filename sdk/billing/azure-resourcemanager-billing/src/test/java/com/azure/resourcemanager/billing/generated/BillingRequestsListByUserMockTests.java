// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.billing.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.billing.BillingManager;
import com.azure.resourcemanager.billing.models.BillingRequest;
import com.azure.resourcemanager.billing.models.BillingRequestStatus;
import com.azure.resourcemanager.billing.models.BillingRequestType;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class BillingRequestsListByUserMockTests {
    @Test
    public void testListByUser() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"provisioningState\":\"ConfirmedBilling\",\"additionalInformation\":{\"pg\":\"ssf\",\"jymjnhjluq\":\"kncjmgvsnvbtqdxf\",\"ub\":\"lbsu\"},\"reviewedBy\":{\"tenantId\":\"kdlhzwhc\",\"objectId\":\"vbosjj\",\"upn\":\"izh\"},\"reviewalDate\":\"2021-03-26T07:56:17Z\",\"billingAccountId\":\"yayt\",\"billingAccountName\":\"ly\",\"billingAccountDisplayName\":\"cgniuarlc\",\"billingAccountPrimaryBillingTenantId\":\"wgsx\",\"billingProfileId\":\"iocwdgujj\",\"billingProfileName\":\"fgrzx\",\"billingProfileDisplayName\":\"rcb\",\"createdBy\":{\"tenantId\":\"fzqsymjwenjcytes\",\"objectId\":\"u\",\"upn\":\"tfodq\"},\"creationDate\":\"2021-08-29T00:28:24Z\",\"expirationDate\":\"2021-12-05T21:31:40Z\",\"decisionReason\":\"zivrtrfzh\",\"invoiceSectionId\":\"zvhj\",\"invoiceSectionName\":\"xdyyrud\",\"invoiceSectionDisplayName\":\"hswtvdkxbqssgfe\",\"customerId\":\"fdxbvwfqjchiv\",\"customerName\":\"ija\",\"customerDisplayName\":\"ndmuvardlmz\",\"subscriptionId\":\"tp\",\"subscriptionName\":\"muhcuhtuzl\",\"subscriptionDisplayName\":\"wyopgarpfctwrapc\",\"justification\":\"ojqyvzes\",\"recipients\":[{\"tenantId\":\"snj\",\"objectId\":\"owa\",\"upn\":\"c\"},{\"tenantId\":\"azab\",\"objectId\":\"dtsewkaupwhlzyc\",\"upn\":\"emgjlm\"},{\"tenantId\":\"dorsirxxhy\",\"objectId\":\"qakofajf\",\"upn\":\"prfvmkinwteyrqsh\"},{\"tenantId\":\"bcejopylbl\",\"objectId\":\"prrw\",\"upn\":\"pimtc\"}],\"requestScope\":\"fx\",\"billingScope\":\"ytzfsl\",\"status\":\"Completed\",\"type\":\"ProvisioningAccess\",\"lastUpdatedBy\":{\"tenantId\":\"mgobliqemc\",\"objectId\":\"iisklbonxx\",\"upn\":\"jxvtrkfkgenjqnnp\"},\"lastUpdatedDate\":\"2021-01-30T09:34:46Z\"},\"tags\":{\"xigfoujjc\":\"n\",\"wny\":\"gdqmrlhnzkwop\",\"wjezbfqployuekdc\":\"nxuprrxy\"},\"id\":\"uftrs\",\"name\":\"jmnsvujnjk\",\"type\":\"volefcj\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        BillingManager manager = BillingManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<BillingRequest> response = manager.billingRequests()
            .listByUser("ttlnrjdszdb", "ziciqppoqvgpn", 4005256862612098452L, 9051291066973021159L, true, "wjnoxuo",
                com.azure.core.util.Context.NONE);

        Assertions.assertEquals("n", response.iterator().next().tags().get("xigfoujjc"));
        Assertions.assertEquals("ssf", response.iterator().next().properties().additionalInformation().get("pg"));
        Assertions.assertEquals("kdlhzwhc", response.iterator().next().properties().reviewedBy().tenantId());
        Assertions.assertEquals("vbosjj", response.iterator().next().properties().reviewedBy().objectId());
        Assertions.assertEquals("izh", response.iterator().next().properties().reviewedBy().upn());
        Assertions.assertEquals("fzqsymjwenjcytes", response.iterator().next().properties().createdBy().tenantId());
        Assertions.assertEquals("u", response.iterator().next().properties().createdBy().objectId());
        Assertions.assertEquals("tfodq", response.iterator().next().properties().createdBy().upn());
        Assertions.assertEquals("zivrtrfzh", response.iterator().next().properties().decisionReason());
        Assertions.assertEquals("ojqyvzes", response.iterator().next().properties().justification());
        Assertions.assertEquals("snj", response.iterator().next().properties().recipients().get(0).tenantId());
        Assertions.assertEquals("owa", response.iterator().next().properties().recipients().get(0).objectId());
        Assertions.assertEquals("c", response.iterator().next().properties().recipients().get(0).upn());
        Assertions.assertEquals("fx", response.iterator().next().properties().requestScope());
        Assertions.assertEquals(BillingRequestStatus.COMPLETED, response.iterator().next().properties().status());
        Assertions.assertEquals(BillingRequestType.PROVISIONING_ACCESS, response.iterator().next().properties().type());
        Assertions.assertEquals("mgobliqemc", response.iterator().next().properties().lastUpdatedBy().tenantId());
        Assertions.assertEquals("iisklbonxx", response.iterator().next().properties().lastUpdatedBy().objectId());
        Assertions.assertEquals("jxvtrkfkgenjqnnp", response.iterator().next().properties().lastUpdatedBy().upn());
    }
}
