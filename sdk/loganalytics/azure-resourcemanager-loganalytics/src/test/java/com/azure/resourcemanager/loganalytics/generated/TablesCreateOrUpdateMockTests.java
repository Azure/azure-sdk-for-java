// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.loganalytics.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.loganalytics.LogAnalyticsManager;
import com.azure.resourcemanager.loganalytics.models.Column;
import com.azure.resourcemanager.loganalytics.models.ColumnDataTypeHintEnum;
import com.azure.resourcemanager.loganalytics.models.ColumnTypeEnum;
import com.azure.resourcemanager.loganalytics.models.RestoredLogs;
import com.azure.resourcemanager.loganalytics.models.Schema;
import com.azure.resourcemanager.loganalytics.models.SearchResults;
import com.azure.resourcemanager.loganalytics.models.Table;
import com.azure.resourcemanager.loganalytics.models.TablePlanEnum;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class TablesCreateOrUpdateMockTests {
    @Test
    public void testCreateOrUpdate() throws Exception {
        String responseStr
            = "{\"properties\":{\"retentionInDays\":1532200707,\"totalRetentionInDays\":543172402,\"archiveRetentionInDays\":699290789,\"searchResults\":{\"query\":\"fccnuhiigb\",\"description\":\"bui\",\"limit\":1764547970,\"startSearchTime\":\"2021-06-14T14:08:19Z\",\"endSearchTime\":\"2021-05-03T08:54:55Z\",\"sourceTable\":\"rkdlb\",\"azureAsyncOperationId\":\"qxvhcsyhzlwxa\"},\"restoredLogs\":{\"startRestoreTime\":\"2021-09-21T01:21:46Z\",\"endRestoreTime\":\"2021-05-18T07:30Z\",\"sourceTable\":\"xdndsbdweaderzm\",\"azureAsyncOperationId\":\"t\"},\"resultStatistics\":{\"progress\":86.6211,\"ingestedRecords\":1639161747,\"scannedGb\":6.1114073},\"plan\":\"Basic\",\"lastPlanModifiedDate\":\"goaqylkjztj\",\"schema\":{\"name\":\"zjcg\",\"displayName\":\"itpfinzcpdl\",\"description\":\"rlgjm\",\"columns\":[{\"name\":\"vcqguefzh\",\"type\":\"string\",\"dataTypeHint\":\"ip\",\"displayName\":\"durelyujl\",\"description\":\"oumpcky\",\"isDefaultDisplay\":false,\"isHidden\":false},{\"name\":\"gptaj\",\"type\":\"boolean\",\"dataTypeHint\":\"armPath\",\"displayName\":\"ucycijo\",\"description\":\"xiutgjcyzyzj\",\"isDefaultDisplay\":false,\"isHidden\":false},{\"name\":\"txjeaoqaqbzgy\",\"type\":\"string\",\"dataTypeHint\":\"uri\",\"displayName\":\"atbwbqam\",\"description\":\"uliyslpkcv\",\"isDefaultDisplay\":false,\"isHidden\":false}],\"standardColumns\":[{\"name\":\"pmywbormcq\",\"type\":\"guid\",\"dataTypeHint\":\"ip\",\"displayName\":\"qpkzfbojxjmcsmy\",\"description\":\"ixvcpwnkwywzwo\",\"isDefaultDisplay\":false,\"isHidden\":true}],\"categories\":[\"uoiqt\",\"mt\"],\"labels\":[\"kn\",\"rwzawnvs\",\"cfhzagxnvhycv\",\"imwrzregzgyufu\"],\"source\":\"microsoft\",\"tableType\":\"CustomLog\",\"tableSubType\":\"Classic\",\"solutions\":[\"kzkdhmeott\",\"w\",\"yos\",\"wwhnhjtfvpn\"]},\"provisioningState\":\"Succeeded\",\"retentionInDaysAsDefault\":true,\"totalRetentionInDaysAsDefault\":false},\"id\":\"wyn\",\"name\":\"dqllzsauzpjlxeeh\",\"type\":\"xiqhzlraymezxlsk\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        LogAnalyticsManager manager = LogAnalyticsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        Table response = manager.tables()
            .define("akizvoaikna")
            .withExistingWorkspace("fexl", "xn")
            .withRetentionInDays(427869575)
            .withTotalRetentionInDays(915740665)
            .withSearchResults(new SearchResults().withQuery("lykwphvxz")
                .withDescription("xhmpejtlkex")
                .withLimit(780657181)
                .withStartSearchTime(OffsetDateTime.parse("2021-09-17T09:38:18Z"))
                .withEndSearchTime(OffsetDateTime.parse("2021-08-12T17:38:45Z")))
            .withRestoredLogs(new RestoredLogs().withStartRestoreTime(OffsetDateTime.parse("2021-03-10T18:49:30Z"))
                .withEndRestoreTime(OffsetDateTime.parse("2021-10-06T09:15:33Z"))
                .withSourceTable("kyupijubyqj"))
            .withPlan(TablePlanEnum.ANALYTICS)
            .withSchema(new Schema().withName("mgzvyfi")
                .withDisplayName("kzuqnwsith")
                .withDescription("olyahluqwqulsut")
                .withColumns(Arrays.asList(
                    new Column().withName("xykfhyq")
                        .withType(ColumnTypeEnum.DATE_TIME)
                        .withDataTypeHint(ColumnDataTypeHintEnum.IP)
                        .withDisplayName("g")
                        .withDescription("ftbcvexreuquow"),
                    new Column().withName("hreagk")
                        .withType(ColumnTypeEnum.STRING)
                        .withDataTypeHint(ColumnDataTypeHintEnum.IP)
                        .withDisplayName("tvbczsulm")
                        .withDescription("glmep"),
                    new Column().withName("kgsangpszng")
                        .withType(ColumnTypeEnum.STRING)
                        .withDataTypeHint(ColumnDataTypeHintEnum.ARM_PATH)
                        .withDisplayName("kvec")
                        .withDescription("jcngoadyed"),
                    new Column().withName("oknub")
                        .withType(ColumnTypeEnum.DATE_TIME)
                        .withDataTypeHint(ColumnDataTypeHintEnum.GUID)
                        .withDisplayName("pz")
                        .withDescription("gdgxvcoqraswug"))))
            .create();

        Assertions.assertEquals(1532200707, response.retentionInDays());
        Assertions.assertEquals(543172402, response.totalRetentionInDays());
        Assertions.assertEquals("fccnuhiigb", response.searchResults().query());
        Assertions.assertEquals("bui", response.searchResults().description());
        Assertions.assertEquals(1764547970, response.searchResults().limit());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-14T14:08:19Z"),
            response.searchResults().startSearchTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-03T08:54:55Z"), response.searchResults().endSearchTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-21T01:21:46Z"),
            response.restoredLogs().startRestoreTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-18T07:30Z"), response.restoredLogs().endRestoreTime());
        Assertions.assertEquals("xdndsbdweaderzm", response.restoredLogs().sourceTable());
        Assertions.assertEquals(TablePlanEnum.BASIC, response.plan());
        Assertions.assertEquals("zjcg", response.schema().name());
        Assertions.assertEquals("itpfinzcpdl", response.schema().displayName());
        Assertions.assertEquals("rlgjm", response.schema().description());
        Assertions.assertEquals("vcqguefzh", response.schema().columns().get(0).name());
        Assertions.assertEquals(ColumnTypeEnum.STRING, response.schema().columns().get(0).type());
        Assertions.assertEquals(ColumnDataTypeHintEnum.IP, response.schema().columns().get(0).dataTypeHint());
        Assertions.assertEquals("durelyujl", response.schema().columns().get(0).displayName());
        Assertions.assertEquals("oumpcky", response.schema().columns().get(0).description());
    }
}
