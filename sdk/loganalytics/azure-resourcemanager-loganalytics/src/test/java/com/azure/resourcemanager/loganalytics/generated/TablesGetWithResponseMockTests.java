// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.loganalytics.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.loganalytics.LogAnalyticsManager;
import com.azure.resourcemanager.loganalytics.models.ColumnDataTypeHintEnum;
import com.azure.resourcemanager.loganalytics.models.ColumnTypeEnum;
import com.azure.resourcemanager.loganalytics.models.Table;
import com.azure.resourcemanager.loganalytics.models.TablePlanEnum;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class TablesGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"retentionInDays\":173129276,\"totalRetentionInDays\":1276247393,\"archiveRetentionInDays\":611963257,\"searchResults\":{\"query\":\"lblhtjq\",\"description\":\"yvwehtaemxh\",\"limit\":974813630,\"startSearchTime\":\"2021-07-22T16:02:08Z\",\"endSearchTime\":\"2021-06-03T23:18:21Z\",\"sourceTable\":\"xivzrrry\",\"azureAsyncOperationId\":\"imipskdyzatvfuz\"},\"restoredLogs\":{\"startRestoreTime\":\"2020-12-21T06:07:21Z\",\"endRestoreTime\":\"2021-03-13T04:29:21Z\",\"sourceTable\":\"ru\",\"azureAsyncOperationId\":\"igsyeipqdsmjt\"},\"resultStatistics\":{\"progress\":32.653797,\"ingestedRecords\":1529968527,\"scannedGb\":98.93236},\"plan\":\"Analytics\",\"lastPlanModifiedDate\":\"plkcsm\",\"schema\":{\"name\":\"wtbbaedorvvmqf\",\"displayName\":\"ygbdgwumgxdgdhpa\",\"description\":\"dexjddvjs\",\"columns\":[{\"name\":\"tm\",\"type\":\"guid\",\"dataTypeHint\":\"ip\",\"displayName\":\"lsrs\",\"description\":\"pt\",\"isDefaultDisplay\":true,\"isHidden\":true},{\"name\":\"gjokjljnhvlqjbek\",\"type\":\"guid\",\"dataTypeHint\":\"armPath\",\"displayName\":\"bksdqhjvyklxesl\",\"description\":\"hustcpoqmavnwqjw\",\"isDefaultDisplay\":true,\"isHidden\":false},{\"name\":\"jjjkxybwfdbk\",\"type\":\"guid\",\"dataTypeHint\":\"armPath\",\"displayName\":\"svkzykj\",\"description\":\"kns\",\"isDefaultDisplay\":false,\"isHidden\":true},{\"name\":\"cdp\",\"type\":\"string\",\"dataTypeHint\":\"armPath\",\"displayName\":\"mgjfbpkuwxeoio\",\"description\":\"izfavkjzwf\",\"isDefaultDisplay\":false,\"isHidden\":false}],\"standardColumns\":[{\"name\":\"fz\",\"type\":\"boolean\",\"dataTypeHint\":\"ip\",\"displayName\":\"zxmdew\",\"description\":\"sxkrpl\",\"isDefaultDisplay\":false,\"isHidden\":true}],\"categories\":[\"w\",\"iyoypsuhbrnnhj\"],\"labels\":[\"wjh\",\"kbiwetpozyc\",\"qiqyhgfsetzlexbs\",\"ledynojpz\"],\"source\":\"microsoft\",\"tableType\":\"CustomLog\",\"tableSubType\":\"Any\",\"solutions\":[\"tnhqsycl\"]},\"provisioningState\":\"Deleting\",\"retentionInDaysAsDefault\":true,\"totalRetentionInDaysAsDefault\":true},\"id\":\"afvafh\",\"name\":\"by\",\"type\":\"ccbevxrhyzdf\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        LogAnalyticsManager manager = LogAnalyticsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        Table response = manager.tables()
            .getWithResponse("wqapfgsdp", "vessm", "hhkuuip", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals(173129276, response.retentionInDays());
        Assertions.assertEquals(1276247393, response.totalRetentionInDays());
        Assertions.assertEquals("lblhtjq", response.searchResults().query());
        Assertions.assertEquals("yvwehtaemxh", response.searchResults().description());
        Assertions.assertEquals(974813630, response.searchResults().limit());
        Assertions.assertEquals(OffsetDateTime.parse("2021-07-22T16:02:08Z"),
            response.searchResults().startSearchTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-03T23:18:21Z"), response.searchResults().endSearchTime());
        Assertions.assertEquals(OffsetDateTime.parse("2020-12-21T06:07:21Z"),
            response.restoredLogs().startRestoreTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-13T04:29:21Z"), response.restoredLogs().endRestoreTime());
        Assertions.assertEquals("ru", response.restoredLogs().sourceTable());
        Assertions.assertEquals(TablePlanEnum.ANALYTICS, response.plan());
        Assertions.assertEquals("wtbbaedorvvmqf", response.schema().name());
        Assertions.assertEquals("ygbdgwumgxdgdhpa", response.schema().displayName());
        Assertions.assertEquals("dexjddvjs", response.schema().description());
        Assertions.assertEquals("tm", response.schema().columns().get(0).name());
        Assertions.assertEquals(ColumnTypeEnum.GUID, response.schema().columns().get(0).type());
        Assertions.assertEquals(ColumnDataTypeHintEnum.IP, response.schema().columns().get(0).dataTypeHint());
        Assertions.assertEquals("lsrs", response.schema().columns().get(0).displayName());
        Assertions.assertEquals("pt", response.schema().columns().get(0).description());
    }
}
