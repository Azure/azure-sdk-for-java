// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.loganalytics.generated;

import com.azure.core.util.BinaryData;
import com.azure.core.util.serializer.JacksonAdapter;
import com.azure.core.util.serializer.SerializerEncoding;
import com.azure.resourcemanager.loganalytics.fluent.models.WorkspaceInner;
import com.azure.resourcemanager.loganalytics.models.Identity;
import com.azure.resourcemanager.loganalytics.models.IdentityType;
import com.azure.resourcemanager.loganalytics.models.PublicNetworkAccessType;
import com.azure.resourcemanager.loganalytics.models.UserIdentityProperties;
import com.azure.resourcemanager.loganalytics.models.WorkspaceCapping;
import com.azure.resourcemanager.loganalytics.models.WorkspaceFailoverProperties;
import com.azure.resourcemanager.loganalytics.models.WorkspaceFeatures;
import com.azure.resourcemanager.loganalytics.models.WorkspaceReplicationProperties;
import com.azure.resourcemanager.loganalytics.models.WorkspaceSku;
import com.azure.resourcemanager.loganalytics.models.WorkspaceSkuNameEnum;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class WorkspaceInnerTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        WorkspaceInner model = BinaryData.fromString(
            "{\"properties\":{\"provisioningState\":\"Updating\",\"customerId\":\"gthrrghxjbdhq\",\"sku\":{\"name\":\"Free\",\"capacityReservationLevel\":441101019,\"lastSkuUpdate\":\"2021-08-03T04:18:25Z\"},\"retentionInDays\":469495787,\"workspaceCapping\":{\"dailyQuotaGb\":81.1170037569868,\"quotaNextResetTime\":\"hrnsvbu\",\"dataIngestionStatus\":\"SubscriptionSuspended\"},\"createdDate\":\"2021-09-08T03:32:01Z\",\"modifiedDate\":\"2021-07-28T13:53:22Z\",\"publicNetworkAccessForIngestion\":\"Disabled\",\"publicNetworkAccessForQuery\":\"Disabled\",\"forceCmkForQuery\":true,\"privateLinkScopedResources\":[{\"resourceId\":\"rtkfawnopq\",\"scopeId\":\"kyzirtxdyux\"},{\"resourceId\":\"jntpsewgioilqu\",\"scopeId\":\"ydxtqm\"}],\"features\":{\"enableDataExport\":false,\"immediatePurgeDataOn30Days\":false,\"enableLogAccessUsingOnlyResourcePermissions\":true,\"clusterResourceId\":\"f\",\"disableLocalAuth\":true,\"unifiedSentinelBillingOnly\":false,\"associations\":[\"ghhavgrvkffo\",\"jzhpjbibgjmfx\",\"mv\"],\"nbkfezzxscy\":\"datauyovw\",\"vzzbtdcq\":\"datawzdgirujbzbo\",\"dshf\":\"datapniyujviyl\",\"fmwncotmrfh\":\"datasnrbgyefrymsgao\"},\"defaultDataCollectionRuleResourceId\":\"ctymoxoftp\",\"replication\":{\"location\":\"wycz\",\"enabled\":false,\"provisioningState\":\"DisableRequested\",\"createdDate\":\"2021-11-29T08:27:09Z\",\"lastModifiedDate\":\"2021-01-05T07:46:41Z\"},\"failover\":{\"state\":\"Inactive\",\"lastModifiedDate\":\"2021-07-16T17:01:10Z\"}},\"identity\":{\"principalId\":\"skasdvlmfwdgzxu\",\"tenantId\":\"cvpa\",\"type\":\"UserAssigned\",\"userAssignedIdentities\":{\"jn\":{\"principalId\":\"uzvx\",\"clientId\":\"i\"},\"cesutrgjupauut\":{\"principalId\":\"ytxifqjzgxmrh\",\"clientId\":\"lw\"},\"pnfqntcyp\":{\"principalId\":\"oqh\",\"clientId\":\"ejqgw\"}}},\"etag\":\"vfoimwksli\",\"location\":\"cizjxvydfceacvl\",\"tags\":{\"jslb\":\"gdyftumrtwna\",\"aeqphchqnr\":\"wkojgcyztsfmzn\",\"wrykqgai\":\"rpxeh\"},\"id\":\"mvikl\",\"name\":\"ydv\",\"type\":\"hbejdznxcvdsrhnj\"}")
            .toObject(WorkspaceInner.class);
        Assertions.assertEquals("cizjxvydfceacvl", model.location());
        Assertions.assertEquals("gdyftumrtwna", model.tags().get("jslb"));
        Assertions.assertEquals(IdentityType.USER_ASSIGNED, model.identity().type());
        Assertions.assertEquals("vfoimwksli", model.etag());
        Assertions.assertEquals(WorkspaceSkuNameEnum.FREE, model.sku().name());
        Assertions.assertEquals(441101019, model.sku().capacityReservationLevel());
        Assertions.assertEquals(469495787, model.retentionInDays());
        Assertions.assertEquals(81.1170037569868D, model.workspaceCapping().dailyQuotaGb());
        Assertions.assertEquals(PublicNetworkAccessType.DISABLED, model.publicNetworkAccessForIngestion());
        Assertions.assertEquals(PublicNetworkAccessType.DISABLED, model.publicNetworkAccessForQuery());
        Assertions.assertTrue(model.forceCmkForQuery());
        Assertions.assertFalse(model.features().enableDataExport());
        Assertions.assertFalse(model.features().immediatePurgeDataOn30Days());
        Assertions.assertTrue(model.features().enableLogAccessUsingOnlyResourcePermissions());
        Assertions.assertEquals("f", model.features().clusterResourceId());
        Assertions.assertTrue(model.features().disableLocalAuth());
        Assertions.assertEquals("ctymoxoftp", model.defaultDataCollectionRuleResourceId());
        Assertions.assertEquals("wycz", model.replication().location());
        Assertions.assertFalse(model.replication().enabled());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        WorkspaceInner model = new WorkspaceInner().withLocation("cizjxvydfceacvl")
            .withTags(mapOf("jslb", "gdyftumrtwna", "aeqphchqnr", "wkojgcyztsfmzn", "wrykqgai", "rpxeh"))
            .withIdentity(new Identity().withType(IdentityType.USER_ASSIGNED)
                .withUserAssignedIdentities(mapOf("jn", new UserIdentityProperties(), "cesutrgjupauut",
                    new UserIdentityProperties(), "pnfqntcyp", new UserIdentityProperties())))
            .withEtag("vfoimwksli")
            .withSku(new WorkspaceSku().withName(WorkspaceSkuNameEnum.FREE).withCapacityReservationLevel(441101019))
            .withRetentionInDays(469495787)
            .withWorkspaceCapping(new WorkspaceCapping().withDailyQuotaGb(81.1170037569868D))
            .withPublicNetworkAccessForIngestion(PublicNetworkAccessType.DISABLED)
            .withPublicNetworkAccessForQuery(PublicNetworkAccessType.DISABLED)
            .withForceCmkForQuery(true)
            .withFeatures(new WorkspaceFeatures().withEnableDataExport(false)
                .withImmediatePurgeDataOn30Days(false)
                .withEnableLogAccessUsingOnlyResourcePermissions(true)
                .withClusterResourceId("f")
                .withDisableLocalAuth(true)
                .withAdditionalProperties(mapOf("associations", JacksonAdapter.createDefaultSerializerAdapter()
                    .deserialize("[\"ghhavgrvkffo\",\"jzhpjbibgjmfx\",\"mv\"]", Object.class, SerializerEncoding.JSON),
                    "dshf", "datapniyujviyl", "vzzbtdcq", "datawzdgirujbzbo", "unifiedSentinelBillingOnly", false,
                    "nbkfezzxscy", "datauyovw", "fmwncotmrfh", "datasnrbgyefrymsgao")))
            .withDefaultDataCollectionRuleResourceId("ctymoxoftp")
            .withReplication(new WorkspaceReplicationProperties().withLocation("wycz").withEnabled(false))
            .withFailover(new WorkspaceFailoverProperties());
        model = BinaryData.fromObject(model).toObject(WorkspaceInner.class);
        Assertions.assertEquals("cizjxvydfceacvl", model.location());
        Assertions.assertEquals("gdyftumrtwna", model.tags().get("jslb"));
        Assertions.assertEquals(IdentityType.USER_ASSIGNED, model.identity().type());
        Assertions.assertEquals("vfoimwksli", model.etag());
        Assertions.assertEquals(WorkspaceSkuNameEnum.FREE, model.sku().name());
        Assertions.assertEquals(441101019, model.sku().capacityReservationLevel());
        Assertions.assertEquals(469495787, model.retentionInDays());
        Assertions.assertEquals(81.1170037569868D, model.workspaceCapping().dailyQuotaGb());
        Assertions.assertEquals(PublicNetworkAccessType.DISABLED, model.publicNetworkAccessForIngestion());
        Assertions.assertEquals(PublicNetworkAccessType.DISABLED, model.publicNetworkAccessForQuery());
        Assertions.assertTrue(model.forceCmkForQuery());
        Assertions.assertFalse(model.features().enableDataExport());
        Assertions.assertFalse(model.features().immediatePurgeDataOn30Days());
        Assertions.assertTrue(model.features().enableLogAccessUsingOnlyResourcePermissions());
        Assertions.assertEquals("f", model.features().clusterResourceId());
        Assertions.assertTrue(model.features().disableLocalAuth());
        Assertions.assertEquals("ctymoxoftp", model.defaultDataCollectionRuleResourceId());
        Assertions.assertEquals("wycz", model.replication().location());
        Assertions.assertFalse(model.replication().enabled());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
