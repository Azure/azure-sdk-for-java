// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.loganalytics.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.loganalytics.LogAnalyticsManager;
import com.azure.resourcemanager.loganalytics.models.SavedSearch;
import com.azure.resourcemanager.loganalytics.models.Tag;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SavedSearchesCreateOrUpdateWithResponseMockTests {
    @Test
    public void testCreateOrUpdateWithResponse() throws Exception {
        String responseStr
            = "{\"etag\":\"nynkbwet\",\"properties\":{\"category\":\"juhpsprkzyau\",\"displayName\":\"ia\",\"query\":\"cxnafbwqrooh\",\"functionAlias\":\"ovmaonurjtum\",\"functionParameters\":\"ihpvecmslclblyj\",\"version\":1273828074911332298,\"tags\":[{\"name\":\"uscv\",\"value\":\"f\"},{\"name\":\"igctmgxuupbezq\",\"value\":\"cydrtceukdqkk\"}]},\"id\":\"ihztgeqmgqzgwldo\",\"name\":\"chillcecf\",\"type\":\"huwaoaguhic\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        LogAnalyticsManager manager = LogAnalyticsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        SavedSearch response = manager.savedSearches()
            .define("uzivensrpmeyyvp")
            .withExistingWorkspace("lpdwwexymzvlazi", "bhpwvqsgnyy")
            .withCategory("jp")
            .withDisplayName("gsksrfhf")
            .withQuery("olmk")
            .withTags(Arrays.asList(new Tag().withName("uiaclkiexhajlfn").withValue("hiqfyuttdiy"),
                new Tag().withName("b").withValue("vnwsw"),
                new Tag().withName("txkyctwwgzwxjlm").withValue("cvogygzyvne"),
                new Tag().withName("zaifghtmoqqtlff").withValue("zbkr")))
            .withEtag("atlb")
            .withFunctionAlias("nxwcdommpv")
            .withFunctionParameters("awz")
            .withVersion(371412437274292802L)
            .create();

        Assertions.assertEquals("nynkbwet", response.etag());
        Assertions.assertEquals("juhpsprkzyau", response.category());
        Assertions.assertEquals("ia", response.displayName());
        Assertions.assertEquals("cxnafbwqrooh", response.query());
        Assertions.assertEquals("ovmaonurjtum", response.functionAlias());
        Assertions.assertEquals("ihpvecmslclblyj", response.functionParameters());
        Assertions.assertEquals(1273828074911332298L, response.version());
        Assertions.assertEquals("uscv", response.tags().get(0).name());
        Assertions.assertEquals("f", response.tags().get(0).value());
    }
}
