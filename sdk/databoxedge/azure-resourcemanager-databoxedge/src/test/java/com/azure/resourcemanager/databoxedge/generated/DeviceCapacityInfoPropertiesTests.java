// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.databoxedge.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.databoxedge.fluent.models.DeviceCapacityInfoProperties;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;

public final class DeviceCapacityInfoPropertiesTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        DeviceCapacityInfoProperties model = BinaryData.fromString(
            "{\"timeStamp\":\"2021-03-11T05:53:58Z\",\"clusterStorageCapacityInfo\":{\"clusterTotalStorageMb\":60.93130034028027,\"clusterFreeStorageMb\":81.1170037569868},\"clusterComputeCapacityInfo\":{\"fqdn\":\"rnsvbuswd\",\"gpuCapacity\":{\"gpuType\":\"ybycnunvj\",\"gpuUsedUnitsCount\":1037847235,\"gpuFreeUnitsCount\":76797312,\"gpuReservedForFailoverUnitsCount\":1356782520,\"gpuTotalUnitsCount\":1955812770},\"memoryCapacity\":{\"clusterFreeMemoryMb\":54.75726063061687,\"clusterUsedMemoryMb\":85.2762415485035,\"clusterFailoverMemoryMb\":70.08729564174045,\"clusterFragmentationMemoryMb\":41.72716116241939,\"clusterHypervReserveMemoryMb\":0.34203436944628685,\"clusterInfraVmMemoryMb\":83.62443031079499,\"clusterTotalMemoryMb\":22.206407353508297,\"clusterNonFailoverVmMb\":62.92939542242835,\"clusterMemoryUsedByVmsMb\":8.254263158693165},\"lastRefreshedTime\":\"2021-08-26T08:06:53Z\",\"totalProvisionedNonHpnCores\":1364801760742969084},\"nodeCapacityInfos\":{\"xacpqjli\":{\"hostName\":\"tqmieox\",\"effectiveAvailableMemoryMbOnHost\":3407001905687200416,\"availableGpuCount\":108943004,\"vmUsedMemory\":{\"hhavgrvkffovjz\":{\"startupMemoryMB\":7942093859872352561,\"currentMemoryUsageMB\":2866985325528678483},\"jmfxumvf\":{\"startupMemoryMB\":5645922877678061686,\"currentMemoryUsageMB\":2314195344847215175}},\"gpuType\":\"uyovw\",\"numaNodesData\":[{\"numaNodeIndex\":1190343905,\"totalMemoryInMb\":7758201822450371098,\"logicalCoreCountPerCore\":1537243599,\"effectiveAvailableMemoryInMb\":1741934125627183360,\"freeVCpuIndexesForHpn\":[638105494,215949715],\"vCpuIndexesForHpn\":[619889018,1345497000,1954824970,1913424270],\"vCpuIndexesForRoot\":[718356396,1916825220]},{\"numaNodeIndex\":921177918,\"totalMemoryInMb\":3233631838729398934,\"logicalCoreCountPerCore\":931895437,\"effectiveAvailableMemoryInMb\":1865039483213614039,\"freeVCpuIndexesForHpn\":[850066644,602738724,1950660083,967647166],\"vCpuIndexesForHpn\":[1061424491],\"vCpuIndexesForRoot\":[1871477437,2085086631,2046676539]},{\"numaNodeIndex\":224040944,\"totalMemoryInMb\":4495541268478193562,\"logicalCoreCountPerCore\":593893972,\"effectiveAvailableMemoryInMb\":2974540016936368802,\"freeVCpuIndexesForHpn\":[1232312052,1164354320,2030576652],\"vCpuIndexesForHpn\":[800665018,1126923901,326840480],\"vCpuIndexesForRoot\":[689928385,1012441055]},{\"numaNodeIndex\":1018101586,\"totalMemoryInMb\":8990215421896908005,\"logicalCoreCountPerCore\":37194957,\"effectiveAvailableMemoryInMb\":9098240830909229625,\"freeVCpuIndexesForHpn\":[612228452,849605054,1311357803],\"vCpuIndexesForHpn\":[1678964850,828485961,420468172,1383298252],\"vCpuIndexesForRoot\":[1250409644]}]},\"n\":{\"hostName\":\"yuspskas\",\"effectiveAvailableMemoryMbOnHost\":9102213549851519142,\"availableGpuCount\":363338546,\"vmUsedMemory\":{\"vpa\":{\"startupMemoryMB\":316998115610761831,\"currentMemoryUsageMB\":9073448829959810089}},\"gpuType\":\"sreuzvxurisjnh\",\"numaNodesData\":[{\"numaNodeIndex\":1315745127,\"totalMemoryInMb\":4175162265983348993,\"logicalCoreCountPerCore\":351855115,\"effectiveAvailableMemoryInMb\":605829579091214596,\"freeVCpuIndexesForHpn\":[912922053,366790894,403382899],\"vCpuIndexesForHpn\":[1638829900,1928242324,771050161,1632941249],\"vCpuIndexesForRoot\":[1760346913]},{\"numaNodeIndex\":1785094261,\"totalMemoryInMb\":1854714147924765277,\"logicalCoreCountPerCore\":210626246,\"effectiveAvailableMemoryInMb\":2888604604095787464,\"freeVCpuIndexesForHpn\":[610822697],\"vCpuIndexesForHpn\":[521171059,89548348],\"vCpuIndexesForRoot\":[172969394,938622806,1665134354,1944953074]}]},\"vdsrhnjiv\":{\"hostName\":\"ypsxjvfoim\",\"effectiveAvailableMemoryMbOnHost\":8042667527966501304,\"availableGpuCount\":32469053,\"vmUsedMemory\":{\"fceacvlhvygd\":{\"startupMemoryMB\":3319429564024362130,\"currentMemoryUsageMB\":5029301967777206897}},\"gpuType\":\"t\",\"numaNodesData\":[{\"numaNodeIndex\":381355743,\"totalMemoryInMb\":4593360504928501229,\"logicalCoreCountPerCore\":951831262,\"effectiveAvailableMemoryInMb\":3378863236270841082,\"freeVCpuIndexesForHpn\":[1632414232,1263082708,1225451286],\"vCpuIndexesForHpn\":[974683865,625125018],\"vCpuIndexesForRoot\":[589391699,227185061]},{\"numaNodeIndex\":1877991674,\"totalMemoryInMb\":2955435170295088676,\"logicalCoreCountPerCore\":452306510,\"effectiveAvailableMemoryInMb\":4889988731710114347,\"freeVCpuIndexesForHpn\":[1941100702],\"vCpuIndexesForHpn\":[98859103,2099945195,995408685],\"vCpuIndexesForRoot\":[1152356837,550390162]},{\"numaNodeIndex\":1484203808,\"totalMemoryInMb\":8103244431627938636,\"logicalCoreCountPerCore\":1222828891,\"effectiveAvailableMemoryInMb\":1689633603053171301,\"freeVCpuIndexesForHpn\":[654040507,703238637,274681299],\"vCpuIndexesForHpn\":[172604162,741141390,725495584,1006090143],\"vCpuIndexesForRoot\":[732496831,2140259102]}]}}}")
            .toObject(DeviceCapacityInfoProperties.class);
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-11T05:53:58Z"), model.timeStamp());
        Assertions.assertEquals(60.93130034028027D, model.clusterStorageCapacityInfo().clusterTotalStorageMb());
        Assertions.assertEquals(81.1170037569868D, model.clusterStorageCapacityInfo().clusterFreeStorageMb());
        Assertions.assertEquals("rnsvbuswd", model.clusterComputeCapacityInfo().fqdn());
        Assertions.assertEquals("ybycnunvj", model.clusterComputeCapacityInfo().gpuCapacity().gpuType());
        Assertions.assertEquals(1037847235, model.clusterComputeCapacityInfo().gpuCapacity().gpuUsedUnitsCount());
        Assertions.assertEquals(76797312, model.clusterComputeCapacityInfo().gpuCapacity().gpuFreeUnitsCount());
        Assertions.assertEquals(1356782520,
            model.clusterComputeCapacityInfo().gpuCapacity().gpuReservedForFailoverUnitsCount());
        Assertions.assertEquals(1955812770, model.clusterComputeCapacityInfo().gpuCapacity().gpuTotalUnitsCount());
        Assertions.assertEquals(54.75726063061687D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterFreeMemoryMb());
        Assertions.assertEquals(85.2762415485035D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterUsedMemoryMb());
        Assertions.assertEquals(70.08729564174045D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterFailoverMemoryMb());
        Assertions.assertEquals(41.72716116241939D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterFragmentationMemoryMb());
        Assertions.assertEquals(0.34203436944628685D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterHypervReserveMemoryMb());
        Assertions.assertEquals(83.62443031079499D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterInfraVmMemoryMb());
        Assertions.assertEquals(22.206407353508297D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterTotalMemoryMb());
        Assertions.assertEquals(62.92939542242835D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterNonFailoverVmMb());
        Assertions.assertEquals(8.254263158693165D,
            model.clusterComputeCapacityInfo().memoryCapacity().clusterMemoryUsedByVmsMb());
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-26T08:06:53Z"),
            model.clusterComputeCapacityInfo().lastRefreshedTime());
        Assertions.assertEquals(1364801760742969084L, model.clusterComputeCapacityInfo().totalProvisionedNonHpnCores());
        Assertions.assertEquals("tqmieox", model.nodeCapacityInfos().get("xacpqjli").hostName());
        Assertions.assertEquals(3407001905687200416L,
            model.nodeCapacityInfos().get("xacpqjli").effectiveAvailableMemoryMbOnHost());
        Assertions.assertEquals(108943004, model.nodeCapacityInfos().get("xacpqjli").availableGpuCount());
        Assertions.assertEquals(7942093859872352561L,
            model.nodeCapacityInfos().get("xacpqjli").vmUsedMemory().get("hhavgrvkffovjz").startupMemoryMB());
        Assertions.assertEquals(2866985325528678483L,
            model.nodeCapacityInfos().get("xacpqjli").vmUsedMemory().get("hhavgrvkffovjz").currentMemoryUsageMB());
        Assertions.assertEquals("uyovw", model.nodeCapacityInfos().get("xacpqjli").gpuType());
        Assertions.assertEquals(1190343905,
            model.nodeCapacityInfos().get("xacpqjli").numaNodesData().get(0).numaNodeIndex());
        Assertions.assertEquals(7758201822450371098L,
            model.nodeCapacityInfos().get("xacpqjli").numaNodesData().get(0).totalMemoryInMb());
        Assertions.assertEquals(1537243599,
            model.nodeCapacityInfos().get("xacpqjli").numaNodesData().get(0).logicalCoreCountPerCore());
        Assertions.assertEquals(1741934125627183360L,
            model.nodeCapacityInfos().get("xacpqjli").numaNodesData().get(0).effectiveAvailableMemoryInMb());
        Assertions.assertEquals(638105494,
            model.nodeCapacityInfos().get("xacpqjli").numaNodesData().get(0).freeVCpuIndexesForHpn().get(0));
        Assertions.assertEquals(619889018,
            model.nodeCapacityInfos().get("xacpqjli").numaNodesData().get(0).vCpuIndexesForHpn().get(0));
        Assertions.assertEquals(718356396,
            model.nodeCapacityInfos().get("xacpqjli").numaNodesData().get(0).vCpuIndexesForRoot().get(0));
    }
}
