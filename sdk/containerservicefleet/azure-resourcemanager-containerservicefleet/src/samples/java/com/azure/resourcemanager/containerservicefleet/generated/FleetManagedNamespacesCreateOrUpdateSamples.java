// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.containerservicefleet.generated;

import com.azure.resourcemanager.containerservicefleet.models.AdoptionPolicy;
import com.azure.resourcemanager.containerservicefleet.models.Affinity;
import com.azure.resourcemanager.containerservicefleet.models.ClusterAffinity;
import com.azure.resourcemanager.containerservicefleet.models.ClusterResourcePlacementSpec;
import com.azure.resourcemanager.containerservicefleet.models.ClusterSelector;
import com.azure.resourcemanager.containerservicefleet.models.ClusterSelectorTerm;
import com.azure.resourcemanager.containerservicefleet.models.DeletePolicy;
import com.azure.resourcemanager.containerservicefleet.models.LabelSelector;
import com.azure.resourcemanager.containerservicefleet.models.LabelSelectorOperator;
import com.azure.resourcemanager.containerservicefleet.models.LabelSelectorRequirement;
import com.azure.resourcemanager.containerservicefleet.models.ManagedNamespaceProperties;
import com.azure.resourcemanager.containerservicefleet.models.NetworkPolicy;
import com.azure.resourcemanager.containerservicefleet.models.PlacementPolicy;
import com.azure.resourcemanager.containerservicefleet.models.PlacementProfile;
import com.azure.resourcemanager.containerservicefleet.models.PlacementType;
import com.azure.resourcemanager.containerservicefleet.models.PolicyRule;
import com.azure.resourcemanager.containerservicefleet.models.PropagationPolicy;
import com.azure.resourcemanager.containerservicefleet.models.PropagationType;
import com.azure.resourcemanager.containerservicefleet.models.PropertySelector;
import com.azure.resourcemanager.containerservicefleet.models.PropertySelectorOperator;
import com.azure.resourcemanager.containerservicefleet.models.PropertySelectorRequirement;
import com.azure.resourcemanager.containerservicefleet.models.ResourceQuota;
import com.azure.resourcemanager.containerservicefleet.models.TaintEffect;
import com.azure.resourcemanager.containerservicefleet.models.Toleration;
import com.azure.resourcemanager.containerservicefleet.models.TolerationOperator;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

/**
 * Samples for FleetManagedNamespaces CreateOrUpdate.
 */
public final class FleetManagedNamespacesCreateOrUpdateSamples {
    /*
     * x-ms-original-file: 2025-08-01-preview/FleetManagedNamespaces_CreateOrUpdate.json
     */
    /**
     * Sample code: FleetManagedNamespaces_CreateOrUpdate.
     * 
     * @param manager Entry point to ContainerServiceFleetManager.
     */
    public static void fleetManagedNamespacesCreateOrUpdate(
        com.azure.resourcemanager.containerservicefleet.ContainerServiceFleetManager manager) {
        manager.fleetManagedNamespaces()
            .define("namespace1")
            .withRegion("eastus")
            .withExistingFleet("rgfleets", "fleet1")
            .withManagedNamespaceProperties(new ManagedNamespaceProperties()
                .withLabels(mapOf("key1", "fakeTokenPlaceholder"))
                .withAnnotations(mapOf("key2", "fakeTokenPlaceholder"))
                .withDefaultResourceQuota(new ResourceQuota().withCpuRequest("1")
                    .withCpuLimit("1")
                    .withMemoryRequest("10Gi")
                    .withMemoryLimit("32Gi"))
                .withDefaultNetworkPolicy(
                    new NetworkPolicy().withIngress(PolicyRule.ALLOW_SAME_NAMESPACE).withEgress(PolicyRule.ALLOW_ALL)))
            .withAdoptionPolicy(AdoptionPolicy.NEVER)
            .withDeletePolicy(DeletePolicy.KEEP)
            .withPropagationPolicy(
                new PropagationPolicy().withType(PropagationType.PLACEMENT)
                    .withPlacementProfile(
                        new PlacementProfile()
                            .withDefaultClusterResourcePlacement(
                                new ClusterResourcePlacementSpec()
                                    .withPolicy(new PlacementPolicy().withPlacementType(PlacementType.PICK_ALL)
                                        .withAffinity(new Affinity().withClusterAffinity(
                                            new ClusterAffinity().withRequiredDuringSchedulingIgnoredDuringExecution(
                                                new ClusterSelector()
                                                    .withClusterSelectorTerms(Arrays.asList(new ClusterSelectorTerm()
                                                        .withLabelSelector(
                                                            new LabelSelector().withMatchLabels(mapOf("gpu", "true"))
                                                                .withMatchExpressions(
                                                                    Arrays.asList(new LabelSelectorRequirement()
                                                                        .withKey("fakeTokenPlaceholder")
                                                                        .withOperator(LabelSelectorOperator.IN)
                                                                        .withValues(Arrays.asList("production1",
                                                                            "production2")))))
                                                        .withPropertySelector(
                                                            new PropertySelector().withMatchExpressions(Arrays.asList(
                                                                new PropertySelectorRequirement().withName("zones")
                                                                    .withOperator(PropertySelectorOperator.GT)
                                                                    .withValues(Arrays.asList("1"))))))))))
                                        .withTolerations(Arrays.asList(new Toleration().withKey("fakeTokenPlaceholder")
                                            .withOperator(TolerationOperator.EXISTS)
                                            .withValue("true")
                                            .withEffect(TaintEffect.NO_SCHEDULE)))))))
            .create();
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
