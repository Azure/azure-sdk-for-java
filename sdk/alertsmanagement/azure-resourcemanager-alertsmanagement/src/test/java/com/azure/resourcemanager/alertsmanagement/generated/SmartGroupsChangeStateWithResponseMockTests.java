// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.alertsmanagement.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.alertsmanagement.AlertsManagementManager;
import com.azure.resourcemanager.alertsmanagement.models.AlertState;
import com.azure.resourcemanager.alertsmanagement.models.SmartGroup;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SmartGroupsChangeStateWithResponseMockTests {
    @Test
    public void testChangeStateWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"alertsCount\":4360656655666288238,\"smartGroupState\":\"Closed\",\"severity\":\"Sev2\",\"startDateTime\":\"2021-02-14T13:42:43Z\",\"lastModifiedDateTime\":\"2021-02-26T00:54:40Z\",\"lastModifiedUserName\":\"ofpltdbm\",\"resources\":[{\"name\":\"hvhfnracw\",\"count\":7402899718023969441},{\"name\":\"tuujwouh\",\"count\":2852925794446089732},{\"name\":\"grbjbxsjybvitvqk\",\"count\":1324328649766237721},{\"name\":\"umtggmuwdchozfn\",\"count\":3168660078499570789}],\"resourceTypes\":[{\"name\":\"noakiz\",\"count\":4006804452494358628}],\"resourceGroups\":[{\"name\":\"q\",\"count\":1837685829553435817},{\"name\":\"guyxlyk\",\"count\":2188998553308616754}],\"monitorServices\":[{\"name\":\"wxh\",\"count\":5192208220551253040}],\"monitorConditions\":[{\"name\":\"exaonwivkcq\",\"count\":7546519316906954974},{\"name\":\"knlccrmmkyup\",\"count\":4778980500312164561},{\"name\":\"qjfkakfqfrkemyi\",\"count\":2286876681661463957},{\"name\":\"jascowvfdjkpd\",\"count\":5649908573287233374}],\"alertStates\":[{\"name\":\"nmgzvyfijdkzuqnw\",\"count\":3828875144216790270},{\"name\":\"q\",\"count\":6772939173066661661}],\"alertSeverities\":[{\"name\":\"qwqul\",\"count\":4200717885786912071}],\"nextLink\":\"bhxykfhyqezvqqug\"},\"id\":\"rftb\",\"name\":\"ve\",\"type\":\"reuquowtljvf\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AlertsManagementManager manager = AlertsManagementManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        SmartGroup response = manager.smartGroups()
            .changeStateWithResponse("afhlbyl", AlertState.CLOSED, com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals(4360656655666288238L, response.alertsCount());
        Assertions.assertEquals("hvhfnracw", response.resources().get(0).name());
        Assertions.assertEquals(7402899718023969441L, response.resources().get(0).count());
        Assertions.assertEquals("noakiz", response.resourceTypes().get(0).name());
        Assertions.assertEquals(4006804452494358628L, response.resourceTypes().get(0).count());
        Assertions.assertEquals("q", response.resourceGroups().get(0).name());
        Assertions.assertEquals(1837685829553435817L, response.resourceGroups().get(0).count());
        Assertions.assertEquals("wxh", response.monitorServices().get(0).name());
        Assertions.assertEquals(5192208220551253040L, response.monitorServices().get(0).count());
        Assertions.assertEquals("exaonwivkcq", response.monitorConditions().get(0).name());
        Assertions.assertEquals(7546519316906954974L, response.monitorConditions().get(0).count());
        Assertions.assertEquals("nmgzvyfijdkzuqnw", response.alertStates().get(0).name());
        Assertions.assertEquals(3828875144216790270L, response.alertStates().get(0).count());
        Assertions.assertEquals("qwqul", response.alertSeverities().get(0).name());
        Assertions.assertEquals(4200717885786912071L, response.alertSeverities().get(0).count());
        Assertions.assertEquals("bhxykfhyqezvqqug", response.nextLink());
    }
}
