// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.alertsmanagement.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.alertsmanagement.AlertsManagementManager;
import com.azure.resourcemanager.alertsmanagement.models.PrometheusRuleGroupResource;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class PrometheusRuleGroupsListByResourceGroupMockTests {
    @Test
    public void testListByResourceGroup() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"description\":\"kczvvita\",\"enabled\":true,\"clusterName\":\"fcsserxhtvsox\",\"scopes\":[\"wntsjgqrsxy\",\"ruuuybnch\",\"szizoyuelyetndnb\"],\"interval\":\"yggagflnlgmt\",\"rules\":[{\"record\":\"hzjmucftbyrp\",\"alert\":\"ohkpigqfu\",\"enabled\":true,\"expression\":\"kzmkwklsnoxaxmqe\",\"severity\":1409659836,\"for\":\"hjnhgwydyynfsvk\",\"labels\":{\"py\":\"vqtanarfdlpuk\"},\"annotations\":{\"hnmgbroux\":\"izjcpeog\",\"paz\":\"dbhfhp\",\"xhpdulontacnpqwt\":\"zoyw\",\"ogwxhnsduugwb\":\"htuevrhrljy\"},\"actions\":[{}],\"resolveConfiguration\":{\"autoResolved\":true,\"timeToResolve\":\"kfuarenlv\"}},{\"record\":\"tklnvnafvvkyfed\",\"alert\":\"jboslcqxypok\",\"enabled\":false,\"expression\":\"inqcymczngnbdxxe\",\"severity\":1211103053,\"for\":\"nvudbchaqdtvqecr\",\"labels\":{\"ytxzvtznapxbanno\":\"mxxdtddmflh\",\"nwvroevytlyokrr\":\"voxczytpr\",\"uxvnsasbcrymodi\":\"o\",\"lmv\":\"rxklobdxnazpmk\"},\"annotations\":{\"ohrdddt\":\"xzopjhbzxl\"},\"actions\":[{},{}],\"resolveConfiguration\":{\"autoResolved\":true,\"timeToResolve\":\"pcbbnzqcykna\"}},{\"record\":\"ofyuicd\",\"alert\":\"bd\",\"enabled\":false,\"expression\":\"wgbdvibidmhmwffp\",\"severity\":1436158527,\"for\":\"vapckccrrvwey\",\"labels\":{\"roqboshbragapyy\":\"yyukphaimmo\"},\"annotations\":{\"pgahxkumas\":\"svbpavbopfppdbwn\"},\"actions\":[{},{}],\"resolveConfiguration\":{\"autoResolved\":false,\"timeToResolve\":\"mmcpug\"}},{\"record\":\"hqepvufhbzehewh\",\"alert\":\"hnl\",\"enabled\":true,\"expression\":\"bldxeaclgscho\",\"severity\":1585216248,\"for\":\"rsrrmoucsofldp\",\"labels\":{\"uqibsxtkcu\":\"yfcaabeolhbhlvbm\"},\"annotations\":{\"siowlkjxnqpv\":\"sfar\"},\"actions\":[{},{},{},{}],\"resolveConfiguration\":{\"autoResolved\":true,\"timeToResolve\":\"qyki\"}}]},\"location\":\"d\",\"tags\":{\"ycjimryvwgcwwpbm\":\"oafcluqvox\"},\"id\":\"gwe\",\"name\":\"ydsx\",\"type\":\"efoh\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AlertsManagementManager manager = AlertsManagementManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<PrometheusRuleGroupResource> response
            = manager.prometheusRuleGroups().listByResourceGroup("punj", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("d", response.iterator().next().location());
        Assertions.assertEquals("oafcluqvox", response.iterator().next().tags().get("ycjimryvwgcwwpbm"));
        Assertions.assertEquals("kczvvita", response.iterator().next().description());
        Assertions.assertEquals(true, response.iterator().next().enabled());
        Assertions.assertEquals("fcsserxhtvsox", response.iterator().next().clusterName());
        Assertions.assertEquals("wntsjgqrsxy", response.iterator().next().scopes().get(0));
        Assertions.assertEquals("yggagflnlgmt", response.iterator().next().interval());
        Assertions.assertEquals("hzjmucftbyrp", response.iterator().next().rules().get(0).record());
        Assertions.assertEquals("ohkpigqfu", response.iterator().next().rules().get(0).alert());
        Assertions.assertEquals(true, response.iterator().next().rules().get(0).enabled());
        Assertions.assertEquals("kzmkwklsnoxaxmqe", response.iterator().next().rules().get(0).expression());
        Assertions.assertEquals(1409659836, response.iterator().next().rules().get(0).severity());
        Assertions.assertEquals("hjnhgwydyynfsvk", response.iterator().next().rules().get(0).forProperty());
        Assertions.assertEquals("vqtanarfdlpuk", response.iterator().next().rules().get(0).labels().get("py"));
        Assertions.assertEquals("izjcpeog", response.iterator().next().rules().get(0).annotations().get("hnmgbroux"));
        Assertions.assertEquals(true, response.iterator().next().rules().get(0).resolveConfiguration().autoResolved());
        Assertions.assertEquals("kfuarenlv",
            response.iterator().next().rules().get(0).resolveConfiguration().timeToResolve());
    }
}
