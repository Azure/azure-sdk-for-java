// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.astro.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.astro.AstroManager;
import com.azure.resourcemanager.astro.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.astro.models.MarketplaceSubscriptionStatus;
import com.azure.resourcemanager.astro.models.OrganizationResource;
import com.azure.resourcemanager.astro.models.SingleSignOnStates;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class OrganizationsListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"marketplace\":{\"subscriptionId\":\"lkevle\",\"subscriptionStatus\":\"Subscribed\",\"offerDetails\":{\"publisherId\":\"fbuhfmvfaxkffe\",\"offerId\":\"ithlvmezyvshxm\",\"planId\":\"sbbzo\",\"planName\":\"igrxwburvjxxjn\",\"termUnit\":\"ydptkoen\",\"termId\":\"uknvudwti\"}},\"user\":{\"firstName\":\"kbldngkpocipa\",\"lastName\":\"yxoegukgjnp\",\"emailAddress\":\"ucgygevqz\",\"upn\":\"yp\",\"phoneNumber\":\"bpizcdrqjsdpydn\"},\"provisioningState\":\"Failed\",\"partnerOrganizationProperties\":{\"organizationId\":\"eoejzic\",\"workspaceId\":\"fsj\",\"organizationName\":\"tgzfbishcbkh\",\"workspaceName\":\"deyeamdphagalpbu\",\"singleSignOnProperties\":{\"singleSignOnState\":\"Enable\",\"enterpriseAppId\":\"whonowk\",\"singleSignOnUrl\":\"hwankixzbinjepu\",\"aadDomains\":[\"rywn\"],\"provisioningState\":\"Succeeded\"}}},\"identity\":{\"principalId\":\"7cc978ec-f638-4b61-8c29-d83f0fdb93d2\",\"tenantId\":\"8030ffe9-05d2-4aad-b387-0175ba0e66fc\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"n\":{\"principalId\":\"d39aadba-8e2e-4d2a-ba7e-c45502beb646\",\"clientId\":\"7a048ec8-0a8d-4d10-acf3-09f41f6e82e8\"},\"vyxlwhzlsicohoqq\":{\"principalId\":\"50495bfa-e66e-4c27-9d1c-f9bc389bc468\",\"clientId\":\"2e612bf4-a404-48b5-a910-13bf91d06eb4\"},\"lryav\":{\"principalId\":\"a8897f0a-4e73-402c-a5f1-c0318bd56dfa\",\"clientId\":\"af23b854-f7f3-4d0a-be67-114c31f6d4c4\"},\"eun\":{\"principalId\":\"163c57cd-2618-466a-96bd-973d29c065d3\",\"clientId\":\"bcd8fcbf-b9d4-40e6-aad2-f19f07384825\"}}},\"location\":\"qhgyxzkonocukok\",\"tags\":{\"szfkbe\":\"xuconu\",\"jmwvvj\":\"pewr\"},\"id\":\"kt\",\"name\":\"xsenhwlr\",\"type\":\"ffrzpwvlqdqgbiqy\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AstroManager manager = AstroManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<OrganizationResource> response = manager.organizations().list(com.azure.core.util.Context.NONE);

        Assertions.assertEquals("qhgyxzkonocukok", response.iterator().next().location());
        Assertions.assertEquals("xuconu", response.iterator().next().tags().get("szfkbe"));
        Assertions.assertEquals("lkevle", response.iterator().next().properties().marketplace().subscriptionId());
        Assertions.assertEquals(MarketplaceSubscriptionStatus.SUBSCRIBED,
            response.iterator().next().properties().marketplace().subscriptionStatus());
        Assertions.assertEquals("fbuhfmvfaxkffe",
            response.iterator().next().properties().marketplace().offerDetails().publisherId());
        Assertions.assertEquals("ithlvmezyvshxm",
            response.iterator().next().properties().marketplace().offerDetails().offerId());
        Assertions.assertEquals("sbbzo", response.iterator().next().properties().marketplace().offerDetails().planId());
        Assertions.assertEquals("igrxwburvjxxjn",
            response.iterator().next().properties().marketplace().offerDetails().planName());
        Assertions.assertEquals("ydptkoen",
            response.iterator().next().properties().marketplace().offerDetails().termUnit());
        Assertions.assertEquals("uknvudwti",
            response.iterator().next().properties().marketplace().offerDetails().termId());
        Assertions.assertEquals("kbldngkpocipa", response.iterator().next().properties().user().firstName());
        Assertions.assertEquals("yxoegukgjnp", response.iterator().next().properties().user().lastName());
        Assertions.assertEquals("ucgygevqz", response.iterator().next().properties().user().emailAddress());
        Assertions.assertEquals("yp", response.iterator().next().properties().user().upn());
        Assertions.assertEquals("bpizcdrqjsdpydn", response.iterator().next().properties().user().phoneNumber());
        Assertions.assertEquals("eoejzic",
            response.iterator().next().properties().partnerOrganizationProperties().organizationId());
        Assertions.assertEquals("fsj",
            response.iterator().next().properties().partnerOrganizationProperties().workspaceId());
        Assertions.assertEquals("tgzfbishcbkh",
            response.iterator().next().properties().partnerOrganizationProperties().organizationName());
        Assertions.assertEquals("deyeamdphagalpbu",
            response.iterator().next().properties().partnerOrganizationProperties().workspaceName());
        Assertions.assertEquals(SingleSignOnStates.ENABLE,
            response.iterator()
                .next()
                .properties()
                .partnerOrganizationProperties()
                .singleSignOnProperties()
                .singleSignOnState());
        Assertions.assertEquals("whonowk",
            response.iterator()
                .next()
                .properties()
                .partnerOrganizationProperties()
                .singleSignOnProperties()
                .enterpriseAppId());
        Assertions.assertEquals("hwankixzbinjepu",
            response.iterator()
                .next()
                .properties()
                .partnerOrganizationProperties()
                .singleSignOnProperties()
                .singleSignOnUrl());
        Assertions.assertEquals("rywn",
            response.iterator()
                .next()
                .properties()
                .partnerOrganizationProperties()
                .singleSignOnProperties()
                .aadDomains()
                .get(0));
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED,
            response.iterator().next().identity().type());
    }
}
