// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.migrationdiscoverysap.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migrationdiscoverysap.MigrationDiscoverySapManager;
import com.azure.resourcemanager.migrationdiscoverysap.models.OperationStatusResult;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SapDiscoverySitesImportEntitiesMockTests {
    @Test
    public void testImportEntities() throws Exception {
        String responseStr
            = "{\"id\":\"vfyexfw\",\"name\":\"bcibvyvdcsitynn\",\"status\":\"amdecte\",\"percentComplete\":52.631783,\"startTime\":\"2021-03-19T08:13:40Z\",\"endTime\":\"2021-02-12T09:18:02Z\",\"operations\":[{\"id\":\"vhezrkgqhcj\",\"name\":\"fovgmkqsleyyvxy\",\"status\":\"jpkcattpng\",\"percentComplete\":74.10779,\"startTime\":\"2021-11-04T06:11:04Z\",\"endTime\":\"2021-06-08T09:19:17Z\",\"operations\":[{\"id\":\"hvmdajvnysounq\",\"name\":\"a\",\"status\":\"oaeupfhyhltrpmo\",\"percentComplete\":87.11093,\"startTime\":\"2021-03-14T07:19:34Z\",\"endTime\":\"2021-01-13T06:54:34Z\",\"operations\":[{\"status\":\"kthfui\"}]},{\"id\":\"dsfcpkvxodpuoz\",\"name\":\"zydagfuaxbezyiuo\",\"status\":\"ktwh\",\"percentComplete\":6.793952,\"startTime\":\"2021-10-13T16:00:10Z\",\"endTime\":\"2021-02-16T11:08:22Z\",\"operations\":[{\"status\":\"mbsureximo\"}]},{\"id\":\"cfsf\",\"name\":\"ymddys\",\"status\":\"kiiuxhqyudxor\",\"percentComplete\":98.59043,\"startTime\":\"2021-06-17T06:36:49Z\",\"endTime\":\"2021-02-11T00:33:58Z\",\"operations\":[{\"status\":\"i\"},{\"status\":\"qrvkdv\"},{\"status\":\"sllr\"},{\"status\":\"vvdfwatkpnpul\"}]}]},{\"id\":\"czwtruwiqzbqjv\",\"name\":\"vmyokacspkwl\",\"status\":\"zdobpxjmflbvvnch\",\"percentComplete\":18.921625,\"startTime\":\"2021-04-05T08:00:08Z\",\"endTime\":\"2021-02-22T11:28:36Z\",\"operations\":[{\"id\":\"qkhr\",\"name\":\"jiwkuofoskghsau\",\"status\":\"imjm\",\"percentComplete\":13.659686,\"startTime\":\"2021-01-02T07:29:36Z\",\"endTime\":\"2021-01-07T05:37:46Z\",\"operations\":[{\"status\":\"dyjrrfbyaosv\"},{\"status\":\"xc\"},{\"status\":\"onpc\"},{\"status\":\"hocohslkev\"}]}]},{\"id\":\"zfbuhf\",\"name\":\"faxkffeii\",\"status\":\"hl\",\"percentComplete\":11.754632,\"startTime\":\"2021-02-27T12:32:19Z\",\"endTime\":\"2021-08-05T17:04:54Z\",\"operations\":[{\"id\":\"sbbzo\",\"name\":\"igrxwburvjxxjn\",\"status\":\"pydptko\",\"percentComplete\":71.57593,\"startTime\":\"2021-08-24T09:48:52Z\",\"endTime\":\"2021-04-14T04:43:28Z\",\"operations\":[{\"status\":\"dwtiukbldngkp\"},{\"status\":\"cipazyxoegukgjnp\"},{\"status\":\"ucgygevqz\"}]}]}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrationDiscoverySapManager manager = MigrationDiscoverySapManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        OperationStatusResult response
            = manager.sapDiscoverySites().importEntities("yggdtjixh", "kuofqweykhme", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("vfyexfw", response.id());
        Assertions.assertEquals("bcibvyvdcsitynn", response.name());
        Assertions.assertEquals("amdecte", response.status());
        Assertions.assertEquals(52.631783F, response.percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-19T08:13:40Z"), response.startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-02-12T09:18:02Z"), response.endTime());
        Assertions.assertEquals("vhezrkgqhcj", response.operations().get(0).id());
        Assertions.assertEquals("fovgmkqsleyyvxy", response.operations().get(0).name());
        Assertions.assertEquals("jpkcattpng", response.operations().get(0).status());
        Assertions.assertEquals(74.10779F, response.operations().get(0).percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-04T06:11:04Z"), response.operations().get(0).startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-08T09:19:17Z"), response.operations().get(0).endTime());
        Assertions.assertEquals("hvmdajvnysounq", response.operations().get(0).operations().get(0).id());
        Assertions.assertEquals("a", response.operations().get(0).operations().get(0).name());
        Assertions.assertEquals("oaeupfhyhltrpmo", response.operations().get(0).operations().get(0).status());
        Assertions.assertEquals(87.11093F, response.operations().get(0).operations().get(0).percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-14T07:19:34Z"),
            response.operations().get(0).operations().get(0).startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-01-13T06:54:34Z"),
            response.operations().get(0).operations().get(0).endTime());
        Assertions.assertEquals("kthfui",
            response.operations().get(0).operations().get(0).operations().get(0).status());
    }
}
