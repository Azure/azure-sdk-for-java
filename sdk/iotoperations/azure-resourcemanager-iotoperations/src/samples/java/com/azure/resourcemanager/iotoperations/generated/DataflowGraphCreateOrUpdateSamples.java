// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.iotoperations.generated;

import com.azure.resourcemanager.iotoperations.models.DataflowGraphConnectionInput;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphConnectionOutput;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphConnectionSchemaSerializationFormat;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphConnectionSchemaSettings;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphDestinationNode;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphDestinationNodeSettings;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphDestinationSchemaSerializationFormat;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphDestinationSchemaSettings;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphGraphNode;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphGraphNodeConfiguration;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphNodeConnection;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphNodeGraphSettings;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphProperties;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphSourceNode;
import com.azure.resourcemanager.iotoperations.models.DataflowGraphSourceSettings;
import com.azure.resourcemanager.iotoperations.models.ExtendedLocation;
import com.azure.resourcemanager.iotoperations.models.ExtendedLocationType;
import com.azure.resourcemanager.iotoperations.models.OperationalMode;
import java.util.Arrays;

/**
 * Samples for DataflowGraph CreateOrUpdate.
 */
public final class DataflowGraphCreateOrUpdateSamples {
    /*
     * x-ms-original-file: 2025-07-01-preview/DataflowGraph_CreateOrUpdate_MaximumSet_Gen.json
     */
    /**
     * Sample code: DataflowGraph_CreateOrUpdate_MaximumSet.
     * 
     * @param manager Entry point to IoTOperationsManager.
     */
    public static void
        dataflowGraphCreateOrUpdateMaximumSet(com.azure.resourcemanager.iotoperations.IoTOperationsManager manager) {
        manager.dataflowGraphs()
            .define("resource-123")
            .withExistingDataflowProfile("rgiotoperations", "resource-123", "resource-123")
            .withProperties(
                new DataflowGraphProperties().withMode(OperationalMode.ENABLED)
                    .withRequestDiskPersistence(OperationalMode.ENABLED)
                    .withNodes(Arrays.asList(new DataflowGraphSourceNode().withName("temperature")
                        .withSourceSettings(new DataflowGraphSourceSettings().withEndpointRef("default")
                            .withDataSources(Arrays.asList("telemetry/temperature"))),
                        new DataflowGraphGraphNode().withName("my-graph")
                            .withGraphSettings(
                                new DataflowGraphNodeGraphSettings().withRegistryEndpointRef("my-registry-endpoint")
                                    .withArtifact("my-wasm-module:1.4.3")
                                    .withConfiguration(Arrays.asList(
                                        new DataflowGraphGraphNodeConfiguration().withKey("fakeTokenPlaceholder")
                                            .withValue("value1"),
                                        new DataflowGraphGraphNodeConfiguration().withKey("fakeTokenPlaceholder")
                                            .withValue("value2")))),
                        new DataflowGraphDestinationNode().withName("alert")
                            .withDestinationSettings(new DataflowGraphDestinationNodeSettings()
                                .withEndpointRef("default")
                                .withDataDestination("telemetry/temperature/alert")),
                        new DataflowGraphDestinationNode().withName("fabric")
                            .withDestinationSettings(new DataflowGraphDestinationNodeSettings().withEndpointRef(
                                "fabric")
                                .withDataDestination("my-table")
                                .withOutputSchemaSettings(new DataflowGraphDestinationSchemaSettings()
                                    .withSerializationFormat(DataflowGraphDestinationSchemaSerializationFormat.PARQUET)
                                    .withSchemaRef("aio-sr://namespace/alert-parquet:1")))))
                    .withNodeConnections(
                        Arrays
                            .asList(
                                new DataflowGraphNodeConnection()
                                    .withFrom(
                                        new DataflowGraphConnectionInput().withName("temperature")
                                            .withSchema(new DataflowGraphConnectionSchemaSettings()
                                                .withSerializationFormat(
                                                    DataflowGraphConnectionSchemaSerializationFormat.AVRO)
                                                .withSchemaRef("aio-sr://namespace/temperature:1")))
                                    .withTo(new DataflowGraphConnectionOutput().withName("my-graph")),
                                new DataflowGraphNodeConnection()
                                    .withFrom(
                                        new DataflowGraphConnectionInput().withName("my-graph.alert-output")
                                            .withSchema(new DataflowGraphConnectionSchemaSettings()
                                                .withSerializationFormat(
                                                    DataflowGraphConnectionSchemaSerializationFormat.AVRO)
                                                .withSchemaRef("aio-sr://namespace/alert:1")))
                                    .withTo(new DataflowGraphConnectionOutput().withName("fabric")),
                                new DataflowGraphNodeConnection()
                                    .withFrom(new DataflowGraphConnectionInput().withName("my-graph.normal-output")
                                        .withSchema(new DataflowGraphConnectionSchemaSettings()
                                            .withSerializationFormat(
                                                DataflowGraphConnectionSchemaSerializationFormat.AVRO)
                                            .withSchemaRef("aio-sr://namespace/alert:1")))
                                    .withTo(new DataflowGraphConnectionOutput().withName("fabric")))))
            .withExtendedLocation(new ExtendedLocation().withName(
                "/subscriptions/F8C729F9-DF9C-4743-848F-96EE433D8E53/resourceGroups/rgiotoperations/providers/Microsoft.ExtendedLocation/customLocations/resource-123")
                .withType(ExtendedLocationType.CUSTOM_LOCATION))
            .create();
    }
}
