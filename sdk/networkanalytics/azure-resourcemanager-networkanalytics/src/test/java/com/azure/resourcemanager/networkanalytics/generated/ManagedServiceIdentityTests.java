// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.networkanalytics.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.networkanalytics.models.ManagedServiceIdentity;
import com.azure.resourcemanager.networkanalytics.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.networkanalytics.models.UserAssignedIdentity;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class ManagedServiceIdentityTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        ManagedServiceIdentity model = BinaryData.fromString(
            "{\"principalId\":\"3497777f-44a6-441d-b0a1-75d718f34b5e\",\"tenantId\":\"5b39ff5c-1934-4681-b91e-400203f29fce\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"oc\":{\"principalId\":\"3967cbe8-e862-4340-b6eb-21919fee08e7\",\"clientId\":\"a12f70fc-cd3a-4b77-939d-7c8a1fa92215\"},\"ablgphuticndvk\":{\"principalId\":\"26432e12-c00e-4d7e-b474-63cf7e62e687\",\"clientId\":\"4d7d4ff6-90b4-4fe3-921a-0409625b4fed\"},\"wyiftyhxhur\":{\"principalId\":\"b7ba7fdd-b266-4a70-a4c2-c99f6b171ac9\",\"clientId\":\"de36b144-943b-4d8b-bea5-2bf88b40bd4a\"},\"tyxolniwpwc\":{\"principalId\":\"45846002-3619-4b2a-a408-b7546b2ddbdb\",\"clientId\":\"160e3752-911b-4d66-a807-663c77273d07\"}}}")
            .toObject(ManagedServiceIdentity.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.type());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        ManagedServiceIdentity model = new ManagedServiceIdentity().withType(ManagedServiceIdentityType.SYSTEM_ASSIGNED)
            .withUserAssignedIdentities(
                mapOf("oc", new UserAssignedIdentity(), "ablgphuticndvk", new UserAssignedIdentity(), "wyiftyhxhur",
                    new UserAssignedIdentity(), "tyxolniwpwc", new UserAssignedIdentity()));
        model = BinaryData.fromObject(model).toObject(ManagedServiceIdentity.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.type());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
