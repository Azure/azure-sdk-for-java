// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.networkanalytics.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.networkanalytics.models.ManagedServiceIdentity;
import com.azure.resourcemanager.networkanalytics.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.networkanalytics.models.UserAssignedIdentity;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class ManagedServiceIdentityTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        ManagedServiceIdentity model = BinaryData.fromString(
            "{\"principalId\":\"b5254be7-3cef-44f2-8f2c-e2ae33922166\",\"tenantId\":\"730f5923-638f-4640-b471-6f9ee5e69ab4\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"oc\":{\"principalId\":\"e70f991e-7ad5-4fa7-8e2e-f5aaf356e1ee\",\"clientId\":\"6412edf8-b28b-4ea5-b8ff-c75a89a57e88\"},\"ablgphuticndvk\":{\"principalId\":\"cdc5c79d-3807-4025-bbc9-1489a7efc8a7\",\"clientId\":\"cfc6b267-1707-4e34-8069-f038f2101105\"},\"wyiftyhxhur\":{\"principalId\":\"95284b3e-34b5-41e5-a58e-0bf6515546da\",\"clientId\":\"a748d38e-9b44-422c-96cc-a4345c66af7b\"},\"tyxolniwpwc\":{\"principalId\":\"264e03e3-46af-42d8-9d75-4a9a5a4e92e2\",\"clientId\":\"47768660-9702-4ef3-affb-8e9b509408bd\"}}}")
            .toObject(ManagedServiceIdentity.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.type());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        ManagedServiceIdentity model = new ManagedServiceIdentity().withType(ManagedServiceIdentityType.SYSTEM_ASSIGNED)
            .withUserAssignedIdentities(
                mapOf("oc", new UserAssignedIdentity(), "ablgphuticndvk", new UserAssignedIdentity(), "wyiftyhxhur",
                    new UserAssignedIdentity(), "tyxolniwpwc", new UserAssignedIdentity()));
        model = BinaryData.fromObject(model).toObject(ManagedServiceIdentity.class);
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.type());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
