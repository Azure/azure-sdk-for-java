// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.customerinsights.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.customerinsights.CustomerInsightsManager;
import com.azure.resourcemanager.customerinsights.models.RoleAssignmentResourceFormat;
import com.azure.resourcemanager.customerinsights.models.RoleTypes;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class RoleAssignmentsListByHubMockTests {
    @Test
    public void testListByHub() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"tenantId\":\"idhz\",\"assignmentName\":\"re\",\"displayName\":{\"byorjplb\":\"sdtm\",\"xqjsiuepm\":\"hychakvyrfbqvum\"},\"description\":{\"blmrtuxyprhfca\":\"nzlpqmpftxefvu\",\"ahqmom\":\"ooifqdywjflob\"},\"provisioningState\":\"Expiring\",\"role\":\"DataAdmin\",\"principals\":[{\"principalId\":\"kfrocgbmxl\",\"principalType\":\"j\",\"principalMetadata\":{\"qfygpny\":\"zbjesylslur\"}},{\"principalId\":\"gdz\",\"principalType\":\"qscag\",\"principalMetadata\":{\"tqzsslhmgwfnivr\":\"ouprs\",\"gyqvpbfjpoqzuc\":\"pfduiol\"}},{\"principalId\":\"zluczdq\",\"principalType\":\"urbormvh\",\"principalMetadata\":{\"ujywzcqyggmn\":\"elbprn\",\"drrp\":\"svhbngqiwyejto\"}},{\"principalId\":\"rehkunsbfjhh\",\"principalType\":\"w\",\"principalMetadata\":{\"kgtzqnwqsttewu\":\"vegeattb\",\"fjxflpditfno\":\"cysje\",\"yuxlvrhprrv\":\"p\",\"bs\":\"wonleqflvtlr\"}}],\"profiles\":{\"elements\":[\"ykunin\"],\"exceptions\":[\"nrjdszdbu\"]},\"interactions\":{\"elements\":[\"qppoqvgpnew\",\"hwfwjnox\",\"oxtfn\",\"essfepgckncj\"],\"exceptions\":[\"snvbtqdxfm\",\"ym\",\"n\"]},\"links\":{\"elements\":[\"qllbsupubdxc\",\"dlhzwhcu\",\"vbosjj\",\"dizhrjqfyaytvsly\"],\"exceptions\":[\"gniuar\",\"cjiwgsxfaio\",\"wd\"]},\"kpis\":{\"elements\":[\"gnfg\",\"zxbarcbpae\",\"zqsym\"],\"exceptions\":[\"njcytesmfucrtfod\"]},\"sasPolicies\":{\"elements\":[\"uzmzivrtrfzh\",\"ezvhj\",\"dxdyyrudma\",\"swtvd\"],\"exceptions\":[\"qssgfenffdx\",\"vwfqjch\"]},\"connectors\":{\"elements\":[\"ija\"],\"exceptions\":[\"dmuvardlmz\",\"otprrmuhcuhtu\",\"lxiwyo\"]},\"views\":{\"elements\":[\"pfct\",\"rapczdojqyvze\",\"ipiysnjqyowa\"],\"exceptions\":[\"ndazabu\"]},\"relationshipLinks\":{\"elements\":[\"ewkaupwhl\"],\"exceptions\":[\"kremgjl\",\"svdorsirx\",\"hyrkqakofajfr\",\"prfvmkinwteyrqsh\"]},\"relationships\":{\"elements\":[\"ejopylbl\"],\"exceptions\":[\"rrwcsp\"]},\"widgetTypes\":{\"elements\":[\"vvfxrdytzfsl\",\"izhqikmgobl\",\"qemcdi\"],\"exceptions\":[\"klbonxxupjxvt\",\"kfkgenjqn\",\"pjwkosnyxigf\",\"ujjcxgdqmrlhn\"]},\"roleAssignments\":{\"elements\":[\"p\",\"wny\"],\"exceptions\":[\"uprrxyxwjezbfqp\",\"oyuekdcpvuftrsv\",\"mnsvujnjktvolefc\",\"isepk\"]},\"conflationPolicies\":{\"elements\":[\"tfbjampq\",\"c\",\"a\",\"nmxynlsuqbwzst\"],\"exceptions\":[\"gvp\",\"trgjjkt\"]},\"segments\":{\"elements\":[\"hoksmmculwk\"],\"exceptions\":[\"ruook\"]}},\"id\":\"jflsgaojb\",\"name\":\"qpqsdoctpzpuj\",\"type\":\"flmcdsgxc\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        CustomerInsightsManager manager = CustomerInsightsManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<RoleAssignmentResourceFormat> response
            = manager.roleAssignments().listByHub("xzhclec", "wtzqzcloyhy", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("sdtm", response.iterator().next().displayName().get("byorjplb"));
        Assertions.assertEquals("nzlpqmpftxefvu", response.iterator().next().description().get("blmrtuxyprhfca"));
        Assertions.assertEquals(RoleTypes.DATA_ADMIN, response.iterator().next().role());
        Assertions.assertEquals("kfrocgbmxl", response.iterator().next().principals().get(0).principalId());
        Assertions.assertEquals("j", response.iterator().next().principals().get(0).principalType());
        Assertions.assertEquals("zbjesylslur",
            response.iterator().next().principals().get(0).principalMetadata().get("qfygpny"));
        Assertions.assertEquals("ykunin", response.iterator().next().profiles().elements().get(0));
        Assertions.assertEquals("nrjdszdbu", response.iterator().next().profiles().exceptions().get(0));
        Assertions.assertEquals("qppoqvgpnew", response.iterator().next().interactions().elements().get(0));
        Assertions.assertEquals("snvbtqdxfm", response.iterator().next().interactions().exceptions().get(0));
        Assertions.assertEquals("qllbsupubdxc", response.iterator().next().links().elements().get(0));
        Assertions.assertEquals("gniuar", response.iterator().next().links().exceptions().get(0));
        Assertions.assertEquals("gnfg", response.iterator().next().kpis().elements().get(0));
        Assertions.assertEquals("njcytesmfucrtfod", response.iterator().next().kpis().exceptions().get(0));
        Assertions.assertEquals("uzmzivrtrfzh", response.iterator().next().sasPolicies().elements().get(0));
        Assertions.assertEquals("qssgfenffdx", response.iterator().next().sasPolicies().exceptions().get(0));
        Assertions.assertEquals("ija", response.iterator().next().connectors().elements().get(0));
        Assertions.assertEquals("dmuvardlmz", response.iterator().next().connectors().exceptions().get(0));
        Assertions.assertEquals("pfct", response.iterator().next().views().elements().get(0));
        Assertions.assertEquals("ndazabu", response.iterator().next().views().exceptions().get(0));
        Assertions.assertEquals("ewkaupwhl", response.iterator().next().relationshipLinks().elements().get(0));
        Assertions.assertEquals("kremgjl", response.iterator().next().relationshipLinks().exceptions().get(0));
        Assertions.assertEquals("ejopylbl", response.iterator().next().relationships().elements().get(0));
        Assertions.assertEquals("rrwcsp", response.iterator().next().relationships().exceptions().get(0));
        Assertions.assertEquals("vvfxrdytzfsl", response.iterator().next().widgetTypes().elements().get(0));
        Assertions.assertEquals("klbonxxupjxvt", response.iterator().next().widgetTypes().exceptions().get(0));
        Assertions.assertEquals("p", response.iterator().next().roleAssignments().elements().get(0));
        Assertions.assertEquals("uprrxyxwjezbfqp", response.iterator().next().roleAssignments().exceptions().get(0));
        Assertions.assertEquals("tfbjampq", response.iterator().next().conflationPolicies().elements().get(0));
        Assertions.assertEquals("gvp", response.iterator().next().conflationPolicies().exceptions().get(0));
        Assertions.assertEquals("hoksmmculwk", response.iterator().next().segments().elements().get(0));
        Assertions.assertEquals("ruook", response.iterator().next().segments().exceptions().get(0));
    }
}
