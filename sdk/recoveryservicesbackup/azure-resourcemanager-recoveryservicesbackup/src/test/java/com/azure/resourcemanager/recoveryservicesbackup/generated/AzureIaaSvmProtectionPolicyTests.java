// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.recoveryservicesbackup.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.recoveryservicesbackup.models.AzureIaaSvmProtectionPolicy;
import com.azure.resourcemanager.recoveryservicesbackup.models.IaasvmPolicyType;
import com.azure.resourcemanager.recoveryservicesbackup.models.InstantRPAdditionalDetails;
import com.azure.resourcemanager.recoveryservicesbackup.models.RetentionDurationType;
import com.azure.resourcemanager.recoveryservicesbackup.models.RetentionPolicy;
import com.azure.resourcemanager.recoveryservicesbackup.models.SchedulePolicy;
import com.azure.resourcemanager.recoveryservicesbackup.models.TieringMode;
import com.azure.resourcemanager.recoveryservicesbackup.models.TieringPolicy;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class AzureIaaSvmProtectionPolicyTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        AzureIaaSvmProtectionPolicy model = BinaryData.fromString(
            "{\"backupManagementType\":\"AzureIaasVM\",\"instantRPDetails\":{\"azureBackupRGNamePrefix\":\"ywdxsmic\",\"azureBackupRGNameSuffix\":\"rwfscjfnynszquj\"},\"schedulePolicy\":{\"schedulePolicyType\":\"SchedulePolicy\"},\"retentionPolicy\":{\"retentionPolicyType\":\"RetentionPolicy\"},\"tieringPolicy\":{\"owbb\":{\"tieringMode\":\"TierRecommended\",\"duration\":1634271875,\"durationType\":\"Weeks\"},\"pthjoxo\":{\"tieringMode\":\"DoNotTier\",\"duration\":384824052,\"durationType\":\"Weeks\"},\"pi\":{\"tieringMode\":\"TierRecommended\",\"duration\":852688368,\"durationType\":\"Days\"},\"kcgxxlxsffgcvi\":{\"tieringMode\":\"Invalid\",\"duration\":313242233,\"durationType\":\"Weeks\"}},\"instantRpRetentionRangeInDays\":1820797792,\"timeZone\":\"wlvwlyoupf\",\"policyType\":\"V1\",\"protectedItemsCount\":672538380,\"resourceGuardOperationRequests\":[\"dyhgkfminsg\",\"wzf\",\"tsttktlahbq\",\"ctxtgzukxi\"]}")
            .toObject(AzureIaaSvmProtectionPolicy.class);
        Assertions.assertEquals(672538380, model.protectedItemsCount());
        Assertions.assertEquals("dyhgkfminsg", model.resourceGuardOperationRequests().get(0));
        Assertions.assertEquals("ywdxsmic", model.instantRPDetails().azureBackupRGNamePrefix());
        Assertions.assertEquals("rwfscjfnynszquj", model.instantRPDetails().azureBackupRGNameSuffix());
        Assertions.assertEquals(TieringMode.TIER_RECOMMENDED, model.tieringPolicy().get("owbb").tieringMode());
        Assertions.assertEquals(1634271875, model.tieringPolicy().get("owbb").duration());
        Assertions.assertEquals(RetentionDurationType.WEEKS, model.tieringPolicy().get("owbb").durationType());
        Assertions.assertEquals(1820797792, model.instantRpRetentionRangeInDays());
        Assertions.assertEquals("wlvwlyoupf", model.timeZone());
        Assertions.assertEquals(IaasvmPolicyType.V1, model.policyType());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        AzureIaaSvmProtectionPolicy model = new AzureIaaSvmProtectionPolicy().withProtectedItemsCount(672538380)
            .withResourceGuardOperationRequests(Arrays.asList("dyhgkfminsg", "wzf", "tsttktlahbq", "ctxtgzukxi"))
            .withInstantRPDetails(new InstantRPAdditionalDetails().withAzureBackupRGNamePrefix("ywdxsmic")
                .withAzureBackupRGNameSuffix("rwfscjfnynszquj"))
            .withSchedulePolicy(new SchedulePolicy()).withRetentionPolicy(new RetentionPolicy())
            .withTieringPolicy(mapOf("owbb",
                new TieringPolicy().withTieringMode(TieringMode.TIER_RECOMMENDED).withDuration(1634271875)
                    .withDurationType(RetentionDurationType.WEEKS),
                "pthjoxo",
                new TieringPolicy().withTieringMode(TieringMode.DO_NOT_TIER).withDuration(384824052)
                    .withDurationType(RetentionDurationType.WEEKS),
                "pi",
                new TieringPolicy().withTieringMode(TieringMode.TIER_RECOMMENDED).withDuration(852688368)
                    .withDurationType(RetentionDurationType.DAYS),
                "kcgxxlxsffgcvi",
                new TieringPolicy().withTieringMode(TieringMode.INVALID).withDuration(313242233)
                    .withDurationType(RetentionDurationType.WEEKS)))
            .withInstantRpRetentionRangeInDays(1820797792).withTimeZone("wlvwlyoupf")
            .withPolicyType(IaasvmPolicyType.V1);
        model = BinaryData.fromObject(model).toObject(AzureIaaSvmProtectionPolicy.class);
        Assertions.assertEquals(672538380, model.protectedItemsCount());
        Assertions.assertEquals("dyhgkfminsg", model.resourceGuardOperationRequests().get(0));
        Assertions.assertEquals("ywdxsmic", model.instantRPDetails().azureBackupRGNamePrefix());
        Assertions.assertEquals("rwfscjfnynszquj", model.instantRPDetails().azureBackupRGNameSuffix());
        Assertions.assertEquals(TieringMode.TIER_RECOMMENDED, model.tieringPolicy().get("owbb").tieringMode());
        Assertions.assertEquals(1634271875, model.tieringPolicy().get("owbb").duration());
        Assertions.assertEquals(RetentionDurationType.WEEKS, model.tieringPolicy().get("owbb").durationType());
        Assertions.assertEquals(1820797792, model.instantRpRetentionRangeInDays());
        Assertions.assertEquals("wlvwlyoupf", model.timeZone());
        Assertions.assertEquals(IaasvmPolicyType.V1, model.policyType());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
