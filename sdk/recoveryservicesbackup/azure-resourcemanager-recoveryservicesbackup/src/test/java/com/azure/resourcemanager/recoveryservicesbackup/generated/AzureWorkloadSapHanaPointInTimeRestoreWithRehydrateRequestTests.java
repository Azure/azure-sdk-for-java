// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.recoveryservicesbackup.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.recoveryservicesbackup.models.AzureWorkloadSapHanaPointInTimeRestoreWithRehydrateRequest;
import com.azure.resourcemanager.recoveryservicesbackup.models.OverwriteOptions;
import com.azure.resourcemanager.recoveryservicesbackup.models.RecoveryMode;
import com.azure.resourcemanager.recoveryservicesbackup.models.RecoveryPointRehydrationInfo;
import com.azure.resourcemanager.recoveryservicesbackup.models.RecoveryType;
import com.azure.resourcemanager.recoveryservicesbackup.models.RehydrationPriority;
import com.azure.resourcemanager.recoveryservicesbackup.models.SnapshotRestoreParameters;
import com.azure.resourcemanager.recoveryservicesbackup.models.TargetRestoreInfo;
import com.azure.resourcemanager.recoveryservicesbackup.models.UserAssignedIdentityProperties;
import com.azure.resourcemanager.recoveryservicesbackup.models.UserAssignedManagedIdentityDetails;
import java.time.OffsetDateTime;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;

public final class AzureWorkloadSapHanaPointInTimeRestoreWithRehydrateRequestTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        AzureWorkloadSapHanaPointInTimeRestoreWithRehydrateRequest model = BinaryData.fromString(
            "{\"objectType\":\"AzureWorkloadSAPHanaPointInTimeRestoreWithRehydrateRequest\",\"recoveryPointRehydrationInfo\":{\"rehydrationRetentionDuration\":\"slstvasy\",\"rehydrationPriority\":\"Standard\"},\"pointInTime\":\"2021-03-08T01:37:13Z\",\"recoveryType\":\"Invalid\",\"sourceResourceId\":\"weoohguufuzboyj\",\"propertyBag\":{\"jscjpahl\":\"wtzolbaemwmdxmeb\",\"yijddtvqcttad\":\"veabfqxnmwmqtib\"},\"targetInfo\":{\"overwriteOption\":\"Invalid\",\"containerId\":\"kmr\",\"databaseName\":\"eekpndz\",\"targetDirectoryForFileRestore\":\"pmudqmeqwig\"},\"recoveryMode\":\"RecoveryUsingSnapshot\",\"targetResourceGroupName\":\"dqwyxeb\",\"userAssignedManagedIdentityDetails\":{\"identityArmId\":\"pmzznrtffya\",\"identityName\":\"tmhheioqa\",\"userAssignedIdentityProperties\":{\"clientId\":\"seufuqy\",\"principalId\":\"pdlc\"}},\"snapshotRestoreParameters\":{\"skipAttachAndMount\":true,\"logPointInTimeForDBRecovery\":\"smjqfrddgam\"},\"targetVirtualMachineId\":\"hiosrsjuiv\",\"resourceGuardOperationRequests\":[\"is\",\"irnxz\",\"czexrxzbujrtrhqv\"]}")
            .toObject(AzureWorkloadSapHanaPointInTimeRestoreWithRehydrateRequest.class);
        Assertions.assertEquals("is", model.resourceGuardOperationRequests().get(0));
        Assertions.assertEquals(RecoveryType.INVALID, model.recoveryType());
        Assertions.assertEquals("weoohguufuzboyj", model.sourceResourceId());
        Assertions.assertEquals("wtzolbaemwmdxmeb", model.propertyBag().get("jscjpahl"));
        Assertions.assertEquals(OverwriteOptions.INVALID, model.targetInfo().overwriteOption());
        Assertions.assertEquals("kmr", model.targetInfo().containerId());
        Assertions.assertEquals("eekpndz", model.targetInfo().databaseName());
        Assertions.assertEquals("pmudqmeqwig", model.targetInfo().targetDirectoryForFileRestore());
        Assertions.assertEquals(RecoveryMode.RECOVERY_USING_SNAPSHOT, model.recoveryMode());
        Assertions.assertEquals("dqwyxeb", model.targetResourceGroupName());
        Assertions.assertEquals("pmzznrtffya", model.userAssignedManagedIdentityDetails().identityArmId());
        Assertions.assertEquals("tmhheioqa", model.userAssignedManagedIdentityDetails().identityName());
        Assertions.assertEquals("seufuqy",
            model.userAssignedManagedIdentityDetails().userAssignedIdentityProperties().clientId());
        Assertions.assertEquals("pdlc",
            model.userAssignedManagedIdentityDetails().userAssignedIdentityProperties().principalId());
        Assertions.assertTrue(model.snapshotRestoreParameters().skipAttachAndMount());
        Assertions.assertEquals("smjqfrddgam", model.snapshotRestoreParameters().logPointInTimeForDBRecovery());
        Assertions.assertEquals("hiosrsjuiv", model.targetVirtualMachineId());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-08T01:37:13Z"), model.pointInTime());
        Assertions.assertEquals("slstvasy", model.recoveryPointRehydrationInfo().rehydrationRetentionDuration());
        Assertions.assertEquals(RehydrationPriority.STANDARD,
            model.recoveryPointRehydrationInfo().rehydrationPriority());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        AzureWorkloadSapHanaPointInTimeRestoreWithRehydrateRequest model
            = new AzureWorkloadSapHanaPointInTimeRestoreWithRehydrateRequest()
                .withResourceGuardOperationRequests(Arrays.asList("is", "irnxz", "czexrxzbujrtrhqv"))
                .withRecoveryType(RecoveryType.INVALID)
                .withSourceResourceId("weoohguufuzboyj")
                .withPropertyBag(mapOf("jscjpahl", "wtzolbaemwmdxmeb", "yijddtvqcttad", "veabfqxnmwmqtib"))
                .withTargetInfo(new TargetRestoreInfo().withOverwriteOption(OverwriteOptions.INVALID)
                    .withContainerId("kmr")
                    .withDatabaseName("eekpndz")
                    .withTargetDirectoryForFileRestore("pmudqmeqwig"))
                .withRecoveryMode(RecoveryMode.RECOVERY_USING_SNAPSHOT)
                .withTargetResourceGroupName("dqwyxeb")
                .withUserAssignedManagedIdentityDetails(
                    new UserAssignedManagedIdentityDetails().withIdentityArmId("pmzznrtffya")
                        .withIdentityName("tmhheioqa")
                        .withUserAssignedIdentityProperties(
                            new UserAssignedIdentityProperties().withClientId("seufuqy").withPrincipalId("pdlc")))
                .withSnapshotRestoreParameters(new SnapshotRestoreParameters().withSkipAttachAndMount(true)
                    .withLogPointInTimeForDBRecovery("smjqfrddgam"))
                .withTargetVirtualMachineId("hiosrsjuiv")
                .withPointInTime(OffsetDateTime.parse("2021-03-08T01:37:13Z"))
                .withRecoveryPointRehydrationInfo(
                    new RecoveryPointRehydrationInfo().withRehydrationRetentionDuration("slstvasy")
                        .withRehydrationPriority(RehydrationPriority.STANDARD));
        model = BinaryData.fromObject(model).toObject(AzureWorkloadSapHanaPointInTimeRestoreWithRehydrateRequest.class);
        Assertions.assertEquals("is", model.resourceGuardOperationRequests().get(0));
        Assertions.assertEquals(RecoveryType.INVALID, model.recoveryType());
        Assertions.assertEquals("weoohguufuzboyj", model.sourceResourceId());
        Assertions.assertEquals("wtzolbaemwmdxmeb", model.propertyBag().get("jscjpahl"));
        Assertions.assertEquals(OverwriteOptions.INVALID, model.targetInfo().overwriteOption());
        Assertions.assertEquals("kmr", model.targetInfo().containerId());
        Assertions.assertEquals("eekpndz", model.targetInfo().databaseName());
        Assertions.assertEquals("pmudqmeqwig", model.targetInfo().targetDirectoryForFileRestore());
        Assertions.assertEquals(RecoveryMode.RECOVERY_USING_SNAPSHOT, model.recoveryMode());
        Assertions.assertEquals("dqwyxeb", model.targetResourceGroupName());
        Assertions.assertEquals("pmzznrtffya", model.userAssignedManagedIdentityDetails().identityArmId());
        Assertions.assertEquals("tmhheioqa", model.userAssignedManagedIdentityDetails().identityName());
        Assertions.assertEquals("seufuqy",
            model.userAssignedManagedIdentityDetails().userAssignedIdentityProperties().clientId());
        Assertions.assertEquals("pdlc",
            model.userAssignedManagedIdentityDetails().userAssignedIdentityProperties().principalId());
        Assertions.assertTrue(model.snapshotRestoreParameters().skipAttachAndMount());
        Assertions.assertEquals("smjqfrddgam", model.snapshotRestoreParameters().logPointInTimeForDBRecovery());
        Assertions.assertEquals("hiosrsjuiv", model.targetVirtualMachineId());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-08T01:37:13Z"), model.pointInTime());
        Assertions.assertEquals("slstvasy", model.recoveryPointRehydrationInfo().rehydrationRetentionDuration());
        Assertions.assertEquals(RehydrationPriority.STANDARD,
            model.recoveryPointRehydrationInfo().rehydrationPriority());
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
