// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.azureintegrationspaces.generated;

import com.azure.resourcemanager.azureintegrationspaces.models.BusinessProcessDevelopmentArtifactProperties;
import com.azure.resourcemanager.azureintegrationspaces.models.BusinessProcessIdentifier;
import com.azure.resourcemanager.azureintegrationspaces.models.BusinessProcessMappingItem;
import com.azure.resourcemanager.azureintegrationspaces.models.BusinessProcessReference;
import com.azure.resourcemanager.azureintegrationspaces.models.BusinessProcessStage;
import com.azure.resourcemanager.azureintegrationspaces.models.FlowTrackingDefinition;
import com.azure.resourcemanager.azureintegrationspaces.models.SaveOrValidateBusinessProcessDevelopmentArtifactRequest;
import com.azure.resourcemanager.azureintegrationspaces.models.TrackingCorrelationContext;
import com.azure.resourcemanager.azureintegrationspaces.models.TrackingEventDefinition;
import com.azure.resourcemanager.azureintegrationspaces.models.TrackingProfileDefinition;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

/** Samples for Applications SaveBusinessProcessDevelopmentArtifact. */
public final class ApplicationsSaveBusinessProcessDevelopmentArtifactSamples {
    /*
     * x-ms-original-file: specification/azureintegrationspaces/resource-manager/Microsoft.IntegrationSpaces/preview/2023-11-14-preview/examples/Applications_SaveBusinessProcessDevelopmentArtifact.json
     */
    /**
     * Sample code: SaveBusinessProcessDevelopmentArtifact.
     *
     * @param manager Entry point to AzureintegrationspacesManager.
     */
    public static void saveBusinessProcessDevelopmentArtifact(
        com.azure.resourcemanager.azureintegrationspaces.AzureintegrationspacesManager manager) {
        manager
            .applications()
            .saveBusinessProcessDevelopmentArtifactWithResponse(
                "testrg",
                "Space1",
                "Application1",
                new SaveOrValidateBusinessProcessDevelopmentArtifactRequest()
                    .withName("BusinessProcess1")
                    .withProperties(
                        new BusinessProcessDevelopmentArtifactProperties()
                            .withDescription("First Business Process")
                            .withIdentifier(
                                new BusinessProcessIdentifier()
                                    .withPropertyName("businessIdentifier-1")
                                    .withPropertyType("String"))
                            .withBusinessProcessStages(
                                mapOf(
                                    "Completed",
                                    new BusinessProcessStage()
                                        .withDescription("Completed")
                                        .withStagesBefore(Arrays.asList("Shipped")),
                                    "Denied",
                                    new BusinessProcessStage()
                                        .withDescription("Denied")
                                        .withStagesBefore(Arrays.asList("Processing")),
                                    "Processing",
                                    new BusinessProcessStage()
                                        .withDescription("Processing")
                                        .withProperties(
                                            mapOf(
                                                "ApprovalState",
                                                "String",
                                                "ApproverName",
                                                "String",
                                                "POAmount",
                                                "Integer"))
                                        .withStagesBefore(Arrays.asList("Received")),
                                    "Received",
                                    new BusinessProcessStage()
                                        .withDescription("received")
                                        .withProperties(
                                            mapOf(
                                                "City",
                                                "String",
                                                "Product",
                                                "String",
                                                "Quantity",
                                                "Integer",
                                                "State",
                                                "String")),
                                    "Shipped",
                                    new BusinessProcessStage()
                                        .withDescription("Shipped")
                                        .withProperties(mapOf("ShipPriority", "Integer", "TrackingID", "Integer"))
                                        .withStagesBefore(Arrays.asList("Denied"))))
                            .withBusinessProcessMapping(
                                mapOf(
                                    "Completed",
                                    new BusinessProcessMappingItem()
                                        .withLogicAppResourceId(
                                            "subscriptions/sub1/resourcegroups/group1/providers/Microsoft.Web/sites/logicApp1")
                                        .withWorkflowName("Fulfillment")
                                        .withOperationName("CompletedPO")
                                        .withOperationType("Action"),
                                    "Denied",
                                    new BusinessProcessMappingItem()
                                        .withLogicAppResourceId(
                                            "subscriptions/sub1/resourcegroups/group1/providers/Microsoft.Web/sites/logicApp1")
                                        .withWorkflowName("Fulfillment")
                                        .withOperationName("DeniedPO")
                                        .withOperationType("Action"),
                                    "Processing",
                                    new BusinessProcessMappingItem()
                                        .withLogicAppResourceId(
                                            "subscriptions/sub1/resourcegroups/group1/providers/Microsoft.Web/sites/logicApp1")
                                        .withWorkflowName("PurchaseOrder")
                                        .withOperationName("ApprovedPO")
                                        .withOperationType("Action"),
                                    "Received",
                                    new BusinessProcessMappingItem()
                                        .withLogicAppResourceId(
                                            "subscriptions/sub1/resourcegroups/group1/providers/Microsoft.Web/sites/logicApp1")
                                        .withWorkflowName("PurchaseOrder")
                                        .withOperationName("manual")
                                        .withOperationType("Trigger"),
                                    "Shipped",
                                    new BusinessProcessMappingItem()
                                        .withLogicAppResourceId(
                                            "subscriptions/sub1/resourcegroups/group1/providers/Microsoft.Web/sites/logicApp1")
                                        .withWorkflowName("Fulfillment")
                                        .withOperationName("ShippedPO")
                                        .withOperationType("Action")))
                            .withTrackingProfiles(
                                mapOf(
                                    "subscriptions/sub1/resourcegroups/group1/providers/Microsoft.Web/sites/logicApp1",
                                    new TrackingProfileDefinition()
                                        .withSchema(
                                            "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2023-01-01/trackingdefinitionschema.json#")
                                        .withBusinessProcess(
                                            new BusinessProcessReference()
                                                .withName("businessProcess1")
                                                .withVersion("d52c9c91-6e10-4a90-9c1f-08ee5d01c656"))
                                        .withTrackingDefinitions(
                                            mapOf(
                                                "Fulfillment",
                                                new FlowTrackingDefinition()
                                                    .withCorrelationContext(
                                                        new TrackingCorrelationContext()
                                                            .withOperationType("Trigger")
                                                            .withOperationName("manual")
                                                            .withPropertyName("OrderNumber")
                                                            .withValue("@trigger().outputs.body.OrderNumber"))
                                                    .withEvents(
                                                        mapOf(
                                                            "Completed",
                                                            new TrackingEventDefinition()
                                                                .withOperationType("Action")
                                                                .withOperationName("CompletedPO")
                                                                .withProperties(mapOf()),
                                                            "Denied",
                                                            new TrackingEventDefinition()
                                                                .withOperationType("Action")
                                                                .withOperationName("DeniedPO")
                                                                .withProperties(mapOf()),
                                                            "Shipped",
                                                            new TrackingEventDefinition()
                                                                .withOperationType("Action")
                                                                .withOperationName("ShippedPO")
                                                                .withProperties(
                                                                    mapOf(
                                                                        "ShipPriority",
                                                                        "@action().inputs.shipPriority",
                                                                        "TrackingID",
                                                                        "@action().inputs.trackingID")))),
                                                "PurchaseOrder",
                                                new FlowTrackingDefinition()
                                                    .withCorrelationContext(
                                                        new TrackingCorrelationContext()
                                                            .withOperationType("Trigger")
                                                            .withOperationName("manual")
                                                            .withPropertyName("OrderNumber")
                                                            .withValue("@trigger().outputs.body.OrderNumber"))
                                                    .withEvents(
                                                        mapOf(
                                                            "Processing",
                                                            new TrackingEventDefinition()
                                                                .withOperationType("Action")
                                                                .withOperationName("ApprovedPO")
                                                                .withProperties(
                                                                    mapOf(
                                                                        "ApprovalStatus",
                                                                        "@action().inputs.ApprovalStatus",
                                                                        "ApproverName",
                                                                        "@action().inputs.ApproverName",
                                                                        "POAmount",
                                                                        "@action().inputs.POamount")),
                                                            "Received",
                                                            new TrackingEventDefinition()
                                                                .withOperationType("Trigger")
                                                                .withOperationName("manual")
                                                                .withProperties(
                                                                    mapOf(
                                                                        "City",
                                                                        "@trigger().outputs.body.Address.City",
                                                                        "Product",
                                                                        "@trigger().outputs.body.Product",
                                                                        "Quantity",
                                                                        "@trigger().outputs.body.Quantity",
                                                                        "State",
                                                                        "@trigger().outputs.body.Address.State"))))))))),
                com.azure.core.util.Context.NONE);
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
