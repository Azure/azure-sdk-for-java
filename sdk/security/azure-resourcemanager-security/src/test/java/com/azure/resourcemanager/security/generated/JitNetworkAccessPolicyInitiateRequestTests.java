// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.security.models.JitNetworkAccessPolicyInitiatePort;
import com.azure.resourcemanager.security.models.JitNetworkAccessPolicyInitiateRequest;
import com.azure.resourcemanager.security.models.JitNetworkAccessPolicyInitiateVirtualMachine;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class JitNetworkAccessPolicyInitiateRequestTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        JitNetworkAccessPolicyInitiateRequest model = BinaryData.fromString(
            "{\"virtualMachines\":[{\"id\":\"x\",\"ports\":[{\"number\":624919964,\"allowedSourceAddressPrefix\":\"vxwmwwmjs\",\"endTimeUtc\":\"2021-05-02T23:28:12Z\"},{\"number\":277853585,\"allowedSourceAddressPrefix\":\"wwa\",\"endTimeUtc\":\"2021-08-26T20:14:30Z\"}]},{\"id\":\"cleqioulndhzyo\",\"ports\":[{\"number\":1701660873,\"allowedSourceAddressPrefix\":\"tollh\",\"endTimeUtc\":\"2021-05-09T14:11:20Z\"},{\"number\":1942101347,\"allowedSourceAddressPrefix\":\"mytzln\",\"endTimeUtc\":\"2021-04-04T13:07:02Z\"},{\"number\":841014483,\"allowedSourceAddressPrefix\":\"novyoanfbcs\",\"endTimeUtc\":\"2021-08-02T04:27:48Z\"}]},{\"id\":\"agyw\",\"ports\":[{\"number\":1409547011,\"allowedSourceAddressPrefix\":\"gvjrktpgaeuky\",\"endTimeUtc\":\"2021-04-27T14:05:56Z\"}]}],\"justification\":\"hpmwhqnucsk\"}")
            .toObject(JitNetworkAccessPolicyInitiateRequest.class);
        Assertions.assertEquals("x", model.virtualMachines().get(0).id());
        Assertions.assertEquals(624919964, model.virtualMachines().get(0).ports().get(0).number());
        Assertions.assertEquals("vxwmwwmjs",
            model.virtualMachines().get(0).ports().get(0).allowedSourceAddressPrefix());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-02T23:28:12Z"),
            model.virtualMachines().get(0).ports().get(0).endTimeUtc());
        Assertions.assertEquals("hpmwhqnucsk", model.justification());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        JitNetworkAccessPolicyInitiateRequest model = new JitNetworkAccessPolicyInitiateRequest()
            .withVirtualMachines(Arrays.asList(
                new JitNetworkAccessPolicyInitiateVirtualMachine().withId("x")
                    .withPorts(Arrays.asList(
                        new JitNetworkAccessPolicyInitiatePort().withNumber(624919964)
                            .withAllowedSourceAddressPrefix("vxwmwwmjs")
                            .withEndTimeUtc(OffsetDateTime.parse("2021-05-02T23:28:12Z")),
                        new JitNetworkAccessPolicyInitiatePort().withNumber(277853585)
                            .withAllowedSourceAddressPrefix("wwa")
                            .withEndTimeUtc(OffsetDateTime.parse("2021-08-26T20:14:30Z")))),
                new JitNetworkAccessPolicyInitiateVirtualMachine().withId("cleqioulndhzyo")
                    .withPorts(Arrays.asList(
                        new JitNetworkAccessPolicyInitiatePort().withNumber(1701660873)
                            .withAllowedSourceAddressPrefix("tollh")
                            .withEndTimeUtc(OffsetDateTime.parse("2021-05-09T14:11:20Z")),
                        new JitNetworkAccessPolicyInitiatePort().withNumber(1942101347)
                            .withAllowedSourceAddressPrefix("mytzln")
                            .withEndTimeUtc(OffsetDateTime.parse("2021-04-04T13:07:02Z")),
                        new JitNetworkAccessPolicyInitiatePort().withNumber(841014483)
                            .withAllowedSourceAddressPrefix("novyoanfbcs")
                            .withEndTimeUtc(OffsetDateTime.parse("2021-08-02T04:27:48Z")))),
                new JitNetworkAccessPolicyInitiateVirtualMachine().withId("agyw")
                    .withPorts(Arrays.asList(new JitNetworkAccessPolicyInitiatePort().withNumber(1409547011)
                        .withAllowedSourceAddressPrefix("gvjrktpgaeuky")
                        .withEndTimeUtc(OffsetDateTime.parse("2021-04-27T14:05:56Z"))))))
            .withJustification("hpmwhqnucsk");
        model = BinaryData.fromObject(model).toObject(JitNetworkAccessPolicyInitiateRequest.class);
        Assertions.assertEquals("x", model.virtualMachines().get(0).id());
        Assertions.assertEquals(624919964, model.virtualMachines().get(0).ports().get(0).number());
        Assertions.assertEquals("vxwmwwmjs",
            model.virtualMachines().get(0).ports().get(0).allowedSourceAddressPrefix());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-02T23:28:12Z"),
            model.virtualMachines().get(0).ports().get(0).endTimeUtc());
        Assertions.assertEquals("hpmwhqnucsk", model.justification());
    }
}
