// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.security.fluent.models.JitNetworkAccessRequestInner;
import com.azure.resourcemanager.security.models.JitNetworkAccessRequestPort;
import com.azure.resourcemanager.security.models.JitNetworkAccessRequestVirtualMachine;
import com.azure.resourcemanager.security.models.Status;
import com.azure.resourcemanager.security.models.StatusReason;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class JitNetworkAccessRequestInnerTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        JitNetworkAccessRequestInner model = BinaryData.fromString(
            "{\"virtualMachines\":[{\"id\":\"pimcqrhn\",\"ports\":[{\"number\":1146870179,\"allowedSourceAddressPrefix\":\"nklogxsvtzarhzv\",\"allowedSourceAddressPrefixes\":[\"qktcmbjwzzo\",\"lpky\",\"tglwkzpgajsqjc\"],\"endTimeUtc\":\"2021-05-20T08:16:02Z\",\"status\":\"Initiated\",\"statusReason\":\"NewerRequestInitiated\",\"mappedPort\":957689016}]},{\"id\":\"uvqarwzxu\",\"ports\":[{\"number\":287717050,\"allowedSourceAddressPrefix\":\"lui\",\"allowedSourceAddressPrefixes\":[\"wxs\",\"gtdmbvx\",\"kraokq\"],\"endTimeUtc\":\"2021-01-01T20:44Z\",\"status\":\"Revoked\",\"statusReason\":\"Expired\",\"mappedPort\":1397146402},{\"number\":818793523,\"allowedSourceAddressPrefix\":\"okbavlyttaak\",\"allowedSourceAddressPrefixes\":[\"rkeb\",\"mhpdu\",\"dig\"],\"endTimeUtc\":\"2021-09-14T12:04:58Z\",\"status\":\"Initiated\",\"statusReason\":\"Expired\",\"mappedPort\":545387189},{\"number\":796057857,\"allowedSourceAddressPrefix\":\"b\",\"allowedSourceAddressPrefixes\":[\"anqimwbzxpdcl\",\"pkawnsnlaim\",\"ux\",\"ksqmudmfcoibi\"],\"endTimeUtc\":\"2021-01-17T13:27:32Z\",\"status\":\"Revoked\",\"statusReason\":\"NewerRequestInitiated\",\"mappedPort\":754348309},{\"number\":106162100,\"allowedSourceAddressPrefix\":\"jrkbqsjhbtqqvyfs\",\"allowedSourceAddressPrefixes\":[\"fwbivqvo\"],\"endTimeUtc\":\"2021-07-11T17:51:16Z\",\"status\":\"Initiated\",\"statusReason\":\"Expired\",\"mappedPort\":518982802}]},{\"id\":\"vbhlimbyqecro\",\"ports\":[{\"number\":1779759130,\"allowedSourceAddressPrefix\":\"kcdrdaasaxxobsm\",\"allowedSourceAddressPrefixes\":[\"iyjvz\",\"ko\",\"r\"],\"endTimeUtc\":\"2021-08-01T13:51:45Z\",\"status\":\"Revoked\",\"statusReason\":\"UserRequested\",\"mappedPort\":280075162},{\"number\":297722542,\"allowedSourceAddressPrefix\":\"n\",\"allowedSourceAddressPrefixes\":[\"wsxvjab\",\"qqax\",\"yvymcnudndo\",\"bhjxwxqweuipmpv\"],\"endTimeUtc\":\"2021-04-15T21:49:10Z\",\"status\":\"Revoked\",\"statusReason\":\"UserRequested\",\"mappedPort\":1925671162},{\"number\":1324356439,\"allowedSourceAddressPrefix\":\"xtlt\",\"allowedSourceAddressPrefixes\":[\"rdpqgfhy\",\"frakkldgrc\",\"fcmfcn\"],\"endTimeUtc\":\"2021-01-17T17:20:25Z\",\"status\":\"Revoked\",\"statusReason\":\"NewerRequestInitiated\",\"mappedPort\":1864494144}]}],\"startTimeUtc\":\"2021-05-06T05:24:04Z\",\"requestor\":\"txjtielnzqgx\",\"justification\":\"fbbmtlp\"}")
            .toObject(JitNetworkAccessRequestInner.class);
        Assertions.assertEquals("pimcqrhn", model.virtualMachines().get(0).id());
        Assertions.assertEquals(1146870179, model.virtualMachines().get(0).ports().get(0).number());
        Assertions.assertEquals("nklogxsvtzarhzv",
            model.virtualMachines().get(0).ports().get(0).allowedSourceAddressPrefix());
        Assertions.assertEquals("qktcmbjwzzo",
            model.virtualMachines().get(0).ports().get(0).allowedSourceAddressPrefixes().get(0));
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-20T08:16:02Z"),
            model.virtualMachines().get(0).ports().get(0).endTimeUtc());
        Assertions.assertEquals(Status.INITIATED, model.virtualMachines().get(0).ports().get(0).status());
        Assertions.assertEquals(StatusReason.NEWER_REQUEST_INITIATED,
            model.virtualMachines().get(0).ports().get(0).statusReason());
        Assertions.assertEquals(957689016, model.virtualMachines().get(0).ports().get(0).mappedPort());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-06T05:24:04Z"), model.startTimeUtc());
        Assertions.assertEquals("txjtielnzqgx", model.requestor());
        Assertions.assertEquals("fbbmtlp", model.justification());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        JitNetworkAccessRequestInner model
            = new JitNetworkAccessRequestInner()
                .withVirtualMachines(Arrays.asList(
                    new JitNetworkAccessRequestVirtualMachine().withId("pimcqrhn")
                        .withPorts(Arrays.asList(new JitNetworkAccessRequestPort().withNumber(1146870179)
                            .withAllowedSourceAddressPrefix("nklogxsvtzarhzv")
                            .withAllowedSourceAddressPrefixes(Arrays.asList("qktcmbjwzzo", "lpky", "tglwkzpgajsqjc"))
                            .withEndTimeUtc(OffsetDateTime.parse("2021-05-20T08:16:02Z"))
                            .withStatus(Status.INITIATED)
                            .withStatusReason(StatusReason.NEWER_REQUEST_INITIATED)
                            .withMappedPort(957689016))),
                    new JitNetworkAccessRequestVirtualMachine().withId("uvqarwzxu")
                        .withPorts(
                            Arrays
                                .asList(
                                    new JitNetworkAccessRequestPort().withNumber(287717050)
                                        .withAllowedSourceAddressPrefix("lui")
                                        .withAllowedSourceAddressPrefixes(Arrays.asList("wxs", "gtdmbvx", "kraokq"))
                                        .withEndTimeUtc(OffsetDateTime.parse("2021-01-01T20:44Z"))
                                        .withStatus(Status.REVOKED)
                                        .withStatusReason(StatusReason.EXPIRED)
                                        .withMappedPort(1397146402),
                                    new JitNetworkAccessRequestPort().withNumber(818793523)
                                        .withAllowedSourceAddressPrefix("okbavlyttaak")
                                        .withAllowedSourceAddressPrefixes(Arrays.asList("rkeb", "mhpdu", "dig"))
                                        .withEndTimeUtc(OffsetDateTime.parse("2021-09-14T12:04:58Z"))
                                        .withStatus(Status.INITIATED)
                                        .withStatusReason(StatusReason.EXPIRED)
                                        .withMappedPort(545387189),
                                    new JitNetworkAccessRequestPort().withNumber(796057857)
                                        .withAllowedSourceAddressPrefix("b")
                                        .withAllowedSourceAddressPrefixes(
                                            Arrays.asList("anqimwbzxpdcl", "pkawnsnlaim", "ux", "ksqmudmfcoibi"))
                                        .withEndTimeUtc(OffsetDateTime.parse("2021-01-17T13:27:32Z"))
                                        .withStatus(Status.REVOKED)
                                        .withStatusReason(StatusReason.NEWER_REQUEST_INITIATED)
                                        .withMappedPort(754348309),
                                    new JitNetworkAccessRequestPort().withNumber(106162100)
                                        .withAllowedSourceAddressPrefix("jrkbqsjhbtqqvyfs")
                                        .withAllowedSourceAddressPrefixes(Arrays.asList("fwbivqvo"))
                                        .withEndTimeUtc(OffsetDateTime.parse("2021-07-11T17:51:16Z"))
                                        .withStatus(Status.INITIATED)
                                        .withStatusReason(StatusReason.EXPIRED)
                                        .withMappedPort(518982802))),
                    new JitNetworkAccessRequestVirtualMachine().withId("vbhlimbyqecro")
                        .withPorts(Arrays.asList(
                            new JitNetworkAccessRequestPort().withNumber(1779759130)
                                .withAllowedSourceAddressPrefix("kcdrdaasaxxobsm")
                                .withAllowedSourceAddressPrefixes(Arrays.asList("iyjvz", "ko", "r"))
                                .withEndTimeUtc(OffsetDateTime.parse("2021-08-01T13:51:45Z"))
                                .withStatus(Status.REVOKED)
                                .withStatusReason(StatusReason.USER_REQUESTED)
                                .withMappedPort(280075162),
                            new JitNetworkAccessRequestPort().withNumber(297722542)
                                .withAllowedSourceAddressPrefix("n")
                                .withAllowedSourceAddressPrefixes(
                                    Arrays.asList("wsxvjab", "qqax", "yvymcnudndo", "bhjxwxqweuipmpv"))
                                .withEndTimeUtc(OffsetDateTime.parse("2021-04-15T21:49:10Z"))
                                .withStatus(Status.REVOKED)
                                .withStatusReason(StatusReason.USER_REQUESTED)
                                .withMappedPort(1925671162),
                            new JitNetworkAccessRequestPort().withNumber(1324356439)
                                .withAllowedSourceAddressPrefix("xtlt")
                                .withAllowedSourceAddressPrefixes(Arrays.asList("rdpqgfhy", "frakkldgrc", "fcmfcn"))
                                .withEndTimeUtc(OffsetDateTime.parse("2021-01-17T17:20:25Z"))
                                .withStatus(Status.REVOKED)
                                .withStatusReason(StatusReason.NEWER_REQUEST_INITIATED)
                                .withMappedPort(1864494144)))))
                .withStartTimeUtc(OffsetDateTime.parse("2021-05-06T05:24:04Z"))
                .withRequestor("txjtielnzqgx")
                .withJustification("fbbmtlp");
        model = BinaryData.fromObject(model).toObject(JitNetworkAccessRequestInner.class);
        Assertions.assertEquals("pimcqrhn", model.virtualMachines().get(0).id());
        Assertions.assertEquals(1146870179, model.virtualMachines().get(0).ports().get(0).number());
        Assertions.assertEquals("nklogxsvtzarhzv",
            model.virtualMachines().get(0).ports().get(0).allowedSourceAddressPrefix());
        Assertions.assertEquals("qktcmbjwzzo",
            model.virtualMachines().get(0).ports().get(0).allowedSourceAddressPrefixes().get(0));
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-20T08:16:02Z"),
            model.virtualMachines().get(0).ports().get(0).endTimeUtc());
        Assertions.assertEquals(Status.INITIATED, model.virtualMachines().get(0).ports().get(0).status());
        Assertions.assertEquals(StatusReason.NEWER_REQUEST_INITIATED,
            model.virtualMachines().get(0).ports().get(0).statusReason());
        Assertions.assertEquals(957689016, model.virtualMachines().get(0).ports().get(0).mappedPort());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-06T05:24:04Z"), model.startTimeUtc());
        Assertions.assertEquals("txjtielnzqgx", model.requestor());
        Assertions.assertEquals("fbbmtlp", model.justification());
    }
}
