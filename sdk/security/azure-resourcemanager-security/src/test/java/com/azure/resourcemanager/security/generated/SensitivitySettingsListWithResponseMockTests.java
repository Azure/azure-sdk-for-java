// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.security.SecurityManager;
import com.azure.resourcemanager.security.models.GetSensitivitySettingsListResponse;
import com.azure.resourcemanager.security.models.MipIntegrationStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SensitivitySettingsListWithResponseMockTests {
    @Test
    public void testListWithResponse() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"sensitiveInfoTypesIds\":[\"a7c9bb69-9da8-40ed-9620-0a2dc98fa9de\",\"b30a7635-a3d9-4f8f-aa9c-e479e6347ba5\",\"7e2165e5-7231-4f02-bf1e-368c86e71b31\",\"0c235b9e-8fa0-40f2-8e3d-235bf676654e\"],\"sensitivityThresholdLabelOrder\":52.83411,\"sensitivityThresholdLabelId\":\"129c7ba6-8da1-410f-9524-ddc8fce10076\",\"mipInformation\":{\"mipIntegrationStatus\":\"noAutoLabelingRules\",\"labels\":[{}],\"customInfoTypes\":[{},{},{}],\"builtInInfoTypes\":[{},{},{},{}]}},\"id\":\"aiildcpud\",\"name\":\"hquxsyjofpgv\",\"type\":\"drobujnjgy\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"591ddcdc-4f03-4ecb-a912-4d0f2b2ac9cc\"],\"sensitivityThresholdLabelOrder\":21.384699,\"sensitivityThresholdLabelId\":\"32c0ad6d-ce1e-4340-b8ba-e48befcf9f91\",\"mipInformation\":{\"mipIntegrationStatus\":\"Ok\",\"labels\":[{},{}],\"customInfoTypes\":[{},{}],\"builtInInfoTypes\":[{}]}},\"id\":\"cpskgrhnyts\",\"name\":\"gsazuq\",\"type\":\"n\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"d89c4596-1e84-41ce-aa3c-47456ba0904f\",\"0aced8fa-5be3-4354-b612-e5c3032c49c7\",\"3e6852a2-880c-4192-b611-882915186f60\"],\"sensitivityThresholdLabelOrder\":18.370468,\"sensitivityThresholdLabelId\":\"1c961a99-54a4-4781-8205-8d438e95c641\",\"mipInformation\":{\"mipIntegrationStatus\":\"noAutoLabelingRules\",\"labels\":[{}],\"customInfoTypes\":[{},{},{}],\"builtInInfoTypes\":[{}]}},\"id\":\"vzwpffxsfyb\",\"name\":\"tmveho\",\"type\":\"flyuvbgtz\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"2c136131-099f-464a-aa0d-f7aadcdceb24\",\"2bc4f26e-37ce-4777-9cf4-53ef990b7415\"],\"sensitivityThresholdLabelOrder\":48.46628,\"sensitivityThresholdLabelId\":\"7a3aa096-3502-44df-8c5c-96706af215d2\",\"mipInformation\":{\"mipIntegrationStatus\":\"noAutoLabelingRules\",\"labels\":[{},{},{}],\"customInfoTypes\":[{},{}],\"builtInInfoTypes\":[{}]}},\"id\":\"pqsvb\",\"name\":\"eoge\",\"type\":\"trcnqnvnc\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityManager manager = SecurityManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        GetSensitivitySettingsListResponse response
            = manager.sensitivitySettings().listWithResponse(com.azure.core.util.Context.NONE).getValue();

        Assertions.assertEquals(UUID.fromString("a7c9bb69-9da8-40ed-9620-0a2dc98fa9de"),
            response.value().get(0).properties().sensitiveInfoTypesIds().get(0));
        Assertions.assertEquals(52.83411F, response.value().get(0).properties().sensitivityThresholdLabelOrder());
        Assertions.assertEquals(UUID.fromString("129c7ba6-8da1-410f-9524-ddc8fce10076"),
            response.value().get(0).properties().sensitivityThresholdLabelId());
        Assertions.assertEquals(MipIntegrationStatus.NO_AUTO_LABELING_RULES,
            response.value().get(0).properties().mipInformation().mipIntegrationStatus());
    }
}
