// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.security.SecurityManager;
import com.azure.resourcemanager.security.models.GetSensitivitySettingsListResponse;
import com.azure.resourcemanager.security.models.MipIntegrationStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SensitivitySettingsListWithResponseMockTests {
    @Test
    public void testListWithResponse() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"sensitiveInfoTypesIds\":[\"433d8486-098d-494b-991f-4e374dfdd834\",\"74ae0ffb-90e9-4c9e-86bf-4e28bfb7ed11\",\"f929a287-87b0-4a09-a21c-1fe0a86f75e6\",\"7a9d4814-02fd-43f5-a252-8a76969c455e\"],\"sensitivityThresholdLabelOrder\":52.83411,\"sensitivityThresholdLabelId\":\"87f004d8-fc4c-4384-9dce-eb77ce6df692\",\"mipInformation\":{\"mipIntegrationStatus\":\"noAutoLabelingRules\",\"labels\":[{}],\"customInfoTypes\":[{},{},{}],\"builtInInfoTypes\":[{},{},{},{}]}},\"id\":\"aiildcpud\",\"name\":\"hquxsyjofpgv\",\"type\":\"drobujnjgy\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"6dc2afb3-eb58-462a-b903-2e83bc3bbab2\"],\"sensitivityThresholdLabelOrder\":21.384699,\"sensitivityThresholdLabelId\":\"7a038822-d88b-47fc-905d-92c524412e64\",\"mipInformation\":{\"mipIntegrationStatus\":\"Ok\",\"labels\":[{},{}],\"customInfoTypes\":[{},{}],\"builtInInfoTypes\":[{}]}},\"id\":\"cpskgrhnyts\",\"name\":\"gsazuq\",\"type\":\"n\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"490b4c84-c603-449e-82b0-f2b265403daa\",\"f2946f10-7b64-4db1-9849-308a82f98534\",\"da2415db-2cf3-449d-ade2-a728503a503a\"],\"sensitivityThresholdLabelOrder\":18.370468,\"sensitivityThresholdLabelId\":\"fed32f0c-3d09-43d6-b163-85013b9b8d1e\",\"mipInformation\":{\"mipIntegrationStatus\":\"noAutoLabelingRules\",\"labels\":[{}],\"customInfoTypes\":[{},{},{}],\"builtInInfoTypes\":[{}]}},\"id\":\"vzwpffxsfyb\",\"name\":\"tmveho\",\"type\":\"flyuvbgtz\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"6039dac2-457b-4ca6-80c1-503888bc2b64\",\"7b83a4d0-46ef-482e-8a4d-595a3b160459\"],\"sensitivityThresholdLabelOrder\":48.46628,\"sensitivityThresholdLabelId\":\"30b2b23d-d6ad-4bc6-846b-e18102f089ff\",\"mipInformation\":{\"mipIntegrationStatus\":\"noAutoLabelingRules\",\"labels\":[{},{},{}],\"customInfoTypes\":[{},{}],\"builtInInfoTypes\":[{}]}},\"id\":\"pqsvb\",\"name\":\"eoge\",\"type\":\"trcnqnvnc\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityManager manager = SecurityManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        GetSensitivitySettingsListResponse response
            = manager.sensitivitySettings().listWithResponse(com.azure.core.util.Context.NONE).getValue();

        Assertions.assertEquals(UUID.fromString("433d8486-098d-494b-991f-4e374dfdd834"),
            response.value().get(0).properties().sensitiveInfoTypesIds().get(0));
        Assertions.assertEquals(52.83411F, response.value().get(0).properties().sensitivityThresholdLabelOrder());
        Assertions.assertEquals(UUID.fromString("87f004d8-fc4c-4384-9dce-eb77ce6df692"),
            response.value().get(0).properties().sensitivityThresholdLabelId());
        Assertions.assertEquals(MipIntegrationStatus.NO_AUTO_LABELING_RULES,
            response.value().get(0).properties().mipInformation().mipIntegrationStatus());
    }
}
