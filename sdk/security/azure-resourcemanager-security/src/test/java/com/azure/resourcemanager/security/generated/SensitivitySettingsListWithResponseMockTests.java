// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.security.SecurityManager;
import com.azure.resourcemanager.security.models.GetSensitivitySettingsListResponse;
import com.azure.resourcemanager.security.models.MipIntegrationStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SensitivitySettingsListWithResponseMockTests {
    @Test
    public void testListWithResponse() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"sensitiveInfoTypesIds\":[\"079bc2f3-bc4f-4017-9425-ca20ee6be4d3\",\"abfae931-5ed7-40a5-b317-e7754001877b\"],\"sensitivityThresholdLabelOrder\":52.819717,\"sensitivityThresholdLabelId\":\"12824aa0-de0b-4af4-a337-d5ef5dbaf71b\",\"mipInformation\":{\"mipIntegrationStatus\":\"noConsent\",\"labels\":[{},{},{},{}],\"customInfoTypes\":[{},{},{}],\"builtInInfoTypes\":[{},{},{}]}},\"id\":\"fjswequflzyyopoa\",\"name\":\"twwgwqubot\",\"type\":\"vufrk\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"51003a06-acc7-4146-951f-67334efd6447\",\"aaa6ca5b-be14-4418-8998-562c1e837df8\",\"0eaa84bd-ea26-494e-8405-9de797d069ec\",\"874adbf7-6353-4321-94c4-77835413dbb6\"],\"sensitivityThresholdLabelOrder\":74.408875,\"sensitivityThresholdLabelId\":\"c70fd778-9afe-4137-bed1-3ff5ea7e7578\",\"mipInformation\":{\"mipIntegrationStatus\":\"Ok\",\"labels\":[{},{}],\"customInfoTypes\":[{},{},{},{}],\"builtInInfoTypes\":[{},{},{},{}]}},\"id\":\"skreeedddrftfquu\",\"name\":\"p\",\"type\":\"lhs\"},{\"properties\":{\"sensitiveInfoTypesIds\":[\"6ef5fbca-7a58-4468-ac0d-c595866ce6fc\"],\"sensitivityThresholdLabelOrder\":81.69915,\"sensitivityThresholdLabelId\":\"7da1d680-f63e-44da-8ada-4decccac2516\",\"mipInformation\":{\"mipIntegrationStatus\":\"noConsent\",\"labels\":[{},{},{}],\"customInfoTypes\":[{}],\"builtInInfoTypes\":[{},{},{}]}},\"id\":\"qn\",\"name\":\"tdqwynxo\",\"type\":\"gvbzpg\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityManager manager = SecurityManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        GetSensitivitySettingsListResponse response
            = manager.sensitivitySettings().listWithResponse(com.azure.core.util.Context.NONE).getValue();

        Assertions.assertEquals(UUID.fromString("079bc2f3-bc4f-4017-9425-ca20ee6be4d3"),
            response.value().get(0).properties().sensitiveInfoTypesIds().get(0));
        Assertions.assertEquals(52.819717F, response.value().get(0).properties().sensitivityThresholdLabelOrder());
        Assertions.assertEquals(UUID.fromString("12824aa0-de0b-4af4-a337-d5ef5dbaf71b"),
            response.value().get(0).properties().sensitivityThresholdLabelId());
        Assertions.assertEquals(MipIntegrationStatus.NO_CONSENT,
            response.value().get(0).properties().mipInformation().mipIntegrationStatus());
    }
}
