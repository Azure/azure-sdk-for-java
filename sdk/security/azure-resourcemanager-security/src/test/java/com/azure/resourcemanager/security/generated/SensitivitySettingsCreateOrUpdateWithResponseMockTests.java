// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.security.SecurityManager;
import com.azure.resourcemanager.security.models.GetSensitivitySettingsResponse;
import com.azure.resourcemanager.security.models.MipIntegrationStatus;
import com.azure.resourcemanager.security.models.UpdateSensitivitySettingsRequest;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SensitivitySettingsCreateOrUpdateWithResponseMockTests {
    @Test
    public void testCreateOrUpdateWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"sensitiveInfoTypesIds\":[\"721e3efe-3b73-4ebe-b1fa-5d5ee95f8644\"],\"sensitivityThresholdLabelOrder\":17.067177,\"sensitivityThresholdLabelId\":\"9531b593-0e5b-487d-9b7b-5b549b7c877b\",\"mipInformation\":{\"mipIntegrationStatus\":\"noMipLabels\",\"labels\":[{\"name\":\"rkljqkqwsyjtvj\",\"id\":\"6c710ff4-a61e-44ec-9b24-cff0a6cefeb2\",\"order\":7.3681116},{\"name\":\"xawwdmbypnk\",\"id\":\"6b55f0fb-8951-4655-ba53-6705ce3752d3\",\"order\":31.43292},{\"name\":\"lbovwbclprgega\",\"id\":\"64c9b47d-3414-466a-a9be-3ae452b9c7b6\",\"order\":48.644535}],\"customInfoTypes\":[{\"name\":\"er\",\"id\":\"7f420a6a-8914-4409-ae80-20c73dafcc00\",\"description\":\"julskwwnqhql\"},{\"name\":\"pwxtvc\",\"id\":\"cc9b6876-ff8b-45f5-b850-9099a59a0556\",\"description\":\"vv\"},{\"name\":\"xwvegenlrj\",\"id\":\"e5921329-05ef-4e13-9010-6f717d8d55cd\",\"description\":\"wevguy\"}],\"builtInInfoTypes\":[{\"name\":\"elrjkfzcde\",\"id\":\"26f73ca5-9fbd-4901-acea-30390be01d64\",\"type\":\"wezhyfkdilbwqlq\"},{\"name\":\"sfqbirtybcelfjn\",\"id\":\"ac16fbe0-1b4e-477c-acc9-7060aaae9292\",\"type\":\"njyhzfa\"},{\"name\":\"kdv\",\"id\":\"adbc01cf-0b96-406b-9f70-ca78fb4714ef\",\"type\":\"umo\"}]}},\"id\":\"pegqxsorch\",\"name\":\"zrqoxzyhlbeqvh\",\"type\":\"kbmpw\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityManager manager = SecurityManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        GetSensitivitySettingsResponse response = manager.sensitivitySettings()
            .createOrUpdateWithResponse(
                new UpdateSensitivitySettingsRequest()
                    .withSensitiveInfoTypesIds(Arrays.asList(UUID.fromString("3fed362e-482c-41c8-b991-6f81d44350d8"),
                        UUID.fromString("fdf98ca0-391e-4245-ab8b-415e5663a292")))
                    .withSensitivityThresholdLabelOrder(57.79636F)
                    .withSensitivityThresholdLabelId(UUID.fromString("9278a780-7939-468f-b30e-3474f87d1da5")),
                com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals(UUID.fromString("721e3efe-3b73-4ebe-b1fa-5d5ee95f8644"),
            response.properties().sensitiveInfoTypesIds().get(0));
        Assertions.assertEquals(17.067177F, response.properties().sensitivityThresholdLabelOrder());
        Assertions.assertEquals(UUID.fromString("9531b593-0e5b-487d-9b7b-5b549b7c877b"),
            response.properties().sensitivityThresholdLabelId());
        Assertions.assertEquals(MipIntegrationStatus.NO_MIP_LABELS,
            response.properties().mipInformation().mipIntegrationStatus());
        Assertions.assertEquals("rkljqkqwsyjtvj", response.properties().mipInformation().labels().get(0).name());
        Assertions.assertEquals(UUID.fromString("6c710ff4-a61e-44ec-9b24-cff0a6cefeb2"),
            response.properties().mipInformation().labels().get(0).id());
        Assertions.assertEquals(7.3681116F, response.properties().mipInformation().labels().get(0).order());
        Assertions.assertEquals("er", response.properties().mipInformation().customInfoTypes().get(0).name());
        Assertions.assertEquals(UUID.fromString("7f420a6a-8914-4409-ae80-20c73dafcc00"),
            response.properties().mipInformation().customInfoTypes().get(0).id());
        Assertions.assertEquals("julskwwnqhql",
            response.properties().mipInformation().customInfoTypes().get(0).description());
        Assertions.assertEquals("elrjkfzcde", response.properties().mipInformation().builtInInfoTypes().get(0).name());
        Assertions.assertEquals(UUID.fromString("26f73ca5-9fbd-4901-acea-30390be01d64"),
            response.properties().mipInformation().builtInInfoTypes().get(0).id());
        Assertions.assertEquals("wezhyfkdilbwqlq",
            response.properties().mipInformation().builtInInfoTypes().get(0).type());
    }
}
