// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.security.SecurityManager;
import com.azure.resourcemanager.security.models.GetSensitivitySettingsResponse;
import com.azure.resourcemanager.security.models.MipIntegrationStatus;
import com.azure.resourcemanager.security.models.UpdateSensitivitySettingsRequest;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class SensitivitySettingsCreateOrUpdateWithResponseMockTests {
    @Test
    public void testCreateOrUpdateWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"sensitiveInfoTypesIds\":[\"fb2f7bcb-a3bd-4850-8d45-b37b94ebafc2\"],\"sensitivityThresholdLabelOrder\":64.75056,\"sensitivityThresholdLabelId\":\"760d911a-7759-4859-8b83-bdeeca626e04\",\"mipInformation\":{\"mipIntegrationStatus\":\"Ok\",\"labels\":[{\"name\":\"yutehlkarvtipquk\",\"id\":\"2d2e7285-385c-4260-a3ea-2db001c87292\",\"order\":11.180711},{\"name\":\"sgofunswhpce\",\"id\":\"b9bda6f3-7ed8-4430-88e4-95a48204bfc7\",\"order\":55.923946},{\"name\":\"fnnbbxngdfkkedee\",\"id\":\"b65d14d7-eecc-43a4-b054-a5450c192977\",\"order\":59.04829},{\"name\":\"cvgifwsunj\",\"id\":\"c2f1e21e-4d4c-4e9d-97a5-60842cf80bc5\",\"order\":84.26103}],\"customInfoTypes\":[{\"name\":\"mm\",\"id\":\"1be72bef-d5fe-4027-9aec-54390496f99a\",\"description\":\"qdonbzzs\"},{\"name\":\"zyviiwsu\",\"id\":\"76b3a2d5-a5cc-45e5-9d53-8d7842d73312\",\"description\":\"hwsyuifkzqqhbt\"}],\"builtInInfoTypes\":[{\"name\":\"lmkf\",\"id\":\"7c9da258-9051-4b62-8312-5fe78569b229\",\"type\":\"iipj\"},{\"name\":\"gvyvuoikdlp\",\"id\":\"a6b2ce34-a4eb-40a5-ac6e-0e3fdd85d26e\",\"type\":\"tug\"},{\"name\":\"imq\",\"id\":\"c0c70c43-3f37-4fa0-a8b6-283731fd5d60\",\"type\":\"clo\"},{\"name\":\"mvswxvjeleif\",\"id\":\"70cd7178-3b1b-42da-baa0-bb63a1df2297\",\"type\":\"xtwwulk\"}]}},\"id\":\"ybpaevykbyjecrq\",\"name\":\"wakkchsfo\",\"type\":\"lb\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityManager manager = SecurityManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        GetSensitivitySettingsResponse response = manager.sensitivitySettings()
            .createOrUpdateWithResponse(
                new UpdateSensitivitySettingsRequest()
                    .withSensitiveInfoTypesIds(Arrays.asList(UUID.fromString("892e6287-09af-4a54-a59b-a2c84ea82363"),
                        UUID.fromString("7a24d50b-d8e8-4f71-9438-93c5d9957930")))
                    .withSensitivityThresholdLabelOrder(63.747246F)
                    .withSensitivityThresholdLabelId(UUID.fromString("07a9518c-fadb-4768-99a9-b4ee0f135f6b")),
                com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals(UUID.fromString("fb2f7bcb-a3bd-4850-8d45-b37b94ebafc2"),
            response.properties().sensitiveInfoTypesIds().get(0));
        Assertions.assertEquals(64.75056F, response.properties().sensitivityThresholdLabelOrder());
        Assertions.assertEquals(UUID.fromString("760d911a-7759-4859-8b83-bdeeca626e04"),
            response.properties().sensitivityThresholdLabelId());
        Assertions.assertEquals(MipIntegrationStatus.OK, response.properties().mipInformation().mipIntegrationStatus());
        Assertions.assertEquals("yutehlkarvtipquk", response.properties().mipInformation().labels().get(0).name());
        Assertions.assertEquals(UUID.fromString("2d2e7285-385c-4260-a3ea-2db001c87292"),
            response.properties().mipInformation().labels().get(0).id());
        Assertions.assertEquals(11.180711F, response.properties().mipInformation().labels().get(0).order());
        Assertions.assertEquals("mm", response.properties().mipInformation().customInfoTypes().get(0).name());
        Assertions.assertEquals(UUID.fromString("1be72bef-d5fe-4027-9aec-54390496f99a"),
            response.properties().mipInformation().customInfoTypes().get(0).id());
        Assertions.assertEquals("qdonbzzs",
            response.properties().mipInformation().customInfoTypes().get(0).description());
        Assertions.assertEquals("lmkf", response.properties().mipInformation().builtInInfoTypes().get(0).name());
        Assertions.assertEquals(UUID.fromString("7c9da258-9051-4b62-8312-5fe78569b229"),
            response.properties().mipInformation().builtInInfoTypes().get(0).id());
        Assertions.assertEquals("iipj", response.properties().mipInformation().builtInInfoTypes().get(0).type());
    }
}
