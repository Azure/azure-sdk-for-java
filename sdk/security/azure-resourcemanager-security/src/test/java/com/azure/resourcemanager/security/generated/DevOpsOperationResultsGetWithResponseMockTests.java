// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.security.SecurityManager;
import com.azure.resourcemanager.security.models.OperationStatusResult;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class DevOpsOperationResultsGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"id\":\"msuxyqbmqoubxlpk\",\"name\":\"nbqoymsdlraduh\",\"status\":\"waxzyrp\",\"percentComplete\":2.0848632,\"startTime\":\"2021-06-23T22:55:39Z\",\"endTime\":\"2021-11-09T11:17:41Z\",\"operations\":[{\"id\":\"skkop\",\"name\":\"sribmbtmorikcz\",\"status\":\"rqtiqxgwsfrlyvzl\",\"percentComplete\":63.39032,\"startTime\":\"2021-02-04T12:08:45Z\",\"endTime\":\"2021-05-02T13:10:58Z\",\"operations\":[{\"id\":\"rucwzc\",\"name\":\"udhgwjqeglymnrr\",\"status\":\"wsqpiyxkmqmge\",\"percentComplete\":93.71477,\"startTime\":\"2021-07-03T06:12:58Z\",\"endTime\":\"2021-05-11T01:08:39Z\",\"operations\":[{\"status\":\"gn\"},{\"status\":\"yxwdpmcewqvvzx\"},{\"status\":\"bamqrbbsnptm\"},{\"status\":\"v\"}]},{\"id\":\"vcjkbyjuw\",\"name\":\"zcb\",\"status\":\"jxm\",\"percentComplete\":33.948612,\"startTime\":\"2021-10-31T18:03:29Z\",\"endTime\":\"2021-11-05T18:35:23Z\",\"operations\":[{\"status\":\"kd\"},{\"status\":\"rfouwkoltjdauujj\"}]},{\"id\":\"hddzeykud\",\"name\":\"rimyeh\",\"status\":\"lm\",\"percentComplete\":22.168743,\"startTime\":\"2021-11-14T14:19:25Z\",\"endTime\":\"2021-07-08T08:16:16Z\",\"operations\":[{\"status\":\"znqqkqxkdglse\"},{\"status\":\"qkrbyyakrjgbnw\"},{\"status\":\"okrl\"},{\"status\":\"becan\"}]}]},{\"id\":\"uhdcftptf\",\"name\":\"apmfwxmcxhwkgihi\",\"status\":\"oyocmgadhmq\",\"percentComplete\":95.40742,\"startTime\":\"2021-05-04T04:08:01Z\",\"endTime\":\"2021-10-28T22:08:44Z\",\"operations\":[{\"id\":\"lszrtngiqc\",\"name\":\"monfcor\",\"status\":\"nhfycigcbmay\",\"percentComplete\":62.908054,\"startTime\":\"2021-09-19T10:35:25Z\",\"endTime\":\"2021-07-27T01:36:07Z\",\"operations\":[{\"status\":\"ajzdj\"}]},{\"id\":\"rwrfrmhoufok\",\"name\":\"gvojcksirsnqu\",\"status\":\"ni\",\"percentComplete\":91.99776,\"startTime\":\"2021-07-25T15:16:35Z\",\"endTime\":\"2021-04-16T21:53:26Z\",\"operations\":[{\"status\":\"zadqmvpehpnsvky\"},{\"status\":\"hrplfqqnw\"},{\"status\":\"jsrgclxnsvbkhh\"}]}]},{\"id\":\"tuecmguk\",\"name\":\"dpuowlcexkr\",\"status\":\"itqzqnbseujcmtci\",\"percentComplete\":85.34057,\"startTime\":\"2021-11-07T15:09:17Z\",\"endTime\":\"2021-01-30T07:38:31Z\",\"operations\":[{\"id\":\"ctshxoeftforylxa\",\"name\":\"wkjzvqpsymt\",\"status\":\"pyjtrxxzwd\",\"percentComplete\":22.0748,\"startTime\":\"2021-08-23T17:09:35Z\",\"endTime\":\"2021-07-07T15:32Z\",\"operations\":[{\"status\":\"kdmtpjk\"},{\"status\":\"dlu\"},{\"status\":\"ytjxhxwtitt\"},{\"status\":\"nvukvupu\"}]},{\"id\":\"gu\",\"name\":\"nvpdvctqdapy\",\"status\":\"sfp\",\"percentComplete\":63.518017,\"startTime\":\"2021-05-28T21:03:27Z\",\"endTime\":\"2021-06-16T04:33:54Z\",\"operations\":[{\"status\":\"rucqehyrnz\"},{\"status\":\"jrgfbmpszwkbcstz\"}]},{\"id\":\"gaesmaxdwxrwqtbv\",\"name\":\"dta\",\"status\":\"xy\",\"percentComplete\":94.0606,\"startTime\":\"2021-07-05T02:32:48Z\",\"endTime\":\"2021-04-03T13:02:13Z\",\"operations\":[{\"status\":\"wlyp\"}]},{\"id\":\"uluqyfvgpqw\",\"name\":\"qmbriskmbui\",\"status\":\"tq\",\"percentComplete\":99.92367,\"startTime\":\"2021-11-24T05:20:36Z\",\"endTime\":\"2021-09-26T19:05:28Z\",\"operations\":[{\"status\":\"guvlieeg\"},{\"status\":\"nqwhfjoxse\"},{\"status\":\"jscgqcr\"},{\"status\":\"aucftotedhjxdl\"}]}]},{\"id\":\"fjj\",\"name\":\"jyqmpmsknaxr\",\"status\":\"ljw\",\"percentComplete\":72.74816,\"startTime\":\"2021-09-09T04:55:44Z\",\"endTime\":\"2021-01-10T19:50:01Z\",\"operations\":[{\"id\":\"qlef\",\"name\":\"pw\",\"status\":\"ajvwfijfd\",\"percentComplete\":87.934074,\"startTime\":\"2021-08-30T21:20:17Z\",\"endTime\":\"2021-07-30T23:50:21Z\",\"operations\":[{\"status\":\"mrihddnbwl\"},{\"status\":\"qnt\"},{\"status\":\"derrxyiwuzpsvc\"}]},{\"id\":\"fstyyysq\",\"name\":\"nlcfzfjdz\",\"status\":\"fthsydphdb\",\"percentComplete\":61.733593,\"startTime\":\"2021-09-01T09:21:29Z\",\"endTime\":\"2021-09-03T10:04:08Z\",\"operations\":[{\"status\":\"bvhvd\"}]}]}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        SecurityManager manager = SecurityManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        OperationStatusResult response = manager.devOpsOperationResults()
            .getWithResponse("vkparskplqft", "cxqm", "sudcykgulellf", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("msuxyqbmqoubxlpk", response.id());
        Assertions.assertEquals("nbqoymsdlraduh", response.name());
        Assertions.assertEquals("waxzyrp", response.status());
        Assertions.assertEquals(2.0848632F, response.percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-23T22:55:39Z"), response.startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-09T11:17:41Z"), response.endTime());
        Assertions.assertEquals("skkop", response.operations().get(0).id());
        Assertions.assertEquals("sribmbtmorikcz", response.operations().get(0).name());
        Assertions.assertEquals("rqtiqxgwsfrlyvzl", response.operations().get(0).status());
        Assertions.assertEquals(63.39032F, response.operations().get(0).percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-02-04T12:08:45Z"), response.operations().get(0).startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-02T13:10:58Z"), response.operations().get(0).endTime());
        Assertions.assertEquals("rucwzc", response.operations().get(0).operations().get(0).id());
        Assertions.assertEquals("udhgwjqeglymnrr", response.operations().get(0).operations().get(0).name());
        Assertions.assertEquals("wsqpiyxkmqmge", response.operations().get(0).operations().get(0).status());
        Assertions.assertEquals(93.71477F, response.operations().get(0).operations().get(0).percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-07-03T06:12:58Z"),
            response.operations().get(0).operations().get(0).startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-11T01:08:39Z"),
            response.operations().get(0).operations().get(0).endTime());
        Assertions.assertEquals("gn", response.operations().get(0).operations().get(0).operations().get(0).status());
    }
}
