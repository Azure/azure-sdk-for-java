// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.security.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.security.models.JitNetworkAccessRequestPort;
import com.azure.resourcemanager.security.models.JitNetworkAccessRequestVirtualMachine;
import com.azure.resourcemanager.security.models.Status;
import com.azure.resourcemanager.security.models.StatusReason;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class JitNetworkAccessRequestVirtualMachineTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        JitNetworkAccessRequestVirtualMachine model = BinaryData.fromString(
            "{\"id\":\"agynoi\",\"ports\":[{\"number\":11976518,\"allowedSourceAddressPrefix\":\"calincryqxz\",\"allowedSourceAddressPrefixes\":[\"zi\"],\"endTimeUtc\":\"2021-08-21T14:53:03Z\",\"status\":\"Revoked\",\"statusReason\":\"Expired\",\"mappedPort\":1092944240},{\"number\":1448460408,\"allowedSourceAddressPrefix\":\"qruqguh\",\"allowedSourceAddressPrefixes\":[\"etasvvoqsbp\",\"flanfkgxsyao\",\"uzowpuohdkcpr\"],\"endTimeUtc\":\"2021-06-08T11:38:10Z\",\"status\":\"Revoked\",\"statusReason\":\"Expired\",\"mappedPort\":309241462},{\"number\":1303987907,\"allowedSourceAddressPrefix\":\"ochlu\",\"allowedSourceAddressPrefixes\":[\"mqrud\",\"izcbfzmcrunfhiuc\",\"mfbcpaqktkrum\"],\"endTimeUtc\":\"2021-09-26T02:40:11Z\",\"status\":\"Revoked\",\"statusReason\":\"Expired\",\"mappedPort\":612930756}]}")
            .toObject(JitNetworkAccessRequestVirtualMachine.class);
        Assertions.assertEquals("agynoi", model.id());
        Assertions.assertEquals(11976518, model.ports().get(0).number());
        Assertions.assertEquals("calincryqxz", model.ports().get(0).allowedSourceAddressPrefix());
        Assertions.assertEquals("zi", model.ports().get(0).allowedSourceAddressPrefixes().get(0));
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-21T14:53:03Z"), model.ports().get(0).endTimeUtc());
        Assertions.assertEquals(Status.REVOKED, model.ports().get(0).status());
        Assertions.assertEquals(StatusReason.EXPIRED, model.ports().get(0).statusReason());
        Assertions.assertEquals(1092944240, model.ports().get(0).mappedPort());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        JitNetworkAccessRequestVirtualMachine model = new JitNetworkAccessRequestVirtualMachine().withId("agynoi")
            .withPorts(Arrays.asList(
                new JitNetworkAccessRequestPort().withNumber(11976518)
                    .withAllowedSourceAddressPrefix("calincryqxz")
                    .withAllowedSourceAddressPrefixes(Arrays.asList("zi"))
                    .withEndTimeUtc(OffsetDateTime.parse("2021-08-21T14:53:03Z"))
                    .withStatus(Status.REVOKED)
                    .withStatusReason(StatusReason.EXPIRED)
                    .withMappedPort(1092944240),
                new JitNetworkAccessRequestPort().withNumber(1448460408)
                    .withAllowedSourceAddressPrefix("qruqguh")
                    .withAllowedSourceAddressPrefixes(Arrays.asList("etasvvoqsbp", "flanfkgxsyao", "uzowpuohdkcpr"))
                    .withEndTimeUtc(OffsetDateTime.parse("2021-06-08T11:38:10Z"))
                    .withStatus(Status.REVOKED)
                    .withStatusReason(StatusReason.EXPIRED)
                    .withMappedPort(309241462),
                new JitNetworkAccessRequestPort().withNumber(1303987907)
                    .withAllowedSourceAddressPrefix("ochlu")
                    .withAllowedSourceAddressPrefixes(Arrays.asList("mqrud", "izcbfzmcrunfhiuc", "mfbcpaqktkrum"))
                    .withEndTimeUtc(OffsetDateTime.parse("2021-09-26T02:40:11Z"))
                    .withStatus(Status.REVOKED)
                    .withStatusReason(StatusReason.EXPIRED)
                    .withMappedPort(612930756)));
        model = BinaryData.fromObject(model).toObject(JitNetworkAccessRequestVirtualMachine.class);
        Assertions.assertEquals("agynoi", model.id());
        Assertions.assertEquals(11976518, model.ports().get(0).number());
        Assertions.assertEquals("calincryqxz", model.ports().get(0).allowedSourceAddressPrefix());
        Assertions.assertEquals("zi", model.ports().get(0).allowedSourceAddressPrefixes().get(0));
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-21T14:53:03Z"), model.ports().get(0).endTimeUtc());
        Assertions.assertEquals(Status.REVOKED, model.ports().get(0).status());
        Assertions.assertEquals(StatusReason.EXPIRED, model.ports().get(0).statusReason());
        Assertions.assertEquals(1092944240, model.ports().get(0).mappedPort());
    }
}
