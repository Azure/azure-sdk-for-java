// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.mobilenetwork.models;

import com.azure.core.annotation.Fluent;
import com.azure.core.util.logging.ClientLogger;
import com.azure.json.JsonReader;
import com.azure.json.JsonSerializable;
import com.azure.json.JsonToken;
import com.azure.json.JsonWriter;
import java.io.IOException;
import java.util.List;

/**
 * Data flow policy rule configuration.
 */
@Fluent
public final class PccRuleConfiguration implements JsonSerializable<PccRuleConfiguration> {
    /*
     * The name of the rule. This must be unique within the parent service. You must not use any of the following
     * reserved strings - `default`, `requested` or `service`.
     */
    private String ruleName;

    /*
     * A precedence value that is used to decide between data flow policy rules when identifying the QoS values to use
     * for a particular SIM. A lower value means a higher priority. This value should be unique among all data flow
     * policy rules configured in the mobile network.
     */
    private int rulePrecedence;

    /*
     * The QoS policy to use for packets matching this rule. If this field is null then the parent service will define
     * the QoS settings.
     */
    private PccRuleQosPolicy ruleQosPolicy;

    /*
     * Determines whether flows that match this data flow policy rule are permitted.
     */
    private TrafficControlPermission trafficControl;

    /*
     * The set of data flow templates to use for this data flow policy rule.
     */
    private List<ServiceDataFlowTemplate> serviceDataFlowTemplates;

    /**
     * Creates an instance of PccRuleConfiguration class.
     */
    public PccRuleConfiguration() {
    }

    /**
     * Get the ruleName property: The name of the rule. This must be unique within the parent service. You must not use
     * any of the following reserved strings - `default`, `requested` or `service`.
     * 
     * @return the ruleName value.
     */
    public String ruleName() {
        return this.ruleName;
    }

    /**
     * Set the ruleName property: The name of the rule. This must be unique within the parent service. You must not use
     * any of the following reserved strings - `default`, `requested` or `service`.
     * 
     * @param ruleName the ruleName value to set.
     * @return the PccRuleConfiguration object itself.
     */
    public PccRuleConfiguration withRuleName(String ruleName) {
        this.ruleName = ruleName;
        return this;
    }

    /**
     * Get the rulePrecedence property: A precedence value that is used to decide between data flow policy rules when
     * identifying the QoS values to use for a particular SIM. A lower value means a higher priority. This value should
     * be unique among all data flow policy rules configured in the mobile network.
     * 
     * @return the rulePrecedence value.
     */
    public int rulePrecedence() {
        return this.rulePrecedence;
    }

    /**
     * Set the rulePrecedence property: A precedence value that is used to decide between data flow policy rules when
     * identifying the QoS values to use for a particular SIM. A lower value means a higher priority. This value should
     * be unique among all data flow policy rules configured in the mobile network.
     * 
     * @param rulePrecedence the rulePrecedence value to set.
     * @return the PccRuleConfiguration object itself.
     */
    public PccRuleConfiguration withRulePrecedence(int rulePrecedence) {
        this.rulePrecedence = rulePrecedence;
        return this;
    }

    /**
     * Get the ruleQosPolicy property: The QoS policy to use for packets matching this rule. If this field is null then
     * the parent service will define the QoS settings.
     * 
     * @return the ruleQosPolicy value.
     */
    public PccRuleQosPolicy ruleQosPolicy() {
        return this.ruleQosPolicy;
    }

    /**
     * Set the ruleQosPolicy property: The QoS policy to use for packets matching this rule. If this field is null then
     * the parent service will define the QoS settings.
     * 
     * @param ruleQosPolicy the ruleQosPolicy value to set.
     * @return the PccRuleConfiguration object itself.
     */
    public PccRuleConfiguration withRuleQosPolicy(PccRuleQosPolicy ruleQosPolicy) {
        this.ruleQosPolicy = ruleQosPolicy;
        return this;
    }

    /**
     * Get the trafficControl property: Determines whether flows that match this data flow policy rule are permitted.
     * 
     * @return the trafficControl value.
     */
    public TrafficControlPermission trafficControl() {
        return this.trafficControl;
    }

    /**
     * Set the trafficControl property: Determines whether flows that match this data flow policy rule are permitted.
     * 
     * @param trafficControl the trafficControl value to set.
     * @return the PccRuleConfiguration object itself.
     */
    public PccRuleConfiguration withTrafficControl(TrafficControlPermission trafficControl) {
        this.trafficControl = trafficControl;
        return this;
    }

    /**
     * Get the serviceDataFlowTemplates property: The set of data flow templates to use for this data flow policy rule.
     * 
     * @return the serviceDataFlowTemplates value.
     */
    public List<ServiceDataFlowTemplate> serviceDataFlowTemplates() {
        return this.serviceDataFlowTemplates;
    }

    /**
     * Set the serviceDataFlowTemplates property: The set of data flow templates to use for this data flow policy rule.
     * 
     * @param serviceDataFlowTemplates the serviceDataFlowTemplates value to set.
     * @return the PccRuleConfiguration object itself.
     */
    public PccRuleConfiguration withServiceDataFlowTemplates(List<ServiceDataFlowTemplate> serviceDataFlowTemplates) {
        this.serviceDataFlowTemplates = serviceDataFlowTemplates;
        return this;
    }

    /**
     * Validates the instance.
     * 
     * @throws IllegalArgumentException thrown if the instance is not valid.
     */
    public void validate() {
        if (ruleName() == null) {
            throw LOGGER.atError()
                .log(new IllegalArgumentException("Missing required property ruleName in model PccRuleConfiguration"));
        }
        if (ruleQosPolicy() != null) {
            ruleQosPolicy().validate();
        }
        if (serviceDataFlowTemplates() == null) {
            throw LOGGER.atError()
                .log(new IllegalArgumentException(
                    "Missing required property serviceDataFlowTemplates in model PccRuleConfiguration"));
        } else {
            serviceDataFlowTemplates().forEach(e -> e.validate());
        }
    }

    private static final ClientLogger LOGGER = new ClientLogger(PccRuleConfiguration.class);

    /**
     * {@inheritDoc}
     */
    @Override
    public JsonWriter toJson(JsonWriter jsonWriter) throws IOException {
        jsonWriter.writeStartObject();
        jsonWriter.writeStringField("ruleName", this.ruleName);
        jsonWriter.writeIntField("rulePrecedence", this.rulePrecedence);
        jsonWriter.writeArrayField("serviceDataFlowTemplates", this.serviceDataFlowTemplates,
            (writer, element) -> writer.writeJson(element));
        jsonWriter.writeJsonField("ruleQosPolicy", this.ruleQosPolicy);
        jsonWriter.writeStringField("trafficControl",
            this.trafficControl == null ? null : this.trafficControl.toString());
        return jsonWriter.writeEndObject();
    }

    /**
     * Reads an instance of PccRuleConfiguration from the JsonReader.
     * 
     * @param jsonReader The JsonReader being read.
     * @return An instance of PccRuleConfiguration if the JsonReader was pointing to an instance of it, or null if it
     * was pointing to JSON null.
     * @throws IllegalStateException If the deserialized JSON object was missing any required properties.
     * @throws IOException If an error occurs while reading the PccRuleConfiguration.
     */
    public static PccRuleConfiguration fromJson(JsonReader jsonReader) throws IOException {
        return jsonReader.readObject(reader -> {
            PccRuleConfiguration deserializedPccRuleConfiguration = new PccRuleConfiguration();
            while (reader.nextToken() != JsonToken.END_OBJECT) {
                String fieldName = reader.getFieldName();
                reader.nextToken();

                if ("ruleName".equals(fieldName)) {
                    deserializedPccRuleConfiguration.ruleName = reader.getString();
                } else if ("rulePrecedence".equals(fieldName)) {
                    deserializedPccRuleConfiguration.rulePrecedence = reader.getInt();
                } else if ("serviceDataFlowTemplates".equals(fieldName)) {
                    List<ServiceDataFlowTemplate> serviceDataFlowTemplates
                        = reader.readArray(reader1 -> ServiceDataFlowTemplate.fromJson(reader1));
                    deserializedPccRuleConfiguration.serviceDataFlowTemplates = serviceDataFlowTemplates;
                } else if ("ruleQosPolicy".equals(fieldName)) {
                    deserializedPccRuleConfiguration.ruleQosPolicy = PccRuleQosPolicy.fromJson(reader);
                } else if ("trafficControl".equals(fieldName)) {
                    deserializedPccRuleConfiguration.trafficControl
                        = TrafficControlPermission.fromString(reader.getString());
                } else {
                    reader.skipChildren();
                }
            }

            return deserializedPccRuleConfiguration;
        });
    }
}
