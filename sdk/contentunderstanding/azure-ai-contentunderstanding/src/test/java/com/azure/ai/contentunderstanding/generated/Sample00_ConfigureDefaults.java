// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.ai.contentunderstanding.generated;

import com.azure.ai.contentunderstanding.models.ContentUnderstandingDefaults;
import com.azure.core.http.rest.RequestOptions;
import com.azure.core.http.rest.Response;
import com.azure.core.util.BinaryData;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

/**
 * Test class demonstrating how to configure and manage default settings for Content Understanding service.
 * This test shows:
 * 1. Getting current default configuration
 * 2. Updating default configuration
 * 3. Verifying the updated configuration
 */
public class Sample00_ConfigureDefaults extends ContentUnderstandingClientTestBase {

    @Test
    public void testConfigureDefaults() {
        // Step 1: Get current defaults
        System.out.println("Getting current default configuration...");
        ContentUnderstandingDefaults currentDefaults = contentUnderstandingClient.getDefaults();
        System.out.println("Current defaults retrieved successfully.");
        System.out.println("Current configuration: " + currentDefaults);

        // Step 2: Update defaults with the same configuration (demonstrating update)
        System.out.println("\nUpdating default configuration...");

        // Convert the current defaults to BinaryData for the update request
        BinaryData defaultsBody = BinaryData.fromObject(currentDefaults);
        RequestOptions requestOptions = new RequestOptions();

        // Update defaults with the configuration
        Response<BinaryData> updateResponse
            = contentUnderstandingClient.updateDefaultsWithResponse(defaultsBody, requestOptions);

        if (updateResponse.getStatusCode() == 200 || updateResponse.getStatusCode() == 201) {
            System.out.println("Defaults updated successfully.");
            System.out.println("Status code: " + updateResponse.getStatusCode());
        } else {
            System.err.println("Failed to update defaults. Status code: " + updateResponse.getStatusCode());
        }

        // Step 3: Verify the updated configuration
        System.out.println("\nVerifying updated configuration...");
        ContentUnderstandingDefaults updatedDefaults = contentUnderstandingClient.getDefaults();
        System.out.println("Updated defaults verified successfully.");
        System.out.println("Updated configuration: " + updatedDefaults);

        System.out.println("\nConfiguration management completed.");
    }
}
