// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.
package com.azure.ai.contentunderstanding.models;

import com.azure.core.annotation.Generated;
import com.azure.core.annotation.Immutable;
import com.azure.json.JsonReader;
import com.azure.json.JsonSerializable;
import com.azure.json.JsonToken;
import com.azure.json.JsonWriter;
import java.io.IOException;
import java.util.Map;

/**
 * Media content base class.
 */
@Immutable
public class MediaContent implements JsonSerializable<MediaContent> {

    /*
     * Content kind.
     */
    @Generated
    private MediaContentKind kind = MediaContentKind.fromString("MediaContent");

    /*
     * Detected MIME type of the content. Ex. application/pdf, image/jpeg, etc.
     */
    @Generated
    private final String mimeType;

    /*
     * The analyzer that generated this content.
     */
    @Generated
    private String analyzerId;

    /*
     * Classified content category.
     */
    @Generated
    private String category;

    /*
     * The path of the content in the input.
     */
    @Generated
    private String path;

    /*
     * Markdown representation of the content.
     */
    @Generated
    private String markdown;

    /*
     * Extracted fields from the content.
     */
    @Generated
    private Map<String, ContentField> fields;

    /**
     * Creates an instance of MediaContent class.
     *
     * @param mimeType the mimeType value to set.
     */
    @Generated
    protected MediaContent(String mimeType) {
        this.mimeType = mimeType;
    }

    /**
     * Get the kind property: Content kind.
     *
     * @return the kind value.
     */
    @Generated
    public MediaContentKind getKind() {
        return this.kind;
    }

    /**
     * Get the mimeType property: Detected MIME type of the content. Ex. application/pdf, image/jpeg, etc.
     *
     * @return the mimeType value.
     */
    @Generated
    public String getMimeType() {
        return this.mimeType;
    }

    /**
     * Get the analyzerId property: The analyzer that generated this content.
     *
     * @return the analyzerId value.
     */
    @Generated
    public String getAnalyzerId() {
        return this.analyzerId;
    }

    /**
     * Set the analyzerId property: The analyzer that generated this content.
     *
     * @param analyzerId the analyzerId value to set.
     * @return the MediaContent object itself.
     */
    @Generated
    MediaContent setAnalyzerId(String analyzerId) {
        this.analyzerId = analyzerId;
        return this;
    }

    /**
     * Get the category property: Classified content category.
     *
     * @return the category value.
     */
    @Generated
    public String getCategory() {
        return this.category;
    }

    /**
     * Set the category property: Classified content category.
     *
     * @param category the category value to set.
     * @return the MediaContent object itself.
     */
    @Generated
    MediaContent setCategory(String category) {
        this.category = category;
        return this;
    }

    /**
     * Get the path property: The path of the content in the input.
     *
     * @return the path value.
     */
    @Generated
    public String getPath() {
        return this.path;
    }

    /**
     * Set the path property: The path of the content in the input.
     *
     * @param path the path value to set.
     * @return the MediaContent object itself.
     */
    @Generated
    MediaContent setPath(String path) {
        this.path = path;
        return this;
    }

    /**
     * Get the markdown property: Markdown representation of the content.
     *
     * @return the markdown value.
     */
    @Generated
    public String getMarkdown() {
        return this.markdown;
    }

    /**
     * Set the markdown property: Markdown representation of the content.
     *
     * @param markdown the markdown value to set.
     * @return the MediaContent object itself.
     */
    @Generated
    MediaContent setMarkdown(String markdown) {
        this.markdown = markdown;
        return this;
    }

    /**
     * Get the fields property: Extracted fields from the content.
     *
     * @return the fields value.
     */
    @Generated
    public Map<String, ContentField> getFields() {
        return this.fields;
    }

    /**
     * Set the fields property: Extracted fields from the content.
     *
     * @param fields the fields value to set.
     * @return the MediaContent object itself.
     */
    @Generated
    MediaContent setFields(Map<String, ContentField> fields) {
        this.fields = fields;
        return this;
    }

    /**
     * {@inheritDoc}
     */
    @Generated
    @Override
    public JsonWriter toJson(JsonWriter jsonWriter) throws IOException {
        jsonWriter.writeStartObject();
        jsonWriter.writeStringField("mimeType", this.mimeType);
        jsonWriter.writeStringField("kind", this.kind == null ? null : this.kind.toString());
        jsonWriter.writeStringField("analyzerId", this.analyzerId);
        jsonWriter.writeStringField("category", this.category);
        jsonWriter.writeStringField("path", this.path);
        jsonWriter.writeStringField("markdown", this.markdown);
        jsonWriter.writeMapField("fields", this.fields, (writer, element) -> writer.writeJson(element));
        return jsonWriter.writeEndObject();
    }

    /**
     * Reads an instance of MediaContent from the JsonReader.
     *
     * @param jsonReader The JsonReader being read.
     * @return An instance of MediaContent if the JsonReader was pointing to an instance of it, or null if it was
     * pointing to JSON null.
     * @throws IllegalStateException If the deserialized JSON object was missing any required properties.
     * @throws IOException If an error occurs while reading the MediaContent.
     */
    @Generated
    public static MediaContent fromJson(JsonReader jsonReader) throws IOException {
        return jsonReader.readObject(reader -> {
            String discriminatorValue = null;
            try (JsonReader readerToUse = reader.bufferObject()) {
                // Prepare for reading
                readerToUse.nextToken();
                while (readerToUse.nextToken() != JsonToken.END_OBJECT) {
                    String fieldName = readerToUse.getFieldName();
                    readerToUse.nextToken();
                    if ("kind".equals(fieldName)) {
                        discriminatorValue = readerToUse.getString();
                        break;
                    } else {
                        readerToUse.skipChildren();
                    }
                }
                // Use the discriminator value to determine which subtype should be deserialized.
                if ("document".equals(discriminatorValue)) {
                    return DocumentContent.fromJson(readerToUse.reset());
                } else if ("audioVisual".equals(discriminatorValue)) {
                    return AudioVisualContent.fromJson(readerToUse.reset());
                } else {
                    return fromJsonKnownDiscriminator(readerToUse.reset());
                }
            }
        });
    }

    @Generated
    static MediaContent fromJsonKnownDiscriminator(JsonReader jsonReader) throws IOException {
        return jsonReader.readObject(reader -> {
            String mimeType = null;
            MediaContentKind kind = null;
            String analyzerId = null;
            String category = null;
            String path = null;
            String markdown = null;
            Map<String, ContentField> fields = null;
            while (reader.nextToken() != JsonToken.END_OBJECT) {
                String fieldName = reader.getFieldName();
                reader.nextToken();
                if ("mimeType".equals(fieldName)) {
                    mimeType = reader.getString();
                } else if ("kind".equals(fieldName)) {
                    kind = MediaContentKind.fromString(reader.getString());
                } else if ("analyzerId".equals(fieldName)) {
                    analyzerId = reader.getString();
                } else if ("category".equals(fieldName)) {
                    category = reader.getString();
                } else if ("path".equals(fieldName)) {
                    path = reader.getString();
                } else if ("markdown".equals(fieldName)) {
                    markdown = reader.getString();
                } else if ("fields".equals(fieldName)) {
                    fields = reader.readMap(reader1 -> ContentField.fromJson(reader1));
                } else {
                    reader.skipChildren();
                }
            }
            MediaContent deserializedMediaContent = new MediaContent(mimeType);
            deserializedMediaContent.kind = kind;
            deserializedMediaContent.analyzerId = analyzerId;
            deserializedMediaContent.category = category;
            deserializedMediaContent.path = path;
            deserializedMediaContent.markdown = markdown;
            deserializedMediaContent.fields = fields;
            return deserializedMediaContent;
        });
    }
}
