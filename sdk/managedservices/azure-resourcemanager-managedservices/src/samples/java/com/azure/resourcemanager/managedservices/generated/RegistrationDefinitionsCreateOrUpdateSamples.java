// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.managedservices.generated;

import com.azure.resourcemanager.managedservices.models.Authorization;
import com.azure.resourcemanager.managedservices.models.EligibleApprover;
import com.azure.resourcemanager.managedservices.models.EligibleAuthorization;
import com.azure.resourcemanager.managedservices.models.JustInTimeAccessPolicy;
import com.azure.resourcemanager.managedservices.models.MultiFactorAuthProvider;
import com.azure.resourcemanager.managedservices.models.Plan;
import com.azure.resourcemanager.managedservices.models.RegistrationDefinitionProperties;
import java.time.Duration;
import java.util.Arrays;
import java.util.UUID;

/** Samples for RegistrationDefinitions CreateOrUpdate. */
public final class RegistrationDefinitionsCreateOrUpdateSamples {
    /*
     * x-ms-original-file: specification/managedservices/resource-manager/Microsoft.ManagedServices/preview/2022-01-01-preview/examples/PutRegistrationDefinition.json
     */
    /**
     * Sample code: Put Registration Definition.
     *
     * @param manager Entry point to ManagedServicesManager.
     */
    public static void putRegistrationDefinition(
        com.azure.resourcemanager.managedservices.ManagedServicesManager manager) {
        manager
            .registrationDefinitions()
            .define("26c128c2-fefa-4340-9bb1-6e081c90ada2")
            .withExistingScope("subscription/0afefe50-734e-4610-8a82-a144ahf49dea")
            .withProperties(
                new RegistrationDefinitionProperties()
                    .withDescription("Tes1t")
                    .withAuthorizations(
                        Arrays
                            .asList(
                                new Authorization()
                                    .withPrincipalId("f98d86a2-4cc4-4e9d-ad47-b3e80a1bcdfc")
                                    .withPrincipalIdDisplayName("Support User")
                                    .withRoleDefinitionId("acdd72a7-3385-48ef-bd42-f606fba81ae7"),
                                new Authorization()
                                    .withPrincipalId("f98d86a2-4cc4-4e9d-ad47-b3e80a1bcdfc")
                                    .withPrincipalIdDisplayName("User Access Administrator")
                                    .withRoleDefinitionId("18d7d88d-d35e-4fb5-a5c3-7773c20a72d9")
                                    .withDelegatedRoleDefinitionIds(
                                        Arrays.asList(UUID.fromString("b24988ac-6180-42a0-ab88-20f7382dd24c")))))
                    .withEligibleAuthorizations(
                        Arrays
                            .asList(
                                new EligibleAuthorization()
                                    .withPrincipalId("3e0ed8c6-e902-4fc5-863c-e3ddbb2ae2a2")
                                    .withPrincipalIdDisplayName("Support User")
                                    .withRoleDefinitionId("ae349356-3a1b-4a5e-921d-050484c6347e")
                                    .withJustInTimeAccessPolicy(
                                        new JustInTimeAccessPolicy()
                                            .withMultiFactorAuthProvider(MultiFactorAuthProvider.AZURE)
                                            .withMaximumActivationDuration(Duration.parse("PT8H"))
                                            .withManagedByTenantApprovers(
                                                Arrays
                                                    .asList(
                                                        new EligibleApprover()
                                                            .withPrincipalId("d9b22cd6-6407-43cc-8c60-07c56df0b51a")
                                                            .withPrincipalIdDisplayName("Approver Group"))))))
                    .withRegistrationDefinitionName("DefinitionName")
                    .withManagedByTenantId("83abe5cd-bcc3-441a-bd86-e6a75360cecc"))
            .withPlan(
                new Plan()
                    .withName("addesai-plan")
                    .withPublisher("marketplace-test")
                    .withProduct("test")
                    .withVersion("1.0.0"))
            .create();
    }
}
