// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.maps.traffic;

import com.azure.core.annotation.ReturnType;
import com.azure.core.annotation.ServiceClient;
import com.azure.core.annotation.ServiceMethod;
import com.azure.core.http.rest.Response;
import com.azure.core.http.rest.SimpleResponse;
import com.azure.core.http.rest.StreamResponse;
import com.azure.core.util.BinaryData;
import com.azure.core.util.Context;
import com.azure.core.util.logging.ClientLogger;
import com.azure.maps.traffic.models.ErrorResponseException;
import com.azure.maps.traffic.models.TrafficFlowSegmentData;
import com.azure.maps.traffic.models.TrafficIncidentDetail;
import com.azure.maps.traffic.models.TrafficIncidentViewport;
import com.azure.maps.traffic.models.TrafficFlowSegmentOptions;
import com.azure.maps.traffic.models.TrafficFlowTileOptions;
import com.azure.maps.traffic.models.TrafficIncidentDetailOptions;
import com.azure.maps.traffic.models.TrafficIncidentTileOptions;
import com.azure.maps.traffic.models.TrafficIncidentViewportOptions;

/** Initializes a new instance of the synchronous TrafficClient type. */
@ServiceClient(builder = TrafficClientBuilder.class)
public final class TrafficClient {
     /**
     * Initializes an instance of TrafficClient client.
     *
     * @param serviceClient the service client implementation.
     */
    private final TrafficAsyncClient asyncClient;

    private static final ClientLogger LOGGER = new ClientLogger(TrafficClient.class);

    /**
     * Initializes an instance of Traffic client.
     *
     * @param serviceClient the service client implementation.
     */
    TrafficClient(TrafficAsyncClient asyncClient) {
        this.asyncClient = asyncClient;
    }

    /**
     * __Traffic Flow Tile__
     *
     * <p>**Applies to**: S0 and S1 pricing tiers.
     *
     * <p>The Azure Flow Tile API serves 256 x 256 pixel tiles showing traffic flow. All tiles use the same grid system.
     * Because the traffic tiles use transparent images, they can be layered on top of map tiles to create a compound
     * display. The Flow tiles use colors to indicate either the speed of traffic on different road segments, or the
     * difference between that speed and the free-flow speed on the road segment in question.
     *
     * @param options {@link TrafficFlowTileOptions} the options to be used in this search.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws ErrorResponseException thrown if the request is rejected by server.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return the response.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public BinaryData getTrafficFlowTile(TrafficFlowTileOptions options) {
        return this.asyncClient.getTrafficFlowTile(options).block();
    }

    /**
     * Get traffic flow tile with response
     * @param context The context to associate with this operation.
     * @param options {@link TrafficFlowTileOptions} the options to be used in this search.
     * @return the response
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Response<BinaryData> getTrafficFlowTileWithResponse(TrafficFlowTileOptions options, Context context) {
        StreamResponse response = this.asyncClient.getTrafficFlowTileWithResponse(options, context).block();
        if (response != null) {
            return new SimpleResponse<BinaryData>(response.getRequest(), response.getStatusCode(), response.getHeaders(), BinaryData.fromFlux(response.getValue()).block());
        } else {
            throw LOGGER.logExceptionAsError(new NullPointerException("Response is null"));
        }
    } 

    /**
     * __Traffic Flow Segment__
     *
     * <p>**Applies to**: S0 and S1 pricing tiers.
     *
     * <p>This service provides information about the speeds and travel times of the road fragment closest to the given
     * coordinates. It is designed to work alongside the Flow layer of the Render Service to support clickable flow data
     * visualizations. With this API, the client side can connect any place in the map with flow data on the closest
     * road and present it to the user.
     *
     * @param options {@link TrafficFlowSegmentOptions} the options to be used in this search.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws ErrorResponseException thrown if the request is rejected by server.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return this object is returned from a successful Traffic Flow Segment call.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public TrafficFlowSegmentData getTrafficFlowSegment(TrafficFlowSegmentOptions options) {
        return this.asyncClient.getTrafficFlowSegment(options).block();
    }
    
    /**
     * Get traffic flow segment with response
     * @param context The context to associate with this operation.
     * @param options {@link TrafficFlowSegmentOptions} the options to be used in this search.
     * @return the response
     */    
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Response<TrafficFlowSegmentData> getTrafficFlowSegmentWithResponse(TrafficFlowSegmentOptions options, Context context) {
        return this.asyncClient.getTrafficFlowSegmentWithResponse(options, context).block();
    }

    /**
     * __Traffic Incident Tile__
     *
     * <p>**Applies to**: S0 and S1 pricing tiers.
     *
     * <p>This service serves 256 x 256 pixel tiles showing traffic incidents. All tiles use the same grid system.
     * Because the traffic tiles use transparent images, they can be layered on top of map tiles to create a compound
     * display. Traffic tiles render graphics to indicate traffic on the roads in the specified area.
     *
     * @param options {@link TrafficIncidentTileOptions} the options to be used in this search.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws ErrorResponseException thrown if the request is rejected by server.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return the response.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public BinaryData getTrafficIncidentTile(TrafficIncidentTileOptions options) {
        return this.asyncClient.getTrafficIncidentTile(options).block();
    }

    /**
     * 
     * @param context The context to associate with this operation.
     * @param options {@link TrafficIncidentTileOptions} the options to be used in this search.
     * @return the response
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Response<BinaryData> getTrafficIncidentTileWithResponse(TrafficIncidentTileOptions options, Context context) {
        StreamResponse response = this.asyncClient.getTrafficIncidentTileWithResponse(options, context).block();
        if (response != null) {
            return new SimpleResponse<BinaryData>(response.getRequest(), response.getStatusCode(), response.getHeaders(), BinaryData.fromFlux(response.getValue()).block());
        } else {
            throw LOGGER.logExceptionAsError(new NullPointerException("Response is null"));
        }
    } 
    
    /**
     * __Traffic Incident Detail__
     *
     * <p>**Applies to**: S0 and S1 pricing tiers.
     *
     * <p>This API provides information on traffic incidents inside a given bounding box, based on the current Traffic
     * Model ID. The Traffic Model ID is available to grant synchronization of data between calls and API's. The Traffic
     * Model ID is a key value for determining the currency of traffic incidents. It is updated every minute, and is
     * valid for two minutes before it times out. It is used in rendering [incident
     * tiles](https://docs.microsoft.com/rest/api/maps/traffic/gettrafficincidenttile). It can be obtained from
     * the [Viewport API](https://docs.microsoft.com//rest/api/maps/traffic/gettrafficincidentviewport).
     *
     * @param options {@link TrafficIncidentDetailOptions} the options to be used in this search.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws ErrorResponseException thrown if the request is rejected by server.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return this object is returned from a successful Traffic incident Detail call.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public TrafficIncidentDetail getTrafficIncidentDetail(TrafficIncidentDetailOptions options) {
        return this.asyncClient.getTrafficIncidentDetail(options).block();
    }

    /**
     * Get traffic incident detail with response
     * @param context The context to associate with this operation.
     * @param options {@link TrafficIncidentDetailOptions} the options to be used in this search.
     * @return the response
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Response<TrafficIncidentDetail> getTrafficIncidentDetailWithResponse(TrafficIncidentDetailOptions options, Context context) {
        return this.asyncClient.getTrafficIncidentDetailWithResponse(options, context).block();
    }

    /**
     * __Traffic Incident Viewport__
     *
     * <p>**Applies to**: S0 and S1 pricing tiers.
     *
     * <p>This API returns legal and technical information for the viewport described in the request. It should be
     * called by client applications whenever the viewport changes (for instance, through zooming, panning, going to a
     * location, or displaying a route). The request should contain the bounding box and zoom level of the viewport
     * whose information is needed. The return will contain map version information, as well as the current Traffic
     * Model ID and copyright IDs. The Traffic Model ID returned by the Viewport Description is used by other APIs to
     * retrieve last traffic information for further processing.
     *
     * @param options {@link TrafficIncidentViewportOptions} the options to be used in this search.
     * @throws IllegalArgumentException thrown if parameters fail the validation.
     * @throws ErrorResponseException thrown if the request is rejected by server.
     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.
     * @return this object is returned from a successful Traffic Incident Viewport call.
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public TrafficIncidentViewport getTrafficIncidentViewport(TrafficIncidentViewportOptions options) {
        return this.asyncClient.getTrafficIncidentViewport(options).block();
    }

    /**
     * Get traffic incident viewport with response
     * @param context The context to associate with this operation.
     * @param options {@link TrafficIncidentViewportOptions} the options to be used in this search.
     * @return the response
     */
    @ServiceMethod(returns = ReturnType.SINGLE)
    public Response<TrafficIncidentViewport> getTrafficIncidentViewportWithResponse(TrafficIncidentViewportOptions options, Context context) {
        return this.asyncClient.getTrafficIncidentViewportWithResponse(options, context).block();
    }
}
