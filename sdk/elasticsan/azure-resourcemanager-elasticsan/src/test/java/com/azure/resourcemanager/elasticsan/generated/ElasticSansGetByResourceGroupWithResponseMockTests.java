// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.elasticsan.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.elasticsan.ElasticSanManager;
import com.azure.resourcemanager.elasticsan.models.AutoScalePolicyEnforcement;
import com.azure.resourcemanager.elasticsan.models.ElasticSan;
import com.azure.resourcemanager.elasticsan.models.PublicNetworkAccess;
import com.azure.resourcemanager.elasticsan.models.SkuName;
import com.azure.resourcemanager.elasticsan.models.SkuTier;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ElasticSansGetByResourceGroupWithResponseMockTests {
    @Test
    public void testGetByResourceGroupWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"sku\":{\"name\":\"Premium_LRS\",\"tier\":\"Premium\"},\"availabilityZones\":[\"unrmfqjhhkxb\",\"vjymjhxxjyngud\",\"vkr\"],\"provisioningState\":\"Pending\",\"baseSizeTiB\":4478371279557844955,\"extendedCapacitySizeTiB\":7253546650057093309,\"totalVolumeSizeGiB\":8979216353770445653,\"volumeGroupCount\":572742112565082027,\"totalIops\":5609959872592066147,\"totalMBps\":5651552711145690194,\"totalSizeTiB\":8265803148006565496,\"privateEndpointConnections\":[{\"properties\":{\"provisioningState\":\"Deleting\",\"privateEndpoint\":{},\"privateLinkServiceConnectionState\":{},\"groupIds\":[\"qtdo\",\"mcbxvwvxysl\",\"bhsfxob\"]},\"id\":\"tkblmpewww\",\"name\":\"bkrvrnsvshqj\",\"type\":\"hxcr\"}],\"publicNetworkAccess\":\"Enabled\",\"autoScaleProperties\":{\"scaleUpProperties\":{\"unusedSizeTiB\":8444308436749388192,\"increaseCapacityUnitByTiB\":887229974544908280,\"capacityUnitScaleUpLimitTiB\":8133547677747948379,\"autoScalePolicyEnforcement\":\"Enabled\"}}},\"location\":\"sub\",\"tags\":{\"pybsrfbjfdtw\":\"birx\"},\"id\":\"sotftpvj\",\"name\":\"bexilzznfqqnv\",\"type\":\"pmqtaru\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        ElasticSanManager manager = ElasticSanManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        ElasticSan response = manager.elasticSans()
            .getByResourceGroupWithResponse("hzxct", "bgbkdmoizpost", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("sub", response.location());
        Assertions.assertEquals("birx", response.tags().get("pybsrfbjfdtw"));
        Assertions.assertEquals(SkuName.PREMIUM_LRS, response.sku().name());
        Assertions.assertEquals(SkuTier.PREMIUM, response.sku().tier());
        Assertions.assertEquals("unrmfqjhhkxb", response.availabilityZones().get(0));
        Assertions.assertEquals(4478371279557844955L, response.baseSizeTiB());
        Assertions.assertEquals(7253546650057093309L, response.extendedCapacitySizeTiB());
        Assertions.assertEquals(PublicNetworkAccess.ENABLED, response.publicNetworkAccess());
        Assertions.assertEquals(8444308436749388192L,
            response.autoScaleProperties().scaleUpProperties().unusedSizeTiB());
        Assertions.assertEquals(887229974544908280L,
            response.autoScaleProperties().scaleUpProperties().increaseCapacityUnitByTiB());
        Assertions.assertEquals(8133547677747948379L,
            response.autoScaleProperties().scaleUpProperties().capacityUnitScaleUpLimitTiB());
        Assertions.assertEquals(AutoScalePolicyEnforcement.ENABLED,
            response.autoScaleProperties().scaleUpProperties().autoScalePolicyEnforcement());
    }
}
