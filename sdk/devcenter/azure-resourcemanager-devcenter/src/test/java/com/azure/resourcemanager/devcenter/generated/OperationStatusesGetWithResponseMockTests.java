// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.devcenter.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.devcenter.DevCenterManager;
import com.azure.resourcemanager.devcenter.models.OperationStatus;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class OperationStatusesGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":\"datawankltytmhdroznn\",\"id\":\"rlktgjcsggu\",\"resourceId\":\"eml\",\"name\":\"waeeczgfb\",\"status\":\"kklelssxblycs\",\"percentComplete\":97.138306,\"startTime\":\"2021-09-07T10:55:25Z\",\"endTime\":\"2021-05-07T05:55:26Z\",\"operations\":[{\"id\":\"desqplpvmjcdo\",\"resourceId\":\"bidyv\",\"name\":\"owx\",\"status\":\"gpiudeug\",\"percentComplete\":95.6041,\"startTime\":\"2021-08-27T10:51:35Z\",\"endTime\":\"2021-10-17T21:42:18Z\",\"operations\":[{\"id\":\"kufykhvu\",\"resourceId\":\"epmrut\",\"name\":\"abaobnslujdjltym\",\"status\":\"mvguihywart\",\"percentComplete\":92.43603,\"startTime\":\"2021-12-07T20:59:05Z\",\"endTime\":\"2021-09-30T07:37:28Z\",\"operations\":[{\"status\":\"kxdssjpemmucfxh\"},{\"status\":\"kkflrmymyincqlhr\"},{\"status\":\"s\"},{\"status\":\"sl\"}]}]},{\"id\":\"ovgqcgxuugqkctot\",\"resourceId\":\"wlxte\",\"name\":\"ptjgwdt\",\"status\":\"ukranblw\",\"percentComplete\":89.90585,\"startTime\":\"2021-01-31T20:21:29Z\",\"endTime\":\"2021-03-18T23:55:46Z\",\"operations\":[{\"id\":\"ygqwahoiu\",\"resourceId\":\"gniiprglvaw\",\"name\":\"z\",\"status\":\"ufypiv\",\"percentComplete\":71.79715,\"startTime\":\"2020-12-20T08:42:51Z\",\"endTime\":\"2021-04-29T01:29:01Z\",\"operations\":[{\"status\":\"bkmifoxxkub\"},{\"status\":\"phavpmhbrb\"}]},{\"id\":\"govpbbtte\",\"resourceId\":\"oknssqyzqedikdf\",\"name\":\"biqmrjgei\",\"status\":\"fqlggw\",\"percentComplete\":90.91323,\"startTime\":\"2021-11-27T16:20:17Z\",\"endTime\":\"2021-03-10T16:18:21Z\",\"operations\":[{\"status\":\"byephmgt\"},{\"status\":\"ljvrcmyfqipgxhnp\"},{\"status\":\"myqwcab\"},{\"status\":\"nuilee\"}]},{\"id\":\"wlpaugmrmfjlrxwt\",\"resourceId\":\"ukhfkvc\",\"name\":\"izmoaeds\",\"status\":\"jwuive\",\"percentComplete\":28.107388,\"startTime\":\"2021-03-24T06:06:26Z\",\"endTime\":\"2021-11-01T04:08:14Z\",\"operations\":[{\"status\":\"ei\"},{\"status\":\"bp\"},{\"status\":\"mgomg\"}]},{\"id\":\"ljdlrgmspl\",\"resourceId\":\"auf\",\"name\":\"hhvnewgnxkymp\",\"status\":\"anxrj\",\"percentComplete\":34.28455,\"startTime\":\"2021-06-27T11:49:53Z\",\"endTime\":\"2021-05-16T21:19:17Z\",\"operations\":[{\"status\":\"ypnyghshxc\"},{\"status\":\"lhkgmnsghp\"}]}]},{\"id\":\"hdrwjjkh\",\"resourceId\":\"omacluzvxnqmhr\",\"name\":\"pd\",\"status\":\"wmkoisq\",\"percentComplete\":36.727757,\"startTime\":\"2021-10-05T03:23:13Z\",\"endTime\":\"2021-06-29T15:08:13Z\",\"operations\":[{\"id\":\"csypobkdqzrdzsyl\",\"resourceId\":\"lgtrczzy\",\"name\":\"xzji\",\"status\":\"p\",\"percentComplete\":69.53151,\"startTime\":\"2021-01-04T08:16:26Z\",\"endTime\":\"2021-05-10T09:35:10Z\",\"operations\":[{\"status\":\"irldefxr\"}]},{\"id\":\"xnbkkj\",\"resourceId\":\"urnnqbnqbpiz\",\"name\":\"ltgrdogypxrxv\",\"status\":\"fihwu\",\"percentComplete\":69.94221,\"startTime\":\"2021-02-13T10:56:03Z\",\"endTime\":\"2021-01-07T09:42:09Z\",\"operations\":[{\"status\":\"xrblmliowxihs\"},{\"status\":\"nxw\"},{\"status\":\"agnepzwaklsb\"},{\"status\":\"bqqqagwwrxa\"}]},{\"id\":\"isglrrc\",\"resourceId\":\"zkhhltnjadhqo\",\"name\":\"jqoyueayfbpcm\",\"status\":\"plby\",\"percentComplete\":18.500656,\"startTime\":\"2021-05-29T18:12:02Z\",\"endTime\":\"2021-01-16T09:08:15Z\",\"operations\":[{\"status\":\"gnmbscbbxigdhx\"}]}]},{\"id\":\"opedbwdpyqyybxub\",\"resourceId\":\"nafcbq\",\"name\":\"e\",\"status\":\"jelaqacigele\",\"percentComplete\":4.094452,\"startTime\":\"2021-03-27T19:33:47Z\",\"endTime\":\"2021-08-29T06:27:54Z\",\"operations\":[{\"id\":\"jopwbeonrlkwz\",\"resourceId\":\"ybxc\",\"name\":\"kxcpt\",\"status\":\"oqfyiaseqch\",\"percentComplete\":70.03985,\"startTime\":\"2021-08-04T17:40:23Z\",\"endTime\":\"2021-01-20T16:29:41Z\",\"operations\":[{\"status\":\"sg\"},{\"status\":\"kiuemv\"},{\"status\":\"nbwzohmnrxxbso\"},{\"status\":\"klinhmdptysprq\"}]}]}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        DevCenterManager manager = DevCenterManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        OperationStatus response
            = manager.operationStatuses().getWithResponse("naoyank", "oe", com.azure.core.util.Context.NONE).getValue();

        Assertions.assertEquals("rlktgjcsggu", response.id());
        Assertions.assertEquals("waeeczgfb", response.name());
        Assertions.assertEquals("kklelssxblycs", response.status());
        Assertions.assertEquals(97.138306F, response.percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-07T10:55:25Z"), response.startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-07T05:55:26Z"), response.endTime());
        Assertions.assertEquals("desqplpvmjcdo", response.operations().get(0).id());
        Assertions.assertEquals("owx", response.operations().get(0).name());
        Assertions.assertEquals("gpiudeug", response.operations().get(0).status());
        Assertions.assertEquals(95.6041F, response.operations().get(0).percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-27T10:51:35Z"), response.operations().get(0).startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-10-17T21:42:18Z"), response.operations().get(0).endTime());
        Assertions.assertEquals("kufykhvu", response.operations().get(0).operations().get(0).id());
        Assertions.assertEquals("abaobnslujdjltym", response.operations().get(0).operations().get(0).name());
        Assertions.assertEquals("mvguihywart", response.operations().get(0).operations().get(0).status());
        Assertions.assertEquals(92.43603F, response.operations().get(0).operations().get(0).percentComplete());
        Assertions.assertEquals(OffsetDateTime.parse("2021-12-07T20:59:05Z"),
            response.operations().get(0).operations().get(0).startTime());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-30T07:37:28Z"),
            response.operations().get(0).operations().get(0).endTime());
        Assertions.assertEquals("kxdssjpemmucfxh",
            response.operations().get(0).operations().get(0).operations().get(0).status());
    }
}
