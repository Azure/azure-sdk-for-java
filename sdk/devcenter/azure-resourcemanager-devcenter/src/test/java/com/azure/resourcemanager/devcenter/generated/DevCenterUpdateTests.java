// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.devcenter.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.devcenter.models.DevCenterUpdate;
import com.azure.resourcemanager.devcenter.models.ManagedServiceIdentity;
import com.azure.resourcemanager.devcenter.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.devcenter.models.UserAssignedIdentity;
import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

public final class DevCenterUpdateTests {
    @Test
    public void testDeserialize() {
        DevCenterUpdate model =
            BinaryData
                .fromString(
                    "{\"identity\":{\"principalId\":\"0218f7cb-1973-4891-b7a7-b7e7bf835cc1\",\"tenantId\":\"c007f053-ec3c-4a7e-bb6e-e6547fdd282e\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"ipjoxzjnchgejs\":{\"principalId\":\"46b87a21-c120-405e-aa71-751626bf8229\",\"clientId\":\"28bd133f-32bd-473d-bd8f-5068af5ba9da\"},\"mailzydehojw\":{\"principalId\":\"844c7466-6256-47ac-b865-cb907bed5c93\",\"clientId\":\"07144762-8153-450d-9688-dafe1f7ccd63\"},\"uxinpmqnjaq\":{\"principalId\":\"edc06086-f8b5-44c4-bf6d-fc586b42a36c\",\"clientId\":\"ffe278c5-9a31-43c5-97b5-ec3ca3c776d1\"}}},\"tags\":{\"jvwmfda\":\"jsprozvcpute\"},\"location\":\"cmdv\"}")
                .toObject(DevCenterUpdate.class);
        Assertions.assertEquals("jsprozvcpute", model.tags().get("jvwmfda"));
        Assertions.assertEquals("cmdv", model.location());
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.identity().type());
    }

    @Test
    public void testSerialize() {
        DevCenterUpdate model =
            new DevCenterUpdate()
                .withTags(mapOf("jvwmfda", "jsprozvcpute"))
                .withLocation("cmdv")
                .withIdentity(
                    new ManagedServiceIdentity()
                        .withType(ManagedServiceIdentityType.SYSTEM_ASSIGNED)
                        .withUserAssignedIdentities(
                            mapOf(
                                "ipjoxzjnchgejs",
                                new UserAssignedIdentity(),
                                "mailzydehojw",
                                new UserAssignedIdentity(),
                                "uxinpmqnjaq",
                                new UserAssignedIdentity())));
        model = BinaryData.fromObject(model).toObject(DevCenterUpdate.class);
        Assertions.assertEquals("jsprozvcpute", model.tags().get("jvwmfda"));
        Assertions.assertEquals("cmdv", model.location());
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED, model.identity().type());
    }

    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
