// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.containers.containerregistry;

import com.azure.core.exception.ResourceNotFoundException;
import org.junit.jupiter.api.Test;
import reactor.test.StepVerifier;

public class ContainerRegistryClientAsyncTest extends ContainerRegistryClientsTestBase {
    private ContainerRegistryAsyncClient client;
    private String recordFileName;

    private ContainerRegistryAsyncClient getContainerRegistryAsyncClient() {
        return getContainerRegistryBuilder(new LocalHttpClient(recordFileName)).buildAsyncClient();
    }

    @Test
    public void deleteRepositoryThrows() {
        recordFileName = "ContainerRegistryClientAsyncIntegrationTests.deleteRepositoryWithResponseThrows[1].json";
        client = getContainerRegistryAsyncClient();

        StepVerifier.create(client.deleteRepository("missingRepo"))
            .expectErrorMatches(exception -> {
                return exception instanceof ResourceNotFoundException;
            }).verify();

        StepVerifier.create(client.deleteRepository(null))
            .expectErrorMatches(exception -> {
                return exception instanceof NullPointerException;
            }).verify();
    }
}
