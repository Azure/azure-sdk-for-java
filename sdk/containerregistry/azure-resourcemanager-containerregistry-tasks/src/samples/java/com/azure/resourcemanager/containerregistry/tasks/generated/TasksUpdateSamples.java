// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.containerregistry.tasks.generated;

import com.azure.resourcemanager.containerregistry.tasks.models.AgentProperties;
import com.azure.resourcemanager.containerregistry.tasks.models.AuthInfoUpdateParameters;
import com.azure.resourcemanager.containerregistry.tasks.models.Credentials;
import com.azure.resourcemanager.containerregistry.tasks.models.CustomRegistryCredentials;
import com.azure.resourcemanager.containerregistry.tasks.models.DockerBuildStepUpdateParameters;
import com.azure.resourcemanager.containerregistry.tasks.models.SecretObject;
import com.azure.resourcemanager.containerregistry.tasks.models.SecretObjectType;
import com.azure.resourcemanager.containerregistry.tasks.models.SourceRegistryCredentials;
import com.azure.resourcemanager.containerregistry.tasks.models.SourceTriggerEvent;
import com.azure.resourcemanager.containerregistry.tasks.models.SourceTriggerUpdateParameters;
import com.azure.resourcemanager.containerregistry.tasks.models.SourceUpdateParameters;
import com.azure.resourcemanager.containerregistry.tasks.models.Task;
import com.azure.resourcemanager.containerregistry.tasks.models.TaskStatus;
import com.azure.resourcemanager.containerregistry.tasks.models.TokenType;
import com.azure.resourcemanager.containerregistry.tasks.models.TriggerUpdateParameters;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

/**
 * Samples for Tasks Update.
 */
public final class TasksUpdateSamples {
    /*
     * x-ms-original-file: 2025-03-01-preview/ManagedIdentity/TasksUpdate_WithLoginIdentity.json
     */
    /**
     * Sample code: Tasks_Update_WithLoginIdentity.
     * 
     * @param manager Entry point to ContainerRegistryTasksManager.
     */
    public static void tasksUpdateWithLoginIdentity(
        com.azure.resourcemanager.containerregistry.tasks.ContainerRegistryTasksManager manager) {
        Task resource = manager.tasks()
            .getWithResponse("myResourceGroup", "myRegistry", "myTask", com.azure.core.util.Context.NONE)
            .getValue();
        resource.update()
            .withTags(mapOf("testkey", "fakeTokenPlaceholder"))
            .withStatus(TaskStatus.ENABLED)
            .withAgentConfiguration(new AgentProperties().withCpu(3))
            .withStep(new DockerBuildStepUpdateParameters().withImageNames(Arrays.asList("azurerest:testtag1"))
                .withDockerFilePath("src/DockerFile"))
            .withTrigger(
                new TriggerUpdateParameters().withSourceTriggers(Arrays.asList(new SourceTriggerUpdateParameters()
                    .withSourceRepository(new SourceUpdateParameters().withSourceControlAuthProperties(
                        new AuthInfoUpdateParameters().withTokenType(TokenType.PAT).withToken("fakeTokenPlaceholder")))
                    .withSourceTriggerEvents(Arrays.asList(SourceTriggerEvent.COMMIT))
                    .withName("mySourceTrigger"))))
            .withCredentials(
                new Credentials().withSourceRegistry(new SourceRegistryCredentials().withIdentity("[system]")))
            .apply();
    }

    /*
     * x-ms-original-file: 2025-03-01-preview/TasksUpdate_QuickTask.json
     */
    /**
     * Sample code: Tasks_Update_QuickTask.
     * 
     * @param manager Entry point to ContainerRegistryTasksManager.
     */
    public static void
        tasksUpdateQuickTask(com.azure.resourcemanager.containerregistry.tasks.ContainerRegistryTasksManager manager) {
        Task resource = manager.tasks()
            .getWithResponse("myResourceGroup", "myRegistry", "quicktask", com.azure.core.util.Context.NONE)
            .getValue();
        resource.update()
            .withTags(mapOf("testkey", "fakeTokenPlaceholder"))
            .withStatus(TaskStatus.ENABLED)
            .withLogTemplate("acr/tasks:{{.Run.OS}}")
            .apply();
    }

    /*
     * x-ms-original-file: 2025-03-01-preview/ManagedIdentity/TasksUpdate_WithMSICustomCredentials.json
     */
    /**
     * Sample code: Tasks_Update_WithMSICustomCredentials.
     * 
     * @param manager Entry point to ContainerRegistryTasksManager.
     */
    public static void tasksUpdateWithMSICustomCredentials(
        com.azure.resourcemanager.containerregistry.tasks.ContainerRegistryTasksManager manager) {
        Task resource = manager.tasks()
            .getWithResponse("myResourceGroup", "myRegistry", "myTask", com.azure.core.util.Context.NONE)
            .getValue();
        resource.update()
            .withTags(mapOf("testkey", "fakeTokenPlaceholder"))
            .withStatus(TaskStatus.ENABLED)
            .withAgentConfiguration(new AgentProperties().withCpu(3))
            .withStep(new DockerBuildStepUpdateParameters().withImageNames(Arrays.asList("azurerest:testtag1"))
                .withDockerFilePath("src/DockerFile"))
            .withTrigger(
                new TriggerUpdateParameters().withSourceTriggers(Arrays.asList(new SourceTriggerUpdateParameters()
                    .withSourceRepository(new SourceUpdateParameters().withSourceControlAuthProperties(
                        new AuthInfoUpdateParameters().withTokenType(TokenType.PAT).withToken("fakeTokenPlaceholder")))
                    .withSourceTriggerEvents(Arrays.asList(SourceTriggerEvent.COMMIT))
                    .withName("mySourceTrigger"))))
            .withCredentials(new Credentials().withCustomRegistries(
                mapOf("myregistry.azurecr.io", new CustomRegistryCredentials().withIdentity("[system]"))))
            .apply();
    }

    /*
     * x-ms-original-file: 2025-03-01-preview/ManagedIdentity/TasksUpdate_WithKeyVaultCustomCredentials.json
     */
    /**
     * Sample code: Tasks_Update_WithKeyVaultCustomCredentials.
     * 
     * @param manager Entry point to ContainerRegistryTasksManager.
     */
    public static void tasksUpdateWithKeyVaultCustomCredentials(
        com.azure.resourcemanager.containerregistry.tasks.ContainerRegistryTasksManager manager) {
        Task resource = manager.tasks()
            .getWithResponse("myResourceGroup", "myRegistry", "myTask", com.azure.core.util.Context.NONE)
            .getValue();
        resource.update()
            .withTags(mapOf("testkey", "fakeTokenPlaceholder"))
            .withStatus(TaskStatus.ENABLED)
            .withAgentConfiguration(new AgentProperties().withCpu(3))
            .withStep(new DockerBuildStepUpdateParameters().withImageNames(Arrays.asList("azurerest:testtag1"))
                .withDockerFilePath("src/DockerFile"))
            .withTrigger(
                new TriggerUpdateParameters().withSourceTriggers(Arrays.asList(new SourceTriggerUpdateParameters()
                    .withSourceRepository(new SourceUpdateParameters().withSourceControlAuthProperties(
                        new AuthInfoUpdateParameters().withTokenType(TokenType.PAT).withToken("fakeTokenPlaceholder")))
                    .withSourceTriggerEvents(Arrays.asList(SourceTriggerEvent.COMMIT))
                    .withName("mySourceTrigger"))))
            .withCredentials(new Credentials().withCustomRegistries(mapOf("myregistry.azurecr.io",
                new CustomRegistryCredentials()
                    .withUserName(new SecretObject().withValue("https://myacbvault.vault.azure.net/secrets/username")
                        .withType(SecretObjectType.VAULTSECRET))
                    .withPassword(new SecretObject().withValue("https://myacbvault.vault.azure.net/secrets/password")
                        .withType(SecretObjectType.VAULTSECRET))
                    .withIdentity("[system]"))))
            .apply();
    }

    /*
     * x-ms-original-file: 2025-03-01-preview/TasksUpdate.json
     */
    /**
     * Sample code: Tasks_Update.
     * 
     * @param manager Entry point to ContainerRegistryTasksManager.
     */
    public static void
        tasksUpdate(com.azure.resourcemanager.containerregistry.tasks.ContainerRegistryTasksManager manager) {
        Task resource = manager.tasks()
            .getWithResponse("myResourceGroup", "myRegistry", "myTask", com.azure.core.util.Context.NONE)
            .getValue();
        resource.update()
            .withTags(mapOf("testkey", "fakeTokenPlaceholder"))
            .withStatus(TaskStatus.ENABLED)
            .withAgentConfiguration(new AgentProperties().withCpu(3))
            .withStep(new DockerBuildStepUpdateParameters().withImageNames(Arrays.asList("azurerest:testtag1"))
                .withDockerFilePath("src/DockerFile"))
            .withTrigger(
                new TriggerUpdateParameters().withSourceTriggers(Arrays.asList(new SourceTriggerUpdateParameters()
                    .withSourceRepository(new SourceUpdateParameters().withSourceControlAuthProperties(
                        new AuthInfoUpdateParameters().withTokenType(TokenType.PAT).withToken("fakeTokenPlaceholder")))
                    .withSourceTriggerEvents(Arrays.asList(SourceTriggerEvent.COMMIT))
                    .withName("mySourceTrigger"))))
            .withCredentials(new Credentials().withCustomRegistries(mapOf("myregistry.azurecr.io",
                new CustomRegistryCredentials()
                    .withUserName(new SecretObject().withValue("username").withType(SecretObjectType.OPAQUE))
                    .withPassword(new SecretObject().withValue("https://myacbvault.vault.azure.net/secrets/password")
                        .withType(SecretObjectType.VAULTSECRET))
                    .withIdentity("[system]"))))
            .withLogTemplate("acr/tasks:{{.Run.OS}}")
            .apply();
    }

    /*
     * x-ms-original-file: 2025-03-01-preview/TasksUpdate_WithOpaqueCustomCredentials.json
     */
    /**
     * Sample code: Tasks_Update_WithOpaqueCustomCredentials.
     * 
     * @param manager Entry point to ContainerRegistryTasksManager.
     */
    public static void tasksUpdateWithOpaqueCustomCredentials(
        com.azure.resourcemanager.containerregistry.tasks.ContainerRegistryTasksManager manager) {
        Task resource = manager.tasks()
            .getWithResponse("myResourceGroup", "myRegistry", "myTask", com.azure.core.util.Context.NONE)
            .getValue();
        resource.update()
            .withTags(mapOf("testkey", "fakeTokenPlaceholder"))
            .withStatus(TaskStatus.ENABLED)
            .withAgentConfiguration(new AgentProperties().withCpu(3))
            .withStep(new DockerBuildStepUpdateParameters().withImageNames(Arrays.asList("azurerest:testtag1"))
                .withDockerFilePath("src/DockerFile"))
            .withTrigger(
                new TriggerUpdateParameters().withSourceTriggers(Arrays.asList(new SourceTriggerUpdateParameters()
                    .withSourceRepository(new SourceUpdateParameters().withSourceControlAuthProperties(
                        new AuthInfoUpdateParameters().withTokenType(TokenType.PAT).withToken("fakeTokenPlaceholder")))
                    .withSourceTriggerEvents(Arrays.asList(SourceTriggerEvent.COMMIT))
                    .withName("mySourceTrigger"))))
            .withCredentials(new Credentials().withCustomRegistries(mapOf("myregistry.azurecr.io",
                new CustomRegistryCredentials()
                    .withUserName(new SecretObject().withValue("username").withType(SecretObjectType.OPAQUE))
                    .withPassword(new SecretObject().withValue("***").withType(SecretObjectType.OPAQUE)))))
            .apply();
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
