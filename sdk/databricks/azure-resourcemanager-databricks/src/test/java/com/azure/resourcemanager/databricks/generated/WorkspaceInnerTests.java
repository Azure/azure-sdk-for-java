// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.databricks.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.databricks.fluent.models.WorkspaceInner;
import com.azure.resourcemanager.databricks.models.CreatedBy;
import com.azure.resourcemanager.databricks.models.ManagedIdentityConfiguration;
import com.azure.resourcemanager.databricks.models.PublicNetworkAccess;
import com.azure.resourcemanager.databricks.models.RequiredNsgRules;
import com.azure.resourcemanager.databricks.models.Sku;
import com.azure.resourcemanager.databricks.models.WorkspaceCustomParameters;
import com.azure.resourcemanager.databricks.models.WorkspacePropertiesEncryption;
import com.azure.resourcemanager.databricks.models.WorkspaceProviderAuthorization;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import java.util.UUID;
import org.junit.jupiter.api.Assertions;

public final class WorkspaceInnerTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        WorkspaceInner model =
            BinaryData
                .fromString(
                    "{\"properties\":{\"managedResourceGroupId\":\"mmhquvgjxpyb\",\"parameters\":{},\"provisioningState\":\"Updating\",\"uiDefinitionUri\":\"ybbejhph\",\"authorizations\":[{\"principalId\":\"8e8f31f9-aaea-4f30-aaee-899fe01eea17\",\"roleDefinitionId\":\"47d3ce14-d905-4c3a-87c8-d667095d47cf\"},{\"principalId\":\"edb60e80-ce8e-4186-a42d-6d31ad649098\",\"roleDefinitionId\":\"e5acbbff-3bbe-4b17-ac78-e86016701fc4\"},{\"principalId\":\"f600a975-4cf4-417a-b11a-7ae8445bac9d\",\"roleDefinitionId\":\"784411b3-9b83-41a5-9ba2-e729a02d3cad\"}],\"createdBy\":{\"oid\":\"b770f0f8-b207-4e48-89ed-931112bf8c0b\",\"puid\":\"ao\",\"applicationId\":\"ba80455b-5cb2-4a34-a363-5cce4faacbc1\"},\"updatedBy\":{\"oid\":\"0e48b4f2-bd4e-412c-9b17-c4accdcda020\",\"puid\":\"mtqio\",\"applicationId\":\"6c201df2-8012-4925-b5a0-0f5292539adb\"},\"createdDateTime\":\"2021-02-12T12:17:55Z\",\"workspaceId\":\"tbmufpo\",\"workspaceUrl\":\"oizh\",\"storageAccountIdentity\":{\"principalId\":\"2e229cd6-3e30-4dd6-97e5-70e508774bd5\",\"tenantId\":\"905a29eb-f141-4e85-9429-5dd233bbe624\",\"type\":\"bqsoqijg\"},\"encryption\":{},\"privateEndpointConnections\":[{\"id\":\"pazlobcufpdz\",\"name\":\"rbt\",\"type\":\"qqjnqgl\"},{\"id\":\"qgn\",\"name\":\"foooj\",\"type\":\"wifsq\"},{\"id\":\"saagdf\",\"name\":\"glzlhjxrifkwmrv\",\"type\":\"tsizntocipaoua\"},{\"id\":\"psqucmpoyf\",\"name\":\"kfo\",\"type\":\"knygjofjddeq\"}],\"publicNetworkAccess\":\"Disabled\",\"requiredNsgRules\":\"NoAzureServiceRules\"},\"sku\":{\"name\":\"ewnwreitjzyfl\",\"tier\":\"arhmofcqhsmy\"},\"location\":\"kdtmlxhekuk\",\"tags\":{\"ryuanzwuxzdxtay\":\"xukcdmpar\",\"u\":\"lhmwhfpmrqobm\"},\"id\":\"knryrtihfxtij\",\"name\":\"pzvgnwzsymglzufc\",\"type\":\"zk\"}")
                .toObject(WorkspaceInner.class);
        Assertions.assertEquals("kdtmlxhekuk", model.location());
        Assertions.assertEquals("xukcdmpar", model.tags().get("ryuanzwuxzdxtay"));
        Assertions.assertEquals("ewnwreitjzyfl", model.sku().name());
        Assertions.assertEquals("arhmofcqhsmy", model.sku().tier());
        Assertions.assertEquals("mmhquvgjxpyb", model.managedResourceGroupId());
        Assertions.assertEquals("ybbejhph", model.uiDefinitionUri());
        Assertions
            .assertEquals(
                UUID.fromString("8e8f31f9-aaea-4f30-aaee-899fe01eea17"), model.authorizations().get(0).principalId());
        Assertions
            .assertEquals(
                UUID.fromString("47d3ce14-d905-4c3a-87c8-d667095d47cf"),
                model.authorizations().get(0).roleDefinitionId());
        Assertions.assertEquals(PublicNetworkAccess.DISABLED, model.publicNetworkAccess());
        Assertions.assertEquals(RequiredNsgRules.NO_AZURE_SERVICE_RULES, model.requiredNsgRules());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        WorkspaceInner model =
            new WorkspaceInner()
                .withLocation("kdtmlxhekuk")
                .withTags(mapOf("ryuanzwuxzdxtay", "xukcdmpar", "u", "lhmwhfpmrqobm"))
                .withSku(new Sku().withName("ewnwreitjzyfl").withTier("arhmofcqhsmy"))
                .withManagedResourceGroupId("mmhquvgjxpyb")
                .withParameters(new WorkspaceCustomParameters())
                .withUiDefinitionUri("ybbejhph")
                .withAuthorizations(
                    Arrays
                        .asList(
                            new WorkspaceProviderAuthorization()
                                .withPrincipalId(UUID.fromString("8e8f31f9-aaea-4f30-aaee-899fe01eea17"))
                                .withRoleDefinitionId(UUID.fromString("47d3ce14-d905-4c3a-87c8-d667095d47cf")),
                            new WorkspaceProviderAuthorization()
                                .withPrincipalId(UUID.fromString("edb60e80-ce8e-4186-a42d-6d31ad649098"))
                                .withRoleDefinitionId(UUID.fromString("e5acbbff-3bbe-4b17-ac78-e86016701fc4")),
                            new WorkspaceProviderAuthorization()
                                .withPrincipalId(UUID.fromString("f600a975-4cf4-417a-b11a-7ae8445bac9d"))
                                .withRoleDefinitionId(UUID.fromString("784411b3-9b83-41a5-9ba2-e729a02d3cad"))))
                .withCreatedBy(new CreatedBy())
                .withUpdatedBy(new CreatedBy())
                .withStorageAccountIdentity(new ManagedIdentityConfiguration())
                .withEncryption(new WorkspacePropertiesEncryption())
                .withPublicNetworkAccess(PublicNetworkAccess.DISABLED)
                .withRequiredNsgRules(RequiredNsgRules.NO_AZURE_SERVICE_RULES);
        model = BinaryData.fromObject(model).toObject(WorkspaceInner.class);
        Assertions.assertEquals("kdtmlxhekuk", model.location());
        Assertions.assertEquals("xukcdmpar", model.tags().get("ryuanzwuxzdxtay"));
        Assertions.assertEquals("ewnwreitjzyfl", model.sku().name());
        Assertions.assertEquals("arhmofcqhsmy", model.sku().tier());
        Assertions.assertEquals("mmhquvgjxpyb", model.managedResourceGroupId());
        Assertions.assertEquals("ybbejhph", model.uiDefinitionUri());
        Assertions
            .assertEquals(
                UUID.fromString("8e8f31f9-aaea-4f30-aaee-899fe01eea17"), model.authorizations().get(0).principalId());
        Assertions
            .assertEquals(
                UUID.fromString("47d3ce14-d905-4c3a-87c8-d667095d47cf"),
                model.authorizations().get(0).roleDefinitionId());
        Assertions.assertEquals(PublicNetworkAccess.DISABLED, model.publicNetworkAccess());
        Assertions.assertEquals(RequiredNsgRules.NO_AZURE_SERVICE_RULES, model.requiredNsgRules());
    }

    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
