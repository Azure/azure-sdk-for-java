// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.oracledatabase.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.oracledatabase.OracleDatabaseManager;
import com.azure.resourcemanager.oracledatabase.models.CloudExadataInfrastructure;
import com.azure.resourcemanager.oracledatabase.models.DayOfWeekName;
import com.azure.resourcemanager.oracledatabase.models.MonthName;
import com.azure.resourcemanager.oracledatabase.models.PatchingMode;
import com.azure.resourcemanager.oracledatabase.models.Preference;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CloudExadataInfrastructuresListByResourceGroupMockTests {
    @Test
    public void testListByResourceGroup() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"ocid\":\"qabqgzslesjcb\",\"computeCount\":753972372,\"storageCount\":1126547162,\"totalStorageSizeInGbs\":649687207,\"availableStorageSizeInGbs\":167991676,\"timeCreated\":\"jcvb\",\"lifecycleDetails\":\"wr\",\"maintenanceWindow\":{\"preference\":\"CustomPreference\",\"months\":[{\"name\":\"November\"},{\"name\":\"March\"},{\"name\":\"August\"}],\"weeksOfMonth\":[961183610],\"daysOfWeek\":[{\"name\":\"Tuesday\"},{\"name\":\"Sunday\"},{\"name\":\"Friday\"}],\"hoursOfDay\":[295447223,1393141923,901267810],\"leadTimeInWeeks\":1109693907,\"patchingMode\":\"Rolling\",\"customActionTimeoutInMins\":1425672710,\"isCustomActionTimeoutEnabled\":false,\"isMonthlyPatchingEnabled\":true},\"estimatedPatchingTime\":{\"estimatedDbServerPatchingTime\":441637569,\"estimatedNetworkSwitchesPatchingTime\":1362727879,\"estimatedStorageServerPatchingTime\":1565918365,\"totalEstimatedPatchingTime\":445879070},\"customerContacts\":[{\"email\":\"nmwcpmgu\"},{\"email\":\"adraufactkahzo\"}],\"provisioningState\":\"Canceled\",\"lifecycleState\":\"Failed\",\"shape\":\"iuxxpshneekulfg\",\"ociUrl\":\"qubkw\",\"cpuCount\":702643575,\"maxCpuCount\":765854883,\"memorySizeInGbs\":1732882534,\"maxMemoryInGbs\":203229589,\"dbNodeStorageSizeInGbs\":1171802077,\"maxDbNodeStorageSizeInGbs\":168697362,\"dataStorageSizeInTbs\":587785927,\"maxDataStorageInTbs\":12.468980321702173,\"dbServerVersion\":\"minyflnorwm\",\"storageServerVersion\":\"vwpklvxwmygdxp\",\"activatedStorageCount\":2032648674,\"additionalStorageCount\":1879669929,\"displayName\":\"isze\",\"lastMaintenanceRunId\":\"nb\",\"nextMaintenanceRunId\":\"rxgibbd\",\"monthlyDbServerVersion\":\"confozauors\",\"monthlyStorageServerVersion\":\"okwbqplh\"},\"zones\":[\"nuuepzlrp\",\"wzsoldweyuqdunv\"],\"location\":\"nrwrbiork\",\"tags\":{\"sivfomilo\":\"ywjhhgdnhx\",\"ao\":\"ggdufiqndieu\"},\"id\":\"jchvcyy\",\"name\":\"s\",\"type\":\"gdotcubiipuipwo\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        OracleDatabaseManager manager = OracleDatabaseManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<CloudExadataInfrastructure> response
            = manager.cloudExadataInfrastructures().listByResourceGroup("qybaryeua", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("nrwrbiork", response.iterator().next().location());
        Assertions.assertEquals("ywjhhgdnhx", response.iterator().next().tags().get("sivfomilo"));
        Assertions.assertEquals(753972372, response.iterator().next().properties().computeCount());
        Assertions.assertEquals(1126547162, response.iterator().next().properties().storageCount());
        Assertions.assertEquals(Preference.CUSTOM_PREFERENCE,
            response.iterator().next().properties().maintenanceWindow().preference());
        Assertions.assertEquals(MonthName.NOVEMBER,
            response.iterator().next().properties().maintenanceWindow().months().get(0).name());
        Assertions.assertEquals(961183610,
            response.iterator().next().properties().maintenanceWindow().weeksOfMonth().get(0));
        Assertions.assertEquals(DayOfWeekName.TUESDAY,
            response.iterator().next().properties().maintenanceWindow().daysOfWeek().get(0).name());
        Assertions.assertEquals(295447223,
            response.iterator().next().properties().maintenanceWindow().hoursOfDay().get(0));
        Assertions.assertEquals(1109693907,
            response.iterator().next().properties().maintenanceWindow().leadTimeInWeeks());
        Assertions.assertEquals(PatchingMode.ROLLING,
            response.iterator().next().properties().maintenanceWindow().patchingMode());
        Assertions.assertEquals(1425672710,
            response.iterator().next().properties().maintenanceWindow().customActionTimeoutInMins());
        Assertions.assertEquals(false,
            response.iterator().next().properties().maintenanceWindow().isCustomActionTimeoutEnabled());
        Assertions.assertEquals(true,
            response.iterator().next().properties().maintenanceWindow().isMonthlyPatchingEnabled());
        Assertions.assertEquals("nmwcpmgu", response.iterator().next().properties().customerContacts().get(0).email());
        Assertions.assertEquals("iuxxpshneekulfg", response.iterator().next().properties().shape());
        Assertions.assertEquals("isze", response.iterator().next().properties().displayName());
        Assertions.assertEquals("nuuepzlrp", response.iterator().next().zones().get(0));
    }
}
