// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.oracledatabase.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.oracledatabase.OracleDatabaseManager;
import com.azure.resourcemanager.oracledatabase.models.CloudExadataInfrastructure;
import com.azure.resourcemanager.oracledatabase.models.DayOfWeekName;
import com.azure.resourcemanager.oracledatabase.models.MonthName;
import com.azure.resourcemanager.oracledatabase.models.PatchingMode;
import com.azure.resourcemanager.oracledatabase.models.Preference;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CloudExadataInfrastructuresAddStorageCapacityMockTests {
    @Test
    public void testAddStorageCapacity() throws Exception {
        String responseStr
            = "{\"properties\":{\"ocid\":\"epr\",\"computeCount\":108809884,\"storageCount\":479918870,\"totalStorageSizeInGbs\":2045022432,\"availableStorageSizeInGbs\":1783841206,\"timeCreated\":\"mov\",\"lifecycleDetails\":\"fvaawzqa\",\"maintenanceWindow\":{\"preference\":\"CustomPreference\",\"months\":[{\"name\":\"January\"}],\"weeksOfMonth\":[1011788429],\"daysOfWeek\":[{\"name\":\"Sunday\"}],\"hoursOfDay\":[566063527,103057298],\"leadTimeInWeeks\":1221508981,\"patchingMode\":\"Rolling\",\"customActionTimeoutInMins\":675680646,\"isCustomActionTimeoutEnabled\":true,\"isMonthlyPatchingEnabled\":false},\"estimatedPatchingTime\":{\"estimatedDbServerPatchingTime\":412723764,\"estimatedNetworkSwitchesPatchingTime\":763019330,\"estimatedStorageServerPatchingTime\":403916626,\"totalEstimatedPatchingTime\":1135591058},\"customerContacts\":[{\"email\":\"clnpkci\"},{\"email\":\"yzriykhy\"}],\"provisioningState\":\"Succeeded\",\"lifecycleState\":\"Terminated\",\"shape\":\"lboxqvkjl\",\"ociUrl\":\"ho\",\"cpuCount\":298942523,\"maxCpuCount\":1117354707,\"memorySizeInGbs\":1302375239,\"maxMemoryInGbs\":638540766,\"dbNodeStorageSizeInGbs\":653732445,\"maxDbNodeStorageSizeInGbs\":1988980812,\"dataStorageSizeInTbs\":44.79771076530682,\"maxDataStorageInTbs\":73.39891966228774,\"dbServerVersion\":\"p\",\"storageServerVersion\":\"a\",\"activatedStorageCount\":2034990044,\"additionalStorageCount\":288069946,\"displayName\":\"hezwwvaiq\",\"lastMaintenanceRunId\":\"vv\",\"nextMaintenanceRunId\":\"nk\",\"monthlyDbServerVersion\":\"hqyikvy\",\"monthlyStorageServerVersion\":\"uyav\"},\"zones\":[\"wmn\",\"sttijfybvp\"],\"location\":\"krsgsgb\",\"tags\":{\"njdgkynscliq\":\"zq\",\"mtk\":\"zvhxnk\",\"ppnvdxz\":\"bo\",\"hlfkqojpy\":\"hihfrbbcevqagtlt\"},\"id\":\"vgtrdcnifmzzs\",\"name\":\"ymbrnysuxmpraf\",\"type\":\"g\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        OracleDatabaseManager manager = OracleDatabaseManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        CloudExadataInfrastructure response = manager.cloudExadataInfrastructures()
            .addStorageCapacity("rqzz", "rjvpglydzgkrvqee", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("krsgsgb", response.location());
        Assertions.assertEquals("zq", response.tags().get("njdgkynscliq"));
        Assertions.assertEquals(108809884, response.properties().computeCount());
        Assertions.assertEquals(479918870, response.properties().storageCount());
        Assertions.assertEquals(Preference.CUSTOM_PREFERENCE, response.properties().maintenanceWindow().preference());
        Assertions.assertEquals(MonthName.JANUARY, response.properties().maintenanceWindow().months().get(0).name());
        Assertions.assertEquals(1011788429, response.properties().maintenanceWindow().weeksOfMonth().get(0));
        Assertions.assertEquals(DayOfWeekName.SUNDAY,
            response.properties().maintenanceWindow().daysOfWeek().get(0).name());
        Assertions.assertEquals(566063527, response.properties().maintenanceWindow().hoursOfDay().get(0));
        Assertions.assertEquals(1221508981, response.properties().maintenanceWindow().leadTimeInWeeks());
        Assertions.assertEquals(PatchingMode.ROLLING, response.properties().maintenanceWindow().patchingMode());
        Assertions.assertEquals(675680646, response.properties().maintenanceWindow().customActionTimeoutInMins());
        Assertions.assertEquals(true, response.properties().maintenanceWindow().isCustomActionTimeoutEnabled());
        Assertions.assertEquals(false, response.properties().maintenanceWindow().isMonthlyPatchingEnabled());
        Assertions.assertEquals("clnpkci", response.properties().customerContacts().get(0).email());
        Assertions.assertEquals("lboxqvkjl", response.properties().shape());
        Assertions.assertEquals("hezwwvaiq", response.properties().displayName());
        Assertions.assertEquals("wmn", response.zones().get(0));
    }
}
