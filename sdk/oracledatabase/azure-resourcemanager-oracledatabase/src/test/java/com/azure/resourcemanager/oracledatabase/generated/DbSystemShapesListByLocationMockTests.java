// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.oracledatabase.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.oracledatabase.OracleDatabaseManager;
import com.azure.resourcemanager.oracledatabase.models.ComputeModel;
import com.azure.resourcemanager.oracledatabase.models.DbSystemShape;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class DbSystemShapesListByLocationMockTests {
    @Test
    public void testListByLocation() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"shapeFamily\":\"aylp\",\"shapeName\":\"rsqqwztcm\",\"availableCoreCount\":544384144,\"minimumCoreCount\":899185817,\"runtimeMinimumCoreCount\":96806467,\"coreCountIncrement\":425084059,\"minStorageCount\":719164524,\"maxStorageCount\":307394034,\"availableDataStoragePerServerInTbs\":67.57833265628484,\"availableMemoryPerNodeInGbs\":410402456,\"availableDbNodePerNodeInGbs\":747482669,\"minCoreCountPerNode\":1559049034,\"availableMemoryInGbs\":1859736200,\"minMemoryPerNodeInGbs\":207202962,\"availableDbNodeStorageInGbs\":1342941735,\"minDbNodeStoragePerNodeInGbs\":1297569440,\"availableDataStorageInTbs\":660736772,\"minDataStorageInTbs\":2021763833,\"minimumNodeCount\":1992665604,\"maximumNodeCount\":127913719,\"availableCoreCountPerNode\":919245965,\"computeModel\":\"ECPU\",\"areServerTypesSupported\":true,\"displayName\":\"gywwpgjxs\"},\"id\":\"tf\",\"name\":\"jgicgaao\",\"type\":\"pttaqutd\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        OracleDatabaseManager manager = OracleDatabaseManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<DbSystemShape> response
            = manager.dbSystemShapes().listByLocation("fwyfwlwxjwet", "psihcla", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("aylp", response.iterator().next().properties().shapeFamily());
        Assertions.assertEquals("rsqqwztcm", response.iterator().next().properties().shapeName());
        Assertions.assertEquals(544384144, response.iterator().next().properties().availableCoreCount());
        Assertions.assertEquals(899185817, response.iterator().next().properties().minimumCoreCount());
        Assertions.assertEquals(96806467, response.iterator().next().properties().runtimeMinimumCoreCount());
        Assertions.assertEquals(425084059, response.iterator().next().properties().coreCountIncrement());
        Assertions.assertEquals(719164524, response.iterator().next().properties().minStorageCount());
        Assertions.assertEquals(307394034, response.iterator().next().properties().maxStorageCount());
        Assertions.assertEquals(67.57833265628484D,
            response.iterator().next().properties().availableDataStoragePerServerInTbs());
        Assertions.assertEquals(410402456, response.iterator().next().properties().availableMemoryPerNodeInGbs());
        Assertions.assertEquals(747482669, response.iterator().next().properties().availableDbNodePerNodeInGbs());
        Assertions.assertEquals(1559049034, response.iterator().next().properties().minCoreCountPerNode());
        Assertions.assertEquals(1859736200, response.iterator().next().properties().availableMemoryInGbs());
        Assertions.assertEquals(207202962, response.iterator().next().properties().minMemoryPerNodeInGbs());
        Assertions.assertEquals(1342941735, response.iterator().next().properties().availableDbNodeStorageInGbs());
        Assertions.assertEquals(1297569440, response.iterator().next().properties().minDbNodeStoragePerNodeInGbs());
        Assertions.assertEquals(660736772, response.iterator().next().properties().availableDataStorageInTbs());
        Assertions.assertEquals(2021763833, response.iterator().next().properties().minDataStorageInTbs());
        Assertions.assertEquals(1992665604, response.iterator().next().properties().minimumNodeCount());
        Assertions.assertEquals(127913719, response.iterator().next().properties().maximumNodeCount());
        Assertions.assertEquals(919245965, response.iterator().next().properties().availableCoreCountPerNode());
        Assertions.assertEquals(ComputeModel.ECPU, response.iterator().next().properties().computeModel());
        Assertions.assertTrue(response.iterator().next().properties().areServerTypesSupported());
        Assertions.assertEquals("gywwpgjxs", response.iterator().next().properties().displayName());
    }
}
