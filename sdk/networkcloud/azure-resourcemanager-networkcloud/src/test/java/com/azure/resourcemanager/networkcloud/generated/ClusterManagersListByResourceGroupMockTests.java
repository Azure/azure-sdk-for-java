// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.networkcloud.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.networkcloud.NetworkCloudManager;
import com.azure.resourcemanager.networkcloud.models.ClusterManager;
import com.azure.resourcemanager.networkcloud.models.ManagedServiceIdentityType;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ClusterManagersListByResourceGroupMockTests {
    @Test
    public void testListByResourceGroup() throws Exception {
        String responseStr
            = "{\"value\":[{\"etag\":\"ubtlmjtg\",\"identity\":{\"principalId\":\"d767a512-c3a0-4cbb-ba5c-02c7edeb3524\",\"tenantId\":\"eb21a8c6-89d2-4710-90c7-e410dd664408\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"kmfd\":{\"principalId\":\"ead3fa91-b075-4b1c-b93e-fd483a0ae61a\",\"clientId\":\"b1bc3c43-d6c0-4620-b2fc-4393dbd0d041\"},\"xgbkkqvjcteo\":{\"principalId\":\"2363b464-20f7-49ee-82a3-6c56e9d85c18\",\"clientId\":\"6eff6642-aa47-433b-9047-cdc9a1947f00\"},\"rslskkzp\":{\"principalId\":\"5fc67079-6dcc-441a-b020-0b82d3e876d9\",\"clientId\":\"926b9db3-572d-4f2e-98c6-1cf4a412da02\"},\"nzdpvoco\":{\"principalId\":\"9207dbe2-4f56-46d7-81be-a5f73fa6ea8f\",\"clientId\":\"b9ca673c-fa3c-4804-8613-211462a12327\"}}},\"properties\":{\"analyticsWorkspaceId\":\"pcnab\",\"availabilityZones\":[\"snggytexvzilmhiv\",\"kwwwnckn\",\"zdajlskzptjxu\",\"weucyrth\"],\"clusterVersions\":[{\"supportExpiryDate\":\"h\",\"targetClusterVersion\":\"gcj\"},{\"supportExpiryDate\":\"n\",\"targetClusterVersion\":\"hokamvfej\"},{\"supportExpiryDate\":\"nttmbq\",\"targetClusterVersion\":\"bzfivfok\"},{\"supportExpiryDate\":\"sthhzagjfwy\",\"targetClusterVersion\":\"lhgenuzejgvkv\"}],\"detailedStatus\":\"UpdateFailed\",\"detailedStatusMessage\":\"szllrzlsmmdqgmi\",\"fabricControllerId\":\"zpimcqrhn\",\"managedResourceGroupConfiguration\":{\"location\":\"inklogxs\",\"name\":\"zarhzvqnsqktcmbj\"},\"managerExtendedLocation\":{\"name\":\"zoslpkybtgl\",\"type\":\"kzpgaj\"},\"provisioningState\":\"Succeeded\",\"vmSize\":\"emqbmfuvqarwzxuq\"},\"location\":\"bluimmbw\",\"tags\":{\"kraokq\":\"gtdmbvx\",\"aokbavlyttaaknwf\":\"budbt\"},\"id\":\"ke\",\"name\":\"sm\",\"type\":\"p\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        NetworkCloudManager manager = NetworkCloudManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<ClusterManager> response = manager.clusterManagers()
            .listByResourceGroup("zqbglcjkays", 1856331055, "hz", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("bluimmbw", response.iterator().next().location());
        Assertions.assertEquals("gtdmbvx", response.iterator().next().tags().get("kraokq"));
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED,
            response.iterator().next().identity().type());
        Assertions.assertEquals("pcnab", response.iterator().next().analyticsWorkspaceId());
        Assertions.assertEquals("snggytexvzilmhiv", response.iterator().next().availabilityZones().get(0));
        Assertions.assertEquals("zpimcqrhn", response.iterator().next().fabricControllerId());
        Assertions.assertEquals("inklogxs", response.iterator().next().managedResourceGroupConfiguration().location());
        Assertions.assertEquals("zarhzvqnsqktcmbj",
            response.iterator().next().managedResourceGroupConfiguration().name());
        Assertions.assertEquals("emqbmfuvqarwzxuq", response.iterator().next().vmSize());
    }
}
