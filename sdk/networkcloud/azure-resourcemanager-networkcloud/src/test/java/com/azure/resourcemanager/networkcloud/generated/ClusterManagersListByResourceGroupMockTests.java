// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.networkcloud.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.networkcloud.NetworkCloudManager;
import com.azure.resourcemanager.networkcloud.models.ClusterManager;
import com.azure.resourcemanager.networkcloud.models.ManagedServiceIdentityType;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ClusterManagersListByResourceGroupMockTests {
    @Test
    public void testListByResourceGroup() throws Exception {
        String responseStr
            = "{\"value\":[{\"etag\":\"ubtlmjtg\",\"identity\":{\"principalId\":\"aafe2364-df15-4e95-9ae4-ed6e5e71e467\",\"tenantId\":\"04d6d76d-65f0-4c30-91d3-82e3f0e012ef\",\"type\":\"SystemAssigned\",\"userAssignedIdentities\":{\"kmfd\":{\"principalId\":\"fde6266c-aa74-4183-87d7-5b341a6061d4\",\"clientId\":\"8377aba2-6ace-4bbe-850f-1fe36c5bef64\"},\"xgbkkqvjcteo\":{\"principalId\":\"1ee43e40-4ae0-4dcc-89ed-9c49adae5eb9\",\"clientId\":\"6e248b0b-7728-48ec-93a0-c448edcfe00a\"},\"rslskkzp\":{\"principalId\":\"19d2d8dc-c932-4eff-98c7-8e13535c4a25\",\"clientId\":\"0402a5a6-e26f-438c-bdb4-4aaa47c5a8aa\"},\"nzdpvoco\":{\"principalId\":\"330c67bd-25cf-4b37-a0ff-9f259815fa37\",\"clientId\":\"89cc80b6-647c-42de-9fd0-5fe21cd814b4\"}}},\"properties\":{\"analyticsWorkspaceId\":\"pcnab\",\"availabilityZones\":[\"snggytexvzilmhiv\",\"kwwwnckn\",\"zdajlskzptjxu\",\"weucyrth\"],\"clusterVersions\":[{\"supportExpiryDate\":\"h\",\"targetClusterVersion\":\"gcj\"},{\"supportExpiryDate\":\"n\",\"targetClusterVersion\":\"hokamvfej\"},{\"supportExpiryDate\":\"nttmbq\",\"targetClusterVersion\":\"bzfivfok\"},{\"supportExpiryDate\":\"sthhzagjfwy\",\"targetClusterVersion\":\"lhgenuzejgvkv\"}],\"detailedStatus\":\"UpdateFailed\",\"detailedStatusMessage\":\"szllrzlsmmdqgmi\",\"fabricControllerId\":\"zpimcqrhn\",\"managedResourceGroupConfiguration\":{\"location\":\"inklogxs\",\"name\":\"zarhzvqnsqktcmbj\"},\"managerExtendedLocation\":{\"name\":\"zoslpkybtgl\",\"type\":\"kzpgaj\"},\"provisioningState\":\"Succeeded\",\"vmSize\":\"emqbmfuvqarwzxuq\"},\"location\":\"bluimmbw\",\"tags\":{\"kraokq\":\"gtdmbvx\",\"aokbavlyttaaknwf\":\"budbt\"},\"id\":\"ke\",\"name\":\"sm\",\"type\":\"p\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        NetworkCloudManager manager = NetworkCloudManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<ClusterManager> response = manager.clusterManagers()
            .listByResourceGroup("zqbglcjkays", 1856331055, "hz", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("bluimmbw", response.iterator().next().location());
        Assertions.assertEquals("gtdmbvx", response.iterator().next().tags().get("kraokq"));
        Assertions.assertEquals(ManagedServiceIdentityType.SYSTEM_ASSIGNED,
            response.iterator().next().identity().type());
        Assertions.assertEquals("pcnab", response.iterator().next().analyticsWorkspaceId());
        Assertions.assertEquals("snggytexvzilmhiv", response.iterator().next().availabilityZones().get(0));
        Assertions.assertEquals("zpimcqrhn", response.iterator().next().fabricControllerId());
        Assertions.assertEquals("inklogxs", response.iterator().next().managedResourceGroupConfiguration().location());
        Assertions.assertEquals("zarhzvqnsqktcmbj",
            response.iterator().next().managedResourceGroupConfiguration().name());
        Assertions.assertEquals("emqbmfuvqarwzxuq", response.iterator().next().vmSize());
    }
}
