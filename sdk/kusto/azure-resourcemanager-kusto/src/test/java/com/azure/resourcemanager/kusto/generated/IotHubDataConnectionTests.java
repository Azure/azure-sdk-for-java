// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.kusto.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.kusto.models.DatabaseRouting;
import com.azure.resourcemanager.kusto.models.IotHubDataConnection;
import com.azure.resourcemanager.kusto.models.IotHubDataFormat;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class IotHubDataConnectionTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        IotHubDataConnection model = BinaryData.fromString(
            "{\"kind\":\"IotHub\",\"properties\":{\"iotHubResourceId\":\"alhsnvkc\",\"consumerGroup\":\"mxzrpoa\",\"tableName\":\"lnwiaaomylwe\",\"mappingRuleName\":\"ulcsethwwnpj\",\"dataFormat\":\"JSON\",\"eventSystemProperties\":[\"wpchwahf\",\"ousnfepgfewe\",\"wlyxgncxyk\",\"hdjhlimmbcx\"],\"sharedAccessPolicyName\":\"h\",\"databaseRouting\":\"Single\",\"retrievalStartDate\":\"2021-08-24T02:48:56Z\",\"provisioningState\":\"Moving\"},\"location\":\"cjzhqi\",\"id\":\"xfpxtgqscja\",\"name\":\"ftjuh\",\"type\":\"qaz\"}")
            .toObject(IotHubDataConnection.class);
        Assertions.assertEquals("cjzhqi", model.location());
        Assertions.assertEquals("alhsnvkc", model.iotHubResourceId());
        Assertions.assertEquals("mxzrpoa", model.consumerGroup());
        Assertions.assertEquals("lnwiaaomylwe", model.tableName());
        Assertions.assertEquals("ulcsethwwnpj", model.mappingRuleName());
        Assertions.assertEquals(IotHubDataFormat.JSON, model.dataFormat());
        Assertions.assertEquals("wpchwahf", model.eventSystemProperties().get(0));
        Assertions.assertEquals("h", model.sharedAccessPolicyName());
        Assertions.assertEquals(DatabaseRouting.SINGLE, model.databaseRouting());
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-24T02:48:56Z"), model.retrievalStartDate());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        IotHubDataConnection model = new IotHubDataConnection().withLocation("cjzhqi")
            .withIotHubResourceId("alhsnvkc")
            .withConsumerGroup("mxzrpoa")
            .withTableName("lnwiaaomylwe")
            .withMappingRuleName("ulcsethwwnpj")
            .withDataFormat(IotHubDataFormat.JSON)
            .withEventSystemProperties(Arrays.asList("wpchwahf", "ousnfepgfewe", "wlyxgncxyk", "hdjhlimmbcx"))
            .withSharedAccessPolicyName("h")
            .withDatabaseRouting(DatabaseRouting.SINGLE)
            .withRetrievalStartDate(OffsetDateTime.parse("2021-08-24T02:48:56Z"));
        model = BinaryData.fromObject(model).toObject(IotHubDataConnection.class);
        Assertions.assertEquals("cjzhqi", model.location());
        Assertions.assertEquals("alhsnvkc", model.iotHubResourceId());
        Assertions.assertEquals("mxzrpoa", model.consumerGroup());
        Assertions.assertEquals("lnwiaaomylwe", model.tableName());
        Assertions.assertEquals("ulcsethwwnpj", model.mappingRuleName());
        Assertions.assertEquals(IotHubDataFormat.JSON, model.dataFormat());
        Assertions.assertEquals("wpchwahf", model.eventSystemProperties().get(0));
        Assertions.assertEquals("h", model.sharedAccessPolicyName());
        Assertions.assertEquals(DatabaseRouting.SINGLE, model.databaseRouting());
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-24T02:48:56Z"), model.retrievalStartDate());
    }
}
