// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.certificateregistration.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.certificateregistration.CertificateRegistrationManager;
import com.azure.resourcemanager.certificateregistration.models.CsmOperationDescription;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CertificateRegistrationProvidersListOperationsMockTests {
    @Test
    public void testListOperations() throws Exception {
        String responseStr
            = "{\"value\":[{\"name\":\"ujviylwdshfs\",\"isDataAction\":false,\"display\":{\"provider\":\"ye\",\"resource\":\"ymsgaojfmwnc\",\"operation\":\"mrfhirctymox\",\"description\":\"tpipiwyczuhx\"},\"origin\":\"pqjlihhyusps\",\"properties\":{\"serviceSpecification\":{\"metricSpecifications\":[{\"name\":\"mfwdgzxu\",\"displayName\":\"cvpa\",\"displayDescription\":\"sreuzvxurisjnh\",\"unit\":\"txifqj\",\"aggregationType\":\"xmrhu\",\"supportsInstanceLevelAggregation\":false,\"enableRegionalMdmAccount\":true,\"sourceMdmAccount\":\"sutrgjup\",\"sourceMdmNamespace\":\"utpwoqhihejqgw\",\"metricFilterPattern\":\"nfqn\",\"fillGapWithZero\":true,\"isInternal\":false,\"dimensions\":[{}],\"category\":\"foimwkslircizjxv\",\"availabilities\":[{},{},{}],\"supportedTimeGrainTypes\":[\"acvlhv\",\"gdyftumrtwna\"],\"supportedAggregationTypes\":[\"lbiw\"]},{\"name\":\"jgcyztsfmznba\",\"displayName\":\"ph\",\"displayDescription\":\"qnrnrpxehuwryk\",\"unit\":\"aifmvikl\",\"aggregationType\":\"dvk\",\"supportsInstanceLevelAggregation\":false,\"enableRegionalMdmAccount\":false,\"sourceMdmAccount\":\"nxcvds\",\"sourceMdmNamespace\":\"njivolvtnovq\",\"metricFilterPattern\":\"gemjdftuljltdu\",\"fillGapWithZero\":false,\"isInternal\":true,\"dimensions\":[{}],\"category\":\"u\",\"availabilities\":[{},{},{}],\"supportedTimeGrainTypes\":[\"cwwqiokn\"],\"supportedAggregationTypes\":[\"mojmsvpkjprvkw\",\"fz\",\"ljyxgtczhe\"]},{\"name\":\"bsdshmkxmaehvbbx\",\"displayName\":\"iplt\",\"displayDescription\":\"htba\",\"unit\":\"gx\",\"aggregationType\":\"rc\",\"supportsInstanceLevelAggregation\":true,\"enableRegionalMdmAccount\":true,\"sourceMdmAccount\":\"hpluodpvruudlg\",\"sourceMdmNamespace\":\"bth\",\"metricFilterPattern\":\"tgk\",\"fillGapWithZero\":true,\"isInternal\":true,\"dimensions\":[{},{}],\"category\":\"lzedqbcvhzlhplo\",\"availabilities\":[{}],\"supportedTimeGrainTypes\":[\"wwqfbumlkxtrqj\",\"smlmbtxhwgfwsrta\",\"coezbrhubskh\",\"dyg\"],\"supportedAggregationTypes\":[\"kkqfqjbvle\",\"rfmluiqtq\",\"fa\"]},{\"name\":\"vnqqybaryeua\",\"displayName\":\"kq\",\"displayDescription\":\"qgzsles\",\"unit\":\"bhernntiew\",\"aggregationType\":\"cv\",\"supportsInstanceLevelAggregation\":true,\"enableRegionalMdmAccount\":false,\"sourceMdmAccount\":\"ehwagoh\",\"sourceMdmNamespace\":\"f\",\"metricFilterPattern\":\"mrqemvvhmx\",\"fillGapWithZero\":false,\"isInternal\":true,\"dimensions\":[{}],\"category\":\"coebjvewzcj\",\"availabilities\":[{}],\"supportedTimeGrainTypes\":[\"pmguaadraufac\",\"kahzo\",\"ajjziuxxpshne\",\"kulfg\"],\"supportedAggregationTypes\":[\"ubkwdle\",\"rds\"]}],\"logSpecifications\":[{\"name\":\"bazpjuohmi\",\"displayName\":\"flnorwmduvwp\",\"blobDuration\":\"vxwmygd\",\"logFilterPattern\":\"gpqch\"},{\"name\":\"zepn\",\"displayName\":\"jcrxgibbdaxcon\",\"blobDuration\":\"zauorsuk\",\"logFilterPattern\":\"wbqpl\"},{\"name\":\"vnuuepzl\",\"displayName\":\"hw\",\"blobDuration\":\"oldweyuqdu\",\"logFilterPattern\":\"mnnrwr\"},{\"name\":\"ork\",\"displayName\":\"lywjhh\",\"blobDuration\":\"nhxmsi\",\"logFilterPattern\":\"omi\"}]}}}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        CertificateRegistrationManager manager = CertificateRegistrationManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<CsmOperationDescription> response
            = manager.certificateRegistrationProviders().listOperations(com.azure.core.util.Context.NONE);

        Assertions.assertEquals("ujviylwdshfs", response.iterator().next().name());
        Assertions.assertFalse(response.iterator().next().isDataAction());
        Assertions.assertEquals("ye", response.iterator().next().display().provider());
        Assertions.assertEquals("ymsgaojfmwnc", response.iterator().next().display().resource());
        Assertions.assertEquals("mrfhirctymox", response.iterator().next().display().operation());
        Assertions.assertEquals("tpipiwyczuhx", response.iterator().next().display().description());
        Assertions.assertEquals("pqjlihhyusps", response.iterator().next().origin());
        Assertions.assertEquals("mfwdgzxu",
            response.iterator().next().properties().serviceSpecification().metricSpecifications().get(0).name());
        Assertions.assertEquals("cvpa",
            response.iterator().next().properties().serviceSpecification().metricSpecifications().get(0).displayName());
        Assertions.assertEquals("sreuzvxurisjnh",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .metricSpecifications()
                .get(0)
                .displayDescription());
        Assertions.assertEquals("txifqj",
            response.iterator().next().properties().serviceSpecification().metricSpecifications().get(0).unit());
        Assertions.assertEquals("xmrhu",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .metricSpecifications()
                .get(0)
                .aggregationType());
        Assertions.assertFalse(response.iterator()
            .next()
            .properties()
            .serviceSpecification()
            .metricSpecifications()
            .get(0)
            .supportsInstanceLevelAggregation());
        Assertions.assertTrue(response.iterator()
            .next()
            .properties()
            .serviceSpecification()
            .metricSpecifications()
            .get(0)
            .enableRegionalMdmAccount());
        Assertions.assertEquals("sutrgjup",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .metricSpecifications()
                .get(0)
                .sourceMdmAccount());
        Assertions.assertEquals("utpwoqhihejqgw",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .metricSpecifications()
                .get(0)
                .sourceMdmNamespace());
        Assertions.assertEquals("nfqn",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .metricSpecifications()
                .get(0)
                .metricFilterPattern());
        Assertions.assertTrue(response.iterator()
            .next()
            .properties()
            .serviceSpecification()
            .metricSpecifications()
            .get(0)
            .fillGapWithZero());
        Assertions.assertFalse(
            response.iterator().next().properties().serviceSpecification().metricSpecifications().get(0).isInternal());
        Assertions.assertEquals("foimwkslircizjxv",
            response.iterator().next().properties().serviceSpecification().metricSpecifications().get(0).category());
        Assertions.assertEquals("acvlhv",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .metricSpecifications()
                .get(0)
                .supportedTimeGrainTypes()
                .get(0));
        Assertions.assertEquals("lbiw",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .metricSpecifications()
                .get(0)
                .supportedAggregationTypes()
                .get(0));
        Assertions.assertEquals("bazpjuohmi",
            response.iterator().next().properties().serviceSpecification().logSpecifications().get(0).name());
        Assertions.assertEquals("flnorwmduvwp",
            response.iterator().next().properties().serviceSpecification().logSpecifications().get(0).displayName());
        Assertions.assertEquals("vxwmygd",
            response.iterator().next().properties().serviceSpecification().logSpecifications().get(0).blobDuration());
        Assertions.assertEquals("gpqch",
            response.iterator()
                .next()
                .properties()
                .serviceSpecification()
                .logSpecifications()
                .get(0)
                .logFilterPattern());
    }
}
