// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.confluent.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.confluent.ConfluentManager;
import com.azure.resourcemanager.confluent.models.TopicMetadataEntity;
import com.azure.resourcemanager.confluent.models.TopicRecord;
import com.azure.resourcemanager.confluent.models.TopicsInputConfig;
import com.azure.resourcemanager.confluent.models.TopicsRelatedLink;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class TopicsCreateWithResponseMockTests {
    @Test
    public void testCreateWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"kind\":\"yvneeza\",\"topicId\":\"gh\",\"metadata\":{\"self\":\"qqtlffhzbkrkj\",\"resourceName\":\"avfqnvhnqoewdogi\"},\"partitions\":{\"related\":\"esypvidbztjh\"},\"configs\":{\"related\":\"b\"},\"inputConfigs\":[{\"name\":\"nkbw\",\"value\":\"njuhpsprkzya\"},{\"name\":\"ia\",\"value\":\"xnafbw\"}],\"partitionsReassignments\":{\"related\":\"ohtuovmaonur\"},\"partitionsCount\":\"umghihpvecmsl\",\"replicationFactor\":\"bl\"},\"id\":\"xltbsjuscvsf\",\"name\":\"igctmgxuupbezq\",\"type\":\"cydrtceukdqkk\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        ConfluentManager manager = ConfluentManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        TopicRecord response = manager.topics()
            .define("mlghktuidvrmazlp")
            .withExistingCluster("intqpbrlcyr", "uczkgofxyfsruc", "crrpcjttbstvje", "qnrmvvfko")
            .withKind("exymzvla")
            .withTopicId("pbh")
            .withMetadata(new TopicMetadataEntity().withSelf("qsg").withResourceName("yuuzivens"))
            .withPartitions(new TopicsRelatedLink().withRelated("eyyvpkpatl"))
            .withConfigs(new TopicsRelatedLink().withRelated("pzgsk"))
            .withInputConfigs(Arrays.asList(new TopicsInputConfig().withName("fvolmknbnxwcd").withValue("mp")))
            .withPartitionsReassignments(new TopicsRelatedLink().withRelated("awz"))
            .withPartitionsCount("brttuiacl")
            .withReplicationFactor("exhajlfn")
            .create();

        Assertions.assertEquals("yvneeza", response.kind());
        Assertions.assertEquals("gh", response.topicId());
        Assertions.assertEquals("qqtlffhzbkrkj", response.metadata().self());
        Assertions.assertEquals("avfqnvhnqoewdogi", response.metadata().resourceName());
        Assertions.assertEquals("esypvidbztjh", response.partitions().related());
        Assertions.assertEquals("b", response.configs().related());
        Assertions.assertEquals("nkbw", response.inputConfigs().get(0).name());
        Assertions.assertEquals("njuhpsprkzya", response.inputConfigs().get(0).value());
        Assertions.assertEquals("ohtuovmaonur", response.partitionsReassignments().related());
        Assertions.assertEquals("umghihpvecmsl", response.partitionsCount());
        Assertions.assertEquals("bl", response.replicationFactor());
    }
}
