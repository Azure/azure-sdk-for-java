// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.azurestackhci.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.azurestackhci.AzureStackHciManager;
import com.azure.resourcemanager.azurestackhci.models.UpdateRun;
import com.azure.resourcemanager.azurestackhci.models.UpdateRunPropertiesState;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class UpdateRunsGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"location\":\"okpoyuoh\",\"properties\":{\"provisioningState\":\"Error\",\"timeStarted\":\"2021-11-30T03:35:25Z\",\"lastUpdatedTime\":\"2021-01-12T07:26:14Z\",\"duration\":\"hmpoe\",\"state\":\"Succeeded\",\"progress\":{\"name\":\"wsadaxjsumxpezc\",\"description\":\"oyj\",\"errorMessage\":\"fqzwqdnxkeed\",\"status\":\"wmywxfqzkvemy\",\"startTimeUtc\":\"2021-01-19T15:19:47Z\",\"endTimeUtc\":\"2021-08-16T22:35:08Z\",\"lastUpdatedTimeUtc\":\"2021-08-31T21:01Z\",\"expectedExecutionTime\":\"qifdbmptrwtxz\",\"steps\":[{\"name\":\"monatnizexroq\",\"description\":\"jghrmthsplwst\",\"errorMessage\":\"srgxfq\",\"status\":\"niceovxgzwh\",\"startTimeUtc\":\"2021-04-10T18:22:57Z\",\"endTimeUtc\":\"2021-10-08T22:52:41Z\",\"lastUpdatedTimeUtc\":\"2021-07-29T17:09:57Z\",\"expectedExecutionTime\":\"i\",\"steps\":[{}]},{\"name\":\"ik\",\"description\":\"hzixyqhfnkvy\",\"errorMessage\":\"qqdseipnquwzxhrp\",\"status\":\"odlhkfktl\",\"startTimeUtc\":\"2021-05-16T09:50:55Z\",\"endTimeUtc\":\"2021-01-31T17:06:28Z\",\"lastUpdatedTimeUtc\":\"2021-04-12T08:52:01Z\",\"expectedExecutionTime\":\"pnouhbqezkqx\",\"steps\":[{}]}]}},\"id\":\"zyigfcvc\",\"name\":\"wb\",\"type\":\"qhdgsjsatmrn\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AzureStackHciManager manager = AzureStackHciManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        UpdateRun response = manager.updateRuns()
            .getWithResponse("eurbtigapdyarik", "ejdpdfhtwm", "kfqbriqulwwt", "jmeqkvy",
                com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("okpoyuoh", response.location());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-30T03:35:25Z"), response.timeStarted());
        Assertions.assertEquals(OffsetDateTime.parse("2021-01-12T07:26:14Z"), response.lastUpdatedTime());
        Assertions.assertEquals("hmpoe", response.duration());
        Assertions.assertEquals(UpdateRunPropertiesState.SUCCEEDED, response.state());
        Assertions.assertEquals("wsadaxjsumxpezc", response.namePropertiesName());
        Assertions.assertEquals("oyj", response.description());
        Assertions.assertEquals("fqzwqdnxkeed", response.errorMessage());
        Assertions.assertEquals("wmywxfqzkvemy", response.status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-01-19T15:19:47Z"), response.startTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-16T22:35:08Z"), response.endTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-08-31T21:01Z"), response.lastUpdatedTimeUtc());
        Assertions.assertEquals("qifdbmptrwtxz", response.expectedExecutionTime());
        Assertions.assertEquals("monatnizexroq", response.steps().get(0).name());
        Assertions.assertEquals("jghrmthsplwst", response.steps().get(0).description());
        Assertions.assertEquals("srgxfq", response.steps().get(0).errorMessage());
        Assertions.assertEquals("niceovxgzwh", response.steps().get(0).status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-04-10T18:22:57Z"), response.steps().get(0).startTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-10-08T22:52:41Z"), response.steps().get(0).endTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-07-29T17:09:57Z"),
            response.steps().get(0).lastUpdatedTimeUtc());
        Assertions.assertEquals("i", response.steps().get(0).expectedExecutionTime());
    }
}
