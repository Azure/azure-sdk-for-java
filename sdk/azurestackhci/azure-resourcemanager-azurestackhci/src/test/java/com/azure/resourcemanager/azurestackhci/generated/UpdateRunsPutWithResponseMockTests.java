// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.azurestackhci.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.azurestackhci.AzureStackHciManager;
import com.azure.resourcemanager.azurestackhci.fluent.models.Step;
import com.azure.resourcemanager.azurestackhci.models.UpdateRun;
import com.azure.resourcemanager.azurestackhci.models.UpdateRunPropertiesState;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class UpdateRunsPutWithResponseMockTests {
    @Test
    public void testPutWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"provisioningState\":\"Deleting\",\"timeStarted\":\"2021-04-14T07:48:17Z\",\"lastUpdatedTime\":\"2021-04-09T06:18:41Z\",\"duration\":\"xvb\",\"state\":\"Unknown\",\"progress\":{\"name\":\"egbthm\",\"description\":\"i\",\"errorMessage\":\"buiggrunozf\",\"status\":\"aljthoivsdwsn\",\"startTimeUtc\":\"2021-09-16T05:29:10Z\",\"endTimeUtc\":\"2020-12-31T04:40:29Z\",\"lastUpdatedTimeUtc\":\"2021-09-27T12:47:25Z\",\"expectedExecutionTime\":\"jvakmhzbhwahfbw\",\"steps\":[{\"name\":\"nx\",\"description\":\"vynuqqkotauratn\",\"errorMessage\":\"ppfzsclef\",\"status\":\"letnd\",\"startTimeUtc\":\"2021-10-18T10:14:21Z\",\"endTimeUtc\":\"2021-11-07T05:56:17Z\",\"lastUpdatedTimeUtc\":\"2021-06-04T02:17:04Z\",\"expectedExecutionTime\":\"bbuypwovvvsflee\",\"steps\":[{},{},{}]},{\"name\":\"ayrehj\",\"description\":\"wvap\",\"errorMessage\":\"lzhpzihacenq\",\"status\":\"lxnqzubfonfdbgmk\",\"startTimeUtc\":\"2021-10-16T04:59:14Z\",\"endTimeUtc\":\"2021-02-12T14:37:36Z\",\"lastUpdatedTimeUtc\":\"2021-10-02T23:18:51Z\",\"expectedExecutionTime\":\"fhxwyr\",\"steps\":[{},{},{},{}]}]}},\"location\":\"hzlrynjpchamkae\",\"id\":\"rajubowuywevt\",\"name\":\"rieikmwlaoklfnis\",\"type\":\"xgucbmtredscnn\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AzureStackHciManager manager = AzureStackHciManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        UpdateRun response = manager.updateRuns()
            .define("vwlvivjmxmlit")
            .withExistingUpdate("mnuf", "hr", "hxwwuzdm")
            .withRegion("lzmiyddeeq")
            .withTimeStarted(OffsetDateTime.parse("2021-03-14T10:57:20Z"))
            .withLastUpdatedTime(OffsetDateTime.parse("2021-02-04T12:30:05Z"))
            .withDuration("scotyx")
            .withState(UpdateRunPropertiesState.SUCCEEDED)
            .withNamePropertiesName("efndslvrqoemwsi")
            .withDescription("ailwdqmqfyd")
            .withErrorMessage("tmfx")
            .withStatus("d")
            .withStartTimeUtc(OffsetDateTime.parse("2021-03-07T02:15:56Z"))
            .withEndTimeUtc(OffsetDateTime.parse("2021-07-27T16:24:14Z"))
            .withLastUpdatedTimeUtc(OffsetDateTime.parse("2021-02-27T02:04:22Z"))
            .withExpectedExecutionTime("uuyiuy")
            .withSteps(Arrays.asList(new Step().withName("xlxicwgp")
                .withDescription("dc")
                .withErrorMessage("fzcfasf")
                .withStatus("ropalvngtwyuskwg")
                .withStartTimeUtc(OffsetDateTime.parse("2021-05-16T23:54:13Z"))
                .withEndTimeUtc(OffsetDateTime.parse("2021-05-14T22:38:31Z"))
                .withLastUpdatedTimeUtc(OffsetDateTime.parse("2021-08-19T20:43:12Z"))
                .withExpectedExecutionTime("rcjlvkrkegtyczup")
                .withSteps(Arrays.asList(new Step()))))
            .create();

        Assertions.assertEquals("hzlrynjpchamkae", response.location());
        Assertions.assertEquals(OffsetDateTime.parse("2021-04-14T07:48:17Z"), response.timeStarted());
        Assertions.assertEquals(OffsetDateTime.parse("2021-04-09T06:18:41Z"), response.lastUpdatedTime());
        Assertions.assertEquals("xvb", response.duration());
        Assertions.assertEquals(UpdateRunPropertiesState.UNKNOWN, response.state());
        Assertions.assertEquals("egbthm", response.namePropertiesName());
        Assertions.assertEquals("i", response.description());
        Assertions.assertEquals("buiggrunozf", response.errorMessage());
        Assertions.assertEquals("aljthoivsdwsn", response.status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-16T05:29:10Z"), response.startTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2020-12-31T04:40:29Z"), response.endTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-09-27T12:47:25Z"), response.lastUpdatedTimeUtc());
        Assertions.assertEquals("jvakmhzbhwahfbw", response.expectedExecutionTime());
        Assertions.assertEquals("nx", response.steps().get(0).name());
        Assertions.assertEquals("vynuqqkotauratn", response.steps().get(0).description());
        Assertions.assertEquals("ppfzsclef", response.steps().get(0).errorMessage());
        Assertions.assertEquals("letnd", response.steps().get(0).status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-10-18T10:14:21Z"), response.steps().get(0).startTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-07T05:56:17Z"), response.steps().get(0).endTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-04T02:17:04Z"),
            response.steps().get(0).lastUpdatedTimeUtc());
        Assertions.assertEquals("bbuypwovvvsflee", response.steps().get(0).expectedExecutionTime());
    }
}
