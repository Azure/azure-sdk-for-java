// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.azurestackhci.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.azurestackhci.AzureStackHciManager;
import com.azure.resourcemanager.azurestackhci.fluent.models.Step;
import com.azure.resourcemanager.azurestackhci.models.UpdateRun;
import com.azure.resourcemanager.azurestackhci.models.UpdateRunPropertiesState;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class UpdateRunsPutWithResponseMockTests {
    @Test
    public void testPutWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"provisioningState\":\"NotSpecified\",\"timeStarted\":\"2021-11-21T14:51:33Z\",\"lastUpdatedTime\":\"2021-04-01T05:12:11Z\",\"duration\":\"ekdesbpj\",\"state\":\"InProgress\",\"progress\":{\"name\":\"h\",\"description\":\"pduibsr\",\"errorMessage\":\"qnneqrypyurvs\",\"status\":\"ovtuer\",\"startTimeUtc\":\"2021-10-03T09:45:57Z\",\"endTimeUtc\":\"2021-04-12T06:55:31Z\",\"lastUpdatedTimeUtc\":\"2021-01-19T04:32:04Z\",\"expectedExecutionTime\":\"yb\",\"steps\":[{\"name\":\"cxhaoe\",\"description\":\"zgpljbnwczsrazc\",\"errorMessage\":\"bicqhxhjpuapasi\",\"status\":\"fmugykwuycuo\",\"startTimeUtc\":\"2021-05-11T21:16:08Z\",\"endTimeUtc\":\"2021-04-24T09:32:53Z\",\"lastUpdatedTimeUtc\":\"2021-07-21T14:03:51Z\",\"expectedExecutionTime\":\"hdzitjzffpherw\",\"steps\":[{},{},{}]},{\"name\":\"wtwona\",\"description\":\"zmzxvfybxmmrvnu\",\"errorMessage\":\"krrs\",\"status\":\"o\",\"startTimeUtc\":\"2021-07-31T14:10:14Z\",\"endTimeUtc\":\"2021-07-01T23:51:31Z\",\"lastUpdatedTimeUtc\":\"2021-05-07T21:43:42Z\",\"expectedExecutionTime\":\"yabensjflwp\",\"steps\":[{},{}]},{\"name\":\"qtmvi\",\"description\":\"cv\",\"errorMessage\":\"mal\",\"status\":\"t\",\"startTimeUtc\":\"2021-08-18T08:08:36Z\",\"endTimeUtc\":\"2021-03-09T06:37:48Z\",\"lastUpdatedTimeUtc\":\"2021-06-05T13:48:44Z\",\"expectedExecutionTime\":\"ajpt\",\"steps\":[{},{}]}]}},\"location\":\"zxaoxlhmvjcnnls\",\"id\":\"ucqxhpaqoqb\",\"name\":\"ejoysoxovlznk\",\"type\":\"eldkqdlqqhn\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AzureStackHciManager manager = AzureStackHciManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        UpdateRun response = manager.updateRuns()
            .define("xtvsayyaeiivjq")
            .withExistingUpdate("kst", "neykeipxutcbvriu", "nfa")
            .withRegion("pwewpmiolea")
            .withTimeStarted(OffsetDateTime.parse("2021-07-20T18:42:46Z"))
            .withLastUpdatedTime(OffsetDateTime.parse("2021-05-21T21:01:11Z"))
            .withDuration("ojoqfxqetxtdqi")
            .withState(UpdateRunPropertiesState.FAILED)
            .withNamePropertiesName("zljvgjijzqjhljsa")
            .withDescription("jsisfqqhcmec")
            .withErrorMessage("sbfe")
            .withStatus("rpnjygllfkchhgsj")
            .withStartTimeUtc(OffsetDateTime.parse("2021-03-18T06:42:49Z"))
            .withEndTimeUtc(OffsetDateTime.parse("2021-06-23T11:15:32Z"))
            .withLastUpdatedTimeUtc(OffsetDateTime.parse("2021-03-03T12:26:53Z"))
            .withExpectedExecutionTime("mqcycabaamkkhd")
            .withSteps(Arrays.asList(
                new Step().withName("xdujkxpuqzdy")
                    .withDescription("yws")
                    .withErrorMessage("rpzhr")
                    .withStatus("ezxiz")
                    .withStartTimeUtc(OffsetDateTime.parse("2021-10-19T20:09:56Z"))
                    .withEndTimeUtc(OffsetDateTime.parse("2021-02-27T20:43:17Z"))
                    .withLastUpdatedTimeUtc(OffsetDateTime.parse("2021-07-31T00:09:07Z"))
                    .withExpectedExecutionTime("lbuaz")
                    .withSteps(Arrays.asList(new Step())),
                new Step().withName("hwivkd")
                    .withDescription("jsk")
                    .withErrorMessage("bxzepirtv")
                    .withStatus("i")
                    .withStartTimeUtc(OffsetDateTime.parse("2021-10-26T23:35:47Z"))
                    .withEndTimeUtc(OffsetDateTime.parse("2021-10-15T03:58:39Z"))
                    .withLastUpdatedTimeUtc(OffsetDateTime.parse("2021-10-13T21:33:57Z"))
                    .withExpectedExecutionTime("ol")
                    .withSteps(Arrays.asList(new Step(), new Step())),
                new Step().withName("pvhcbtza")
                    .withDescription("jxcontickfk")
                    .withErrorMessage("h")
                    .withStatus("oc")
                    .withStartTimeUtc(OffsetDateTime.parse("2021-06-23T15:46Z"))
                    .withEndTimeUtc(OffsetDateTime.parse("2021-05-17T13:12:12Z"))
                    .withLastUpdatedTimeUtc(OffsetDateTime.parse("2021-09-06T11:43:55Z"))
                    .withExpectedExecutionTime("jwv")
                    .withSteps(Arrays.asList(new Step(), new Step(), new Step(), new Step()))))
            .create();

        Assertions.assertEquals("zxaoxlhmvjcnnls", response.location());
        Assertions.assertEquals(OffsetDateTime.parse("2021-11-21T14:51:33Z"), response.timeStarted());
        Assertions.assertEquals(OffsetDateTime.parse("2021-04-01T05:12:11Z"), response.lastUpdatedTime());
        Assertions.assertEquals("ekdesbpj", response.duration());
        Assertions.assertEquals(UpdateRunPropertiesState.IN_PROGRESS, response.state());
        Assertions.assertEquals("h", response.namePropertiesName());
        Assertions.assertEquals("pduibsr", response.description());
        Assertions.assertEquals("qnneqrypyurvs", response.errorMessage());
        Assertions.assertEquals("ovtuer", response.status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-10-03T09:45:57Z"), response.startTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-04-12T06:55:31Z"), response.endTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-01-19T04:32:04Z"), response.lastUpdatedTimeUtc());
        Assertions.assertEquals("yb", response.expectedExecutionTime());
        Assertions.assertEquals("cxhaoe", response.steps().get(0).name());
        Assertions.assertEquals("zgpljbnwczsrazc", response.steps().get(0).description());
        Assertions.assertEquals("bicqhxhjpuapasi", response.steps().get(0).errorMessage());
        Assertions.assertEquals("fmugykwuycuo", response.steps().get(0).status());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-11T21:16:08Z"), response.steps().get(0).startTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-04-24T09:32:53Z"), response.steps().get(0).endTimeUtc());
        Assertions.assertEquals(OffsetDateTime.parse("2021-07-21T14:03:51Z"),
            response.steps().get(0).lastUpdatedTimeUtc());
        Assertions.assertEquals("hdzitjzffpherw", response.steps().get(0).expectedExecutionTime());
    }
}
