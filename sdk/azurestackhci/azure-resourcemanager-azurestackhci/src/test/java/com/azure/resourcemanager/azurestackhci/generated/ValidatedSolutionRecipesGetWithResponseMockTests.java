// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.azurestackhci.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.azurestackhci.AzureStackHciManager;
import com.azure.resourcemanager.azurestackhci.models.ValidatedSolutionRecipe;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ValidatedSolutionRecipesGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"recipeContent\":{\"info\":{\"solutionType\":\"cejo\",\"version\":\"ylblfsprr\"},\"capabilities\":{\"clusterCapabilities\":[{\"capabilityName\":\"pimtc\"},{\"capabilityName\":\"vfxrdytz\"},{\"capabilityName\":\"slxizhqikmgob\"}],\"nodeCapabilities\":[{\"capabilityName\":\"qemcdi\"},{\"capabilityName\":\"isklbonxxupjxv\"},{\"capabilityName\":\"rk\"},{\"capabilityName\":\"kgenjqnnpjwkosn\"}]},\"components\":[{\"name\":\"igfoujjcxgdqmr\",\"type\":\"hnzkwopswnyinxu\",\"requiredVersion\":\"rxyxwjezbfqp\",\"installOrder\":8381855132335920069,\"tags\":[\"kdcpvu\"],\"payloads\":[{\"identifier\":\"svjmnsvujnjk\",\"hash\":\"volefcj\",\"fileName\":\"se\",\"url\":\"kdb\"},{\"identifier\":\"otfbjampqoclann\",\"hash\":\"xynlsuqb\",\"fileName\":\"zstrktgvpatrg\",\"url\":\"jktfinf\"},{\"identifier\":\"oksmmculwk\",\"hash\":\"icruo\",\"fileName\":\"krjflsgaojb\",\"url\":\"qpqsdoctpzpuj\"},{\"identifier\":\"flmcdsgxc\",\"hash\":\"lujiswlluunxhfw\",\"fileName\":\"fxzf\",\"url\":\"u\"}],\"metadata\":{}},{\"name\":\"upcknecexkgrvfp\",\"type\":\"jdmngsytqpdzfyxc\",\"requiredVersion\":\"awoxcgzbe\",\"installOrder\":6345755361733329646,\"tags\":[\"fopfjxdwdrpazqjk\",\"fmbwotfcuuugt\"],\"payloads\":[{\"identifier\":\"pgayiawohfmhnnzm\",\"hash\":\"cjjkmqenh\",\"fileName\":\"idzr\",\"url\":\"vs\"}],\"metadata\":{}},{\"name\":\"oiovslvivq\",\"type\":\"uvwtenbgpi\",\"requiredVersion\":\"khcyoaqxuk\",\"installOrder\":1097905589940544769,\"tags\":[\"f\",\"ekiooanduewfhv\"],\"payloads\":[{\"identifier\":\"hxzubfjzabbw\",\"hash\":\"gvzua\",\"fileName\":\"xcdckixspsa\",\"url\":\"gavkmv\"},{\"identifier\":\"xzerej\",\"hash\":\"kpzjbyetjxryopt\",\"fileName\":\"eitwhlbecgi\",\"url\":\"z\"},{\"identifier\":\"pemnrrabo\",\"hash\":\"rwwxywpj\",\"fileName\":\"spboxhifp\",\"url\":\"skpeswyhhmifjua\"},{\"identifier\":\"xwwvcmmpeg\",\"hash\":\"y\",\"fileName\":\"qvcml\",\"url\":\"exbzbqufpnezsjza\"}],\"metadata\":{}}]},\"signature\":\"dror\"},\"id\":\"ogzmsimehtcuuwdh\",\"name\":\"qqhyhnimxtns\",\"type\":\"gi\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AzureStackHciManager manager = AzureStackHciManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        ValidatedSolutionRecipe response = manager.validatedSolutionRecipes()
            .getWithResponse("kin", "teyrqshi", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("cejo", response.properties().recipeContent().info().solutionType());
        Assertions.assertEquals("ylblfsprr", response.properties().recipeContent().info().version());
        Assertions.assertEquals("pimtc",
            response.properties().recipeContent().capabilities().clusterCapabilities().get(0).capabilityName());
        Assertions.assertEquals("qemcdi",
            response.properties().recipeContent().capabilities().nodeCapabilities().get(0).capabilityName());
        Assertions.assertEquals("igfoujjcxgdqmr", response.properties().recipeContent().components().get(0).name());
        Assertions.assertEquals("hnzkwopswnyinxu", response.properties().recipeContent().components().get(0).type());
        Assertions.assertEquals("rxyxwjezbfqp",
            response.properties().recipeContent().components().get(0).requiredVersion());
        Assertions.assertEquals(8381855132335920069L,
            response.properties().recipeContent().components().get(0).installOrder());
        Assertions.assertEquals("kdcpvu", response.properties().recipeContent().components().get(0).tags().get(0));
        Assertions.assertEquals("svjmnsvujnjk",
            response.properties().recipeContent().components().get(0).payloads().get(0).identifier());
        Assertions.assertEquals("volefcj",
            response.properties().recipeContent().components().get(0).payloads().get(0).hash());
        Assertions.assertEquals("se",
            response.properties().recipeContent().components().get(0).payloads().get(0).fileName());
        Assertions.assertEquals("kdb",
            response.properties().recipeContent().components().get(0).payloads().get(0).url());
        Assertions.assertEquals("dror", response.properties().signature());
    }
}
