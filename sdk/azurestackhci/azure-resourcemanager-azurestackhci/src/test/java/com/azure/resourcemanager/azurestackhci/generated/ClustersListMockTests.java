// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.azurestackhci.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.azurestackhci.AzureStackHciManager;
import com.azure.resourcemanager.azurestackhci.models.Cluster;
import com.azure.resourcemanager.azurestackhci.models.DiagnosticLevel;
import com.azure.resourcemanager.azurestackhci.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.azurestackhci.models.SoftwareAssuranceIntent;
import com.azure.resourcemanager.azurestackhci.models.WindowsServerSubscription;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ClustersListMockTests {
    @Test
    public void testList() throws Exception {
        String responseStr
            = "{\"value\":[{\"identity\":{\"principalId\":\"45674139-81e8-42cb-98c6-c5e80982eaa1\",\"tenantId\":\"d4e93696-2a29-4264-9d56-d8aabe3a6c03\",\"type\":\"None\",\"userAssignedIdentities\":{\"exn\":{\"principalId\":\"29d84dc7-f4dc-4bd2-8bd0-e8b45f7923ed\",\"clientId\":\"028d5e46-5f8a-42b5-902c-7c54fb03f3c1\"}}},\"properties\":{\"provisioningState\":\"NotSpecified\",\"status\":\"ValidationSuccess\",\"connectivityStatus\":\"NotYetRegistered\",\"cloudId\":\"x\",\"cloudManagementEndpoint\":\"abjkdtfohfao\",\"aadClientId\":\"vkiwrsiwdyjqu\",\"aadTenantId\":\"kcrr\",\"aadApplicationObjectId\":\"eek\",\"aadServicePrincipalObjectId\":\"uehogdd\",\"softwareAssuranceProperties\":{\"softwareAssuranceStatus\":\"Enabled\",\"softwareAssuranceIntent\":\"Disable\",\"lastUpdated\":\"2021-07-11T10:57:54Z\"},\"logCollectionProperties\":{\"fromDate\":\"2021-01-06T13:23:28Z\",\"toDate\":\"2021-12-03T23:32:55Z\",\"lastLogGenerated\":\"2021-12-09T15:31:40Z\",\"logCollectionSessionDetails\":[{\"logStartTime\":\"2021-04-15T12:16:51Z\",\"logEndTime\":\"2021-12-06T01:52:16Z\",\"timeCollected\":\"2021-03-18T17:00:36Z\",\"logSize\":5089706177234380966,\"logCollectionStatus\":\"Succeeded\",\"logCollectionJobType\":\"Scheduled\",\"correlationId\":\"vzt\",\"endTimeCollected\":\"2021-03-09T11:05:21Z\",\"logCollectionError\":{}},{\"logStartTime\":\"2021-08-20T03:01:03Z\",\"logEndTime\":\"2021-08-25T12:23:03Z\",\"timeCollected\":\"2021-06-23T22:20:55Z\",\"logSize\":953608876389392721,\"logCollectionStatus\":\"Succeeded\",\"logCollectionJobType\":\"OnDemand\",\"correlationId\":\"fdde\",\"endTimeCollected\":\"2021-04-12T12:04:13Z\",\"logCollectionError\":{}},{\"logStartTime\":\"2021-08-21T18:37:30Z\",\"logEndTime\":\"2020-12-25T11:31:23Z\",\"timeCollected\":\"2021-09-30T19:59:55Z\",\"logSize\":1480578356337551776,\"logCollectionStatus\":\"None\",\"logCollectionJobType\":\"Scheduled\",\"correlationId\":\"vmywhsbrcarycsjj\",\"endTimeCollected\":\"2021-08-11T01:22:34Z\",\"logCollectionError\":{}},{\"logStartTime\":\"2021-02-11T21:53:10Z\",\"logEndTime\":\"2021-06-09T21:20:06Z\",\"timeCollected\":\"2021-03-09T06:10:14Z\",\"logSize\":518379516929503139,\"logCollectionStatus\":\"Succeeded\",\"logCollectionJobType\":\"OnDemand\",\"correlationId\":\"rr\",\"endTimeCollected\":\"2021-09-17T17:40:03Z\",\"logCollectionError\":{}}]},\"remoteSupportProperties\":{\"accessLevel\":\"DiagnosticsAndRepair\",\"expirationTimeStamp\":\"2021-09-05T10:47:38Z\",\"remoteSupportType\":\"Revoke\",\"remoteSupportNodeSettings\":[{\"arcResourceId\":\"pmfbfununmpzkr\",\"state\":\"yifkdschlzvf\",\"createdAt\":\"2021-03-30T02:21:42Z\",\"updatedAt\":\"2021-07-17T09:23:33Z\",\"connectionStatus\":\"jwg\",\"connectionErrorMessage\":\"nphbkgfyrt\",\"transcriptLocation\":\"mhmjpjs\"},{\"arcResourceId\":\"fp\",\"state\":\"wtyg\",\"createdAt\":\"2020-12-29T02:29:21Z\",\"updatedAt\":\"2021-05-16T09:34:56Z\",\"connectionStatus\":\"eharxifv\",\"connectionErrorMessage\":\"rxtmbpjptnvw\",\"transcriptLocation\":\"rsidqpxlbtpakf\"}],\"remoteSupportSessionDetails\":[{\"sessionStartTime\":\"2021-07-21T20:48:18Z\",\"sessionEndTime\":\"2021-10-30T03:58:04Z\",\"nodeName\":\"kyutrymdwmfjhpyc\",\"duration\":1031808729537103141,\"accessLevel\":\"DiagnosticsAndRepair\"},{\"sessionStartTime\":\"2021-08-24T21:59:02Z\",\"sessionEndTime\":\"2021-10-27T16:03:46Z\",\"nodeName\":\"drlefgnaavuag\",\"duration\":2102845836389182101,\"accessLevel\":\"DiagnosticsAndRepair\"},{\"sessionStartTime\":\"2021-11-25T11:03:28Z\",\"sessionEndTime\":\"2021-04-08T19:55:23Z\",\"nodeName\":\"ctuhspfefyihduye\",\"duration\":4383132154985570043,\"accessLevel\":\"DiagnosticsAndRepair\"}]},\"desiredProperties\":{\"windowsServerSubscription\":\"Enabled\",\"diagnosticLevel\":\"Basic\"},\"reportedProperties\":{\"clusterName\":\"suthhllnmwynefx\",\"clusterId\":\"lf\",\"clusterVersion\":\"atxtjrrlkmdskjhh\",\"nodes\":[{\"name\":\"jfoxcxscvslxl\",\"id\":4.2046843,\"windowsServerSubscription\":\"Enabled\",\"nodeType\":\"FirstParty\",\"ehcResourceId\":\"kmyjmkxett\",\"manufacturer\":\"lojfkqidnqto\",\"model\":\"jhqxc\",\"osName\":\"htkbtnq\",\"osVersion\":\"ngldmbiipsn\",\"osDisplayVersion\":\"wl\",\"serialNumber\":\"znxhhllxr\",\"coreCount\":95.013336,\"memoryInGiB\":42.536728,\"lastLicensingTimestamp\":\"2021-06-26T09:38:10Z\",\"oemActivation\":\"Enabled\"},{\"name\":\"oajxeiygles\",\"id\":30.896765,\"windowsServerSubscription\":\"Disabled\",\"nodeType\":\"ThirdParty\",\"ehcResourceId\":\"ctrceqnkbr\",\"manufacturer\":\"obehdmljz\",\"model\":\"vume\",\"osName\":\"pbibn\",\"osVersion\":\"phepifexleqirc\",\"osDisplayVersion\":\"cly\",\"serialNumber\":\"gxvrpjl\",\"coreCount\":52.70626,\"memoryInGiB\":96.086845,\"lastLicensingTimestamp\":\"2021-03-27T15:26:01Z\",\"oemActivation\":\"Enabled\"},{\"name\":\"nettepdjxqeskoy\",\"id\":31.382202,\"windowsServerSubscription\":\"Enabled\",\"nodeType\":\"ThirdParty\",\"ehcResourceId\":\"aewse\",\"manufacturer\":\"eskwxeg\",\"model\":\"hrg\",\"osName\":\"zhctm\",\"osVersion\":\"sghpbcbcpzarpze\",\"osDisplayVersion\":\"cdl\",\"serialNumber\":\"zmpypefcpczshnu\",\"coreCount\":42.157166,\"memoryInGiB\":49.67236,\"lastLicensingTimestamp\":\"2021-01-15T03:44:07Z\",\"oemActivation\":\"Disabled\"},{\"name\":\"huytuszx\",\"id\":23.604797,\"windowsServerSubscription\":\"Enabled\",\"nodeType\":\"FirstParty\",\"ehcResourceId\":\"w\",\"manufacturer\":\"ukvzwydwttha\",\"model\":\"gkskjivbss\",\"osName\":\"jqf\",\"osVersion\":\"peexpgeumilhwuit\",\"osDisplayVersion\":\"exyionofninbd\",\"serialNumber\":\"s\",\"coreCount\":93.86298,\"memoryInGiB\":13.063449,\"lastLicensingTimestamp\":\"2021-03-08T05:21:03Z\",\"oemActivation\":\"Enabled\"}],\"lastUpdated\":\"2020-12-23T13:52:52Z\",\"imdsAttestation\":\"Disabled\",\"diagnosticLevel\":\"Basic\",\"supportedCapabilities\":[\"av\",\"zbcyksiv\",\"fogdrtbfcm\"],\"clusterType\":\"FirstParty\",\"manufacturer\":\"sjcwjjxsgmbawvif\",\"oemActivation\":\"Enabled\"},\"isolatedVmAttestationConfiguration\":{\"attestationResourceId\":\"if\",\"relyingPartyServiceEndpoint\":\"cjxwkloozrvtxvcm\",\"attestationServiceEndpoint\":\"unlcpxxv\"},\"trialDaysRemaining\":25.181086,\"billingModel\":\"yngjgvrquvpygglp\",\"registrationTimestamp\":\"2021-10-12T15:29:26Z\",\"lastSyncTimestamp\":\"2021-05-19T05:39:03Z\",\"lastBillingTimestamp\":\"2021-03-23T16:26:12Z\",\"serviceEndpoint\":\"jt\",\"resourceProviderObjectId\":\"hxmfqryarvsxzqb\"},\"location\":\"cjkay\",\"tags\":{\"dubtlmj\":\"hz\",\"djxyxgbkkqvjcteo\":\"gblioskkfmkm\",\"pxvjnzd\":\"dlrslskk\",\"pcnab\":\"vocoj\"},\"id\":\"zf\",\"name\":\"nggy\",\"type\":\"e\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AzureStackHciManager manager = AzureStackHciManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<Cluster> response = manager.clusters().list(com.azure.core.util.Context.NONE);

        Assertions.assertEquals("cjkay", response.iterator().next().location());
        Assertions.assertEquals("hz", response.iterator().next().tags().get("dubtlmj"));
        Assertions.assertEquals(ManagedServiceIdentityType.NONE, response.iterator().next().typeIdentityType());
        Assertions.assertEquals("abjkdtfohfao", response.iterator().next().cloudManagementEndpoint());
        Assertions.assertEquals("vkiwrsiwdyjqu", response.iterator().next().aadClientId());
        Assertions.assertEquals("kcrr", response.iterator().next().aadTenantId());
        Assertions.assertEquals("eek", response.iterator().next().aadApplicationObjectId());
        Assertions.assertEquals("uehogdd", response.iterator().next().aadServicePrincipalObjectId());
        Assertions.assertEquals(SoftwareAssuranceIntent.DISABLE,
            response.iterator().next().softwareAssuranceProperties().softwareAssuranceIntent());
        Assertions.assertEquals(WindowsServerSubscription.ENABLED,
            response.iterator().next().desiredProperties().windowsServerSubscription());
        Assertions.assertEquals(DiagnosticLevel.BASIC,
            response.iterator().next().desiredProperties().diagnosticLevel());
    }
}
