// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.azurestackhci.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.azurestackhci.AzureStackHciManager;
import com.azure.resourcemanager.azurestackhci.models.ValidatedSolutionRecipe;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ValidatedSolutionRecipesListBySubscriptionLocationResourceMockTests {
    @Test
    public void testListBySubscriptionLocationResource() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"recipeContent\":{\"info\":{\"solutionType\":\"micjixxfsf\",\"version\":\"crtnuguefxxi\"},\"capabilities\":{\"clusterCapabilities\":[{\"capabilityName\":\"bdveywetkrhl\"},{\"capabilityName\":\"lmcnwepfgsv\"}],\"nodeCapabilities\":[{\"capabilityName\":\"vaqdljnpetl\"}]},\"components\":[{\"name\":\"rdetawevxehuekdx\",\"type\":\"jzvdovbrblerlp\",\"requiredVersion\":\"aqccddcbnyg\",\"installOrder\":780190439960173929,\"tags\":[\"wbpwy\",\"kdigq\",\"lrzndas\"],\"payloads\":[{\"identifier\":\"dmjqmvy\",\"hash\":\"gkiqla\",\"fileName\":\"hqtwv\",\"url\":\"azekdzdzffzjwzts\"}],\"metadata\":{}}]},\"signature\":\"hggryelgf\"},\"id\":\"tig\",\"name\":\"gfrrkdknczgoryw\",\"type\":\"vojtvmdevdlhqv\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AzureStackHciManager manager = AzureStackHciManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<ValidatedSolutionRecipe> response = manager.validatedSolutionRecipes()
            .listBySubscriptionLocationResource("nomwnwnghojovke", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("micjixxfsf",
            response.iterator().next().properties().recipeContent().info().solutionType());
        Assertions.assertEquals("crtnuguefxxi",
            response.iterator().next().properties().recipeContent().info().version());
        Assertions.assertEquals("bdveywetkrhl",
            response.iterator()
                .next()
                .properties()
                .recipeContent()
                .capabilities()
                .clusterCapabilities()
                .get(0)
                .capabilityName());
        Assertions.assertEquals("vaqdljnpetl",
            response.iterator()
                .next()
                .properties()
                .recipeContent()
                .capabilities()
                .nodeCapabilities()
                .get(0)
                .capabilityName());
        Assertions.assertEquals("rdetawevxehuekdx",
            response.iterator().next().properties().recipeContent().components().get(0).name());
        Assertions.assertEquals("jzvdovbrblerlp",
            response.iterator().next().properties().recipeContent().components().get(0).type());
        Assertions.assertEquals("aqccddcbnyg",
            response.iterator().next().properties().recipeContent().components().get(0).requiredVersion());
        Assertions.assertEquals(780190439960173929L,
            response.iterator().next().properties().recipeContent().components().get(0).installOrder());
        Assertions.assertEquals("wbpwy",
            response.iterator().next().properties().recipeContent().components().get(0).tags().get(0));
        Assertions.assertEquals("dmjqmvy",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).identifier());
        Assertions.assertEquals("gkiqla",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).hash());
        Assertions.assertEquals("hqtwv",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).fileName());
        Assertions.assertEquals("azekdzdzffzjwzts",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).url());
        Assertions.assertEquals("hggryelgf", response.iterator().next().properties().signature());
    }
}
