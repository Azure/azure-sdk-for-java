// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.azurestackhci.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.azurestackhci.AzureStackHciManager;
import com.azure.resourcemanager.azurestackhci.models.ValidatedSolutionRecipe;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ValidatedSolutionRecipesListBySubscriptionLocationResourceMockTests {
    @Test
    public void testListBySubscriptionLocationResource() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"recipeContent\":{\"info\":{\"solutionType\":\"glyyhrgmabspmlu\",\"version\":\"yju\"},\"capabilities\":{\"clusterCapabilities\":[{\"capabilityName\":\"dputo\"},{\"capabilityName\":\"rbfgqi\"},{\"capabilityName\":\"mdrgcuzjmvkrwrjc\"}],\"nodeCapabilities\":[{\"capabilityName\":\"gcmlj\"},{\"capabilityName\":\"ksqimybq\"},{\"capabilityName\":\"vfiomhc\"}]},\"components\":[{\"name\":\"pvhszopeu\",\"type\":\"uf\",\"requiredVersion\":\"wbsskgqjemo\",\"installOrder\":3866572365102158661,\"tags\":[\"jbpwjwzqgipdz\",\"mzkhxfpzcu\",\"dq\",\"adxjvvlyibw\"],\"payloads\":[{\"identifier\":\"u\",\"hash\":\"txlz\",\"fileName\":\"coqxtvytzqlyldj\",\"url\":\"zmxyrazzstjvcs\"},{\"identifier\":\"bdbrl\",\"hash\":\"ozl\",\"fileName\":\"yolacbibtkeie\",\"url\":\"upmwxdsokrlnrpey\"},{\"identifier\":\"fiiulddg\",\"hash\":\"qlnh\",\"fileName\":\"xwwwvunknsgvxhx\",\"url\":\"meatrtcqyfjvifb\"}],\"metadata\":{}},{\"name\":\"j\",\"type\":\"ehqyoytrcoufk\",\"requiredVersion\":\"bhukdfpknv\",\"installOrder\":1686472806367557435,\"tags\":[\"jezchmeo\"],\"payloads\":[{\"identifier\":\"jl\",\"hash\":\"knckkfxmuqeqkw\",\"fileName\":\"phfvsftsstwlpxca\",\"url\":\"hdtezgfctu\"},{\"identifier\":\"z\",\"hash\":\"wqrzvuxnxauohsh\",\"fileName\":\"u\",\"url\":\"tdbvmj\"}],\"metadata\":{}},{\"name\":\"ypngocbd\",\"type\":\"vrivptbczsuzgrz\",\"requiredVersion\":\"ekytkzvtv\",\"installOrder\":2592976986686593408,\"tags\":[\"ogpycei\",\"harhbdxsbyp\",\"s\",\"hwfjudapbqpsezsg\"],\"payloads\":[{\"identifier\":\"ftfcbrtsrdplqdy\",\"hash\":\"aciasfzrgu\",\"fileName\":\"liyvsbf\",\"url\":\"inv\"},{\"identifier\":\"bdj\",\"hash\":\"ljgxot\",\"fileName\":\"dam\",\"url\":\"i\"}],\"metadata\":{}},{\"name\":\"osthulzugifg\",\"type\":\"pxldlnocs\",\"requiredVersion\":\"gimizlukj\",\"installOrder\":8631769414783473916,\"tags\":[\"srlmsp\"],\"payloads\":[{\"identifier\":\"eszthjtryjs\",\"hash\":\"diylgzzuqixp\",\"fileName\":\"ybqowgvmxwbohxdh\",\"url\":\"oexb\"},{\"identifier\":\"h\",\"hash\":\"nakaj\",\"fileName\":\"scmne\",\"url\":\"vlumqeumz\"},{\"identifier\":\"yhmgq\",\"hash\":\"eivjqutxr\",\"fileName\":\"gbzgfhzdzahktxv\",\"url\":\"bicfecthotbkjwhz\"},{\"identifier\":\"pxjvtwk\",\"hash\":\"jdpayx\",\"fileName\":\"pqiwuzr\",\"url\":\"qztjfkgb\"}],\"metadata\":{}}]},\"signature\":\"jobsynn\"},\"id\":\"ion\",\"name\":\"q\",\"type\":\"dheos\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        AzureStackHciManager manager = AzureStackHciManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        PagedIterable<ValidatedSolutionRecipe> response = manager.validatedSolutionRecipes()
            .listBySubscriptionLocationResource("slqcxuthv", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("glyyhrgmabspmlu",
            response.iterator().next().properties().recipeContent().info().solutionType());
        Assertions.assertEquals("yju", response.iterator().next().properties().recipeContent().info().version());
        Assertions.assertEquals("dputo",
            response.iterator()
                .next()
                .properties()
                .recipeContent()
                .capabilities()
                .clusterCapabilities()
                .get(0)
                .capabilityName());
        Assertions.assertEquals("gcmlj",
            response.iterator()
                .next()
                .properties()
                .recipeContent()
                .capabilities()
                .nodeCapabilities()
                .get(0)
                .capabilityName());
        Assertions.assertEquals("pvhszopeu",
            response.iterator().next().properties().recipeContent().components().get(0).name());
        Assertions.assertEquals("uf",
            response.iterator().next().properties().recipeContent().components().get(0).type());
        Assertions.assertEquals("wbsskgqjemo",
            response.iterator().next().properties().recipeContent().components().get(0).requiredVersion());
        Assertions.assertEquals(3866572365102158661L,
            response.iterator().next().properties().recipeContent().components().get(0).installOrder());
        Assertions.assertEquals("jbpwjwzqgipdz",
            response.iterator().next().properties().recipeContent().components().get(0).tags().get(0));
        Assertions.assertEquals("u",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).identifier());
        Assertions.assertEquals("txlz",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).hash());
        Assertions.assertEquals("coqxtvytzqlyldj",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).fileName());
        Assertions.assertEquals("zmxyrazzstjvcs",
            response.iterator().next().properties().recipeContent().components().get(0).payloads().get(0).url());
        Assertions.assertEquals("jobsynn", response.iterator().next().properties().signature());
    }
}
