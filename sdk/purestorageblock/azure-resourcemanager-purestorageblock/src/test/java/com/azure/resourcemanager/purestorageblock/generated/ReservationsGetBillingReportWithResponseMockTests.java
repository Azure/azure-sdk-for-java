// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.purestorageblock.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.purestorageblock.PureStorageBlockManager;
import com.azure.resourcemanager.purestorageblock.models.ReservationBillingUsageReport;
import com.azure.resourcemanager.purestorageblock.models.UsageSeverity;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class ReservationsGetBillingReportWithResponseMockTests {
    @Test
    public void testGetBillingReportWithResponse() throws Exception {
        String responseStr
            = "{\"timestamp\":\"jslb\",\"billingUsageProperties\":[{\"propertyId\":\"kojgcyzts\",\"propertyName\":\"mznbaeqphch\",\"currentValue\":\"nrnrp\",\"previousValue\":\"huwrykqgaifm\",\"severity\":\"warning\",\"statusMessage\":\"lb\",\"subProperties\":[{\"propertyId\":\"khbejdznxc\",\"propertyName\":\"dsrhnjiv\",\"currentValue\":\"lvtno\",\"previousValue\":\"fzg\",\"severity\":\"information\",\"statusMessage\":\"dftuljltduce\",\"subProperties\":[{\"propertyId\":\"mczuo\",\"propertyName\":\"ejwcwwqiok\",\"currentValue\":\"ssxmojms\",\"severity\":\"alert\"},{\"propertyId\":\"kjprvk\",\"propertyName\":\"cfzq\",\"currentValue\":\"jyxgtczh\",\"severity\":\"information\"},{\"propertyId\":\"dbsdshm\",\"propertyName\":\"xmaehvbbxu\",\"currentValue\":\"iplt\",\"severity\":\"alert\"},{\"propertyId\":\"htba\",\"propertyName\":\"kgxywr\",\"currentValue\":\"kpyklyhp\",\"severity\":\"information\"}]},{\"propertyId\":\"odpvruudlgzib\",\"propertyName\":\"hostgktstvdxecl\",\"currentValue\":\"edqbc\",\"previousValue\":\"zlhp\",\"severity\":\"warning\",\"statusMessage\":\"qkdlw\",\"subProperties\":[{\"propertyId\":\"bum\",\"propertyName\":\"kxtrq\",\"currentValue\":\"fsmlmbtxhwgfw\",\"severity\":\"warning\"},{\"propertyId\":\"tawc\",\"propertyName\":\"ezbrhubskh\",\"currentValue\":\"dyg\",\"severity\":\"alert\"}]},{\"propertyId\":\"okkqfqjbvleo\",\"propertyName\":\"fmluiqtqzfavyvn\",\"currentValue\":\"qybaryeua\",\"previousValue\":\"kq\",\"severity\":\"none\",\"statusMessage\":\"gzslesjcbhernnti\",\"subProperties\":[{\"propertyId\":\"jcvb\",\"propertyName\":\"uwrbehwagoh\",\"currentValue\":\"uffkmrqemvvh\",\"severity\":\"alert\"}]}]},{\"propertyId\":\"tdrjfutacoebj\",\"propertyName\":\"ewzcjznmwcp\",\"currentValue\":\"guaadraufactkahz\",\"previousValue\":\"ajjziuxxpshne\",\"severity\":\"information\",\"statusMessage\":\"lfg\",\"subProperties\":[{\"propertyId\":\"ubkwdle\",\"propertyName\":\"rds\",\"currentValue\":\"tujbazpju\",\"previousValue\":\"minyflnorwm\",\"severity\":\"warning\",\"statusMessage\":\"wpklvxw\",\"subProperties\":[{\"propertyId\":\"dxpgpqchiszepnnb\",\"propertyName\":\"crxgibb\",\"currentValue\":\"axconfozauo\",\"severity\":\"warning\"},{\"propertyId\":\"ukokwbqplhlvn\",\"propertyName\":\"uepzl\",\"currentValue\":\"phwzsoldweyuqdu\",\"severity\":\"information\"}]},{\"propertyId\":\"mnnrwr\",\"propertyName\":\"i\",\"currentValue\":\"rk\",\"previousValue\":\"lywjhh\",\"severity\":\"information\",\"statusMessage\":\"hxmsivfo\",\"subProperties\":[{\"propertyId\":\"ox\",\"propertyName\":\"gdufiqnd\",\"currentValue\":\"euzaof\",\"severity\":\"warning\"},{\"propertyId\":\"hvcyyysfg\",\"propertyName\":\"otcubi\",\"currentValue\":\"p\",\"severity\":\"none\"},{\"propertyId\":\"pwoqo\",\"propertyName\":\"macjekn\",\"currentValue\":\"zshq\",\"severity\":\"information\"}]}]},{\"propertyId\":\"impevf\",\"propertyName\":\"mblrrilbywd\",\"currentValue\":\"smiccwrwfscj\",\"previousValue\":\"ynszquji\",\"severity\":\"information\",\"statusMessage\":\"oqytibyowbblgy\",\"subProperties\":[{\"propertyId\":\"tp\",\"propertyName\":\"hjoxo\",\"currentValue\":\"smsks\",\"previousValue\":\"iml\",\"severity\":\"information\",\"statusMessage\":\"jxkcgxxlxsff\",\"subProperties\":[{\"propertyId\":\"izqzdwlvwlyou\",\"propertyName\":\"fgfb\",\"currentValue\":\"jub\",\"severity\":\"alert\"},{\"propertyId\":\"hgkfmin\",\"propertyName\":\"g\",\"currentValue\":\"wzf\",\"severity\":\"warning\"}]}]},{\"propertyId\":\"sttktlahbqa\",\"propertyName\":\"tx\",\"currentValue\":\"gzukxitmm\",\"previousValue\":\"gqqqxh\",\"severity\":\"alert\",\"statusMessage\":\"rxcpjuisavo\",\"subProperties\":[{\"propertyId\":\"zfvazi\",\"propertyName\":\"jlfrq\",\"currentValue\":\"tbajlkatn\",\"previousValue\":\"yiopi\",\"severity\":\"information\",\"statusMessage\":\"qfkuvscxkdmli\",\"subProperties\":[{\"propertyId\":\"ibrxkp\",\"propertyName\":\"loazuruocbgoo\",\"currentValue\":\"bteoybf\",\"severity\":\"information\"},{\"propertyId\":\"xakvvjgslor\",\"propertyName\":\"il\",\"currentValue\":\"yw\",\"severity\":\"alert\"},{\"propertyId\":\"kgkxn\",\"propertyName\":\"edabgyvudtjue\",\"currentValue\":\"bcihxuuwhc\",\"severity\":\"information\"},{\"propertyId\":\"xccybvpa\",\"propertyName\":\"akkud\",\"currentValue\":\"px\",\"severity\":\"information\"}]}]}],\"overallStatusMessage\":\"jplmagstcy\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        PureStorageBlockManager manager = PureStorageBlockManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        ReservationBillingUsageReport response = manager.reservations()
            .getBillingReportWithResponse("cvlhv", "gdyftumrtwna", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("jslb", response.timestamp());
        Assertions.assertEquals("kojgcyzts", response.billingUsageProperties().get(0).propertyId());
        Assertions.assertEquals("mznbaeqphch", response.billingUsageProperties().get(0).propertyName());
        Assertions.assertEquals("nrnrp", response.billingUsageProperties().get(0).currentValue());
        Assertions.assertEquals("huwrykqgaifm", response.billingUsageProperties().get(0).previousValue());
        Assertions.assertEquals(UsageSeverity.WARNING, response.billingUsageProperties().get(0).severity());
        Assertions.assertEquals("lb", response.billingUsageProperties().get(0).statusMessage());
        Assertions.assertEquals("khbejdznxc",
            response.billingUsageProperties().get(0).subProperties().get(0).propertyId());
        Assertions.assertEquals("dsrhnjiv",
            response.billingUsageProperties().get(0).subProperties().get(0).propertyName());
        Assertions.assertEquals("lvtno",
            response.billingUsageProperties().get(0).subProperties().get(0).currentValue());
        Assertions.assertEquals("fzg", response.billingUsageProperties().get(0).subProperties().get(0).previousValue());
        Assertions.assertEquals(UsageSeverity.INFORMATION,
            response.billingUsageProperties().get(0).subProperties().get(0).severity());
        Assertions.assertEquals("dftuljltduce",
            response.billingUsageProperties().get(0).subProperties().get(0).statusMessage());
        Assertions.assertEquals("mczuo",
            response.billingUsageProperties().get(0).subProperties().get(0).subProperties().get(0).propertyId());
        Assertions.assertEquals("ejwcwwqiok",
            response.billingUsageProperties().get(0).subProperties().get(0).subProperties().get(0).propertyName());
        Assertions.assertEquals("ssxmojms",
            response.billingUsageProperties().get(0).subProperties().get(0).subProperties().get(0).currentValue());
        Assertions.assertEquals(UsageSeverity.ALERT,
            response.billingUsageProperties().get(0).subProperties().get(0).subProperties().get(0).severity());
        Assertions.assertEquals("jplmagstcy", response.overallStatusMessage());
    }
}
