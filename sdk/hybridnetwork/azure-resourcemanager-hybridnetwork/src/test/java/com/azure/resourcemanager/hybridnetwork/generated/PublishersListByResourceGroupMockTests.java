// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.hybridnetwork.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.http.rest.PagedIterable;
import com.azure.core.management.AzureEnvironment;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.hybridnetwork.HybridNetworkManager;
import com.azure.resourcemanager.hybridnetwork.models.ManagedServiceIdentityType;
import com.azure.resourcemanager.hybridnetwork.models.Publisher;
import com.azure.resourcemanager.hybridnetwork.models.PublisherScope;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class PublishersListByResourceGroupMockTests {
    @Test
    public void testListByResourceGroup() throws Exception {
        String responseStr
            = "{\"value\":[{\"properties\":{\"provisioningState\":\"Unknown\",\"scope\":\"Unknown\"},\"identity\":{\"principalId\":\"2070504c-2f8d-45fd-ba95-273c1ba4e300\",\"tenantId\":\"4b2adc2d-c08e-48cd-949e-ccc6648581eb\",\"type\":\"None\",\"userAssignedIdentities\":{\"vfkakpold\":{\"principalId\":\"abdcfb8f-5695-4016-bb20-046489d8e7f2\",\"clientId\":\"5ceac7de-19ff-4247-a0ef-0f66d2df463e\"},\"vboclzhzjk\":{\"principalId\":\"297ca9de-b695-4f7c-8115-b99137a4a4f7\",\"clientId\":\"53ece4fb-c849-49d4-90f6-c4e197aad8d2\"},\"xgvttxp\":{\"principalId\":\"c6741986-4f80-45a6-b361-b028ebb682be\",\"clientId\":\"10050a2d-4448-41d4-a243-3c41286deb8e\"},\"pzaamrdixtreki\":{\"principalId\":\"49511a7f-2d77-4fa3-86fc-09a6358d1ff8\",\"clientId\":\"622f70ec-8213-4964-b53d-3226139d731c\"}}},\"location\":\"wyskbruffgll\",\"tags\":{\"qhvmblcouqe\":\"utvlxhr\",\"randoypmb\":\"bhbcdszir\",\"ormkfqlwxldyk\":\"t\"},\"id\":\"lsygaol\",\"name\":\"jpnnbmjksibjgsj\",\"type\":\"xxahmrnadzyqegxy\"}]}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        HybridNetworkManager manager = HybridNetworkManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureEnvironment.AZURE));

        PagedIterable<Publisher> response
            = manager.publishers().listByResourceGroup("ibvjogjonmcy", com.azure.core.util.Context.NONE);

        Assertions.assertEquals("wyskbruffgll", response.iterator().next().location());
        Assertions.assertEquals("utvlxhr", response.iterator().next().tags().get("qhvmblcouqe"));
        Assertions.assertEquals(PublisherScope.UNKNOWN, response.iterator().next().properties().scope());
        Assertions.assertEquals(ManagedServiceIdentityType.NONE, response.iterator().next().identity().type());
    }
}
