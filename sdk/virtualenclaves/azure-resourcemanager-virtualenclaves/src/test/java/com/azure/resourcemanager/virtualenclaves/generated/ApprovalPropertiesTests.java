// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.virtualenclaves.generated;

import com.azure.core.util.BinaryData;
import com.azure.resourcemanager.virtualenclaves.models.ActionPerformed;
import com.azure.resourcemanager.virtualenclaves.models.ApprovalProperties;
import com.azure.resourcemanager.virtualenclaves.models.ApprovalStatus;
import com.azure.resourcemanager.virtualenclaves.models.Approver;
import com.azure.resourcemanager.virtualenclaves.models.RequestMetadata;
import java.time.OffsetDateTime;
import java.util.Arrays;
import org.junit.jupiter.api.Assertions;

public final class ApprovalPropertiesTests {
    @org.junit.jupiter.api.Test
    public void testDeserialize() throws Exception {
        ApprovalProperties model = BinaryData.fromString(
            "{\"provisioningState\":\"Succeeded\",\"parentResourceId\":\"hcans\",\"grandparentResourceId\":\"oyqhlwig\",\"approvers\":[{\"approverEntraId\":\"bkbxgomfa\",\"actionPerformed\":\"Rejected\",\"lastUpdatedAt\":\"2021-03-28T18:59:20Z\"},{\"approverEntraId\":\"sqvdaeyygux\",\"actionPerformed\":\"Rejected\",\"lastUpdatedAt\":\"2021-07-22T12:02:25Z\"},{\"approverEntraId\":\"qzhzbezkgimsi\",\"actionPerformed\":\"Approved\",\"lastUpdatedAt\":\"2021-07-05T18:23:30Z\"}],\"ticketId\":\"cddyvvjsk\",\"createdAt\":\"2021-05-01T19:54:35Z\",\"stateChangedAt\":\"2021-06-30T14:43:36Z\",\"requestMetadata\":{\"resourceAction\":\"wa\",\"approvalCallbackRoute\":\"qgatjeaahhvjhhn\",\"approvalCallbackPayload\":\"zybbj\",\"approvalStatus\":\"Deleted\"}}")
            .toObject(ApprovalProperties.class);
        Assertions.assertEquals("hcans", model.parentResourceId());
        Assertions.assertEquals("oyqhlwig", model.grandparentResourceId());
        Assertions.assertEquals("bkbxgomfa", model.approvers().get(0).approverEntraId());
        Assertions.assertEquals(ActionPerformed.REJECTED, model.approvers().get(0).actionPerformed());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-28T18:59:20Z"), model.approvers().get(0).lastUpdatedAt());
        Assertions.assertEquals("cddyvvjsk", model.ticketId());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-01T19:54:35Z"), model.createdAt());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-30T14:43:36Z"), model.stateChangedAt());
        Assertions.assertEquals("wa", model.requestMetadata().resourceAction());
        Assertions.assertEquals("qgatjeaahhvjhhn", model.requestMetadata().approvalCallbackRoute());
        Assertions.assertEquals("zybbj", model.requestMetadata().approvalCallbackPayload());
        Assertions.assertEquals(ApprovalStatus.DELETED, model.requestMetadata().approvalStatus());
    }

    @org.junit.jupiter.api.Test
    public void testSerialize() throws Exception {
        ApprovalProperties model = new ApprovalProperties().withParentResourceId("hcans")
            .withGrandparentResourceId("oyqhlwig")
            .withApprovers(Arrays.asList(
                new Approver().withApproverEntraId("bkbxgomfa")
                    .withActionPerformed(ActionPerformed.REJECTED)
                    .withLastUpdatedAt(OffsetDateTime.parse("2021-03-28T18:59:20Z")),
                new Approver().withApproverEntraId("sqvdaeyygux")
                    .withActionPerformed(ActionPerformed.REJECTED)
                    .withLastUpdatedAt(OffsetDateTime.parse("2021-07-22T12:02:25Z")),
                new Approver().withApproverEntraId("qzhzbezkgimsi")
                    .withActionPerformed(ActionPerformed.APPROVED)
                    .withLastUpdatedAt(OffsetDateTime.parse("2021-07-05T18:23:30Z"))))
            .withTicketId("cddyvvjsk")
            .withCreatedAt(OffsetDateTime.parse("2021-05-01T19:54:35Z"))
            .withStateChangedAt(OffsetDateTime.parse("2021-06-30T14:43:36Z"))
            .withRequestMetadata(new RequestMetadata().withResourceAction("wa")
                .withApprovalCallbackRoute("qgatjeaahhvjhhn")
                .withApprovalCallbackPayload("zybbj")
                .withApprovalStatus(ApprovalStatus.DELETED));
        model = BinaryData.fromObject(model).toObject(ApprovalProperties.class);
        Assertions.assertEquals("hcans", model.parentResourceId());
        Assertions.assertEquals("oyqhlwig", model.grandparentResourceId());
        Assertions.assertEquals("bkbxgomfa", model.approvers().get(0).approverEntraId());
        Assertions.assertEquals(ActionPerformed.REJECTED, model.approvers().get(0).actionPerformed());
        Assertions.assertEquals(OffsetDateTime.parse("2021-03-28T18:59:20Z"), model.approvers().get(0).lastUpdatedAt());
        Assertions.assertEquals("cddyvvjsk", model.ticketId());
        Assertions.assertEquals(OffsetDateTime.parse("2021-05-01T19:54:35Z"), model.createdAt());
        Assertions.assertEquals(OffsetDateTime.parse("2021-06-30T14:43:36Z"), model.stateChangedAt());
        Assertions.assertEquals("wa", model.requestMetadata().resourceAction());
        Assertions.assertEquals("qgatjeaahhvjhhn", model.requestMetadata().approvalCallbackRoute());
        Assertions.assertEquals("zybbj", model.requestMetadata().approvalCallbackPayload());
        Assertions.assertEquals(ApprovalStatus.DELETED, model.requestMetadata().approvalStatus());
    }
}
